/*! For license information please see body.43d024b1.js.LICENSE.txt */
(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[489],{69940:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});n(83710),n(41539),n(39714),n(54678),n(74916),n(15306);var r={monthNames:["january","february","march","april","may","june","july","august","september","october","november","december"],shortMonthNames:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],dayOfWeekNames:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],shortDayOfWeekNames:["sun","mon","tue","wed","thu","fri","sat"],texts:{at:"at"},getDaysToThisWeekLastWorkingDay:function(e){return r.getDaysToDayOfWeek(e,5)},getDaysToDayOfWeek:function(e,t){return(7+t-e)%7},getDaysToSaturday:function(e){return r.getDaysToDayOfWeek(e,6)},getLongDateFormat:function(e){var t=r.dayOfWeekNames[e.getDay()]+", "+r.monthNames[e.getMonth()]+" "+e.getDate();return e.getFullYear()!=(new Date).getFullYear()&&(t+=", "+e.getFullYear()),t},getShortDateFormat:function(e,t){var n=e.getDate().toString();return 1==n.length&&(n="0"+n),n+"-"+r.shortMonthNames[e.getMonth()]+"-"+(t?(e.getFullYear()+"").substr(2):e.getFullYear())},getDayAndMonthFormat:function(e){return r.monthNames[e.getMonth()]+" "+e.getFullYear()},getTimeOnlyFormat:function(e){var t=e.getMinutes();return e.getHours()+(t<10?":0":":")+t},getShortDateFormatWithTime:function(e){var t=e.getDate().toString();1==t.length&&(t="0"+t);var n=e.getMinutes().toString();1==n.length&&(n="0"+n);var o=e.getHours().toString();return 1==o.length&&(o="0"+o),t+"-"+r.shortMonthNames[e.getMonth()]+"-"+e.getFullYear()+" "+o+":"+n},getOnlyTimeFromDate:function(e,t){var n=e.getMinutes().toString();1!=n.length||t||(n="0"+n);var r,o=e.getHours().toString();return 1!=o.length||t||(o="0"+o),t?(r=o>12?o-12:o,r+=0!=n?":"+n:""):r=(o>12?o-12:o)+":"+n,r+" "+(o>=12?"PM":"AM")},addDaysToDate:function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},equals:function(e,t){return!e&&!t||!(!e||!t)&&(e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate())},equalsWithTime:function(e,t){return!e&&!t||!(!e||!t)&&(e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()&&e.getHours()==t.getHours()&&e.getMinutes()==t.getMinutes())},getDateDifferenceInDays:function(e,t){var n=e.getTime()-36e5*e.getHours()-(t.getTime()-36e5*t.getHours());return Math.round(n/864e5)},getShortDateWithDayNameFormat:function(e){var t=e.getDate().toString();return 1==t.length&&(t="0"+t),t+" "+r.shortMonthNames[e.getMonth()].toUpperCase()+" ("+r.dayOfWeekNames[e.getDay()].substring(0,3)+")"},getOnlyMonthAndDayWithTimeFormat:function(e){var t=e.getDate().toString();return 1==t.length&&(t="0"+t),r.shortMonthNames[e.getMonth()]+" "+t+" "+r.texts.at+" "+r.getTimeWithMeridianFromDate(e)},getDateFromTimestamp:function(e){return new Date(1e3*parseFloat(e))},getTimeWithMeridianFromDate:function(e){var t=e.getHours(),n=e.getMinutes(),r=t%12;return(0==r?12:r)+":"+(n>9?n:"0"+n)+(t>=12?"pm":"am")},getStrFTime:function(e,t){return t=t.constructor==Date?t:r.now(),e=(e=(e=e.replace(/%a/g,r.dayOfWeekNames[t.getDay()].substring(0,3))).replace(/%b/g,r.shortMonthNames[t.getMonth()])).replace(/%e/g,t.getDate())},getStrFTimeRange:function(e,t,n){return r.getStrFTime(r.getStrFTime(e,t).replace(/#([abe])/g,"%$1"),n)},getLastDayInMonth:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}};const o=r},38781:(e,t,n)=>{"use strict";n(32564);var r=n(67991),o=(n(41539),(0,r.wT)("SendBeacon",r.$L));o.prototype.send=function(e,t){var n="XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return n.open("POST",e,!1),n.setRequestHeader("Accept","*/*"),"string"==typeof t?(n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),n.responseType="text/plain"):"[object Blob]"===Object.prototype.toString.call(t)&&t.type&&n.setRequestHeader("Content-Type",t.type),n.send(t),!0};const i=o;var a,u=n(34039),l={},c=(0,r.wT)("Notifier",r.$L),s=new i;l.TIME_LIMIT=3e5,l.load=function(e,t,n){this.urlLocation=e,this.statusConfirmed=!!t,this.hasError=!!n},u.Z.getEventManager().attachToLoadEvent((function(){var e=document.getElementById("rsvpComment");if(e){var t=l.statusConfirmed?null:e;a=new c(l.TIME_LIMIT,l.urlLocation,l.statusConfirmed,l.hasError,t,s)}})),window.addEventListener("beforeunload",(function(e){a&&a.sendOnClose()})),c.prototype.init=function(e,t,n,r,o,i){this.time=e,this.timer=null,this.url=t,t&&(this.urlLocation=this.getURL(t)),this.params=this.getAllParameters(t),this.commentForm=o,this.sendBeacon=i,this.statusConfirmed=n,this.hasError=r,this.addSubmitListener(o),this.setTimerIfNecessary()},c.prototype.setTimerIfNecessary=function(){this.statusConfirmed||this.hasError||(this.timer=setTimeout(this.caller("sendNotification"),this.time))},c.prototype.clearTimeOutIfNecessary=function(){this.timer&&clearTimeout(this.timer)},c.prototype.sendNotification=function(){this.clearTimeOutIfNecessary(),this.statusConfirmed=!0,this.commentForm.submit()},c.prototype.addSubmitListener=function(e){e&&e.addEventListener("submit",this.caller("formSubmit"))},c.prototype.formSubmit=function(){this.sendNotification()},c.prototype.sendOnClose=function(){if(!this.statusConfirmed){this.clearTimeOutIfNecessary();var e=new FormData;e.append("hash",this.params.hash),e.append("rsvpId",this.params.rsvpId),e.append("recurrent",this.params.recurrent),e.append("statusConfirmed","true"),this.sendBeacon.send(this.urlLocation,e)}},c.prototype.getAllParameters=function(e){var t={};if(e){var n,r,o=e.split("?")[1].split("&amp;");for(r=0;r<o.length;r++)t[(n=o[r].split("="))[0]]=void 0===n[1]||decodeURIComponent(n[1])}return t},c.prototype.getURL=function(e){return e.split("?")[0]};const f=l;n(83710),n(47042),n(74916),n(15306),n(91058);var p=n(69940),d=(0,r.wT)("EventSignupFreeTimePicker",r.$L);d.prototype.init=function(e,t,n,r,o,i,a){this.container=e,this.selectedDate=t,this.previousMonth=t.getMonth(),this.daysWithFreeTime=n,this.freeTimesForSelectedDate=r,this.timezoneOffset=a,this.drawUI(),this.container&&this.container.appendChild(this.element)},d.prototype.drawUI=function(){this.element=this.e("div",{class:"FreeTimePicker"},[this.e("table",{class:"FreeTimePickerTable",cellPadding:0,cellSpacing:0},[this.e("tbody",null,[this.e("tr",null,[this.e("td",{class:"FreeTimePickerTableCell"},[this.datePicker=(0,r.WN)(new h(this.selectedDate,this.daysWithFreeTime),{onselectdate:this.caller("onSelectDate")})]),this.e("td",{class:"FreeTimePickerTableCell"},[this.timeSelector=new m(this.selectedDate,this.freeTimesForSelectedDate)])])])])])},d.prototype.onScheduleAppointmentClick=function(e){this.cancelEvent(e)},d.prototype.onSelectDate=function(e){this.selectedDate=e.date;var t=new Date(this.selectedDate),n=new Date(this.selectedDate);n.setHours(23),n.setSeconds(59),n.setMinutes(59);for(var r=[],o=0;o<availableEvents.length;++o)if(void 0!==availableEvents[o]){var i=new Date(1e3*availableEvents[o].targetDate.timestamp);if(i>=t&&i<=n){var a={eventId:availableEvents[o].id,targetDate:{timestamp:1e3*availableEvents[o].targetDate.timestamp},timezoneOffset:i.getTimezoneOffset(),durationInSeconds:availableEvents[o].durationInSeconds,slotInMinutes:availableEvents[o].durationInSeconds/60,hasTime:availableEvents[o].targetDateHasTime};r.push({targetDate:new Date(1e3*availableEvents[o].targetDate.timestamp),slot:a})}}this.freeTimesForSelectedDate=r,this.datePicker.setDate(this.selectedDate),this.timeSelector.setDate(this.selectedDate,this.freeTimesForSelectedDate)};var y=(0,r.wT)("Toolbar",r.$L);y.prototype.init=function(e){this.content=e,this.drawUI()},y.prototype.drawUI=function(){this.element=this.e("div",{class:"FreeTimePickerToolbar"},[this.content])};var h=(0,r.wT)("DatePicker",r.$L);h.prototype.init=function(e,t){this.baseCssClassName="DatePicker",this.selectedDate=e,this.daysWithFreeTime=t,this.drawUI()},h.prototype.setDate=function(e){this.selectedDate=e,this.updateData()},h.prototype.drawUI=function(){this.element=this.e("tr",{class:"DatePicker"},[new y(this.e("div",null,[this.title=this.e("span"),this.e("a",{class:"DatePickerToolbarButton",href:"#",onclick:this.caller("onNextClick")},[">"]),this.e("a",{class:"DatePickerToolbarButton",href:"#",onclick:this.caller("onPrevClick")},["<"])])),this.e("div",{class:"DatePickerContent"},[this.e("table",{cellPadding:0,cellSpacing:0},[this.headersContainer=this.e("thead",null,this.getHeaders()),this.createWeeksTbody()])])]),this.updateData()},h.prototype.getHeaders=function(){return[this.e("tr",null,[this.e("th",null,[p.Z.shortDayOfWeekNames[0].charAt(0).toUpperCase()+p.Z.shortDayOfWeekNames[0].slice(1)]),this.e("th",null,[p.Z.shortDayOfWeekNames[1].charAt(0).toUpperCase()+p.Z.shortDayOfWeekNames[1].slice(1)]),this.e("th",null,[p.Z.shortDayOfWeekNames[2].charAt(0).toUpperCase()+p.Z.shortDayOfWeekNames[2].slice(1)]),this.e("th",null,[p.Z.shortDayOfWeekNames[3].charAt(0).toUpperCase()+p.Z.shortDayOfWeekNames[3].slice(1)]),this.e("th",null,[p.Z.shortDayOfWeekNames[4].charAt(0).toUpperCase()+p.Z.shortDayOfWeekNames[4].slice(1)]),this.e("th",null,[p.Z.shortDayOfWeekNames[5].charAt(0).toUpperCase()+p.Z.shortDayOfWeekNames[5].slice(1)]),this.e("th",null,[p.Z.shortDayOfWeekNames[6].charAt(0).toUpperCase()+p.Z.shortDayOfWeekNames[6].slice(1)])])]},h.prototype.createWeeksTbody=function(){function e(e){t.ondayheaderclick&&t.ondayheaderclick(e)}var t=this;this.weeks=[];for(var n,o=this.e("tbody"),i=0;i<=5;++i)(n=(0,r.WN)(new v(this,this.baseCssClassName),{onselectdate:this.caller("onSelectDate")})).ondayheaderclick=e,this.weeks.push(n),this.appendChild(o,n);return o},h.prototype.toTitleCase=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},h.prototype.updateData=function(){this.removeAllChildren(this.title),this.appendChild(this.title,this.toTitleCase(p.Z.getDayAndMonthFormat(this.selectedDate)));for(var e=this.selectedDate.getFullYear(),t=this.selectedDate.getMonth(),n=p.Z.getLastDayInMonth(this.selectedDate),r=1-function(e){return(e=new Date(e.getFullYear(),e.getMonth(),1)).getDay()}(this.selectedDate),o=(a=new Date).getFullYear(),i=a.getMonth(),a=a.getDate(),u=!1,l=0;l<6;++l){this.weeks[l].element.style.display=r>n?"none":"";for(var c=0;c<7;++c){var s=new Date(e,t,r);this.weeks[l].days[c].setDay(s),this.setHasClass(this.weeks[l].days[c].element,this.baseCssClassName+"Past",r<=0||r>n),!u&&r+1>=n&&(u=!0),this.setHasClass(this.weeks[l].days[c].element,this.baseCssClassName+"Today",s.getDate()==a&&s.getFullYear()==o&&s.getMonth()==i),this.setHasClass(this.weeks[l].days[c].element,this.baseCssClassName+"Selected",this.selectedDate.getDate()==s.getDate()&&this.selectedDate.getFullYear()==s.getFullYear()&&this.selectedDate.getMonth()==s.getMonth()),this.setHasClass(this.weeks[l].days[c].element,this.baseCssClassName+"HasFreeTime",this.dateHasFreeTime(s)),++r}}},h.prototype.dateHasFreeTime=function(e){for(var t=0;t<this.daysWithFreeTime.length;++t)if(this.daysWithFreeTime[t].getDate()==e.getDate()&&this.daysWithFreeTime[t].getFullYear()==e.getFullYear()&&this.daysWithFreeTime[t].getMonth()==e.getMonth())return!0;return!1},h.prototype.onPrevClick=function(e){this.cancelEvent(e),this.changeDate(-1)},h.prototype.onNextClick=function(e){this.cancelEvent(e),this.changeDate(1)},h.prototype.changeDate=function(e){var t=new r.uW,n=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+2*e,0);t.date=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+e,this.selectedDate.getDate()>n.getDate()?n.getDate():this.selectedDate.getDate());for(var o=[],i=0;i<availableEvents.length;++i)void 0!==availableEvents[i]&&o.push(new Date(1e3*availableEvents[i].targetDate.timestamp));this.daysWithFreeTime=o,this.dispatchEvent("selectdate",t)},h.prototype.onSelectDate=function(e){this.dispatchEvent("selectdate",e)};var v=(0,r.wT)("DatePickerWeek",r.$L);v.prototype.init=function(e,t){var n=this;function o(e){n.ondayheaderclick&&n.ondayheaderclick(e)}this.monthView=e,this.baseCssClassName=t,this.days=[],this.element=this.e("tr",{class:this.baseCssClassName+"WeekHeader"});for(var i=0;i<7;++i){var a;(a=(0,r.WN)(new b(this.monthView,this.baseCssClassName),{onselectdate:this.dispatcher("selectdate")})).onheaderclick=o,this.days.push(a),this.appendChild(this.element,a)}return this.widget};var b=(0,r.wT)("DatePickerCell",r.$L);b.prototype.init=function(e,t){this.monthView=e,this.baseCssClassName=t,this.element=this.e("td",{class:this.baseCssClassName+"DayHeaderTd"},[this.e("div",{class:"tdContainer"},[this.e("div",{class:this.baseCssClassName+"DayHeader",onclick:this.caller("onHeaderClick")},[this.dayText=document.createTextNode("")])])])},b.prototype.setDay=function(e){this.date=e,this.dayText.nodeValue=e.getDate()},b.prototype.onHeaderClick=function(){var e=new r.uW;e.date=this.date,this.dispatchEvent("selectdate",e)};var m=(0,r.wT)("TimeSelector",r.$L);m.prototype.init=function(e,t,n){this.selectedDate=e,this.freeTimes=t,this.maxColumns=3,this.timezoneOffset=n,this.drawUI()},m.prototype.setDate=function(e,t){this.selectedDate=e,this.freeTimes=t,this.updateData()},m.prototype.drawUI=function(){this.element=this.element=this.e("div",{class:"TimeSelector"},[new y(this.e("div",null,["Availability for ",this.selectedDateTextContainer=this.e("span")])),this.e("div",{class:"TimeSelectorContent"},[this.checkboxsContainer=this.e("table",{class:"TimeSelectorTable",cellPadding:0,cellSpacing:0})])]),this.updateData()},m.prototype.getCheckboxs=function(){for(var e=parseInt(this.freeTimes.length/this.maxColumns)+1,t=e<2?1:e<4?2:3,n=(parseInt(this.freeTimes.length/t),[]),r=0;r<this.freeTimes.length;++r){for(var o=[],i=0;i<t&&r<this.freeTimes.length;++i)o.push(this.e("td",{class:"TimeSelectorCell"},[new g(this.freeTimes[r],this.timezoneOffset)])),++r;n.push(this.e("tr",null,o)),--r}return this.e("tbody",null,n)},m.prototype.updateData=function(){this.removeAllChildren(this.selectedDateTextContainer),this.appendChild(this.selectedDateTextContainer,this.toTitleCase(p.Z.getLongDateFormat(this.selectedDate))),this.removeAllChildren(this.checkboxsContainer),this.appendChild(this.checkboxsContainer,this.getCheckboxs())},m.prototype.toTitleCase=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))};var g=(0,r.wT)("TimeSelectorOption",r.$L);g.prototype.init=function(e,t){var n=e.targetDate;this.startDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),0),this.endDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes()+e.slot.slotInMinutes,0),this.slot=e.slot,this.timezoneOffset=t,this.drawUI()},g.prototype.getValueForCheckbox=function(){return this.slot.eventId},g.prototype.drawUI=function(){var e;e=this.slot.hasTime?p.Z.getOnlyTimeFromDate(this.startDate)+" - "+p.Z.getOnlyTimeFromDate(this.endDate):"Full day",this.element=this.e("label",null,[this.input=this.e("input",{type:"radio",name:"selectedEvent",onchange:this.caller("onChange")}),e]),this.input.value=this.getValueForCheckbox()},g.prototype.onChange=function(){var e=this.input.checked;this.setHasClass(this.element,"TimeSelectorTimeSelected",e);var t=new r.uW;t.date=this.date,this.dispatchEvent("selecttime",t)};const _=d;n.g.Invite=f,n.g.EventSignupFreeTimePicker=_},67991:(e,t,n)=>{"use strict";n.d(t,{$L:()=>y,WN:()=>s,uW:()=>d,wT:()=>c});n(91058),n(74916),n(4723),n(82772),n(40561),n(68309),n(82526),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(){var e=parseInt((i.match(/.+ie\s([\d.]+)/i)||[])[1]);return e>7?document.documentMode:e}var i=navigator.userAgent.toLowerCase(),a=-1!=i.indexOf("opera"),u=-1!=i.indexOf("msie")&&!a,l=(u&&o(),u&&o(),u&&o(),u&&o(),u&&o()>=9);function c(e,t){var n=window[e]=function(){this.classRef=n,!c.DO_NOT_RUN_INIT_METHOD&&this.init&&this.init.apply(this,arguments)};if(t){c.DO_NOT_RUN_INIT_METHOD=!0;var r=new t;c.DO_NOT_RUN_INIT_METHOD=!1,r.classRef=t,n.prototype=r}return n.className=n.displayName=e,n.baseClass=t,n.getClassName=function(){return e},n.New=function(e){var t;return c.DO_NOT_RUN_INIT_METHOD=!0,t=new n,c.DO_NOT_RUN_INIT_METHOD=!1,t.init&&t.init.apply(t,e),t},n}function s(e,t){return e.peg(t),e}function f(e,t){return e instanceof t}s.methodName="Peg";var p={addWord:function(e,t){return p.hasWord(e,t)?e:e+" "+t},splitBySpaces:function(e){for(var t,n=[],r=0;;){if(-1==(t=e.indexOf(" ",r)))return e.length>r&&n.push(e.substring(r)),n;t>r&&n.push(e.substring(r,t)),r=t+1}},removeWord:function(e,t){for(var n="",r=0,o=p.splitBySpaces(e),i=0;i<o.length;++i)o[i]!=t&&(r&&(n+=" "),n+=o[i],++r);return n},hasWord:function(e,t){for(var n,r=0;;){if(-1==(n=e.indexOf(" ",r)))return e.length>r&&t==e.substring(r);if(n>r&&t==e.substring(r,n))return!0;r=n+1}}},d=function(){};d.prototype.init=function(){this.prevented=!1},d.prototype.preventDefault=function(){this.prevented=!0},d.prototype.getDefaultPrevented=function(){return this.prevented};var y=function(){};y.prototype.init=function(){},y.prototype.caller=function(e){return this.callers||(this.callers={}),this.callers[e]?this.callers[e]:this.callers[e]=function(e,t,n){var r;return r=n?function(){if(e[t])return e[t].apply(e,n)}:function(){if(e[t])return e[t].apply(e,arguments)},r}(this,e)},y.prototype.dispatchEvent=function(e,t){if(void 0===t&&(t=new d),f(t,d)&&(t.sourceWidget||(t.sourceWidget=this),t.currentWidget=this),this.eventListeners&&this.eventListeners[e])for(var n=function(e){var t,n;for(t in n=e.constructor==Array?[]:{},e)n[t]=e[t];return n}(this.eventListeners[e]),r=0;r<n.length;++r)n[r](t)},y.prototype.dispatcher=function(e){if(this.dispatchers||(this.dispatchers={}),this.dispatchers[e])return this.dispatchers[e];var t=this;return this.dispatchers[e]=function(n){t.dispatchEvent(e,n)}},y.prototype.addDOMListener=function(e,t){this.eventListeners||(this.eventListeners={}),this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)},y.prototype.removeDOMListener=function(e,t){this.eventListeners[e].splice(arrayIndexOf(this.eventListeners[e],t),1)},y.prototype.addListener=function(e,t){this.eventListeners||(this.eventListeners={}),this.eventListeners[e]||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)},y.prototype.removeListener=function(e,t){this.eventListeners[e].splice(arrayIndexOf(this.eventListeners[e],t),1)},y.prototype.peg=function(e){for(var t in e)null!==e[t]&&this.addListener(t.substr(2),e[t])},y.prototype.appendChildren=function(e,t){for(var n=0;n<t.length;++n)this.appendChild(e,t[n])},y.prototype.appendChild=function(e,t){var n;null!=t&&("string"==typeof t||"number"==typeof t?e.appendChild(document.createTextNode(t)):(n=f(t,y)?t.getDomNode():t,e.appendChild(n)))},y.prototype.removeChild=function(e,t){var n;null!==t&&(n=t.getDomNode?t.getDomNode():t,e.removeChild(n))},y.prototype.removeAllChildren=function(e){for(;e.firstChild;)this.removeChild(e,e.firstChild)},y.prototype.getDomNode=function(){return this.element},y.prototype.e=function(e,t,n){var o,i,a,c;for(var s in o=u&&!l&&"input"==e&&t&&t.type?document.createElement('<input type="'+t.type+'"'+(t.name?' name="'+t.name+'"':"")+(t.id?' id="'+t.id+'"':"")+">"):document.createElement(e),t)if("function"==(c=r(t[s])))this.addDOMListener(o,s.substr(2),t[s]);else if("boolean"==c)o[s]=t[s];else if("style"==s&&"object"==r(t[s]))for(a in i=t[s])null!==i[a]&&(o.style[a]=i[a]);else if("class"==s)o.className=t[s];else if("maxlength"==s)o.maxLength=t[s];else{if(null===t[s])continue;(!u||l||"input"!=e||"type"!=s&&"name"!=s)&&o.setAttribute(s,t[s])}return n&&this.appendChildren(o,n),o},y.prototype.addDOMListener=function(e,t,n,r){u?(r=!!r,e.attachEvent("on"+t,n)):e.addEventListener(t,n,r)},y.prototype.removeDOMListener=function(e,t,n,r){u?(r=!!r,e.detachEvent("on"+t,n)):e.removeEventListener(t,n,r)},y.prototype.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},y.prototype.getPreventDefault=function(e){return"defaultPrevented"in e?e.defaultPrevented:!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()},y.prototype.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},y.prototype.cancelEvent=function(e){e||(e=window.event),this.preventDefault(e),this.stopPropagation(e)},y.prototype.addClass=function(e,t){e.className=p.addWord(e.className,t)},y.prototype.removeClass=function(e,t){e.className=p.removeWord(e.className,t)},y.prototype.setHasClass=function(e,t,n){n?this.addClass(e,t):this.removeClass(e,t)}},24996:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(96649),n(96078),n(82526),n(41817),n(41539),n(9653),n(69070),n(32165),n(66992),n(78783),n(33948);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(i=o.key,a=void 0,a=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===r(a)?a:String(a)),o)}var i,a}const i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"get",value:function(e){var t=document.querySelector('portal-data[id="'+e+'"]');return t?t.dataset:null}},{key:"getAllByDataValue",value:function(e,t){return document.querySelectorAll("portal-data[data-"+e+'="'+t+'"]')}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},16655:e=>{var t=pjQuery.Deferred;function n(){this._initialize()}n.prototype.get=function(e){var n=t();return this.cache[e]?n.resolve(this.cache[e]):n.reject(null),n.promise()},n.prototype.set=function(e,n){var r=t();return this.cache[e]=n,r.resolve(!0),r.promise()},n.prototype.clear=function(e){var n=t();return this.cache.hasOwnProperty(e)?(delete this.cache[e],n.resolve(!0)):n.reject(null),n.promise()},n.prototype.purge=function(){var e=t();return this._initialize(),e.resolve(!0),e.promise()},n.prototype.buildKey=function(e,t){return t=t||{},md5(e+JSON.stringify(t))},n.prototype._initialize=function(){this.cache={}},n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},e.exports=n},89415:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(78879);const o=function(){function e(){this.cookieUsageInfo=[],this._setApiUrl()}e.prototype._setApiUrl=function(){var e=new r.Z;this.apiUrl="/"+e.get("avature.portal.id")+"/_portalCookieUserConsent"},e.prototype.init=function(e){this.getAll(e)},e.prototype.getAll=function(e){this._sendGet({method:"getAll"},e)},e.prototype.getCurrentUserConsent=function(e){this._sendGet({method:"getCurrentUserConsent"},e)},e.prototype.acceptAll=function(e){this._sendPost({method:"acceptAll"},e)},e.prototype.getCookieUsage=function(e){return e(this.cookieUsageInfo)},e.prototype.addCookieUsageInfo=function(e,t){e.isInUseOnPage=t,this.cookieUsageInfo[e.variableName]=e},e.prototype.updateTypesConsent=function(e,t){this._sendPost({method:"updateTypesConsent",data:JSON.stringify(e)},t)},e.prototype.shouldRequestUserConsent=function(e){this._sendGet({method:"shouldRequestConsent"},e)},e.prototype._sendPost=function(e,t){pjQuery.post(this.apiUrl,e,t,"json")},e.prototype._sendGet=function(e,t){pjQuery.get(this.apiUrl,e,t,"json")};var t=null;return{getInstance:function(){return null===t&&(t=new e),t}}}()},17532:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(74916),n(15306),n(82772),n(24603),n(39714),n(4723),n(24812),n(82526),n(41817),n(69600),n(89554),n(41539),n(54747),n(32564),n(5212),n(26833),n(32165),n(66992),n(78783),n(33948),n(93064);var o=function(){var e;function t(){var e={},t={escapeRegExp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},hasClass:function(e,t){var n=" ";return 1===e.nodeType&&(n+e.className+n).replace(/[\n\t]/g,n).indexOf(n+t+n)>=0},addClass:function(e,t){e.className=e.className.replace(/^\s+|\s+$/g,"")+" "+t},removeClass:function(e,t){var n=new RegExp("\\b"+this.escapeRegExp(t)+"\\b");e.className=e.className.replace(n,"")},toggle:function(e,t){void 0===t&&(t=""),"none"==e.style.display||"none"==getComputedStyle(e).display?e.style.display=t:e.style.display="none"},interpolateString:function(e,t,n){return e.replace(/{{([a-z][a-z0-9\-_]*)}}/gi,(function(e){return n(t,arguments[1])||""}))},hasInterpolation:function(e,t){var n=new RegExp("{{"+t+"}}","gi");return e.match(n)},deepExtend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(n in e&&this.isPlainObject(e[n])&&this.isPlainObject(t[n])?this.deepExtend(e[n],t[n]):e[n]=t[n]);return e},isPlainObject:function(e){return"object"===r(e)&&null!==e&&e.constructor==Object},traverseDOMPath:function(e,n){return e&&e.parentNode?t.hasClass(e,n)?e:this.traverseDOMPath(e.parentNode,n):null},callback:function(e,t){return t&&void 0!==e[t]?e[t]:""}};return e.transitionEnd=function(){var e=document.createElement("div"),t={t:"transitionend",OT:"oTransitionEnd",msT:"MSTransitionEnd",MozT:"transitionend",WebkitT:"webkitTransitionEnd"};for(var n in t)if(t.hasOwnProperty(n)&&void 0!==e.style[n+"ransition"])return t[n];return""}(),e.hasTransition=!!e.transitionEnd,e.popup=function(){var n={autoOpen:!0,forceOpen:!1,container:null,wrapperClass:"",onPopupOpen:function(){},onPopupClose:function(){location.reload(!0)},content:{description:"This portal protects your privacy by adhering to the European Union General Data Protection Regulation (GDPR). We will not use your data for any purpose that you do not consent to. We request use of anonymized data to improve your experience on our site.",acceptAll:"Accept all",rejectAll:"Reject all",save:"Save and close",cancel:"Cancel",settings:"Advanced settings",showMore:"Show more",showLess:"Show less",ellipsis:"...",cookiesDisabled:"Error: Cookies are blocked or not supported by your browser. You must enable cookies to use this site."},templates:{window:'<div class="cookies {{classes}}"><div class="cookies__wrapper"><div class="cookies__content clearfix">{{children}}</div></div></div>',elements:{error:'<div class="cookies__info"><div class="cookies__info__copy"><p>{{cookiesDisabled}}</p></div></div>',summary:'<div class="cookies__info"><div class="cookies__info__copy"><p>{{description}}</p></div><div class="cookies__info__buttons"><a href="#" class="cookiesButton cookiesButtonAccept">{{acceptAll}}</a><a href="#" class="cookiesButton cookiesButtonReject">{{rejectAll}}</a><a href="#" class="cookiesButton cookiesButtonSettings cookiesButtonSettingsIcon"><i class="icon-icon-settings" aria-hidden="true"></i><span>{{settings}}</span></a><a href="#" class="cookiesButton cookiesButtonSettings cookiesButtonSettingsText">{{settings}}</a></div></div>',settings:'<div class="cookies__settings"><div class="cookies__settings__content">{{detailsLeft}}</div><div class="cookies__settings__content">{{detailsRight}}</div></div>',settingsOneCol:'<div class="cookies__settings cookies__one__column">{{details}}</div>',footer:'<div class="cookies__settings__buttons"><a href="#" class="cookiesButton cookiesButtonSave">{{save}}</a></div>'},option:{default:'<div class="cookies__settings__option" tabindex="{{tabindex}}"><div class="cookies__settings__option__title" for="cookie-option-{{id}}">{{switch}}<h6>{{name}}</h6></div><div class="cookies__settings__option__description"><p id="cookie-description-{{id}}">{{description}}</p></div></div>',switch:'<label class="cookies__settings__option__switch" tabindex="{{tabindex}}"><input type="checkbox" id="cookie-option-{{id}}" data-id="{{id}}" {{checked}} tabindex="0" aria-describedby="cookie-description-{{id}}" aria-labelledby="cookieLabel{{id}}"><span class="cookies__settings__option__slider round"></span></label>',showMore:'{{contentExcert}}<span>{{ellipsis}}</span><span class="cookies__readmore__text"><span>{{contentRest}}</span><a href="javascript:;" class="cookies__readmore__link cookiesButton">{{showMore}}</a></span>'}},layout:"default",layoutCollection:{default:"{{summary}}{{settings}}{{footer}}",oneCol:"{{summary}}{{settingsOneCol}}{{footer}}",error:"{{error}}"},styles:null,dom:{classes:{invisible:"cookies__invisible",expanded:"cookies__open",btn:"cookiesButton",saveBtn:"cookiesButtonSave",settingsBtn:"cookiesButtonSettings",acceptAllBtn:"cookiesButtonAccept",rejectAllBtn:"cookiesButtonReject",onTop:"cookies__top",showLess:"cookies__readmore__less",toggleText:"cookies__readmore__link",checkbox:"cookies__settings__option__slider",hideAcceptAllBtn:"cookies__acceptbutton__hide",hideRejectAllBtn:"cookies__rejectbutton__hide",hideSettingsIcon:"cookies__settings__icon__hide"},styleSelectors:{".cookies":["background-color: {{background}}","color: {{color}}","font-family: {{fontFamily}}","font-size: {{fontSize}}px","-webkit-transition: {{transition}}","-ms-transition: {{transition}}","transition: {{transition}}"],".cookiesButtonAccept":["background-color: {{highlight}}","font-size: {{fontSize}}px","color: {{color}}"],".cookiesButtonReject":["border-color: {{highlight}}","font-size: {{fontSize}}px","color: {{highlight}}"],".cookiesButtonSettingsText":["background-color: {{highlight}}","font-size: {{fontSize}}px","color: {{color}}"],"input:checked + .cookies__settings__option__slider":["background-color: {{highlight}}"],"input:focus + .cookies__settings__option__slider":["box-shadow: 0 0 1px {{highlight}}"],".cookies__settings__option__description a":["color: {{highlight}}"],".icon-icon-settings:before":["color: {{highlight}}"],".cookiesButtonSettings span":["font-size: {{fontSize}}px"],".cookiesButtonSave:hover":["border-color: {{highlight}}","color: {{highlight}}"],".cookiesButtonSave":["color: {{highlight}}","font-size: {{fontSize}}px","border-color: {{highlight}}"],".cookies__open .cookies__info":["border-color: {{lowlight}}"],".cookies__settings, .cookies__settings__buttons":["border-color: {{lowlight}}"]},checkbox:"input[type=checkbox]",idAttribute:"data-id"},transition:!0,hideTextOverflow:!1,maxChars:300,oneCol:!1,showOnTop:!1,showExpanded:!1,initialNonEssentialCookieState:!0,hideRejectButton:!0,hideAcceptButton:!1,settingsIconAsText:!1};function r(){this.initialise.apply(this,arguments)}function o(e){this.openingTimeout=null,t.removeClass(e,this.options.dom.classes.invisible)}function i(t,n){t===n.target&&(t.style.display="none",t.removeEventListener(e.transitionEnd,this.afterTransition),this.afterTransition=null)}function a(e){var n=this.options,r=document.createElement("div");cont=n.container&&1===n.container.nodeType?n.container:document.body,r.innerHTML=e;var o=r.children[0];return o.style.display="none",this.onButtonClick=function(e){var r=t.traverseDOMPath(e.target,n.dom.classes.btn)||e.target;t.hasClass(r,n.dom.classes.acceptAllBtn)&&(this.isExpanded&&this.activateSwitches()||this.acceptAll()),t.hasClass(r,n.dom.classes.rejectAllBtn)&&(this.isExpanded&&this.deactivateSwitches()||this.rejectAll()),t.hasClass(r,n.dom.classes.settingsBtn)&&this.toggleSettings(),t.hasClass(r,n.dom.classes.saveBtn)&&this.save(),t.hasClass(r,n.dom.classes.toggleText)&&this.toggleText(r)}.bind(this),o.addEventListener("click",this.onButtonClick),cont.firstChild?cont.insertBefore(o,cont.firstChild):cont.appendChild(o),o}function u(){var e=this.options,n={};e.content.details=e.content.detailsLeft=e.content.detailsRight="",1==e.cookies.length&&(e.oneCol=!0,e.layout="oneCol");for(var r=0;r<e.cookies.length;r++){var o=e.cookies[r];if(o.tabindex=r+1+"",e.hideTextOverflow&&o.description.length>e.maxChars){var i={ellipsis:e.content.ellipsis+"&nbsp;",showMore:e.content.showMore,contentExcert:o.description.substr(0,e.maxChars),contentRest:o.description.substr(e.maxChars,o.description.length-e.maxChars)+"&nbsp;"};o.description=t.interpolateString(e.templates.option.showMore,i,t.callback)}o.canBeDisabled&&(o.checked=null!==e.initialNonEssentialCookieState&&e.askConsent?e.initialNonEssentialCookieState?"checked":"":o.isEnabled?"checked":"",o.switch=t.interpolateString(e.templates.option.switch,o,t.callback));var a=t.interpolateString(e.templates.option.default,o,t.callback);e.oneCol?(e.layout="oneCol",e.content.details+=a):r%2?e.content.detailsRight+=a:e.content.detailsLeft+=a}for(var u in e.templates.elements)n[u]=t.interpolateString(e.templates.elements[u],e.content,t.callback);var l=window.navigator.cookieEnabled?e.layoutCollection[e.layout]:e.layoutCollection.error;return t.interpolateString(l,n,t.callback)}function l(){var n=this.options;return!0!==n.transition&&(n.styles={transition:"number"==typeof n.transition?"opacity "+n.transition+"s ease":"none"}),function(e,n){t.isPlainObject(e)&&function(e,n){var r={};for(var o in n)for(var i in n[o])for(var a in e)t.hasInterpolation(n[o][i],a)&&(void 0===r[o]&&(r[o]=[]),r[o].push(t.interpolateString(n[o][i],e,t.callback)));var u=document.createElement("style"),l=0;for(var o in document.head.appendChild(u),r)if(r.hasOwnProperty(o)){var c=o+"{"+r[o].join(";")+"}";u.sheet.insertRule(c,l++)}}(e,n)}.call(this,n.styles,n.dom.styleSelectors),[n.wrapperClass,e.hasTransition?n.dom.classes.invisible:"",n.showExpanded?n.dom.classes.expanded:"",n.showOnTop?n.dom.classes.onTop:"",n.hideRejectButton?n.dom.classes.hideRejectAllBtn:"",n.hideAcceptButton?n.dom.classes.hideAcceptAllBtn:"",n.settingsIconAsText?n.dom.classes.hideSettingsIcon:""].join(" ").replace(/^\s+|\s+$/g,"")}return r.prototype.initialise=function(e){this.options&&this.destroy(),t.deepExtend(this.options={},n),t.isPlainObject(e)&&t.deepExtend(this.options,e),this.isExpanded=this.options.showExpanded,(this.options.forceOpen||this.options.autoOpen&&this.options.askConsent)&&this.build()},r.prototype.destroy=function(){this.element&&(this.onButtonClick&&(this.element.removeEventListener("click",this.onButtonClick),this.onButtonClick=null),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null),this.options=null},r.prototype.open=function(){this.element&&!this.isOpen()&&(e.hasTransition?this.fadeIn():this.element.style.display="",this.options.onPopupOpen.call(this))},r.prototype.build=function(){var e=this.options.templates.window.replace("{{classes}}",l.call(this)).replace("{{children}}",u.call(this));this.element=a.call(this,e),this.open()},r.prototype.toggleSettings=function(){this.isExpanded?this.collapseSettings():this.expandSettings()},r.prototype.expandSettings=function(){t.addClass(this.element,this.options.dom.classes.expanded),this.isExpanded=!0},r.prototype.collapseSettings=function(){t.removeClass(this.element,this.options.dom.classes.expanded),this.isExpanded=!1},r.prototype.activateSwitches=function(){for(var e=this.element.querySelectorAll(this.options.dom.checkbox),t=0;t<e.length;t++)e[t].checked=!0},r.prototype.deactivateSwitches=function(){for(var e=this.element.querySelectorAll(this.options.dom.checkbox),t=0;t<e.length;t++)e[t].checked=!1},r.prototype.toggleSwitches=function(){for(var e=this.element.querySelectorAll(this.options.dom.checkbox),t=!1,n=0;n<e.length;n++)!e[n].checked&&(t=!0);for(n=0;n<e.length;n++)e[n].checked=t},r.prototype.save=function(){for(var t={},n=this.element.querySelectorAll(this.options.dom.checkbox),r=0;r<n.length;r++){t[n[r].getAttribute(this.options.dom.idAttribute)]=n[r].checked}e.service.updateTypesConsent(t,this.close.bind(this))},r.prototype.acceptAll=function(){e.service.acceptAll(this.close.bind(this))},r.prototype.rejectAll=function(){var t=this.options,n={};t.cookies.forEach((function(e){1==e.id?n[e.id]=!0:n[e.id]=!1})),e.service.updateTypesConsent(n,this.close.bind(this))},r.prototype.toggleText=function(e){var n=this.options;t.hasClass(e,n.dom.classes.showLess)?(t.removeClass(e,n.dom.classes.showLess),e.innerHTML=n.content.showMore):(t.addClass(e,n.dom.classes.showLess),e.innerHTML=n.content.showLess),t.toggle(e.parentElement.previousElementSibling),t.toggle(e.previousElementSibling,"inline")},r.prototype.close=function(){this.element&&this.isOpen()&&(e.hasTransition?this.fadeOut():this.element.style.display="none",this.options.onPopupClose.call(this))},r.prototype.fadeIn=function(){var n=this.element;e.hasTransition&&n&&(this.afterTransition&&i.call(this,n),t.hasClass(n,this.options.dom.classes.invisible)&&(n.style.display="",this.openingTimeout=setTimeout(o.bind(this,n),20)))},r.prototype.fadeOut=function(){var n=this.element;e.hasTransition&&n&&(this.openingTimeout&&(clearTimeout(this.openingTimeout),o.bind(this,n)),t.hasClass(n,this.options.dom.classes.invisible)||(this.afterTransition=i.bind(this,n),n.addEventListener(e.transitionEnd,this.afterTransition),t.addClass(n,this.options.dom.classes.invisible)))},r.prototype.isOpen=function(){return this.element&&""==this.element.style.display&&!t.hasClass(this.element,this.options.dom.classes.invisible)},r}(),e.service=void 0!==ServiceFactory.getCookieUserConsentService&&ServiceFactory.getCookieUserConsentService(),e.initialise=function(t){e.service?e.service.init((function(n){n.length?e.service.shouldRequestUserConsent((function(r){t?(t.cookies=n,t.askConsent=r):t={cookies:n,askConsent:r},t.openPopupForRejectedCookies&&e.service.getCookieUsage((function(e){e&&Object.values(e).some((function(e){return e.isInUseOnPage&&!e.isEnabled}))&&(t.forceOpen=!0)})),new e.popup(t)})):console.warn("CookieUserConsentService has no cookies.")})):console.warn("CookieUserConsentService is not enabled.")},e}return{getInstance:function(){return e||(e=new t),e}}}();e.exports=o},48723:(e,t,n)=>{e=n.nmd(e),function(){var t=window.FilePicker=function(e){this.apiKey=e.apiKey,this.clientId=e.clientId,this.buttonEl=e.buttonEl,this.onSelect=e.onSelect,this.onCancel=e.onCancel,this.buttonEl&&(this.buttonEl.disabled=!0,this.extensions=e.extensions,this.opened=!1,gapi.client.setApiKey(this.apiKey),gapi.load("auth",{callback:pjQuery.proxy(this.open,this)}),gapi.client.load("drive","v2",pjQuery.proxy(this._driveApiLoaded,this)),gapi.load("picker",{callback:pjQuery.proxy(this._pickerApiLoaded,this)}))};t.prototype={open:function(){var e=gapi.auth.getToken();e?this._showPicker(e):this._doAuth(!1,pjQuery.proxy((function(e){this._showPicker(e)}),this))},_showPicker:function(e){if(!this.opened&&e&&!e.error){this.opened=!0;var t=e.access_token;if(null==this.picker){var n=new google.picker.View(google.picker.ViewId.DOCS);n.setMimeTypes(this.extensions),this.picker=(new google.picker.PickerBuilder).addView(n).setAppId(this.clientId).setOAuthToken(t).setCallback(pjQuery.proxy(this._pickerCallback,this)).build(),this.picker.setVisible(!0)}else this.picker.setVisible(!0)}},_pickerCallback:function(e){if(e[google.picker.Response.ACTION]==google.picker.Action.PICKED){var t=e[google.picker.Response.DOCUMENTS][0][google.picker.Document.ID];gapi.client.request({path:"/drive/v2/files/"+t,method:"GET"}).execute(pjQuery.proxy(this._fileGetCallback,this))}else this._cancelCallback()},_fileGetCallback:function(e){this.onSelect&&this.onSelect(e)},_cancelCallback:function(){this.onCancel&&this.onCancel()},_pickerApiLoaded:function(){this.buttonEl.disabled=!1},_driveApiLoaded:function(){this._doAuth(!0,pjQuery.proxy((function(){this._showPicker()}),this))},_doAuth:function(e,t){gapi.auth.authorize({client_id:this.clientId+".apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive.readonly",immediate:e},t)}},e&&(e.exports=t)}()},16509:(e,t,n)=>{n(69826),n(41539),n(69070),n(26699),n(68309),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return i;o++}},configurable:!0,writable:!0}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var o,i,a=0|t,u=Math.max(a>=0?a:r-Math.abs(a),0);for(;u<r;){if((o=n[u])===(i=e)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;u++}return!1}}),void 0===Element.prototype.getAttributeNames&&Object.defineProperty(Element.prototype,"getAttributeNames",{value:function(){for(var e=this.attributes,t=e.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r].name;return n}})},37797:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(){function e(){this.callbacks={}}e.prototype.setIntegrationCallback=function(e,t){this.callbacks[e]=t},e.prototype.getIntegrationCallback=function(e){return this.callbacks[e]};var t=null;return{getInstance:function(){return null===t&&(t=new e),t}}}()},27694:(e,t,n)=>{"use strict";var r=n(17532),o=n.n(r),i=n(77250),a=n.n(i),u=(n(41539),n(88674),n(74916),n(68304),n(78011),n(82526),n(41817),n(32165),n(66992),n(78783),n(33948),n(91058),n(26699),n(32023),n(24812),n(68309),n(83710),n(39714),n(82772),n(57327),n(89554),n(54747),n(94986),n(23123),function(e,t,n,r){this.exception=e,this.urlRewriter=t,this.stack=this._getFormatedStack(n,r);var o=this._getConcreteFileName();if(o){var i=this._rewriteUrl(o,this._getConcreteLineNumber());this.fileName=i[0],this.lineNumber=i[1]}else this.fileName=null,this.lineNumber=null});function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}u.prototype.getMessage=function(){return this.exception.message},u.prototype.getName=function(){return this.exception.name},u.prototype.getStack=function(){return this.stack},u.prototype.getExpectedWindowErrorMessage=function(){var e=navigator.userAgent.toLocaleLowerCase();return-1!==e.indexOf("chrome")?"Uncaught "+this.exception.name+": "+this.exception.message:-1!==e.indexOf("msie")||-1!==e.indexOf("trident")?this.exception.message:this.exception.name+": "+this.exception.message},u.prototype.getFileName=function(){return this.fileName},u.prototype.getLineNumber=function(){return this.lineNumber},u.prototype._getConcreteFileName=function(){return this.stack.length>0?this.stack[0].file:null},u.prototype._getConcreteLineNumber=function(){return this.stack.length>0?this.stack[0].line:null},u.prototype._getLocalFileFromStackUrl=function(e){var t=window.location.protocol+"//"+window.location.host+"/";e.substr(0,t.length)==t&&(e=e.substr(t.length));var n=e.lastIndexOf("?");return-1!=n&&(e=e.substr(0,n)),e},u.prototype._rewriteUrl=function(e,t){if(this.urlRewriter){var n=this.urlRewriter(e,t);if(n)return n}return[e,t]},u.prototype._getFormatedStack=function(e,t){if(this.exception.stack||(this.exception.stack=""),"string"!=typeof this.exception.stack)return this.exception.stack;for(var n,r,o=this.exception.stack.split(/\r\n|\r|\n/),i=[],a=/@(.*?):([0-9]+)(:[0-9]+)?$/,u=/^\s*at .* \((.*):([0-9]+):[0-9]+\)$/,l=/(\S*):(\d+):(\d+)$/,c=0;c<o.length;++c)if((n=o[c])&&(r=a.exec(n)||u.exec(n)||l.exec(n))){var s=this._rewriteUrl(this._getLocalFileFromStackUrl(r[1]),parseInt(r[2],10));i.push({file:s[0],line:s[1]})}return 0===i.length&&e&&null!=t&&i.push({file:e,line:t}),i};var c=function e(){var t=this;if(e.alreadySetUp)throw new Error("cantCreate2ErrorHandlers: ErrorHandler is already set up");window.addEventListener("error",(function(e){var n=e.message,r=e.filename,o=e.lineno,i=e.colno,a=e.error;t.onWindowError(n,r,o,i,a)})),window.addEventListener("unhandledrejection",this.onWindowUnhandledRejection.bind(this)),this.errorReporterCallback=null,this.errorsToReport=[],Error.stackTraceLimit=1/0,this._addGetNameToLogToFunctions(),this._events={},e.alreadySetUp=!0};c.alredySetUp=!1,c.prototype.wrapHandlingErrors=function(e){var t=this;return function(){try{return e.apply(this,arguments)}catch(e){throw t.handleCatchedException(e),e}}},c.prototype.wrapNativeFunctions=function(){var e=this;function t(t){var n=window[t];window[t]=function(){return n(e.wrapHandlingErrors(arguments[0]),arguments[1])}}t("setTimeout"),t("setInterval"),t("requestAnimationFrame")},c.prototype._addGetNameToLogToFunctions=function(){Function.prototype.getNameToLog=function(e){var t;t=this.methodName?this.methodName:this.name;var n=/function[^(]*(\([^)]*\))/.exec(this.toString());return n||t?t?t+(n?n[1]:""):e?"<<"+this.toString()+n[1]+">>":"f"+n[1]:this.toString()}},c.prototype.setReportErrorCallbackAndReportPending=function(e){if(this.errorReporterCallback)throw new Error("errorReporterCallbackAlreadySet");this.errorReporterCallback=e;var t=this.errorsToReport;this.errorsToReport=null;for(var n=0;n<t.length;++n)e(t[n])},c.prototype._createExceptionFromWindowError=function(e,t,n){for(var r=arguments.callee.caller,o=[],i=[];r&&-1==i.indexOf(r);){i.push(r);var a=[];if(r.arguments)for(var u=0;u<r.arguments.length;++u)a.push(this.describeValue(r.arguments[u]));else a.push("can't read arguments");o.push({function:r.getNameToLog?r.getNameToLog(!0):"Anonymous",args:a}),r=r.caller}var l=new Error(e);return l.name="ExternalError",l.stack=o,l.fileName=t,l.lineNumber=n,l},c.prototype._wasJustCatched=function(e){return this.lastCatchedMessage&&this.lastCatchedMessage==e&&new Date-this.lastCatchedDate<100},c.prototype.onWindowError=function(e,t,n,r,o){var i;this._wasJustCatched(e)||(i=o||this._createExceptionFromWindowError(e,t,n),this._notifyExceptionObject(i,t,n));return!1},c.prototype.onWindowUnhandledRejection=function(e){var t=new Error(e.reason);t.name="UnhandledRejection",e.reason&&e.reason.stack&&(t.stack=e.reason.stack),this.notifyError("UnhandledRejection: "+e.reason,t),e.preventDefault()},c.prototype.notifyError=function(e,t,n,r){var o,i={error:e};t&&(o=this._wrapException(t,n,r),i.errorObject=o),this.dispatchEvent("error",i),o&&(this.errorReporterCallback?this.errorReporterCallback(o):this.errorsToReport.push(o))},c.prototype.notifyReportedError=function(e){this.dispatchEvent("errorreportok",{reportUrl:e})},c.prototype.handleTooManyFailedPackageLoads=function(){this.dispatchEvent("toomanyfailedpackageloads")},c.prototype.reportAsException=function(e){try{throw new Error(e)}catch(e){this._notifyExceptionObject(e)}},c.prototype._notifyExceptionObject=function(e,t,n){this.notifyError(e.name+": "+e.message,e,t,n)},c.prototype.setAssetUrlRewriter=function(e){this.urlRewriter=e},c.prototype._wrapException=function(e,t,n){return new u(e,this.urlRewriter,t,n)},c.prototype.handleCatchedException=function(e){this._notifyExceptionObject(e),this.lastCatchedMessage=this._wrapException(e).getExpectedWindowErrorMessage(),this.lastCatchedDate=new Date},c.prototype.setDescriber=function(e){this._valueDescriber=e},c.prototype.describeValue=function(e){return this._valueDescriber?this._valueDescriber(e):this._defaultValueDescriber(e)},c.prototype.addListener=function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},c.prototype.removeListener=function(e,t){this._events[e]&&(this._events[e]=this._events[e].filter((function(e){return e!==t})))},c.prototype.dispatchEvent=function(e,t){(this._events[e]||[]).forEach((function(e){e(t)}))},c.prototype._defaultValueDescriber=function(e){try{return"object"===l(e)?JSON.stringify(e):e+""}catch(t){return e}};n(15306),n(47042),n(96649),n(96078),n(9653),n(69070);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===s(i)?i:String(i)),r)}var o,i}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"describeValue",value:function(t,n){if(n||(n=0),null!=t){if(t.getTypeName)return"<<"+t.getTypeName()+">>";if("function"==typeof t)return"<<func:"+(t.methodName?t.methodName:"Anonymous")+">>";if(9==t.nodeType)return"<<Document>>";if(t.nodeType)return 1==t.nodeType?e.describeElement(t):"<<"+t.nodeName+">>";if(t.self==t&&t==t.window)return"<<Window>>";if("string"==typeof t)return'"'+t.replace(/"/g,'\\"')+'"';if(t instanceof Array||void 0!==t.length&&(t.item||t.slice&&t.pop&&t.push)){if(n<=3){for(var r="[",o=0;o<t.length;++o)o>0&&(r+=", "),r+=e.describeValue(t[o],n+1);return r+="]"}return"Array"}try{if(t.constructor==Object){if(n<=3){for(var i in r="{",o=0,t)o>0&&(r+=", "),r+=i+": "+e.describeValue(t[i],n+1),++o;return r+="}"}return"Object"}}catch(e){try{if(t.length)return"<<Unknown (has .length): "+t+">>"}catch(e){}return"<<Unknown: "+t+">>"}return t.toString?t.toString():"<<unknown>>"}return void 0===t?"undefined":"null"}},{key:"describeElement",value:function(e){var t,n="<"+e.tagName.toLowerCase();e.className&&(n+=' class="'+e.className+'"'),e.getAttribute("href")&&(n+=' href="'+e.getAttribute("href")+'"'),n+=">"+((t=e.textContent).length>20?t.substr(0,17)+"...":t)+"</"+e.tagName.toLowerCase()+">";for(var r=e;r&&!r.parentWidget;)r=r.parentNode;if(r&&r.parentWidget){n+=" in ";for(var o=r.parentWidget,i=0;i<3&&o;++i)i>0&&(n+=" -> "),n+=o.toString(),o=o.parentWidget}return n}}],(n=null)&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();n(69600),n(73210),n(4723);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===d(i)?i:String(i)),r)}var o,i}var h=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userAgent=t,this.platform=n,this.document=r,this.identifiers=[],this._detectBrowser()}var t,n,r;return t=e,(n=[{key:"is",value:function(t){if(-1!==e.IDENTIFIERS.indexOf(t))return-1!==this.identifiers.indexOf(t);throw new Error("This browser identifier is unknown")}},{key:"isInCompatMode",value:function(){return!!(this.is("ie")&&this.document&&this.document.documentMode)&&this.document.documentMode!==this._getIEVersionFromUserAgent()}},{key:"getIdentifiers",value:function(){return this.identifiers}},{key:"getIEVersion",value:function(){if(!this.is("ie"))return!1;if(!this.IEVersion){var e=this._getIEVersionFromUserAgent();this.IEVersion=e>7&&this.document&&this.document.documentMode?this.document.documentMode:e}return this.IEVersion}},{key:"_getIEVersionFromUserAgent",value:function(){return this.IEAgentVersion||(this.IEAgentVersion=this.userAgent.toLowerCase().indexOf("trident/7.0")>-1?11:parseInt((this.userAgent.toLowerCase().match(/.+ie\s([\d.]+)/i)||[])[1],10)),this.IEAgentVersion}},{key:"_detectBrowser",value:function(){var t=this.userAgent.toLowerCase();-1!==t.indexOf("edge")?this.identifiers.push(e.EDGEHTML):-1!==t.indexOf("opera")||-1!==t.indexOf("presto")?this.identifiers.push(e.PRESTO):-1!==t.indexOf("konqueror")?this.identifiers.push(e.KHTML):-1!==t.indexOf("chrome")?this.identifiers.push(e.BLINK):-1!==t.indexOf("msie")||-1!==t.indexOf("trident")?this.identifiers.push(e.IE):-1!==t.indexOf("webkit")?this.identifiers.push(e.WEBKIT):-1!==t.indexOf("gecko")&&this.identifiers.push(e.GECKO),-1!==t.indexOf("windows phone")?this.identifiers.push(e.MOBILE):-1!==t.indexOf("ipad")?(this.identifiers.push(e.IOS),this.identifiers.push(e.IPAD),this.identifiers.push(e.MOBILE)):-1!==t.indexOf("ipod")?(this.identifiers.push(e.IOS),this.identifiers.push(e.IPOD),this.identifiers.push(e.MOBILE)):-1!==t.indexOf("iphone")?(this.identifiers.push(e.IOS),this.identifiers.push(e.IPHONE),this.identifiers.push(e.MOBILE)):-1!==t.indexOf("macintosh")||this.platform&&-1!==this.platform.indexOf("Mac")?this.identifiers.push(e.MAC):(/\b(mobile|android)\b/i.test(t)||window.matchMedia&&window.matchMedia(["(min-resolution: 1.3dppx) and (max-device-width: 1024px)","(-webkit-min-device-pixel-ratio: 1.3) and (max-device-width: 1024px)"].toString()).matches)&&this.identifiers.push(e.MOBILE)}}])&&y(t.prototype,n),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();h.EDGEHTML="edgehtml",h.IE="ie",h.PRESTO="presto",h.GECKO="gecko",h.KHTML="khtml",h.WEBKIT="webkit",h.BLINK="blink",h.MOBILE="mobile",h.IPAD="ipad",h.IPOD="ipod",h.IPHONE="iphone",h.MAC="mac",h.IOS="ios",h.IDENTIFIERS=[h.EDGEHTML,h.IE,h.PRESTO,h.GECKO,h.KHTML,h.WEBKIT,h.BLINK,h.MOBILE,h.IPAD,h.IPOD,h.IPHONE,h.MAC,h.IOS];var v,b,m,g,_,w,S,O,P,E,k,j,T,F,I,R,C=(v=function(e){var t=null;return function(){return null!=t?t:t=e()}},b=function(e){var t=document.createElement("input");try{return t.type=e,t.type===e}catch(e){return!1}},m=new h(navigator.userAgent,navigator.platform,document),g=v((function(){return m.isInCompatMode()})),_=v((function(){return m.getIEVersion()})),w=v((function(){return m.is("edgehtml")})),S=v((function(){return m.is("blink")})),O=v((function(){return m.is("webkit")})),P=v((function(){return m.is("ie")})),E=v((function(){return m.is("gecko")})),k=v((function(){return m.is("mobile")})),j=v((function(){return m.is("ipad")})),T=v((function(){return m.is("iphone")})),F=v((function(){return m.is(h.MAC)})),I=v((function(){return m.is(h.IOS)})),(R={}).placeholder=v((function(){return void 0!==document.createElement("input").placeholder})),R.stringTrim=v((function(){return!!String().trim})),R.addEventListener=v((function(){return!!window.addEventListener})),R.getComputedStyle=v((function(){return document.defaultView&&document.defaultView.getComputedStyle})),R.documentGetSelection=v((function(){return"getSelection"in document})),R.inputFiles=v((function(){var e=document.createElement("input");return e.type="file","files"in e})),R.inputTypeEmail=v((function(){return b("email")})),R.inputTypeSearch=v((function(){return b("search")})),R.inputTypeNumber=v((function(){return b("number")})),R.inputTypeTel=v((function(){return b("tel")})),R.inputTypeUrl=v((function(){return b("url")})),R.FileReader=v((function(){return"FileReader"in window})),R.FormData=v((function(){return"FormData"in window})),R.TransitionEvent=v((function(){return"TransitionEvent"in window})),R.AnimationEvent=v((function(){return"AnimationEvent"in window})),R.HTMLCanvasElement=v((function(){return"HTMLCanvasElement"in window})),R.MediaQueryList=v((function(){return!!window.matchMedia})),R.SVGSVGElement=v((function(){return"SVGSVGElement"in window})),R.windowErrorStackTrace=v((function(){return!(w()||O())})),{supports:function(e){if(R[e])return R[e]();throw new Error("This feature is not being tested")},isFullScreen:function(){return null!==(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||null)},getBrowserClassNamesString:function(e){var t=m.getIdentifiers();if(e){for(var n=[],r=t.length;r--;)n.push(e+"_"+t[r]);return n.join(" ")}return t.join(" ")},isInCompatMode:g,getIEVersion:_,isEdgeHTML:w,isBlink:S,isWebKit:O,isIE:P,isGecko:E,isMobileDevice:k,isIpad:j,isIphone:T,isIOS:I,isMac:F});n(51532);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==D(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===D(i)?i:String(i)),r)}var o,i}var A,L=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._values=new Map}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}},{key:"set",value:function(e,t){this.getInstance()._set(e,t)}},{key:"get",value:function(e){return this.getInstance()._get(e)}}],(n=[{key:"_set",value:function(e,t){this._values.set(e,t)}},{key:"_get",value:function(e){return this._values.get(e)}}])&&x(t.prototype,n),r&&x(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();(A=new c).setDescriber(p.describeValue),C.supports("windowErrorStackTrace")||A.wrapNativeFunctions(),L.set("defaultErrorHandler",A);n(30489),n(12419),n(21249),n(40561),n(69720),n(23157),n(34553),n(26833),n(85827),n(79753),n(91038);function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==V(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===V(i)?i:String(i)),r)}var o,i}var U=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize.apply(this,arguments)}var t,n,r;return t=e,n=[{key:"initialize",value:function(e){this._assign(e),this.prevented=!1,this.sourceWidget=null,this.currentWidget=null}},{key:"_assign",value:function(e){if(e&&"object"!==V(e))throw new Error("Parameter must be an object.");for(var t in e)this[t]=e[t]}},{key:"preventDefault",value:function(){this.prevented=!0}},{key:"getDefaultPrevented",value:function(){return this.prevented}},{key:"setSourceWidget",value:function(e){this.sourceWidget=e}},{key:"getSourceWidget",value:function(){return this.sourceWidget}},{key:"setCurrentWidget",value:function(e){this.currentWidget=e}},{key:"getCurrentWidget",value:function(){return this.currentWidget}},{key:"peg",value:function(e){var t=this;e=e||{},Object.entries(e).forEach((function(e){var n=N(e,2),r=n[0],o=n[1],i="set"+r.substring(0,1).toUpperCase()+r.substr(1);if(TIN_start_GlobalConfig.get("ENABLE_UI_VALIDATION")&&"function"!=typeof t[i])throw new Error(i+" is not a valid setter for class "+t.getTypeName());t[i](o)}))}}],n&&B(t.prototype,n),r&&B(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==W(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===W(i)?i:String(i)),r)}var o,i}var z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize.apply(this,arguments)}var t,n,r;return t=e,n=[{key:"initialize",value:function(){}},{key:"getClassName",value:function(){return this.classRef?this.classRef.className:"Object"}},{key:"getTypeName",value:function(){return this.getClassName().replace(/\$Section$/,"")}},{key:"getSimpleClassName",value:function(){return this.classRef.simpleClassName?this.classRef.simpleClassName:this.classRef.className}},{key:"getPackage",value:function(){return this.classRef.packageRef}},{key:"includeToStringInLogItem",value:function(){return!1}},{key:"toString",value:function(){return this.classRef?"<<"+this.classRef.className+">>":"<<Object>>"}},{key:"Delete",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.map((function(e){if("string"!=typeof e&&void 0!==e)throw new Error("Delete should only receive propertyName as a string.");return e})).forEach((function(t){Delete(e[t]),delete e[t]}))}))},{key:"dispatcher",value:function(e){var t=this;return this.dispatchers||(this.dispatchers={}),this.dispatchers[e]||(this.dispatchers[e]=function(n){return t.dispatchEvent(e,n)}),this.dispatchers[e]}},{key:"dispatchEvent",value:function(e,t){return void 0===t&&(t=new U),t instanceof U&&(t.getSourceWidget()||t.setSourceWidget(this),t.setCurrentWidget(this)),this.eventListeners&&this.eventListeners[e]&&this.eventListeners[e].slice().forEach((function(e){return e(t)})),t}},{key:"addListener",value:function(t,n){if(this.Deleted)throw new Error("adding listener to a deleted emitter. Event: "+t+". Classname: "+this+". ExpectedListener: "+p.describeValue(n));if(this.eventListeners||(this.eventListeners={}),this.eventListeners[t]||(this.eventListeners[t]=[]),e.VALIDATE_LISTENER_ADDITION&&-1!==this.eventListeners[t].indexOf(n))throw new Error("adding repeated listener: "+this+"; listener to add: "+p.describeValue(n));if(n.callerObj){var r={context:this,eventName:t};n.callerObj.attachedTo.push(r)}this.eventListeners[t].push(n)}},{key:"addListenerOnce",value:function(e,t){var n=this;this.addListener(e,(function r(o){t(o),n.removeListener(e,r)}))}},{key:"removeListener",value:function(e,t){if(!this.Deleted)if(this.eventListeners&&this.eventListeners[e]&&this.eventListeners[e].length){var n=this.eventListeners[e].indexOf(t);-1!==n?(this._detachFromEvent(t,e),this.eventListeners[e].splice(n,1)):L.get("defaultErrorHandler").reportAsException("Cannot remove listener. Listener not added or already removed. Event: "+e+". Classname: "+this+". ExpectedListener: "+p.describeValue(t))}else L.get("defaultErrorHandler").reportAsException("Cannot remove listener. Event has no listeners. Event: "+e+". Classname: "+this+". ExpectedListener: "+p.describeValue(t))}},{key:"peg",value:function(e){var t=this;e=e||{},Object.entries(e).forEach((function(e){var n=Y(e,2),r=n[0],o=n[1];if(r.startsWith("on")){if("function"==typeof o)t.addListener(r.substr(2),o);else if(null!==o)throw new Error("Event listener must be a valid function")}else{var i="set"+r.substring(0,1).toUpperCase()+r.substr(1);if(L.get("ENABLE_UI_VALIDATION")&&"function"!=typeof t[i])throw new Error(i+" is not a valid setter for class "+t.getTypeName());t[i](o)}}))}},{key:"caller",value:function(e){return this.callers||(this.callers={}),this.callers[e]?this.callers[e]:this.callers[e]=this._createCaller(e)}},{key:"_createCaller",value:function(e){var t=this;if(!this[e])throw new Error("missingCaller: "+this.getTypeName()+"."+e);var n=function(){return t[e].apply(t,arguments)};return n.methodName="caller:"+this.getTypeName()+"."+e,n}},{key:"_detachFromEvent",value:function(e,t){var n=this;if(e.callerObj&&e.callerObj.attachedTo){var r=e.callerObj.attachedTo.findIndex((function(e){return e.context===n&&e.eventName===t}));e.callerObj.attachedTo.splice(r,1)}}},{key:"_detachFromEvents",value:function(){var e=this,t=this.eventListeners||{};Object.entries(t).forEach((function(t){var n=Y(t,2),r=n[0];(n[1]||[]).forEach((function(t){return e._detachFromEvent(t,r)}))}))}},{key:"_removeAllListenersFrom",value:function(e){e=e||{},Object.values(e).forEach((function(e){(e.callerObj&&e.callerObj.attachedTo?e.callerObj.attachedTo:[]).forEach((function(t){t.context.removeListener(t.eventName,e)}))}))}},{key:"_removeAllListeners",value:function(){this._removeAllListenersFrom(this.callers),this._removeAllListenersFrom(this.dispatchers)}},{key:"_uninit",value:function(){this.Deleted=!0,this._detachFromEvents(),this._removeAllListeners(),this.Delete("eventListeners"),this.Delete("callers"),this.Delete("dispatchers")}}],n&&H(t.prototype,n),r&&H(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==q(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===q(i)?i:String(i)),r)}var o,i}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K(e);if(t){var o=K(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}z.VALIDATE_LISTENER_ADDITION=!1,L.get("DEBUG_MODE")&&(z.VALIDATE_LISTENER_ADDITION=!0,z.prototype._createCaller=function(e){var t=this,n=function(){return t[e].apply(t,arguments)},r={object:this,methodName:e,callback:this[e],attachedTo:[]};n.callerObj=r;var o="caller:"+this.getTypeName()+"."+e;if(n.getTypeName=function(){return o},n.getExtraInfoToLog=function(){return{obj:function(){tinkerman.log(t)},attachedTo:function(){tinkerman.log(r.attachedTo,{as:"table"})}}},n.methodName=o,!this[e]){var i=o+" doesn't exist";throw tinkerman.log(n,i),new Error("ERROR: "+i)}return n},z.prototype.getExtraInfoToLog=function(){var e=this;return{evt:function(){e.eventListeners?tinkerman.log(Object.entries(e.eventListeners).map((function(e){return{name:e[0],listeners:e[1]}})),{as:"table"}):tinkerman.log("No events are being listened to",{as:"text",prependNumber:!1})}}},z.prototype.getListenersCount=function(){var e=this.eventListeners||{};return Object.values(e).reduce((function(e,t){return e+t.length}),0)});var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(i,e);var t,n,r,o=Z(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"getInstance",value:function(){return i.instance||(i.instance=new i),i.instance}}],(n=[{key:"handleRequireLogin",value:function(e){this.dispatchEvent("requirelogin",{otherUserLogged:e})}},{key:"handleRemoteException",value:function(e){var t=new U({remoteException:e});this.dispatchEvent("remoteexception",t),L.get("defaultErrorHandler").notifyError(e.getTechnicalDescription())}},{key:"log",value:function(e){var t=new U;t.message=e,this.dispatchEvent("info",t)}},{key:"notifyExecManyResponseReceive",value:function(e,t){var n=new U;n.message=e,n.response=t,this.dispatchEvent("execmanyresponsereceive",n)}},{key:"notifyListenerEvent",value:function(e,t){var n=new U;n.response=e,n.listener=t,this.dispatchEvent("listenerevent",n)}},{key:"notifyExecMany",value:function(e,t){var n=new U;n.message=e,n.bundleWaitTime=t,this.dispatchEvent("execmany",n)}},{key:"notifyPageSessionRenew",value:function(){this.dispatchEvent("sessionrenew")}},{key:"notifyServerError",value:function(e){var t=new U;t.randomCode=e,this.dispatchEvent("servererror",t)}},{key:"notifyRemoteListenerAdd",value:function(e){this.dispatchEvent("remotelisteneradd",new U({listener:e}))}},{key:"notifyPotentialUnneededCallback",value:function(e,t){this.dispatchEvent("potentialunneededcallback",new U({reason:e,apiCall:t}))}}])&&J(t.prototype,n),r&&J(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==X(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===X(i)?i:String(i)),r)}var o,i}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=re(e);if(t){var o=re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(i,e);var t,n,r,o=ne(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n,r,o){this.application=e,this.publicSessionName=t,this.cortex=n,this.trackerCode=r,this.packsVersion=o,this.forceError=null,this.extraRequestParam=null}},{key:"getApplicationName",value:function(){return this.application.getName()}},{key:"getApplicationCode",value:function(){return this.application.getCode()}},{key:"setPublicSessionName",value:function(e){this.publicSessionName!=e&&(this.publicSessionName=e,$.getInstance().notifyPageSessionRenew(),this.dispatchEvent("sessionrenew"))}},{key:"getPublicSessionName",value:function(){return this.publicSessionName}},{key:"setForceError",value:function(e){this.forceError=e}},{key:"getForceError",value:function(){return this.forceError}},{key:"getCortex",value:function(){return this.cortex}},{key:"setCortex",value:function(e){this.cortex=e}},{key:"getTrackerCode",value:function(e){return this.trackerCode}},{key:"getPacksVersion",value:function(){return this.packsVersion}}])&&ee(t.prototype,n),r&&ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ie(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ie(i)?i:String(i)),r)}var o,i}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}var se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(i,e);var t,n,r,o=le(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t){this.name=e,this.code=t}},{key:"getName",value:function(){return this.name}},{key:"getCode",value:function(){return this.code}}])&&ae(t.prototype,n),r&&ae(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);n(47941),n(2707),n(69826);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==fe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===fe(i)?i:String(i)),r)}var o,i}var de=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"decodeType",value:function(t,n){if(ye.decoders[t])return ye.decoders[t](n,this);var r=this._getDecodeCodec(t);if(r)return r.decode(n,this,t);throw new Error(e.INVALID_JSON_TYPE+": "+t)}},{key:"parseLegacyModelToNewModel",value:function(e){if(e&&e.$JSNType&&"model"===e.$JSNType&&e._name_){var t={},n=e._name_.split("_");return n.splice(1,0,"MODEL"),t.$JSNType=n.join("_"),t.value=e.value.values,Object.keys(t.value).forEach((function(e){t.value[e]=this.parseLegacyModelToNewModel(t.value[e])}),this),t}return Array.isArray(e)?e.map(this.parseLegacyModelToNewModel,this):(e instanceof Object&&Object.keys(e).forEach((function(t){e[t]=this.parseLegacyModelToNewModel(e[t])}),this),e)}},{key:"_addPackagesToLoadToSet",value:function(e,t){if(e&&"object"==fe(e))if(e.$JSNType)ye.packageToLoaderFinders.forEach((function(n){n(e.$JSNType,t)})),this._addPackagesToLoadToSet(e.value,t);else for(var n in e)this._addPackagesToLoadToSet(e[n],t)}},{key:"decodeTypes",value:function(e){if(e&&"object"==fe(e)){if(e.$JSNType)return this.decodeType(e.$JSNType,e.value);for(var t in e)e[t]=this.decodeTypes(e[t]);return e}return e}},{key:"unserialize",value:function(e){var t=this._rawUnserialize(e);return t=this.parseLegacyModelToNewModel(t),this.decodeTypes(t)}},{key:"unserializeWithModelSupport",value:function(e,t){var n=this._rawUnserialize(e);n=this.parseLegacyModelToNewModel(n);var r={};this._addPackagesToLoadToSet(n,r);var o=[];for(var i in r)o.push(i);var a=this;function u(){t(a.decodeTypes(n))}o.length>0?L.get("assetLoader").loadPackagesAndRun(o,u):u()}},{key:"encodeValue",value:function(e){if(void 0===e)return null;if(!(e&&e instanceof Object))return e;var t=this._getEncodeCodec(e);return t?t.encode(e):e.getClassName&&e.getJsonValue?this.encodeValue(e.getJsonValue()):e instanceof Array?this._encodeArray(e):e.constructor===Object?this._encodeRawObject(e):void this._throwInvalidValue(e)}},{key:"serialize",value:function(e,t){var n=t?this._sortedKeysReplacer:null;return JSON.stringify(this.encodeValue(e),n)}},{key:"_rawUnserialize",value:function(t){var n;try{n=JSON.parse(t)}catch(n){throw new Error(e.INVALID_JSON+": "+p.describeValue(t))}return n}},{key:"_sortedKeysReplacer",value:function(e,t){return t instanceof Object&&!(t instanceof Array)?Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{}):t}},{key:"_throwInvalidValue",value:function(t){throw t.getClassName?new Error(e.INVALID_JSON_CLASS+": "+t.getClassName()):new Error(e.INVALID_JSON_VALUE+": "+String(t).substr(0,30))}},{key:"_getDecodeCodec",value:function(e){return ye.codecs.find((function(t){return t.canDecode(e)}))}},{key:"_getEncodeCodec",value:function(e){return ye.codecs.find((function(t){return t.canEncode(e)}))}},{key:"_encodeArray",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=this.encodeValue(e[n]);return t}},{key:"_encodeRawObject",value:function(e){var t={};for(var n in e)t[n]=this.encodeValue(e[n]);return t}}],r=[{key:"addCodec",value:function(e){ye.codecs.push(e);var t=e.getPackageToLoaderFinder();t&&ye.packageToLoaderFinders.push(t)}},{key:"addTypeDecoder",value:function(e){var t=e.getType();if(ye.decoders[t])throw new Error("decoderAlreadyDefinedForType: "+t);ye.decoders[t]=function(t,n){return e.decode(t,n)}}}],n&&pe(t.prototype,n),r&&pe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();if(de.INVALID_JSON="invalidJson",de.INVALID_JSON_CLASS=de.INVALID_JSON+"Class",de.INVALID_JSON_VALUE=de.INVALID_JSON+"Value",de.INVALID_JSON_MODEL=de.INVALID_JSON+"Model",de.INVALID_JSON_TYPE=de.INVALID_JSON+"Type",void 0===ye)var ye={};function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==he(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===he(i)?i:String(i)),r)}var o,i}ye.decoders={},ye.codecs=[],ye.packageToLoaderFinders=[];var be=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"canEncode",value:function(e){return!1}},{key:"encode",value:function(e){return e.getJsonValue()}},{key:"canDecode",value:function(e){return!1}},{key:"decode",value:function(e,t){throw new Error("unimplemented")}},{key:"getPackageToLoaderFinder",value:function(){return null}}])&&ve(t.prototype,n),r&&ve(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();n(54678),n(27207),n(70189),n(36210),n(92222);function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function ge(e,t,n){return ge=je()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Ee(o,n.prototype),o},ge.apply(null,arguments)}function _e(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==me(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===me(i)?i:String(i)),r)}var o,i}function Oe(e,t,n){return t&&Se(e.prototype,t),n&&Se(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ee(e,t)}function ke(e){var t=je();return function(){var n,r=Te(e);if(t){var o=Te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function je(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}var Fe={initMethodEnabled:!0,Delete:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){e&&(e.constructor!=Array?e.constructor!=Object||e.uninit?(e.uninit?e.uninit():e.nodeType&&e.parentNode&&e.parentNode.removeChild(e),e._uninit&&e._uninit()):Object.values(e).forEach((function(e){return Fe.Delete(e)})):e.forEach((function(e){return Fe.Delete(e)})))}))},Class:function(e,t){if(!window[e]){var n=window[e]=t?function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(n,e);var t=ke(n);function n(){return Pe(this,n),t.apply(this,arguments)}return Oe(n)}(window[t.className.replaceAll("$Section","").replaceAll("$","_")]):function(){return Oe((function e(){Pe(this,e)}))}();n.prototype.classRef=n,n.className=e,n.baseClass=t,n.getClassName=function(){return e},n.New=function(e){return ge(n,_e(e||[]))}}return window[e]},peg:function(e,t){return e.peg(t),e},addMethodNames:function(e){var t=e.getClassName()+".";function n(e,n){e.methodName=t+n}Fe.callForEachPrototypeMethod(e,n),Fe.callForEachStaticClassMethod(e,n)},abstractMethod:function(){throw new Error("Abstract method. Needs to be implemented in the subclass.")},callForEachPrototypeMethod:function(e,t){for(var n in e.prototype)"classRef"==n||"function"!=typeof e.prototype[n]||e.baseClass&&e.baseClass.prototype[n]&&e.baseClass.prototype[n]===e.prototype[n]||t(e.prototype[n],n)},callForEachStaticClassMethod:function(e,t){for(var n in e)"function"==typeof e[n]&&"getClassName"!=n&&"baseClass"!=n&&e.constructor[n]!=e[n]&&t(e[n],n)},getAllClassMethods:function(e){for(var t=new Set(["arguments","callee","caller","constructor"]),n=[],r=e.prototype||e;r;){var o=Object.getOwnPropertyNames(r).filter((function(e){return!t.has(e)&&"function"==typeof r[e]}));n=n.concat(o),r=Object.getPrototypeOf(r)}return _e(new Set(n))}};function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ie(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ie(i)?i:String(i)),r)}var o,i}window.Peg=Fe.peg,window.Delete=Fe.Delete,window.AbstractMethod=Fe.abstractMethod;var Ce=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}],(n=[{key:"reset",value:function(){this.map={}}},{key:"track",value:function(e){this.map[e]=1}},{key:"getData",value:function(){var e;for(e in this.map)return this.map;return null}}])&&Re(t.prototype,n),r&&Re(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==De(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==De(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===De(i)?i:String(i)),r)}var o,i}var Ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getCompleteClassName",value:function(e,t){return e.replace(/\./g,"_")+(t&&"Section"!=t?"_"+t:"")}},{key:"getPackageNameFromNamespace",value:function(e){e=e.replace(/_/g,".");var t=/(?:UNIT\.)?((?:[A-Z]{3}\.)?(?:[a-z\d]+\.)*(?:PLUG\.|MODEL\.)?(?:[a-z\d]+\.)*(?:[A-Z][A-Za-z\d]+))/.exec(e);if(!t)throw new Error("packageNameNotFoundFor: "+e);return t[0]}},{key:"getClassNameFromNamespace",value:function(t){t=t.replace(/_/g,".");var n=e.getPackageNameFromNamespace(t);return t.replace(n,"").replace(".","")||"Section"}}],(n=null)&&xe(t.prototype,n),r&&xe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function Ne(e,t,n){return Ne=Ye()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Ue(o,n.prototype),o},Ne.apply(null,arguments)}function Me(e){return function(e){if(Array.isArray(e))return Ve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Le(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Le(i)?i:String(i)),r)}var o,i}function Ue(e,t){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ue(e,t)}function We(e){var t=Ye();return function(){var n,r=Qe(e);if(t){var o=Qe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ye(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Qe(e){return Qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qe(e)}var He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(i,e);var t,n,r,o=We(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e){this.loaded=!1,this.name=e.name,this.codeReady=!1,this.classNames=[],this.classes=[],this.exportNames=[],this.exports=[]}},{key:"setCodeReady",value:function(e){this.codeReady=e}},{key:"getCodeReady",value:function(){return this.codeReady}},{key:"getAssetName",value:function(){return this.name+".js"}},{key:"load",value:function(e){function t(e){for(var t=0;t<r.classNames.length;++t)e(r[r.classNames[t]])}function n(e){for(var t in r)"function"!=typeof r[t]||i.prototype[t]||e(r[t],t)}var r=this;e.call(r,r.loaded),t(Fe.addMethodNames);var o=r.name+".";if(n((function(e,t){e.methodName=o+t})),!0===L.get("trackPackageUsage")){var a=Ce.getInstance();!function(e){function o(o){var a=function(){return e(),t((function(e){Fe.callForEachPrototypeMethod(e,i(e.prototype)),Fe.callForEachStaticClassMethod(e,i(e))})),n(i(r)),o.apply(this,arguments)};return a.oldMethod=o,a}function i(e){return function(t,n){t.oldMethod&&(e[n]=e[n].oldMethod)}}t((function(e){Fe.callForEachPrototypeMethod(e,(function(t,n){e.prototype[n]=o(t)})),Fe.callForEachStaticClassMethod(e,(function(t,n){e[n]=o(t)}))})),n((function(e,t){e.simpleClassName||(r[t]=o(e))}))}((function(){a.track(r.name)}))}r.loaded||(r.loaded=!0)}},{key:"translate",value:function(e,t,n){return L.get("currentLanguage").translate(this.name,e,t,n)}},{key:"translateWithResultCallback",value:function(e,t,n,r){return L.get("currentLanguage").translateWithResultCallback(this.name,e,t,n,r)}},{key:"Class",value:function(e,t,n){void 0===t&&(t=z);var r=Fe.Class(Ae.getCompleteClassName(this.name)+"$"+e,t,n);r.packageRef=this,r.simpleClassName=e,this.classNames.push(e),this.classes.push(r),this[e]=r,r.translate=this.caller("translate"),window[Ae.getCompleteClassName(this.name,e)]=r}},{key:"export",value:function(e,t,n){var r=t;r.packageRef=this,r.exportName=e,this.exportNames.push(e),this.exports.push(t),this[e]=t,n&&(r.prototype.classRef=r,r.simpleClassName=e,r.className=Ae.getCompleteClassName(this.name)+"$"+e,r.getClassName=function(){return r.className},r.New=function(e){return Ne(r,Me(e||[]))},this.classNames.push(e),this.classes.push(r)),window[Ae.getCompleteClassName(this.name,e)]=t}},{key:"getMainClass",value:function(){if(L.get("assetLoader").hurryUpPackage(this.name),!this.loaded)throw new Error("packageNotLoadedYet");return this.classes[0]}}],r=[{key:"getPathAndBaseName",value:function(e){var t=e.lastIndexOf(".")+1;return{path:e.substr(0,t),basename:e.substr(t)}}},{key:"getPackageNameWithLanguage",value:function(e){var t=i.getPathAndBaseName(e);return t.path+"lang."+L.get("currentLanguage").getLanguage()+"."+t.basename}},{key:"getPackageNameWithoutLanguage",value:function(e){return i.getLangAndBasePackageName(e)[1]}},{key:"isLangPackage",value:function(e){return-1!=e.indexOf(".lang.")}},{key:"getLangAndBasePackageName",value:function(e){var t=e.indexOf(".lang.");if(-1==t)return[null,e];var n=t+1,r=n+5,o=e.indexOf(".",r);return[e.substring(r,o),e.substr(0,n)+e.substr(o+1)]}},{key:"fromName",value:function(e){return L.get("assetLoader").hurryUpPackage(e),i.getOrCreatePackageFromName(e)}},{key:"getOrCreatePackageFromName",value:function(e,t,n){for(var r=e.split(/\./),o=window,a=0;a<r.length-1;++a){if(0==r[a].length)throw new Error("TIN_start_Package name "+e+" is not valid");if(!o[r[a]]){if(!t)return null;o[r[a]]={}}o=o[r[a]]}var u=r[a];if(o[u]){if(L.get("ENABLE_UI_VALIDATION")&&!(o[u]instanceof i))throw new Error("Variable "+e+" already exists and is not a TIN_start_Package")}else{if(!t)return null;o[u]=new i(n)}return o[u]}}],n&&Be(t.prototype,n),r&&Be(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);n(24603),n(64765),n(39575),n(82472),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016);function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ze(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ze(i)?i:String(i)),r)}var o,i}var Je=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"isString",value:function(e){return"string"==typeof e||e instanceof String}},{key:"isObject",value:function(e){return"object"===ze(e)}},{key:"isEmpty",value:function(e){return""===e||null==e||Array.isArray(e)&&0===e.length}},{key:"equals",value:function(t,n,r){if(r||(r=0),++r>100)return!0;if(t===n)return!0;if(t instanceof Array||n instanceof Array){if(t instanceof Array&&n instanceof Array){if(t.length!=n.length)return!1;for(var o=0;o<t.length;++o)if(!e.equals(t[o],n[o],r))return!1;return!0}return!1}if(t instanceof Date||n instanceof Date)return t instanceof Date&&n instanceof Date||(t=new Date(t),n=new Date(n)),t.getTime()==n.getTime();if(!0===t||!1===t||null==t)return!1;var i=ze(t);if("string"==i||"number"==i)return!1;if(null===n)return!1;if(i!=ze(n))return!1;if(t.equals)return t.equals(n);var a,u=0;for(a in t){if(!(a in n))return!1;if(!e.equals(t[a],n[a],r))return!1;++u}var l=0;for(a in n)++l;return u==l}},{key:"matches",value:function(t,n){var r=!0;for(var o in n){if(!t.hasOwnProperty(o)||!r)return!1;e.isObject(n[o])?(Array.isArray(n[o])&&(r=Array.isArray(t[o])),r=r&&e.matches(t[o],n[o])):r=t[o]===n[o]}return r}},{key:"wrapIntoArray",value:function(e){return Array.isArray(e)?e:[e]}}],(n=null)&&qe(t.prototype,n),r&&qe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ge(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ge(i)?i:String(i)),r)}var o,i}Je.isArray=Array.isArray;var Ke=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"uremove",value:function(e,t,n){var r=n(e,t);return-1!=r&&(e.splice(r,1),!0)}},{key:"remove",value:function(t,n){var r=e.sloppyIndexOf(t,n);return-1!=r&&(t.splice(r,1),!0)}},{key:"setContains",value:function(t,n,r){var o=e.sloppyIndexOf(t,n);return-1!=o==r?o:r?(t.push(n),t.length-1):e.remove(t,n)}},{key:"sloppyIndexOf",value:function(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}},{key:"append",value:function(e,t){return e.push.apply(e,t),e}},{key:"hasElement",value:function(e,t,n){n||(n=function(e){return e});for(var r=0;r<e.length;++r)if(n(e[r])==t)return!0;return!1}},{key:"usearch",value:function(e,t,n){if(!n||"function"!=typeof n)return null;for(var r=0;r<e.length;++r)if(n(e[r],t))return e[r]}},{key:"indexOfObject",value:function(e,t){for(var n=0;n<e.length;++n)if(Je.equals(e[n],t))return n;return-1}},{key:"unique",value:function(e,t){var n=[];t=t||Je.equals;for(var r=0,o=e.length;r<o;r++){for(var i=!1,a=0,u=n.length;a<u;a++)if(t(e[r],n[a])){i=!0;break}i||n.push(e[r])}return n}},{key:"intersection",value:function(e){return e.reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))}},{key:"createArrayFromRange",value:function(e,t){var n=[];if(e<t)for(;e<=t;)n.push(e++);else for(;e>=t;)n.push(e--);return n}},{key:"getArrayWithSeparators",value:function(e,t,n){for(var r=[],o=0;o<e.length;++o)o>0&&r.push(t),r.push(n?n(e[o]):e[o]);return r}},{key:"join",value:function(e,t,n,r){return 1==e.length?r?r(e[0]):e[0]:(r&&(e=e.map(r)),null===t&&(t=","),null==n?e.join(t):e.slice(0,-1).join(t)+n+e.slice(-1))}},{key:"getArrayDiff",value:function(t,n){var r=[];for(var o in t){var i=t[o];-1===e.indexOfObject(n,i)&&r.push(i)}return r}}],(n=null)&&Ze(t.prototype,n),r&&Ze(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==$e(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==$e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===$e(i)?i:String(i)),r)}var o,i}function et(e,t){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},et(e,t)}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nt(e);if(t){var o=nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function nt(e){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nt(e)}var rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&et(e,t)}(i,e);var t,n,r,o=tt(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"replaceSpecialChar",value:function(e){var t="ŠŽšžŸÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÑÒÓÔÕÖØÙÚÛÜÝàáâãäåçèéêëìíîïñòóôõöøùúûüýÿ".indexOf(e);return t>=0?"SZszYAAAAAACEEEEIIIINOOOOOOUUUUYaaaaaaceeeeiiiinoooooouuuuyy".charAt(t):e}},{key:"createEszettRegexString",value:function(e){return e.replace(new RegExp("ss|ẞ|ß|SS","g"),"(ss|ẞ|ß|SS)")}},{key:"replaceSpecialChars",value:function(e){return e.replace(/š|ž|à|á|â|ã|ä|å|ç|è|é|ê|ë|ì|í|î|ï|ñ|ò|ó|ô|õ|ö|ø|ù|ú|û|ü|ý|ÿ/gi,i.replaceSpecialChar)}},{key:"escape",value:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"flatten",value:function(e){return i.escape(i.replaceSpecialChars(e.toLowerCase()))}},{key:"pL",value:function(){return"A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ̀-ͯ"}},{key:"pN",value:function(){return"0-9²³¹¼-¾٠-٩۰-۹߀-߉०-९০-৯৴-৹੦-੯૦-૯୦-୯୲-୷௦-௲౦-౯౸-౾೦-೯൦-൵๐-๙໐-໙༠-༳၀-၉႐-႙፩-፼ᛮ-ᛰ០-៩៰-៹᠐-᠙᥆-᥏᧐-᧚᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙⁰⁴-⁹₀-₉⅐-ↂↅ-↉①-⒛⓪-⓿❶-➓⳽〇〡-〩〸-〺㆒-㆕㈠-㈩㉈-㉏㉑-㉟㊀-㊉㊱-㊿꘠-꘩ꛦ-ꛯ꠰-꠵꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹０-９"}},{key:"getSearchCriteriaRegExp",value:function(e){for(var t,n=e.replace(","," ").split(/\s+/),r="",o=0,a=n.length-1;o<a;o++)r+=(t=n[o],"(?=.*(\\b|\\s)"+i.flatten(t)+"(\\b|\\s))");return r+=function(e){return"(?=.*(\\b|\\s)"+i.flatten(e)+").*$"}(n[n.length-1]),new RegExp(r,"mi")}},{key:"getHighlighterRegExp",value:function(e){for(var t,n=e.replace(","," ").split(/\s+/),r="",o=0,a=n.length-1;o<a;o++)r+=(t=n[o],"(?:\\b|\\s)"+i.flatten(t)+"(?:\\b|\\s)|");return r+=function(e){return"(?:\\b|\\s)"+i.flatten(e)}(n[n.length-1]),new RegExp("("+r+")","gmi")}}],(n=null)&&Xe(t.prototype,n),r&&Xe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ot(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ot(i)?i:String(i)),r)}var o,i}var at=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"unprefix",value:function(e,t){return e.substr(0,t.length)==t&&e.substr(t.length)}},{key:"toCamelCase",value:function(e){return e.replace(/([A-Z]+)/g,(function(e,t){return t.substr(0,1).toUpperCase()+t.toLowerCase().substr(1,t.length)})).replace(/[\-_\s](.)/g,(function(e,t){return t.toUpperCase()}))}},{key:"toPascalCase",value:function(t){for(var n=t.split(" "),r="",o=0;o<n.length;++o)r+=e.capitalize(n[o]);return r}},{key:"cutText",value:function(e,t){return e.length>t?e.substr(0,t)+"...":e}},{key:"removeFromEnd",value:function(e,t){var n=e.length-t.length;return e.substr(n)==t&&e.substr(0,n)}},{key:"hasWord",value:function(e,t){return!!e&&Ke.hasElement(e.match(/\w+/g),t)}},{key:"removeWord",value:function(t,n){var r=e.split(t,/  */).filter((function(e){return e!=n}));return Ke.join(r," ")}},{key:"addWord",value:function(t,n){return e.hasWord(t,n)?t:(t+" "+n).trim()}},{key:"isWhitespace",value:function(e){return Je.isString(e)&&""===e.trim()}},{key:"capitalize",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"removeAllWhitespace",value:function(e){return e.replace(/\s*/g,"")}},{key:"getUncamelized",value:function(t,n){for(var r="",o=0;o<t.length;++o){var i=t.charAt(o);0==o||i!=i.toUpperCase()||n&&!isNaN(i)?r+=i:r+=" "+i.toLowerCase()}return e.capitalize(r)}},{key:"isEmpty",value:function(e){return!e||""===e.trim()}},{key:"truncate",value:function(e,t,n){return t=t||30,n=n||"...",e.length>t?e.slice(0,t-n.length)+n:String(e)}},{key:"split",value:function(e,t,n){var r=String.prototype.split,o=void 0===/()??/.exec("")[1];if("[object RegExp]"!==Object.prototype.toString.call(t))return r.call(e,t,n);var i,a,u,l,c=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),f=0;for(t=new RegExp(t.source,s+"g"),e+="",o||(i=new RegExp("^"+t.source+"$(?!\\s)",s)),n=void 0===n?-1>>>0:n>>>0;(a=t.exec(e))&&!((u=a.index+a[0].length)>f&&(c.push(e.slice(f,a.index)),!o&&a.length>1&&a[0].replace(i,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(a[e]=void 0)})),a.length>1&&a.index<e.length&&Array.prototype.push.apply(c,a.slice(1)),l=a[0].length,f=u,c.length>=n));)t.lastIndex===a.index&&t.lastIndex++;return f===e.length?!l&&t.test("")||c.push(""):c.push(e.slice(f)),c.length>n?c.slice(0,n):c}},{key:"removeAccents",value:function(e){for(var t,n="",r=0;r<e.length;++r){var o=e.charAt(r);n+=-1!=(t="ŠŽšžŸÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÑÒÓÔÕÖØÙÚÛÜÝàáâãäåçèéêëìíîïñòóôõöøùúûüýÿ".indexOf(o))?"SZszYAAAAAACEEEEIIIINOOOOOOUUUUYaaaaaaceeeeiiiinoooooouuuuyy"[t]:o}return n}},{key:"getSplitter",value:function(){return e._splitter||(e._splitter=new RegExp("((?:[^ \\n]){"+e.MAX_WORD_LENGTH+"})\\B","g")),e._splitter}},{key:"getLineBreaksOrWhitespace",value:function(){return e._lineBreaksOrWhitespace||(e._lineBreaksOrWhitespace=/\r|\n|\s/),e._lineBreaksOrWhitespace}},{key:"putWbrElementsInAllChildsIfNeeded",value:function(t,n){n=n||document;for(var r=t.childNodes,o=r.length-1;o>=0;--o)if(3==r[o].nodeType){var i=r[o].nodeValue.replace(/\s/gm," "),a=e.split(i,e.getSplitter()),u=n.createElement("span");u.className="wbrContainer";for(var l=0;l<a.length;++l)u.appendChild(e._putWbrElement(a[l],n));t.replaceChild(u,r[o])}else e.putWbrElementsInAllChildsIfNeeded(r[o])}},{key:"_putWbrElement",value:function(t,n){var r,o=n.createElement("span");return e.getLineBreaksOrWhitespace().test(t)||t.length<e.MAX_WORD_LENGTH?(o.className="wbrSpanSimple",r=n.createTextNode(t.replace(/^[\r\n]+/,"")),o.appendChild(r)):(o.className="wbrSpan",r=n.createTextNode(t),o.appendChild(r)),o}},{key:"isRtlText",value:function(e){return e&&(e.search("‮")>=0||e.search("‫")>=0||/[\u0600-\u06FF]/.test(e)||/[\u0590-\u05FF]/.test(e))}},{key:"highlightChildrenMatches",value:function(t,n){if(n)for(var r=t.childNodes,o=r.length-1;o>=0;--o)if(3==r[o].nodeType){for(var i=r[o].nodeValue.replace(/\s/gm," "),a=e.split(rt.replaceSpecialChars(i),n),u=e._splitByStringsArray(a,i),l=document.createElement("span"),c=0;c<a.length;++c)l.appendChild(e._getHighlightedChild(a[c],u[c],n));t.replaceChild(l,r[o])}else e.highlightChildrenMatches(r[o],n)}},{key:"_getHighlightedChild",value:function(e,t,n){var r=n.test(rt.replaceSpecialChars(e)),o=document.createElement(r?"strong":"span"),i=document.createTextNode(t);return o.className=r?"HighlightedChild":"",o.appendChild(i),o}},{key:"_splitByStringsArray",value:function(e,t){for(var n=[],r=0,o=0,i=e.length;o<i;o++){var a=e[o].length;n.push(0===a?"":t.substr(r,a)),r+=a}return n}},{key:"countWords",value:function(e){var t=e.match(/[\w\d]+/gi);return t?t.length:0}},{key:"splitWords",value:function(e){return function(e){for(var t=[],n=0;n<e.length;++n)""!=e[n]&&t.push(e[n]);return t}(e.split(/[ \t\n\r,;:_]+/))}},{key:"isAsianChar",value:function(e){var t=new RegExp("[一-鿿|⿰-⿿|㇀-㇯|㈀-龿|豈-﫿]"),n=new RegExp("[　-〿぀-ゟ゠-ヿ＀-ﾟ一-龯㐀-䶿]"),r=new RegExp("[ᄀ-ᇿ|㄰-㆏|ꥠ-꥿|가-힯|ힰ-퟿]");return t.test(e)||n.test(e)||r.test(e)}},{key:"hasMSWordSource",value:function(e){return new RegExp('<o:p>|class="Mso|class=Mso|<?xml:namespace|data-leveltext').test(e)}},{key:"generateRandCode",value:function(e){for(var t="",n=0;n<=e;++n)t+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_-"[Math.floor(64*Math.random())];return t}},{key:"uuidv4",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}},{key:"tempId",value:function(){return"TEMPID_"+Math.random().toString(36).substr(2,8)}},{key:"trimSpecialUnicodeCharacters",value:function(e){var t=["ㅤ","​","‎","‏","⠀"," "],n=new RegExp("^[".concat(t.join(""),"]+|[").concat(t.join(""),"]+$"),"g");return e.trim().replace(n,"")}}],(n=null)&&it(t.prototype,n),r&&it(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ut(e){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ut(e)}function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ut(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ut(i)?i:String(i)),r)}var o,i}at.MAX_WORD_LENGTH=14,at.whitespaceCharacters=" \t\n\r";var ct=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.language=t,this.languagePathCache={},this.displayPackageAndKeyNames=!!n}var t,n,r;return t=e,n=[{key:"getLanguage",value:function(){return this.language}},{key:"translate",value:function(e,t,n,r){return this.translateWithResultCallback(e,t,n,r,this._resultAsString)}},{key:"translateWithResultCallback",value:function(e,t,n,r,o){var i="";if(void 0!==t||void 0!==r){var a=He.getPathAndBaseName(e),u=this._getPkg(a.path+"lang");u||void 0!==r||L.get("defaultErrorHandler").reportAsException("noPackageForLanguageFoundForTranslation-"+e+"-"+this.language),i=this._getUnprocessedValue(u,a.basename,t),i=this._processUndefined(u,a.basename,e,i,t,r),i=this._processDisplayPackageAndKeyNames(u,i,e,t,a.basename),i=this._processFields(i,n,o)}return void 0===t&&L.get("defaultErrorHandler").reportAsException("missingKeyForTranslation-"+e+"-"+this.language),i}},{key:"_getUnprocessedValue",value:function(e,t,n){var r=void 0;return e&&void 0!==e[this.language]&&void 0!==e[this.language][t].text&&void 0===(r=e[this.language][t].text[n])&&this._isGenderKey(n)&&(r=e[this.language][t].text[this._getGenderBaseKey(n)]),r}},{key:"_isGenderKey",value:function(e){return"string"==typeof e&&e.match(this._getGenderRegex())}},{key:"_getGenderBaseKey",value:function(e){var t=e.match(this._getGenderRegex());return t?t[1]:void 0}},{key:"_getGenderRegex",value:function(){return/(.+Default)(Masculine|Feminine)$/}},{key:"_processUndefined",value:function(e,t,n,r,o,i){return void 0===r&&(void 0===i?(L.get("defaultErrorHandler").reportAsException("translationNotFound-"+n+"-"+this.language+"-"+o),r=e&&void 0!==e[this.language]&&void 0!==e[this.language][t].text&&void 0!==e[this.language][t].text[o+"#Default"]?e[this.language][t].text[o+"#Default"]:o):r=i),r}},{key:"_processFields",value:function(e,t,n){return n(e&&t&&"object"===ut(t)?this._replaceFields(e,t):[e])}},{key:"_replaceFields",value:function(e,t){for(var n=[],r=this._compileTranslation(e),o=0;o<r.variables.length;o++){var i=void 0!==t[r.variablesNames[o]]?t[r.variablesNames[o]]:r.variables[o];n.push(r.nonVariables[o],i)}return n.push(r.nonVariables.pop()),n}},{key:"_compileTranslation",value:function(e){var t={variables:[],variablesNames:[],nonVariables:[]},n=e.match(/\{\$[^}]+\}/g);if(null===n)t.nonVariables=[e];else{t.variables=n,t.nonVariables=at.split(e,/\{\$[^}]+\}/);for(var r=0;r<n.length;r++){var o=n[r].match(/\{\$([^}]+)\}/);t.variablesNames.push(o[1])}}return t}},{key:"_resultAsString",value:function(e){return e.join("")}},{key:"_processDisplayPackageAndKeyNames",value:function(e,t,n,r,o){return this.displayPackageAndKeyNames&&e&&void 0!==e[this.language][o].text&&-1===r.indexOf("NONT",r.length-4)&&(t=t+"( "+n+"-"+r+" )"),t}},{key:"_getPkgFromLanguagePath",value:function(e){for(var t=window,n=e.split(/\./),r=0;r<n.length;++r)if(!(t=t[n[r]]))return null;return t}},{key:"_getPkg",value:function(e){if(this.languagePathCache[e])return this.languagePathCache[e];var t=this._getPkgFromLanguagePath(e);return this.languagePathCache[e]=t,t}}],n&&lt(t.prototype,n),r&&lt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();if(void 0===st)var st={code:"en_US",displayPackageAndKeyNames:!0};L.set("currentLanguage",new ct(st.code,!!st.displayPackageAndKeyNames));const ft=["TIN","input","date","lang"];for(var pt=window,dt=0;dt<ft.length;++dt)pt[ft[dt]]||(pt[ft[dt]]={}),pt=pt[ft[dt]];pt.en_US||(pt.en_US={}),pt.en_US.Util={text:{at:"at",justNow:"just%20now",secondsAgo:"seconds%20ago",minuteAgo:"1%20minute%20ago",minutesAgo:"%7B%24amount%7D%20minutes%20ago",hourAgo:"1%20hour%20ago",hoursAgo:"%7B%24amount%7D%20hours%20ago",dayAgo:"1%20day%20ago",daysAgo:"%7B%24amount%7D%20days%20ago",today:"today",weekAgo:"1%20week%20ago",weeksAgo:"%7B%24amount%7D%20weeks%20ago",yesterday:"yesterday"}};const yt=function(e,t,n){return L.get("currentLanguage").translate("TIN.input.date.Util",e,t,n)},ht=yt,vt=["TIN","input","date","lang"];for(var bt=window,mt=0;mt<vt.length;++mt)bt[vt[mt]]||(bt[vt[mt]]={}),bt=bt[vt[mt]];bt.en_US||(bt.en_US={}),bt.en_US.Text={text:{apr:"Apr",april:"April",aug:"Aug",august:"August",dec:"Dec",december:"December",feb:"Feb",february:"February",fri:"Fri",friday:"Friday",jan:"Jan",january:"January",jul:"Jul",july:"July",jun:"Jun",june:"June",mar:"Mar",march:"March",may:"May",mon:"Mon",monday:"Monday",nov:"Nov",november:"November",oct:"Oct",october:"October",sat:"Sat",saturday:"Saturday",sep:"Sep",september:"September",shortMay:"May",sun:"Sun",sunday:"Sunday",thu:"Thu",thursday:"Thursday",tinyFriday:"F",tinyMonday:"M",tinySaturday:"S",tinySunday:"S",tinyThursday:"T",tinyTuesday:"T",tinyWednesday:"W",tue:"Tue",tuesday:"Tuesday",wed:"Wed",wednesday:"Wednesday",dayOfMonthOrd01:"1st",dayOfMonthOrd02:"2nd",dayOfMonthOrd03:"3rd",dayOfMonthOrd04:"4th",dayOfMonthOrd05:"5th",dayOfMonthOrd06:"6th",dayOfMonthOrd07:"7th",dayOfMonthOrd08:"8th",dayOfMonthOrd09:"9th",dayOfMonthOrd10:"10th",dayOfMonthOrd11:"11th",dayOfMonthOrd12:"12th",dayOfMonthOrd13:"13th",dayOfMonthOrd14:"14th",dayOfMonthOrd15:"15th",dayOfMonthOrd16:"16th",dayOfMonthOrd17:"17th",dayOfMonthOrd18:"18th",dayOfMonthOrd19:"19th",dayOfMonthOrd20:"20th",dayOfMonthOrd21:"21st",dayOfMonthOrd22:"22nd",dayOfMonthOrd23:"23rd",dayOfMonthOrd24:"24th",dayOfMonthOrd25:"25th",dayOfMonthOrd26:"26th",dayOfMonthOrd27:"27th",dayOfMonthOrd28:"28th",dayOfMonthOrd29:"29th",dayOfMonthOrd30:"30th",dayOfMonthOrd31:"31st"}};const gt=function(e,t,n){return L.get("currentLanguage").translate("TIN.input.date.Text",e,t,n)},_t=gt;function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==wt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===wt(i)?i:String(i)),r)}var o,i}var Ot=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getMonthNames",value:function(){return e.monthNames.concat()}},{key:"getMonthName",value:function(t){return e.monthNames[t]}},{key:"getShortMonthNames",value:function(){return e.shortMonthNames}},{key:"getShortMonthName",value:function(t){return e.shortMonthNames[t]}},{key:"isValidShortMonthName",value:function(e){return-1!==this.getMonthIndexFromShortName(e)}},{key:"getMonthIndexFromShortName",value:function(t){return t?e.shortMonthNames.findIndex((function(e){return!t.localeCompare(e,void 0,{sensitivity:"base"})})):-1}},{key:"getMonthIndexFromName",value:function(t){return e.monthNames.indexOf(t)}},{key:"getDayIndexFromOrdinalName",value:function(t){return e.dayOfMonthOrdinalNames.indexOf(t)}},{key:"getMonthIndexFromEnglishShortName",value:function(t){return e.untranslatedShortMonthNames.indexOf(t)}},{key:"getDayOfWeekName",value:function(t){return e.dayOfWeekNames[t]}},{key:"getDayOfWeekTinyName",value:function(t){return e.dayOfWeekTinyNames[t]}},{key:"getDayOfWeekTinyNames",value:function(){return e.dayOfWeekTinyNames}},{key:"getDayOfWeekShortName",value:function(t){return e.dayOfWeekShortNames[t]}},{key:"getDayOfMonthOrdinalName",value:function(t){return e.dayOfMonthOrdinalNames[t-1]}}],(n=null)&&St(t.prototype,n),r&&St(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(e)}function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Pt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Pt(i)?i:String(i)),r)}var o,i}Ot.untranslatedMonthNames=["january","february","march","april","may","june","july","august","september","october","november","december"],Ot.monthNames=[_t("january"),_t("february"),_t("march"),_t("april"),_t("may"),_t("june"),_t("july"),_t("august"),_t("september"),_t("october"),_t("november"),_t("december")],Ot.shortMonthNames=[_t("jan"),_t("feb"),_t("mar"),_t("apr"),_t("shortMay"),_t("jun"),_t("jul"),_t("aug"),_t("sep"),_t("oct"),_t("nov"),_t("dec")],Ot.untranslatedShortMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ot.dayOfWeekNames=[_t("sunday"),_t("monday"),_t("tuesday"),_t("wednesday"),_t("thursday"),_t("friday"),_t("saturday")],Ot.dayOfWeekTinyNames=[_t("tinySunday"),_t("tinyMonday"),_t("tinyTuesday"),_t("tinyWednesday"),_t("tinyThursday"),_t("tinyFriday"),_t("tinySaturday")],Ot.dayOfWeekShortNames=[_t("sun"),_t("mon"),_t("tue"),_t("wed"),_t("thu"),_t("fri"),_t("sat")],Ot.dayOfMonthOrdinalNames=[_t("dayOfMonthOrd01"),_t("dayOfMonthOrd02"),_t("dayOfMonthOrd03"),_t("dayOfMonthOrd04"),_t("dayOfMonthOrd05"),_t("dayOfMonthOrd06"),_t("dayOfMonthOrd07"),_t("dayOfMonthOrd08"),_t("dayOfMonthOrd09"),_t("dayOfMonthOrd10"),_t("dayOfMonthOrd11"),_t("dayOfMonthOrd12"),_t("dayOfMonthOrd13"),_t("dayOfMonthOrd14"),_t("dayOfMonthOrd15"),_t("dayOfMonthOrd16"),_t("dayOfMonthOrd17"),_t("dayOfMonthOrd18"),_t("dayOfMonthOrd19"),_t("dayOfMonthOrd20"),_t("dayOfMonthOrd21"),_t("dayOfMonthOrd22"),_t("dayOfMonthOrd23"),_t("dayOfMonthOrd24"),_t("dayOfMonthOrd25"),_t("dayOfMonthOrd26"),_t("dayOfMonthOrd27"),_t("dayOfMonthOrd28"),_t("dayOfMonthOrd29"),_t("dayOfMonthOrd30"),_t("dayOfMonthOrd31")];var kt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"isNumber",value:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},{key:"isInteger",value:function(e){var t=Number(e);return!at.isWhitespace(e)&&!isNaN(t)&&t%1==0}},{key:"format",value:function(e,t,n){var r=Number(e).toString().split(".");return r[0].length>3&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,n)),r.join(t)}},{key:"fromString",value:function(e,t,n){return n&&(e=e.split(n).join("")),t&&(e=e.replace(t,".")),Number(e)}}],(n=null)&&Et(t.prototype,n),r&&Et(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function jt(e){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==jt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===jt(i)?i:String(i)),r)}var o,i}var Ft=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"setUseMilitaryTimeFormat",value:function(t){e.useMilitaryTimeFormat=!!t}},{key:"setPickerFirstDayOfTheWeek",value:function(t){e.pickerFirstDayOfTheWeek=t}},{key:"unserialize",value:function(t){return new e(t.hour,t.minute,t.second)}},{key:"fromString",value:function(t){if(!t.length)return null;var n=t.match(/^(\d{1,2})(?:[:|.](\d{1,2})(?:[:|.](\d{1,2}))?)?\s*(?:(am|pm))?$/i);if(!n)return null;var r=parseInt(n[1],10),o=parseInt(n[2],10);isNaN(o)&&(o=0);var i=parseInt(n[3],10);isNaN(i)&&(i=0);var a=(n[4]||"").toLowerCase();return"pm"===a&&r<12?r+=12:"am"===a&&r<=12&&(r%=12),24==r&&(r=0),r>23||o>=60||i>=60?null:new e(r,o,i)}}],(n=[{key:"initialize",value:function(e,t,n){e=parseInt(e||0,10),this._hour=24===e?0:e,this._minute=parseInt(t||0,10),this._second=parseInt(n||0,10),this._validate(this._hour,this._minute,this._second)}},{key:"getHour",value:function(){return this._hour}},{key:"getMinute",value:function(){return this._minute}},{key:"getSecond",value:function(){return this._second}},{key:"getJsonValue",value:function(){return{$JSNType:"time",value:{hour:this.getHour(),minute:this.getMinute(),second:this.getSecond()}}}},{key:"clone",value:function(){return new e(this.getHour(),this.getMinute(),this.getSecond())}},{key:"toString",value:function(){return this.getFormattedTime(!0)}},{key:"getFormattedTime",value:function(t){var n=e.useMilitaryTimeFormat?this.getHour():this.getHour()%12||12,r=e.useMilitaryTimeFormat?this._addLeadingZero(n):n;return t&&(r+=":"+this._addLeadingZero(this.getMinute())),e.useMilitaryTimeFormat||(r+=" "+(this.getHour()>=12?"PM":"AM")),r}},{key:"_addLeadingZero",value:function(e){return e>9?e.toString():"0"+e}},{key:"_validate",value:function(e,t,n){this._validateHour(e),this._validateMinute(t),this._validateSecond(n)}},{key:"_validateHour",value:function(e){if(!kt.isNumber(e)||e<0||e>23)throw new Error("Hour value should be beetwen 0 and 23.")}},{key:"_validateMinute",value:function(e){if(!kt.isNumber(e)||e<0||e>59)throw new Error("Minute value should be beetwen 0 and 59.")}},{key:"_validateSecond",value:function(e){if(!kt.isNumber(e)||e<0||e>59)throw new Error("Second value should be beetwen 0 and 59.")}}])&&Tt(t.prototype,n),r&&Tt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==It(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==It(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===It(i)?i:String(i)),r)}var o,i}function Ct(e,t){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ct(e,t)}function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xt(e);if(t){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===It(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function xt(e){return xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xt(e)}var At=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ct(e,t)}(i,e);var t,n,r,o=Dt(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"getDaysToThisWeekLastWorkingDay",value:function(e){return i.getDaysToDayOfWeek(e,5)}},{key:"getDaysToDayOfWeek",value:function(e,t){return(7+t-e)%7}},{key:"getDaysToSaturday",value:function(e){return i.getDaysToDayOfWeek(e,6)}},{key:"getWeekStartDate",value:function(e,t){var n=(e.getDay()-t+7)%7,r=e.getDate()-n;return new Date(e.getFullYear(),e.getMonth(),r)}},{key:"getWeekEndDate",value:function(e,t){var n=(e.getDay()-t+7)%7,r=e.getDate()-n+6;return new Date(e.getFullYear(),e.getMonth(),r)}},{key:"getMonthStartDate",value:function(e){return new Date(e.getFullYear(),e.getMonth(),1)}},{key:"getMonthEndDate",value:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}},{key:"now",value:function(){return L.get("dateOffsetMilliseconds")?new Date((new Date).getTime()+L.get("dateOffsetMilliseconds")):new Date}},{key:"getShortDateFormat",value:function(e,t){var n=e.getDate().toString();return 1==n.length&&(n="0"+n),n+"-"+Ot.getShortMonthName(e.getMonth())+"-"+(t?(e.getFullYear()+"").substr(2):e.getFullYear())}},{key:"getTimeOnlyFormat",value:function(e){var t=e.getMinutes();return e.getHours()+(t<10?":0":":")+t}},{key:"getDateFromTextValue",value:function(e){if(""==(e=e.trim()))return{isValid:!0,value:null};var t=e.split(/[ \/.-]+/);if(3!=t.length)return{isValid:!1};var n=parseInt(t[0],10);if(isNaN(n))return{isValid:!1};var r=parseInt(t[1],10);if(isNaN(r)){var o=t[1].substr(0,1).toUpperCase()+t[1].substr(1).toLowerCase(),a=Ot.getMonthIndexFromEnglishShortName(o);if(-1==a&&(a=Ot.getMonthIndexFromShortName(o)),-1==(r=a))return{isValid:!1}}else if((r-=1)<0||r>11)return{isValid:!1};var u=parseInt(t[2],10);return isNaN(u)||u>99&&u<1e3?{isValid:!1}:(u+"").length>=4&&(u<i.MIN_YEAR||u>i.MAX_YEAR)?{isValid:!1,errorMsgKey:"invalidYear",validDate:u<i.MIN_YEAR?i.getMinValidDate():i.getMaxValidDate()}:(u<=99&&(u>69?u+=1900:u>0&&(u+=2e3)),{isValid:!0,value:new Date(u,r,n)})}},{key:"getTimeFromTextValue",value:function(e){if(""==(e=e.trim()))return{isValid:!0,value:null};var t=e.split(/[ \/:]+/);if(3!=t.length)return{isValid:!1,errorMsgKey:"invalidTime"};var n=parseInt(t[0],10);if(isNaN(n)||n<0||n>24)return{isValid:!1,errorMsgKey:"invalidHours"};var r=parseInt(t[1],10);if(isNaN(r)||r<0||r>60)return{isValid:!1,errorMsgKey:"invalidMinutes"};var o=parseInt(t[2],10);return isNaN(o)||o<0||o>60?{isValid:!1,errorMsgKey:"invalidSeconds"}:{isValid:!0,value:[n,r,o]}}},{key:"getDateTimeFromTextValue",value:function(e,t){var n=e.split(" ");if(!(t||2==n.length&&n[0]&&n[1]))return{isValid:!1,errorMsgKey:"invalidDateTime"};if(!(o=i.getDateFromTextValue(n[0])).isValid)return o;if(n[1]){var r;if(!(r=i.getTimeFromTextValue(n[1])).isValid)return r}else{if(!t)return{isValid:!1,errorMsgKey:"invalidDateTime"};r={value:[0,0,0]}}var o=new Date(o.value.getFullYear(),o.value.getMonth(),o.value.getDate(),r.value[0],r.value[1],r.value[2]);return{isValid:!0,value:i.truncateToValidDateRange(o)}}},{key:"_addLeadingZero",value:function(e,t){return 1!=e.length||t?e:"0"+e}},{key:"getShortDateFormatWithTime",value:function(e,t){var n=i._addLeadingZero(e.getDate().toString(),!1),r=t?i.getOnlyTimeFromDate(e,!1):i._getHoursFromDate(e,!1)+":"+i._getMinutesFromDate(e,!1);return n+"-"+Ot.getShortMonthName(e.getMonth())+"-"+e.getFullYear()+" "+r}},{key:"_getHoursFromDate",value:function(e,t){return i._addLeadingZero(e.getHours().toString(),t)}},{key:"_getMinutesFromDate",value:function(e,t){return i._addLeadingZero(e.getMinutes().toString(),t)}},{key:"getOnlyTimeFromDate",value:function(e,t){var n=new Ft(e.getHours(),e.getMinutes());return n.getFormattedTime(!t||0!=n.getMinute())}},{key:"getOnlyMonthAndYear",value:function(e){return Ot.getShortMonthName(e.getMonth())+"-"+e.getFullYear()}},{key:"getLongDateFormat",value:function(e){var t=e.getHours().toString();1==t.length&&(t="0"+t);var n=e.getMinutes().toString();return 1==n.length&&(n="0"+n),Ot.getDayOfWeekName(e.getDay())+", "+Ot.getMonthName(e.getMonth())+" "+e.getDate().toString()+", "+e.getFullYear()+". "+t+":"+n}},{key:"addDaysToDate",value:function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()+t,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());return i.truncateToValidDateRange(n)}},{key:"addMonthsToDate",value:function(e,t){var n=new Date(e.getFullYear(),e.getMonth()+t,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());return i.truncateToValidDateRange(n)}},{key:"equals",value:function(e,t){return!e&&!t||!(!e||!t)&&e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()}},{key:"equalsWithTime",value:function(e,t){return!e&&!t||!(!e||!t)&&e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()&&e.getHours()==t.getHours()&&e.getMinutes()==t.getMinutes()}},{key:"getDateDifferenceInDays",value:function(e,t){var n=e.getTime()-36e5*e.getHours()-(t.getTime()-36e5*t.getHours());return Math.round(n/864e5)}},{key:"getDiff",value:function(e,t){return e.getTime()-t.getTime()}},{key:"getShortDateWithDayNameFormat",value:function(e){var t=e.getDate().toString();return 1==t.length&&(t="0"+t),t+" "+Ot.getShortMonthName(e.getMonth()).toUpperCase()+" ("+Ot.getDayOfWeekName(e.getDay()).substring(0,3)+")"}},{key:"getShortDateWithDayNameAndYearFormat",value:function(e){var t=e.getDate().toString();return 1==t.length&&(t="0"+t),t+" "+Ot.getShortMonthName(e.getMonth()).toUpperCase()+" "+e.getFullYear()+" ("+Ot.getDayOfWeekName(e.getDay()).substring(0,3)+")"}},{key:"getOnlyMonthAndDayFormat",value:function(e,t){var n=e.getDate().toString();return 1==n.length&&(n="0"+n),(t?Ot.getShortMonthName(e.getMonth()):Ot.getMonthName(e.getMonth()))+" "+n}},{key:"getOnlyMonthAndDayWithTimeFormat",value:function(e){return i.getOnlyMonthAndDayFormat(e,!0)+" "+ht("at")+" "+i.getOnlyTimeFromDate(e)}},{key:"getDateFromTimestamp",value:function(e){return i.truncateToValidDateRange(new Date(1e3*parseFloat(e)))}},{key:"getStrFTime",value:function(e,t){return t=t.constructor==Date?t:i.now(),e=(e=(e=e.replace(/%a/g,Ot.getDayOfWeekName(t.getDay()).substring(0,3))).replace(/%b/g,Ot.getShortMonthName(t.getMonth()))).replace(/%e/g,t.getDate())}},{key:"getStrFDate",value:function(e,t){return t=t.constructor==Date?t:i.now(),e=(e=(e=e.replace(/%d/g,i._addLeadingZero(t.getDate().toString()))).replace(/%m/g,i._addLeadingZero((t.getMonth()+1).toString()))).replace(/%G/g,t.getFullYear())}},{key:"getStrFTimeRange",value:function(e,t,n){return i.getStrFTime(i.getStrFTime(e,t).replace(/#([abe])/g,"%$1"),n)}},{key:"getDayNameMonthAndDayNumberFormat",value:function(e){return Ot.getDayOfWeekName(e.getDay())+", "+Ot.getMonthName(e.getMonth())+" "+e.getDate()}},{key:"dateToJson",value:function(e){return e||(e=i.now()),{year:e.getFullYear(),month:e.getMonth(),dayOfTheMonth:e.getDate(),hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}}},{key:"dateFromJson",value:function(e){var t=new Date(e.year,e.month,e.dayOfTheMonth,e.hours,e.minutes,e.seconds);return i.truncateToValidDateRange(t)}},{key:"dateToUTC",value:function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds());return i.truncateToValidDateRange(t)}},{key:"dateFromUTC",value:function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),0));return i.truncateToValidDateRange(t)}},{key:"jsonToUTC",value:function(e){return i.dateToJson(i.dateToUTC(i.dateFromJson(e)))}},{key:"jsonFromUTC",value:function(e){return i.dateToJson(i.dateFromUTC(i.dateFromJson(e)))}},{key:"cleanTimeFromDate",value:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}},{key:"formatMinutesEntry",value:function(e){if(e>59||e<0)throw new Error("Invalid value in TIN_input_date_Util.formatMinutesEntry. Minutes must be between 0 and 59");var t=e.toString();return t.length>1?t:"0".concat(t)}},{key:"getDefaultMinutesEntries",value:function(){return[0,10,20,30,40,50]}},{key:"getTimeAgoAsString",value:function(e){var t,n=i.now(),r=parseInt((n.getTime()-e.getTime())/1e3,10),o=r;if(r<30)t="justNow";else if(r<60)t="secondsAgo";else if(r<3600)t=(o=r/60)<2?"minuteAgo":"minutesAgo";else if(r<86400)t=(o=r/3600)<2?"hourAgo":"hoursAgo";else if(r<604800)t=(o=r/86400)<2?"dayAgo":"daysAgo";else{if(!(r<7776e3))return r<2592e4?i.getOnlyMonthAndDayWithTimeFormat(e):i.getShortDateFormatWithTime(e);t=(o=r/604800)<2?"weekAgo":"weeksAgo"}return ht(t,{amount:parseInt(o,10)})}},{key:"getTimeDayAsString",value:function(e){var t=i.getDateDifferenceInDays(i.now(),e);return 0===t?ht("today"):1===t?ht("yesterday"):ht("daysAgo",{amount:t})}},{key:"truncateToValidDateRange",value:function(e){var t=e.getFullYear();return t>i.MAX_YEAR&&(e=i.getMaxValidDate()),t<i.MIN_YEAR&&(e=i.getMinValidDate()),e}},{key:"getMaxValidDate",value:function(){return new Date(i.MAX_YEAR,11,31,23,59,59.999999)}},{key:"getMinValidDate",value:function(){return new Date(i.MIN_YEAR,0,1,0,0,0)}}],(n=null)&&Rt(t.prototype,n),r&&Rt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Lt(e){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Lt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Lt(i)?i:String(i)),r)}var o,i}function Mt(e,t){return Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mt(e,t)}function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bt(e);if(t){var o=Bt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Lt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Bt(e){return Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bt(e)}At.SECONDS_IN_A_DAY=86400,At.SECONDS_IN_A_MINUTE=60,At.MIN_YEAR=1001,At.MAX_YEAR=9999;var Ut=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mt(e,t)}(i,e);var t,n,r,o=Vt(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"canEncode",value:function(e){return e instanceof Date}},{key:"canDecode",value:function(e){return e===this._getType()}},{key:"_getType",value:function(){return"datetime"}},{key:"decode",value:function(e){return At.truncateToValidDateRange(new Date(1e3*e))}},{key:"encode",value:function(e){return{$JSNType:this._getType(),value:At.truncateToValidDateRange(e).getTime()/1e3}}}])&&Nt(t.prototype,n),r&&Nt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(be);n(44048);function Wt(e){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(e)}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Wt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Wt(i)?i:String(i)),r)}var o,i}function Qt(e,t){return Qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qt(e,t)}function Ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zt(e);if(t){var o=zt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zt(e){return zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zt(e)}var qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qt(e,t)}(i,e);var t,n,r,o=Ht(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"fromDateTime",value:function(e){return new i(e.getFullYear(),e.getMonth()+1,e.getDate())}},{key:"unserialize",value:function(e){return new i(e.year,e.month,e.dayOfTheMonth)}}],(n=[{key:"initialize",value:function(e,t,n){if(void 0!==e||void 0!==t||void 0!==n)if(e=parseInt(e,10),t=parseInt(t,10),n=parseInt(n,10),Number.isNaN(e)||Number.isNaN(t))this.date=null;else{t-=1;var r=Number.isNaN(n)?new Date(e,t):new Date(e,t,n);this.date=At.truncateToValidDateRange(r)}else this.date=At.now()}},{key:"getTimeStamp",value:function(){return this.date.getTime()/1e3}},{key:"getDateTime",value:function(){return this.date}},{key:"getFullYear",value:function(){return this.date.getFullYear()}},{key:"getMonth",value:function(){return this.date.getMonth()}},{key:"getDayOfTheMonth",value:function(){return this.date.getDate()}},{key:"getTimezoneOffset",value:function(){return this.date.getTimezoneOffset()}},{key:"setFullYear",value:function(e){this.date.setFullYear(e),this.date=At.truncateToValidDateRange(this.date)}},{key:"setMonth",value:function(e){this.date.setMonth(e),this.date=At.truncateToValidDateRange(this.date)}},{key:"setDayOfTheMonth",value:function(e){this.date.setDate(e),this.date=At.truncateToValidDateRange(this.date)}},{key:"toString",value:function(){return At.getShortDateFormat(this.getDateTime())}},{key:"equals",value:function(e){return e.getDateTime().getTime()==this.getDateTime().getTime()}},{key:"valueOf",value:function(){return this.date.valueOf()}},{key:"getJsonValue",value:function(){return{$JSNType:"date",value:{year:this.date.getFullYear(),month:this.date.getMonth()+1,dayOfTheMonth:this.date.getDate()}}}},{key:"clone",value:function(){return new i(this.date.getFullYear(),this.date.getMonth()+1,this.date.getDate())}}])&&Yt(t.prototype,n),r&&Yt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Jt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Jt(i)?i:String(i)),r)}var o,i}function Zt(e,t){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zt(e,t)}function Kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$t(e);if(t){var o=$t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $t(e){return $t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$t(e)}var Xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zt(e,t)}(i,e);var t,n,r,o=Kt(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"canDecode",value:function(e){return"date"===e}},{key:"decode",value:function(e){return qt.unserialize(e)}}])&&Gt(t.prototype,n),r&&Gt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(be);function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==en(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==en(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===en(i)?i:String(i)),r)}var o,i}function nn(e,t){return nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nn(e,t)}function rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=on(e);if(t){var o=on(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===en(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function on(e){return on=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},on(e)}var an=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nn(e,t)}(i,e);var t,n,r,o=rn(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"unserialize",value:function(e){return new i(qt.unserialize(e.date.value),Ft.unserialize(e.time.value))}},{key:"create",value:function(e,t){return new i(e,t)}}],(n=[{key:"initialize",value:function(e,t){if(!(e instanceof qt&&t instanceof Ft))throw new Error("Incorrect object arguments");this.day=e,this.time=t}},{key:"getDay",value:function(){return this.day}},{key:"getTime",value:function(){return this.time}},{key:"getDateTime",value:function(){var e=this.day.getDateTime();return e&&(e.setHours(this.time.getHour()),e.setMinutes(this.time.getMinute()),e.setSeconds(this.time.getSecond())),e}},{key:"getJsonValue",value:function(){return{$JSNType:"dayAndTime",value:{date:this.day.getJsonValue(),time:this.time.getJsonValue()}}}},{key:"clone",value:function(){return new i(this.day.clone(),this.time.clone())}}])&&tn(t.prototype,n),r&&tn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function un(e){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(e)}function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==un(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==un(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===un(i)?i:String(i)),r)}var o,i}function cn(e,t){return cn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cn(e,t)}function sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fn(e);if(t){var o=fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===un(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function fn(e){return fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fn(e)}var pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cn(e,t)}(i,e);var t,n,r,o=sn(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"canDecode",value:function(e){return"dayAndTime"===e}},{key:"decode",value:function(e){return an.unserialize(e)}}])&&ln(t.prototype,n),r&&ln(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(be);n(74819),n(38880);function dn(e){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(e)}function yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==dn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==dn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===dn(i)?i:String(i)),r)}var o,i}function hn(e,t){return hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hn(e,t)}function vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bn(e);if(t){var o=bn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bn(e){return bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bn(e)}var mn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hn(e,t)}(i,e);var t,n,r,o=vn(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(){this.revisionNumber=0,this.dataSourceId=++i.count}},{key:"getDataHashCode",value:function(){return this.dataSourceId+"-"+this.getRevisionNumber()}},{key:"getRevisionNumber",value:function(){return this.revisionNumber}},{key:"forceChange",value:function(){var e=new U({partial:!1});this.dispatchChange(e)}},{key:"dispatchChange",value:function(e){++this.revisionNumber,this.dispatchEvent("change",e)}}])&&yn(t.prototype,n),r&&yn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function gn(e){return gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(e)}function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==gn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==gn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===gn(i)?i:String(i)),r)}var o,i}function wn(){return wn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},wn.apply(this,arguments)}function Sn(e,t){return Sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sn(e,t)}function On(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pn(e);if(t){var o=Pn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===gn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Pn(e){return Pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pn(e)}mn.count=0,L.get("DEBUG_MODE")&&(mn.prototype.getExtraInfoToLog=function(){var e=this;return{data:function(){return tinkerman.log(e.get())}}});var En=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sn(e,t)}(i,e);var t,n,r,o=On(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"fromPromise",value:function(e){var t=new i(null,!0);return e.then((function(e){t.set(e),t.setIsBusy(!1)})),t}}],(n=[{key:"initialize",value:function(e,t){wn(Pn(i.prototype),"initialize",this).call(this),this.data=e,this.busy=!!t}},{key:"get",value:function(){return this.data}},{key:"setIsBusy",value:function(e){this.busy!=e&&(this.busy=e,this.dispatchEvent("busystatechange"))}},{key:"isBusy",value:function(){return this.busy}},{key:"set",value:function(e,t){if(this.data=e,!this.busy){var n=new U({partial:!1});t||this.dispatchChange(n)}}},{key:"isEmpty",value:function(){return 0==this.data.length}},{key:"remove",value:function(e,t,n){var r=Ke.sloppyIndexOf(this.data,e);if(-1!==r&&(this.data.splice(r,1),this.set(this.data,t),!n)){var o=new U({partial:!0,oldItem:e,oldItemIndex:r});this.dispatchEvent("remove",o)}}},{key:"append",value:function(e){this.insert(e)}},{key:"appendMany",value:function(e,t){Array.prototype.push.apply(this.data,e);var n=new U({partial:!0,newItems:e});if(this.dispatchEvent("appendmany",n),!t){var r=new U({partial:!0,newItems:e});this.dispatchChange(r)}}},{key:"prepend",value:function(e){this.insert(e,0)}},{key:"insert",value:function(e,t){"number"==typeof t&&t>=0&&t<=this.data.length?this.data.splice(t,0,e):this.data.push(e);var n=new U({partial:!0,newItem:e,atIndex:t});this.dispatchEvent("append",n);var r=new U({partial:!0,newItem:e});this.dispatchChange(r)}},{key:"addDependencyOf",value:function(e){}},{key:"removeDependencyOf",value:function(e){}}])&&_n(t.prototype,n),r&&_n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(mn);function kn(e){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kn(e)}function jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==kn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==kn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===kn(i)?i:String(i)),r)}var o,i}function Tn(e,t){return Tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tn(e,t)}function Fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=In(e);if(t){var o=In(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===kn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function In(e){return In=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},In(e)}var Rn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tn(e,t)}(i,e);var t,n,r,o=Fn(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"canDecode",value:function(e){return"LocalDataSource"===e}},{key:"decode",value:function(e,t){return En.New(t.decodeTypes(e))}}])&&jn(t.prototype,n),r&&jn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(be);function Cn(e){return Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn(e)}function Dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Cn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Cn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Cn(i)?i:String(i)),r)}var o,i}function xn(e,t){return xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xn(e,t)}function An(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ln(e);if(t){var o=Ln(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Cn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ln(e){return Ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ln(e)}var Nn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xn(e,t)}(i,e);var t,n,r,o=An(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"canDecode",value:function(e){return"time"===e}},{key:"decode",value:function(e){return Ft.unserialize(e)}}])&&Dn(t.prototype,n),r&&Dn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(be);function Mn(e){return Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn(e)}function Vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Mn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Mn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Mn(i)?i:String(i)),r)}var o,i}var Bn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"registerDefaultCodecs",value:function(){de.addCodec(new Ut),de.addCodec(new Xt),de.addCodec(new pn),de.addCodec(new Rn),de.addCodec(new Nn)}}],(n=null)&&Vn(t.prototype,n),r&&Vn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Un=["TIN","e","jscore","module","harp","UI","lang"];for(var Wn=window,Yn=0;Yn<Un.length;++Yn)Wn[Un[Yn]]||(Wn[Un[Yn]]={}),Wn=Wn[Un[Yn]];Wn.en_US||(Wn.en_US={}),Wn.en_US.ServerStatus={text:{loginRequired:"%27Login%20required%27",sessionExpired:"%27Your%20session%20has%20expired%27",sorryWeAreUnderMaintenance:"%27Avature%20is%20under%20maintenance.%27",unableToReachTheServer:"%27Unable%20to%20reach%20Avature.%20Please%20check%20your%20internet%20connection..%27"}};const Qn=function(e,t,n){return L.get("currentLanguage").translate("TIN.e.jscore.module.harp.UI.ServerStatus",e,t,n)},Hn=Qn;function zn(e){return zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn(e)}function qn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==zn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===zn(i)?i:String(i)),r)}var o,i}function Gn(e,t,n){return t&&Jn(e.prototype,t),n&&Jn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kn(e,t)}function Kn(e,t){return Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kn(e,t)}function $n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xn(e);if(t){var o=Xn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===zn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Xn(e){return Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xn(e)}var er=function(e){Zn(n,e);var t=$n(n);function n(){return qn(this,n),t.apply(this,arguments)}return Gn(n,[{key:"initialize",value:function(e,t,n){this.errorCode=e,this.reportCode=t,this.callDescription=n}},{key:"getTechnicalDescription",value:function(){return this.callDescription+" exception: "+this.errorCode+(this.reportCode?" (reportCode: "+this.reportCode+")":"")}},{key:"getErrorCode",value:function(){return this.errorCode}},{key:"getReportCode",value:function(){return this.reportCode}}]),n}(z);function tr(e){return tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr(e)}function nr(){return nr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},nr.apply(this,arguments)}function rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==tr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==tr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===tr(i)?i:String(i)),r)}var o,i}function ir(e,t,n){return t&&or(e.prototype,t),n&&or(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ar(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ur(e,t)}function ur(e,t){return ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ur(e,t)}function lr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cr(e);if(t){var o=cr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===tr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function cr(e){return cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cr(e)}var sr=function(e){ar(n,e);var t=lr(n);function n(){return rr(this,n),t.apply(this,arguments)}return ir(n,[{key:"initialize",value:function(){this.setAsOnline()}},{key:"assertValidCode",value:function(e){if(-1==["online","invalidPageSession","routerLoginRequired","offline","serverDisabled","buildingPacks","otherUserLogged"].indexOf(e))throw new Error("Invalid status code")}},{key:"setAsServerDisabled",value:function(){this._set("serverDisabled")}},{key:"setAsBuildingPacks",value:function(){this._set("buildingPacks")}},{key:"setAsOnline",value:function(){this._set("online")}},{key:"setAsOffline",value:function(){this._set("offline")}},{key:"setAsUserLess",value:function(){this._set("routerLoginRequired")}},{key:"setAsOtherUserLogged",value:function(){this._set("otherUserLogged")}},{key:"mustPollForOnline",value:function(){return this.isOffline()||this.isServerDisabled()||this.isBuildingPacks()}},{key:"setAsPageSessionLess",value:function(){this._set("invalidPageSession")}},{key:"_set",value:function(e){if(e!=this.code){this.assertValidCode(e);var t=this.mustPollForOnline();this.code=e,this.isOffline()?this.dispatchEvent("offline"):this.isOnline()?this.dispatchEvent("online"):this.isUserLess()?this.dispatchEvent("userless"):this.isPageSessionLess()&&this.dispatchEvent("pagesessionless"),this.isOnline()||this.dispatchEvent("notonline"),!t&&this.mustPollForOnline()&&this.dispatchEvent("pollrequired"),t&&!this.mustPollForOnline()&&this.dispatchEvent("pollrequiredend")}}},{key:"createRemoteException",value:function(e){if(this.isOffline())return new hr("offline",e);if(this.isServerDisabled()||this.isBuildingPacks())return new vr(e);if(this.isUserLess())return new dr(e);if(this.isPageSessionLess())return new pr(e);if(this.isOtherUserLogged())return new yr(e);throw new Error("No RemoteException for "+this.code)}},{key:"isOffline",value:function(){return"offline"==this.code}},{key:"isOnline",value:function(){return"online"==this.code}},{key:"isUserLess",value:function(){return"routerLoginRequired"==this.code}},{key:"isOtherUserLogged",value:function(){return"otherUserLogged"==this.code}},{key:"isPageSessionLess",value:function(){return"invalidPageSession"==this.code}},{key:"isServerDisabled",value:function(){return"serverDisabled"==this.code}},{key:"isBuildingPacks",value:function(){return"buildingPacks"==this.code}},{key:"isPageSessionLessOrUserLess",value:function(){return this.isPageSessionLess()||this.isUserLess()}}]),n}(z),fr=function(e){ar(n,e);var t=lr(n);function n(){return rr(this,n),t.apply(this,arguments)}return ir(n,[{key:"initialize",value:function(e,t){nr(cr(n.prototype),"initialize",this).call(this,e,null,t)}}]),n}(er),pr=function(e){ar(n,e);var t=lr(n);function n(){return rr(this,n),t.apply(this,arguments)}return ir(n,[{key:"initialize",value:function(e){nr(cr(n.prototype),"initialize",this).call(this,"invalidPageSession",e)}},{key:"getDescription",value:function(){return Hn("sessionExpired")}}]),n}(fr),dr=function(e){ar(n,e);var t=lr(n);function n(){return rr(this,n),t.apply(this,arguments)}return ir(n,[{key:"initialize",value:function(e){nr(cr(n.prototype),"initialize",this).call(this,"routerLoginRequired",e)}},{key:"getDescription",value:function(){return Hn("loginRequired")}}]),n}(fr),yr=function(e){ar(n,e);var t=lr(n);function n(){return rr(this,n),t.apply(this,arguments)}return ir(n,[{key:"initialize",value:function(e){nr(cr(n.prototype),"initialize",this).call(this,"otherUserLogged",e)}},{key:"getDescription",value:function(){return Hn("loginRequired")}}]),n}(fr),hr=function(e){ar(n,e);var t=lr(n);function n(){return rr(this,n),t.apply(this,arguments)}return ir(n,[{key:"getDescription",value:function(){return Hn("unableToReachTheServer")}}]),n}(fr),vr=function(e){ar(n,e);var t=lr(n);function n(){return rr(this,n),t.apply(this,arguments)}return ir(n,[{key:"initialize",value:function(e){nr(cr(n.prototype),"initialize",this).call(this,"serverDisabled",e)}},{key:"getDescription",value:function(){return Hn("sorryWeAreUnderMaintenance")}}]),n}(fr);const br=["TIN","e","jscore","module","harp","UI","lang"];for(var mr=window,gr=0;gr<br.length;++gr)mr[br[gr]]||(mr[br[gr]]={}),mr=mr[br[gr]];mr.en_US||(mr.en_US={}),mr.en_US.RequestLoadHandler={text:{connectivityProblemsYouMayNeedToRefresh:"%27There%20were%20connectivity%20problems.%20You%20may%20need%20to%20refresh.%27"}};const _r=function(e,t,n){return L.get("currentLanguage").translate("TIN.e.jscore.module.harp.UI.RequestLoadHandler",e,t,n)},wr=_r,Sr=["TIN","e","jscore","module","harp","UI","lang"];for(var Or=window,Pr=0;Pr<Sr.length;++Pr)Or[Sr[Pr]]||(Or[Sr[Pr]]={}),Or=Or[Sr[Pr]];Or.en_US||(Or.en_US={}),Or.en_US.RemoteExceptionDecoder={text:{loginRequired:"%27Login%20required%27",oopsThereWasAnError:"%27Oops%2C%20there%20was%20an%20error%21%20Please%20contact%20your%20admin.%27",actionTakingTooLongContact:"%27This%20action%20is%20taking%20too%20long.%20Please%20contact%20Technical%20Support%27"}};const Er=function(e,t,n){return L.get("currentLanguage").translate("TIN.e.jscore.module.harp.UI.RemoteExceptionDecoder",e,t,n)},kr={translate:Er};function jr(e){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jr(e)}function Tr(){return Tr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ar(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Tr.apply(this,arguments)}function Fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==jr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===jr(i)?i:String(i)),r)}var o,i}function Rr(e,t,n){return t&&Ir(e.prototype,t),n&&Ir(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dr(e,t)}function Dr(e,t){return Dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dr(e,t)}function xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ar(e);if(t){var o=Ar(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===jr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ar(e){return Ar=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ar(e)}var Lr=function(e){Cr(n,e);var t=xr(n);function n(){return Fr(this,n),t.apply(this,arguments)}return Rr(n,[{key:"create",value:function(e,t){var r=t.errorCode;if("loginRequired"==r)return new Nr(e);if("exception"==r)return new Mr(t.reportCode,e);if(r in n.remoteExceptionClassByCode)return new n.remoteExceptionClassByCode[r](t.reportCode,e,t.extraData);throw new Error("Unknown remote exception: "+r)}}],[{key:"remoteExceptionClassWithCallback",value:function(e,t,r){var o=e.substr(0,1).toUpperCase()+e.substr(1);r?kr.Class(o,ICO_harp_RemoteException_Translated):kr.Class(o,er);var i=kr[o];i.prototype.initialize=function(t,n,r){this.extraData=r,er.prototype.initialize.call(this,e,t,n)},i.prototype.getDescription=t,n.remoteExceptionClassByCode[e]=i}},{key:"registerTranslatedClass",value:function(e,t){n.remoteExceptionClassWithCallback(e,(function(){return t||this.extraData}),!0)}}]),n}(z);Lr.remoteExceptionClassByCode={};var Nr=function(e){Cr(n,e);var t=xr(n);function n(){return Fr(this,n),t.apply(this,arguments)}return Rr(n,[{key:"initialize",value:function(e){Tr(Ar(n.prototype),"initialize",this).call(this,"loginRequired",null,e)}},{key:"getDescription",value:function(){return kr.translate("loginRequired")}}]),n}(er),Mr=function(e){Cr(n,e);var t=xr(n);function n(){return Fr(this,n),t.apply(this,arguments)}return Rr(n,[{key:"initialize",value:function(e,t){Tr(Ar(n.prototype),"initialize",this).call(this,"exception",e,t)}},{key:"getDescription",value:function(){return kr.translate("oopsThereWasAnError")}}]),n}(er),Vr=function(e){Cr(n,e);var t=xr(n);function n(){return Fr(this,n),t.apply(this,arguments)}return Rr(n,[{key:"initialize",value:function(e){Tr(Ar(n.prototype),"initialize",this).call(this,"exception",null,e)}},{key:"getDescription",value:function(){return kr.translate("actionTakingTooLongContact")}}]),n}(er);function Br(e){return Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Br(e)}function Ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Br(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Br(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Br(i)?i:String(i)),r)}var o,i}function Yr(e,t,n){return t&&Wr(e.prototype,t),n&&Wr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hr(e,t)}function Hr(e,t){return Hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hr(e,t)}function zr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qr(e);if(t){var o=qr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Br(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function qr(e){return qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qr(e)}var Jr=function(e){Qr(n,e);var t=zr(n);function n(){return Ur(this,n),t.apply(this,arguments)}return Yr(n,[{key:"initialize",value:function(){this.callbacks=[],this.delayer=new Gr(this.caller("onDelay")),this.busy=!1}},{key:"isBusy",value:function(){return this.busy}},{key:"_checkBusy",value:function(){var e=this.callbacks.length>0;this.busy!=e&&(this.busy=e,this.dispatchEvent("busystatechange"))}},{key:"callLater",value:function(e){this.scheduled||(this.scheduled=!0,this.delayer.schedule()),this.callbacks.push(e),this._checkBusy()}},{key:"onDelay",value:function(){this.scheduled=!1;var e=this.callbacks;this.callbacks=[];for(var t=0;t<e.length;++t)try{e[t]()}catch(e){L.get("defaultErrorHandler").handleCatchedException(e)}this._checkBusy()}}],[{key:"getInstance",value:function(){return n.instance||(n.instance=new n),n.instance}},{key:"delay",value:function(e){n.getInstance().callLater(e)}}]),n}(z),Gr=function(e){Qr(n,e);var t=zr(n);function n(){return Ur(this,n),t.apply(this,arguments)}return Yr(n,[{key:"initialize",value:function(e){this.div=document.createElement("div"),this.current=!0,new MutationObserver(e).observe(this.div,{attributes:!0})}},{key:"schedule",value:function(){this.div.setAttribute("class",this.current),this.current=!this.current}}]),n}(z);function Zr(e){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(e)}function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Zr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Zr(i)?i:String(i)),r)}var o,i}function $r(e,t){return $r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$r(e,t)}function Xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=eo(e);if(t){var o=eo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Zr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function eo(e){return eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},eo(e)}var to=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$r(e,t)}(i,e);var t,n,r,o=Xr(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e){this.ignoredRequestErrorsDueToStartingToUnload=!1,this.serverStatus=e,L.get("browserWindow").addListener("beforeunloadtimeout",this.caller("onBeforeUnloadTimeout")),L.get("browserWindow").addListener("beforeunload",this.caller("onBeforeUnload"))}},{key:"handleGroupedResponse",value:function(e,t,n,r){L.get("browserWindow").isUnloading()||(n.isError()?this.onRequestError(t,n):this.onRequestLoad(e,t,n,r))}},{key:"onBeforeUnloadTimeout",value:function(){this.ignoredRequestErrorsDueToStartingToUnload&&(L.get("page").info(wr("connectivityProblemsYouMayNeedToRefresh")),this.ignoredRequestErrorsDueToStartingToUnload=!1),this.startingToUnload=!1}},{key:"onBeforeUnload",value:function(){this.startingToUnload=!0}},{key:"_updateServerStatus",value:function(e){if("routerLoginRequired"==e)this.serverStatus.setAsUserLess();else if("invalidPageSession"==e)this.serverStatus.setAsPageSessionLess();else if("serverDisabled"==e)this.serverStatus.setAsServerDisabled();else if("buildingPacks"==e)this.serverStatus.setAsBuildingPacks();else{if("otherUserLogged"!=e)throw new Error("invalidStatusCode");this.serverStatus.setAsOtherUserLogged()}}},{key:"onRequestLoad",value:function(e,t,n,r){var o,i=n.get(),a=L.get("serverCredentials");if(i.cortex&&a.getCortex()!=i.cortex&&a.setCortex(i.cortex),i.error){var u=i.msg;if(!Ke.hasElement(["invalidVersion","serverDisabled","buildingPacks","invalidPageSession","routerLoginRequired","otherUserLogged","invalidPublicSessionName","timeout","tooManyConnections"],u))throw new Error("unknownServerError: "+u);if("invalidVersion"==u){var l=At.now(),c=sessionStorage.getItem("lastInvalidVersionReloadDate");return c&&l.getTime()-parseInt(c,10)<6e4?void(window.top.location.href="_unrecoverableError"):(sessionStorage.setItem("lastInvalidVersionReloadDate",l.getTime()),void L.get("browserWindow").reload())}"timeout"==u||"tooManyConnections"==u?o=null:"invalidPublicSessionName"==u?(a.setPublicSessionName(i.publicSessionName),o=null,r.resend()):("routerLoginRequired"!=u&&"otherUserLogged"!=u||$.getInstance().handleRequireLogin("otherUserLogged"==u),this._updateServerStatus(u),o=this.serverStatus.createRemoteException("requestContentError"),$.getInstance().handleRemoteException(o))}else try{t.handleResponse(e,i.msg)}catch(e){if("routerError"!=e.message)throw e;o=new Mr(e.reportCode,"requestContentError"),$.getInstance().handleRemoteException(o)}o&&t.handleRequestError(o)}},{key:"onRequestError",value:function(e,t){t.isBadGateway()&&Jr.delay((function(){L.get("defaultErrorHandler").reportAsException("badGatewayWhileCalling:\n"+e.getDescription())}));var n=!1,r=t.getErrorCode();if(t.isAvatureTimeout())var o=new Vr("requestError");else o=new hr(r,"requestError"),n=!0;if(this.startingToUnload)this.ignoredRequestErrorsDueToStartingToUnload=!0;else if(!t.isAbort()){var i=this.serverStatus.isOffline();n&&this.serverStatus.setAsOffline(),!e.getMustIndicateErrors()&&i||$.getInstance().handleRemoteException(o)}e.handleRequestError(o)}}])&&Kr(t.prototype,n),r&&Kr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);const no=["TIN","e","jscore","module","harp","UI","lang"];for(var ro=window,oo=0;oo<no.length;++oo)ro[no[oo]]||(ro[no[oo]]={}),ro=ro[no[oo]];ro.en_US||(ro.en_US={}),ro.en_US.PageSessionFrequencyValidator={text:{connectivityProblems:"%27Connectivity%20problems%27"}};const io=function(e,t,n){return L.get("currentLanguage").translate("TIN.e.jscore.module.harp.UI.PageSessionFrequencyValidator",e,t,n)},ao=io;function uo(e){return uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uo(e)}function lo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==uo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==uo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===uo(i)?i:String(i)),r)}var o,i}function co(e,t){return co=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},co(e,t)}function so(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fo(e);if(t){var o=fo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===uo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function fo(e){return fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fo(e)}var po=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&co(e,t)}(i,e);var t,n,r,o=so(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(){this.lastPageSessionDates=[]}},{key:"appendDate",value:function(e){this.lastPageSessionDates.push(e)}},{key:"removeOldDates",value:function(e){for(var t=[],n=0;n<this.lastPageSessionDates.length;++n){var r=this.lastPageSessionDates[n];e-r<3e4&&t.push(r)}this.lastPageSessionDates=t}},{key:"assertNotTooManyPageSessionRenews",value:function(e){function t(e){return Math.round(e/100)/10+"s"}if(this.lastPageSessionDates.length>=10)throw L.get("page").info(ao("connectivityProblems")),new Error("Too many pagesessionrenews ("+this.lastPageSessionDates.length+") in "+t(e-this.lastPageSessionDates[0])+" (message dismissed after "+t(At.now()-e)+")")}}],n&&lo(t.prototype,n),r&&lo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function yo(e){return yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yo(e)}function ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==yo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==yo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===yo(i)?i:String(i)),r)}var o,i}function vo(e,t){return vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vo(e,t)}function bo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mo(e);if(t){var o=mo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===yo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function mo(e){return mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mo(e)}var go=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vo(e,t)}(i,e);var t,n,r,o=bo(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n){this.apiCall=e,this.onload=t,this.onerror=n}},{key:"getMessageToSendAndHandleSend",value:function(){return this.apiCall.getMessageToSend()}},{key:"handleLoad",value:function(e){var t=new U({response:e,error:!1});this.dispatchEvent("beforeload",t),this.onload&&this.onload(e)}},{key:"getApiCall",value:function(){return this.apiCall}},{key:"getCallDescription",value:function(){return this.apiCall.getDescription()}},{key:"handleError",value:function(e){var t=new U({response:e,error:!0});this.dispatchEvent("beforeload",t),this.onerror&&this.onerror(e)||$.getInstance().handleRemoteException(e)}},{key:"handle",value:function(e,t,n){var r=this;this.apiCall.handleResponse(e,t,this.caller("handleLoad"),(function(e){r.handleError(n.create(r.getCallDescription(),e))}))}}])&&ho(t.prototype,n),r&&ho(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function _o(e){return _o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_o(e)}function wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==_o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===_o(i)?i:String(i)),r)}var o,i}function So(){return So="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Eo(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},So.apply(this,arguments)}function Oo(e,t){return Oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oo(e,t)}function Po(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Eo(e);if(t){var o=Eo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===_o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Eo(e){return Eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Eo(e)}L.get("DEBUG_MODE")&&(go.prototype.openInEditor=function(){this.apiCall.openInEditor()},go.prototype.getTypeName=function(){return"API:"+this.apiCall.getDescription()},go.prototype.getExtraInfoToLog=function(){var e=this;return{php:function(){return e.apiCall.logPhpCodeToTinkerman()},resend:function(){return e.apiCall.createDataSource()}}});var ko=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oo(e,t)}(i,e);var t,n,r,o=Po(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e){So(Eo(i.prototype),"initialize",this).call(this),this.waitingForLogin=!1,this.waitingForOnline=!1,this.actionCall=e,this.busy=!0,this.fetchDuration=null,this.sendStartTime=null,L.get("server").isOnline()?this._fetchData():this._addOnlineListener()}},{key:"getFetchDuration",value:function(){return this.fetchDuration}},{key:"isBusy",value:function(){return this.busy}},{key:"get",value:function(){return this.data}},{key:"_fetchData",value:function(){this.sendStartTime=At.now(),L.get("server").execCall(this.actionCall,this.caller("onDataReceive"),this.caller("onError"))}},{key:"_addLoginListener",value:function(){if(this.waitingForLogin)throw new Error("Already waiting for login");this.waitingForLogin=!0,L.get("page").addListener("userchange",this.caller("onLoginAfterLoginRequired"))}},{key:"onLoginAfterLoginRequired",value:function(){this._removeLoginListener(),this._fetchData()}},{key:"_removeLoginListener",value:function(){L.get("page").removeListener("userchange",this.caller("onLoginAfterLoginRequired")),this.waitingForLogin=!1}},{key:"_addOnlineListener",value:function(){if(this.waitingForOnline)throw new Error("Already waiting for online");this.waitingForOnline=!0,L.get("server").addListener("online",this.caller("onServerOnlineAfterOfflineError"))}},{key:"onServerOnlineAfterOfflineError",value:function(){this._removeOnlineListener(),this._fetchData()}},{key:"_removeOnlineListener",value:function(){L.get("server").removeListener("online",this.caller("onServerOnlineAfterOfflineError")),this.waitingForOnline=!1}},{key:"updateDatasourceProperty",value:function(e,t){this.data[e]=t}},{key:"onError",value:function(e){if(!this.Deleted){if(e instanceof ICO_harp_ServerStatus_ConnectivityProblem)return this._addOnlineListener(),!0;if(e instanceof ICO_harp_RemoteExceptionDecoder_LoginRequired)return this._addLoginListener(),!0;var t=new U({error:e});return this.dispatchEvent("error",t),t.getDefaultPrevented()}}},{key:"onDataReceive",value:function(e){this.Deleted||(this.data=e,this.fetchDuration=At.now()-this.sendStartTime,this.dispatchEvent("receive"),this.busy=!1,this.dispatchEvent("busystatechange"))}},{key:"uninit",value:function(){this.waitingForLogin&&this._removeLoginListener(),this.waitingForOnline&&this._removeOnlineListener()}}])&&wo(t.prototype,n),r&&wo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(mn);function jo(e){return jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jo(e)}function To(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==jo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==jo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===jo(i)?i:String(i)),r)}var o,i}function Fo(e,t){return Fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fo(e,t)}function Io(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ro(e);if(t){var o=Ro(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===jo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ro(e){return Ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ro(e)}var Co=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fo(e,t)}(i,e);var t,n,r,o=Io(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e){this.id=e}},{key:"getId",value:function(){return this.id}},{key:"get",value:function(){return this.data}},{key:"getError",value:function(){return this.error}},{key:"setError",value:function(e){this.errorSet=!0,this.error=e;var t=new U({data:e});this.dispatchEvent("error",t)}},{key:"set",value:function(e){this.valueSet=!0,this.data=e;var t=new U({data:e});this.dispatchEvent("load",t)}}])&&To(t.prototype,n),r&&To(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Do(e){return Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Do(e)}function xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Do(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Do(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Do(i)?i:String(i)),r)}var o,i}function Ao(e,t){return Ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ao(e,t)}function Lo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=No(e);if(t){var o=No(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Do(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function No(e){return No=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},No(e)}var Mo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ao(e,t)}(i,e);var t,n,r,o=Lo(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n){this.className=e,this.method=t,this.params=n||[]}},{key:"createDataSource",value:function(){return new ko(this)}},{key:"getParams",value:function(){return this.params}},{key:"getServerClassName",value:function(){return this.className}},{key:"getTypeLetter",value:function(){return"S"}},{key:"_getMethodNameToSend",value:function(){return"addListener"==this.method?"0":"removeListener"==this.method?"1":"get"==this.method?"2":"getDataAndProps"==this.method?"3":this.method}},{key:"getMessageToSend",value:function(){return[this.getTypeLetter()+this.className+"."+this._getMethodNameToSend(),this.params]}},{key:"getDescriptionPrefix",value:function(){return""}},{key:"getDescription",value:function(){return this.getDescriptionPrefix()+this.className+"."+this.method}},{key:"handleResponse",value:function(e,t,n,r){var o=e.msg;if(e.error)r(o);else{var i=this.getInnerValue(o);o instanceof Co?this._handleMsgAsDelayedResponse(o,t,n,r):i instanceof Co?this._handleInnerValueAsDelayedResponse(o,i,t,n,r):n(o)}}},{key:"getInnerValue",value:function(e){return e}},{key:"replaceInnerValue",value:function(e,t){return t}},{key:"_handleMsgAsDelayedResponse",value:function(e,t,n,r){e.addListener("load",(function(e){n(e.data)})),e.addListener("error",(function(e){r(e.data)})),t.registerDelayedResponse(e)}},{key:"_handleInnerValueAsDelayedResponse",value:function(e,t,n,r,o){var i=this;t.addListener("load",(function(t){r(i.replaceInnerValue(e,t.data))})),t.addListener("error",(function(e){o(e.data)})),n.registerDelayedResponse(t)}}])&&xo(t.prototype,n),r&&xo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);L.get("DEBUG_MODE")&&(Mo.prototype.openInEditor=function(){ICO_harp_EditorOpener.openRouterApi(this.className,this.method)},Mo.prototype.getPhpClassName=function(){var e,t;"ICO_"===this.className.substr(0,4)?(e=this.className.substr(0,4),t=this.className.substr(4)):(e="",t=this.className);var n=t.indexOf("_");return"M_"+e+t.substr(0,n)+"_API_"+t.substr(n+1)},Mo.prototype.getPhpParam=function(e,t){return ICO_harp_PhpSerializer.serialize(this.params[e],t?1:0)},Mo.prototype.getPhpParams=function(e){for(var t="",n=0;n<this.params.length;++n)e&&(t+="    "),t+=this.getPhpParam(n,e),n<this.params.length-1&&(t+=","),e&&(t+="\n");return"("+(t&&e?"\n"+t:t)+")"},Mo.prototype.getAsPhpCode=function(){var e="$obj",t=e+" = new "+this.getPhpClassName()+"();\n";return this.getPropertiesAsPhpCode&&(t+=this.getPropertiesAsPhpCode(e)),t+=e+"->"+this.method+this.getPhpParams(this.params.length>1)+";"},Mo.prototype.logPhpCodeToTinkerman=function(){tinkerman.append(tinkerman.createElement("span",{},this.getAsPhpCode().replace(/ /g," ").split("\n").map((function(e){return tinkerman.createElement("div",{},[e])}))))});const Vo=["TIN","e","jscore","module","harp","UI","lang"];for(var Bo=window,Uo=0;Uo<Vo.length;++Uo)Bo[Vo[Uo]]||(Bo[Vo[Uo]]={}),Bo=Bo[Vo[Uo]];Bo.en_US||(Bo.en_US={}),Bo.en_US.PageSessionRequester={text:{connectivityProblemsWillReload:"%27connectivity%20problems%2C%20the%20application%20will%20reload%20to%20try%20to%20reconnect.%27"}};const Wo=function(e,t,n){return L.get("currentLanguage").translate("TIN.e.jscore.module.harp.UI.PageSessionRequester",e,t,n)},Yo=Wo;n(72443),n(39341),n(73706),n(10408),n(65069);function Qo(e){return Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qo(e)}function Ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Qo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Qo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Qo(i)?i:String(i)),r)}var o,i}var zo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getResponseText",value:function(){return null}},{key:"getResponse",value:function(){return null}},{key:"getResponseXML",value:function(){return null}},{key:"getStatus",value:function(){return null}},{key:"isRetryableError",value:function(){return!1}},{key:"isError",value:function(){return!0}},{key:"isAbort",value:function(){return!0}},{key:"isAvatureTimeout",value:function(){return!1}},{key:"getErrorCode",value:function(){return"abortedRequest"}},{key:"getErrorDescription",value:function(){return"Request has been aborted"}}])&&Ho(t.prototype,n),r&&Ho(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qo(e){return qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(e)}function Jo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==qo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===qo(i)?i:String(i)),r)}var o,i}function Go(e,t){return Go=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Go(e,t)}function Zo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ko(e);if(t){var o=Ko(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===qo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ko(e){return Ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ko(e)}var $o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Go(e,t)}(i,e);var t,n,r,o=Zo(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n){this.responseType=n,this.response=e,this.text=t,this.status=this._getResponseStatus(e),this.statusText=this._getResponseStatusText(e)}},{key:"_getResponseStatus",value:function(e){try{return e.status}catch(e){return null}}},{key:"_getResponseStatusText",value:function(e){try{return e.statusText}catch(e){return"__NONE__"}}},{key:"getResponse",value:function(){return this.response}},{key:"getResponseText",value:function(){return this.text}},{key:"getResponseLength",value:function(){return 280+this._getContentAsString().length}},{key:"getStatus",value:function(){return this.status}},{key:"isAbort",value:function(){return!1}},{key:"isRetryableError",value:function(){return 400==this.status}},{key:"isError",value:function(){return 200!=this.status}},{key:"isAvatureTimeout",value:function(){return this.isError()&&504==this.status&&(/Avature Timeout/.test(this.responseText)||/504 Gateway Time-out/.test(this.responseText))}},{key:"getErrorCode",value:function(){if(this.isError()){var e="string"==typeof this.responseText?this.responseText.substr(0,10):"";return"errorStatusReadingResponse/"+this.status+"/"+this.statusText+"/"+e}return null}},{key:"getErrorDescription",value:function(){return this.isError()?"Error status reading response: "+this.status:null}},{key:"_hasResponseText",value:function(){return!this.responseType||"text"===this.responseType}},{key:"_getContentAsString",value:function(){var e="",t=TIN_start_GlobalConfig.get("richJson");return this._hasResponseText()?e=this.getResponseText()||"":("document"===this.responseType&&this.getResponseText()&&(e=(new XMLSerializer).serializeToString(this.getResponseText())),"json"===this.responseType&&this.getResponseText()&&(e=t.serialize(this.getResponseText()))),e}}])&&Jo(t.prototype,n),r&&Jo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Xo(e){return Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xo(e)}function ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ti(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ni(){ni=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),u=new E(o||[]);return r(a,"_invoke",{value:w(e,n,u)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function d(){}function y(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(h=b);var m=y.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(r,i,a,u){var l=s(e[r],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==Xo(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return o("throw",e,a,u)}))}u(l.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return j()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=y,r(m,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),l(m,u,"Generator"),l(m,i,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function ri(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function oi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ii(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Xo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Xo(i)?i:String(i)),r)}var o,i}function ai(e,t,n){return t&&ii(e.prototype,t),n&&ii(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ui(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&li(e,t)}function li(e,t){return li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},li(e,t)}function ci(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=si(e);if(t){var o=si(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Xo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function si(e){return si=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},si(e)}var fi=function(e){ui(o,e);var t,n,r=ci(o);function o(){return oi(this,o),r.apply(this,arguments)}return ai(o,[{key:"initialize",value:function(e,t){this.method=e,this.url=t,this.sent=!1,this.aborted=!1,this.headers={}}},{key:"setContentType",value:function(e){if(this.sent)throw new Error("Request already sent");this.contentType=e}},{key:"setResponseType",value:function(e){if(this.sent)throw new Error("Request already sent");this.responseType=e}},{key:"setHeader",value:function(e,t){this.headers[e]=t}},{key:"send",value:function(e,t){var n=this;if(this.sent)throw new Error("Request already sent");var r=L.get("defaultErrorHandler");this.sent=!0,this.callback=t,this.abortController=new AbortController;var i=this.headers,a=L.get("serverCredentials").getForceError();return a&&(i["X-Avature-Force-Error"]=a),this.contentType&&(i["Content-Type"]=this.contentType),L.get("DEBUG_MODE")&&o.charsOutMonitor.add(580+(e?e.length:0)),this.request=fetch(this.url,{method:this.method,headers:i,body:e,signal:this.abortController.signal}).then(r.wrapHandlingErrors(this.caller("_handleResponse"))).then(r.wrapHandlingErrors(this.caller("_handleResponseText"))).catch((function(e){n.aborted||(n._handleResponseText([null,Response.error()]),navigator.onLine&&(n._isExpectedNetwrokError(e)?$.getInstance().log(e.stack):r.handleCatchedException(e)))}))}},{key:"_handleResponse",value:(t=ni().mark((function e(t){var n,r,o;return ni().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}return e.abrupt("return",Promise.resolve([null,t]));case 2:return e.next=4,t.text();case 4:return n=e.sent,"document"===this.responseType&&(r=new DOMParser,o=t.headers.get("content-type")?t.headers.get("content-type").split(";")[0]:"text/xml",n=r.parseFromString(n,o)),e.abrupt("return",[n,t]);case 7:case"end":return e.stop()}}),e,this)})),n=function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){ri(i,r,o,a,u,"next",e)}function u(e){ri(i,r,o,a,u,"throw",e)}a(void 0)}))},function(e){return n.apply(this,arguments)})},{key:"_handleResponseText",value:function(e){if(!this.aborted&&this.callback){var t=ei(e,2),n=t[0],r=t[1],i=new $o(r,n,this.responseType);L.get("DEBUG_MODE")&&o.charsInMonitor.add(i.getResponseLength()),this.callback(i)}}},{key:"abort",value:function(){if(!this.sent)throw new Error("Attempt to abort unsent request");if(this.aborted)throw new Error("Already aborted");this.aborted=!0,this.abortController.abort(),this.callback(new zo)}},{key:"_isExpectedNetwrokError",value:function(e){var t="Load failed"===e.message&&"TypeError"===e.name&&!e.stack;return"Failed to fetch"===e.message||-1!==e.message.indexOf("NetworkError")||t}}]),o}(z),pi=function(e){ui(n,e);var t=ci(n);function n(){return oi(this,n),t.apply(this,arguments)}return ai(n,[{key:"initialize",value:function(){this.quantity=0}},{key:"reset",value:function(){this.quantity=0,this.dispatchEvent("change")}},{key:"get",value:function(){return this.quantity}},{key:"add",value:function(e){this.quantity+=e,this.dispatchEvent("change")}}]),n}(z);function di(e){return di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},di(e)}function yi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==di(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==di(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===di(i)?i:String(i)),r)}var o,i}function hi(e,t){return hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hi(e,t)}function vi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bi(e);if(t){var o=bi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===di(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bi(e){return bi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bi(e)}fi.charsInMonitor=new pi,fi.charsOutMonitor=new pi;var mi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hi(e,t)}(i,e);var t,n,r,o=vi(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"setRetryTimeout",value:function(e){i.retryTimeout=e}}],(n=[{key:"initialize",value:function(e,t){this.method=e,this.url=t,this.sent=!1,this.contentType=null,this.retries=0,this.maxRetries=3}},{key:"attemptToSend",value:function(){this.serverRequest=new fi(this.method,this.url),this.serverRequest.setContentType(this.contentType),this.retries==this.maxRetries&&this.serverRequest.setHeader("X-Avature-Last-Retry","yes"),this.serverRequest.send(this.data,this.caller("onRequestLoad"))}},{key:"send",value:function(e,t){if(this.sent)throw new Error("Request already sent");this.sent=!0,this.data=e,this.callback=t,this.attemptToSend()}},{key:"setContentType",value:function(e){this.contentType=e}},{key:"abort",value:function(){this.serverRequest.abort()}},{key:"onRequestLoad",value:function(e){e.isRetryableError()&&this.retries<this.maxRetries?(++this.retries,timeoutManager.set(this.caller("attemptToSend"),i.retryTimeout)):this.callback&&this.callback(e)}}])&&yi(t.prototype,n),r&&yi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function gi(e){return gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gi(e)}function _i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==gi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==gi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===gi(i)?i:String(i)),r)}var o,i}function wi(e,t){return wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wi(e,t)}function Si(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oi(e);if(t){var o=Oi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===gi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Oi(e){return Oi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oi(e)}mi.retryTimeout=1e3;var Pi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wi(e,t)}(i,e);var t,n,r,o=Si(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t){this.requestResponse=e,this.onReadyCallback=t;var n=L.get("richJson");if(this.requestResponse.isError())this._setResponse(!1,!1,null);else{var r=this.requestResponse.getResponseText();if(r)try{n.unserializeWithModelSupport(r,this.caller("onUnserializeComplete"))}catch(e){if(!1===e.message.startsWith(de.INVALID_JSON))throw e;this.invalidResponse=r,this._setResponse(!0,!1,null)}else this._setResponse(!0,!0,null)}}},{key:"_setResponse",value:function(e,t,n){this.emptyResponse=t,this.error=e,this.response=n,this.onReadyCallback(this)}},{key:"onUnserializeComplete",value:function(e){this._setResponse(!1,!1,e)}},{key:"isEmpty",value:function(){return null==this.response}},{key:"getErrorCode",value:function(){return this.requestResponse.isError()?this.requestResponse.getErrorCode():this.emptyResponse?"emptyResponse":this.error?"jsonResponseParseError":null}},{key:"getErrorDescription",value:function(){return this.requestResponse.isError()?this.requestResponse.getErrorDescription():this.emptyResponse?"Error parsing JSON response: emptyResponse":this.error?"Error parsing JSON response: "+this.invalidResponse:null}},{key:"isAvatureTimeout",value:function(){return this.requestResponse.isAvatureTimeout()}},{key:"isBadGateway",value:function(){return 502==this.requestResponse.getStatus()}},{key:"isError",value:function(){return this.error||this.requestResponse.isError()}},{key:"isAbort",value:function(){return this.requestResponse.isAbort()}},{key:"get",value:function(){return this.response}}])&&_i(t.prototype,n),r&&_i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Ei(e){return Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ei(e)}function ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ei(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ei(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ei(i)?i:String(i)),r)}var o,i}function ji(e,t){return ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ji(e,t)}function Ti(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fi(e);if(t){var o=Fi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ei(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fi(e){return Fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fi(e)}var Ii=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ji(e,t)}(i,e);var t,n,r,o=Ti(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"isAvailable",value:function(){var e=L.get("richJson");return e&&e.serialize}}],(n=[{key:"initialize",value:function(e){this.serverRequest=e,this.serverRequest.setContentType("text/javascript")}},{key:"abort",value:function(){this.serverRequest.abort()}},{key:"send",value:function(e,t){this.callback=t,e=L.get("richJson").serialize(e),this.serverRequest.send(e,this.callback?this.caller("onLoad"):null)}},{key:"onLoad",value:function(e){new Pi(e,this.callback)}}])&&ki(t.prototype,n),r&&ki(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Ri(e){return Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ri(e)}function Ci(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ri(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ri(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ri(i)?i:String(i)),r)}var o,i}function Di(e,t){return Di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Di(e,t)}function xi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ai(e);if(t){var o=Ai(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ri(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ai(e){return Ai=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ai(e)}var Li=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Di(e,t)}(i,e);var t,n,r,o=xi(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e){this.callback=e;var t=L.get("serverCredentials"),n=new mi("POST","/_createPageSession?applicationCode="+t.getApplicationCode()+"&version="+t.getPacksVersion());this.request=new Ii(n)}},{key:"send",value:function(){$.getInstance().log("Requesting new page session");var e={m:[],p:L.get("serverCredentials").getPublicSessionName(),t:null};this.request.send(e,this.caller("onLoad"))}},{key:"onLoad",value:function(e){if(e.isError()||e.isEmpty())$.getInstance().log("Page session request failed"),L.get("page").info(Yo("connectivityProblemsWillReload"));else{var t=e.get().tabId,n=e.get().cortex;$.getInstance().log("Page session request success: "+t),this.callback(t,n)}}}])&&Ci(t.prototype,n),r&&Ci(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);n(32564);function Ni(e){return Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ni(e)}function Mi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ni(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ni(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ni(i)?i:String(i)),r)}var o,i}function Bi(e,t,n){return t&&Vi(e.prototype,t),n&&Vi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ui(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wi(e,t)}function Wi(e,t){return Wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wi(e,t)}function Yi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qi(e);if(t){var o=Qi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ni(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Qi(e){return Qi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qi(e)}var Hi=function(e){Ui(n,e);var t=Yi(n);function n(){return Mi(this,n),t.apply(this,arguments)}return Bi(n,[{key:"initialize",value:function(){this.delayedResponses={},this.unexpectedAnswers={}}},{key:"add",value:function(e){var t=e.getId(),n=this.unexpectedAnswers[t];if(n)this._clearUnexpectedAnswer(t),this._run(e,n.getMsgAndClearTimeout());else{var r=this.isBusy();this.delayedResponses[t]=e,r||this.dispatchEvent("busystatechange")}}},{key:"_run",value:function(e,t){t.error?e.setError(t.data):e.set(t.data)}},{key:"onUnexpectedAnswerTimeout",value:function(e){this._clearUnexpectedAnswer(e.sourceWidget.getId())}},{key:"_clearUnexpectedAnswer",value:function(e){delete this.unexpectedAnswers[e]}},{key:"exec",value:function(e){var t=e.id,n=this.delayedResponses[t];if(n)this._run(n,e),delete this.delayedResponses[t],this.isBusy()||this.dispatchEvent("busystatechange");else{if(this.unexpectedAnswers[t])throw new Error("duplicateResponseInAdvance: "+t);this.unexpectedAnswers[t]=Peg(new zi(e),{ontimeout:this.caller("onUnexpectedAnswerTimeout")})}}},{key:"isBusy",value:function(){for(var e in this.delayedResponses)return!0;return!1}}]),n}(z),zi=function(e){Ui(n,e);var t=Yi(n);function n(){return Mi(this,n),t.apply(this,arguments)}return Bi(n,[{key:"initialize",value:function(e){this.msg=e,this.timeout=setTimeout(this.caller("onTimeout"),12e4)}},{key:"getId",value:function(){return this.msg.id}},{key:"onTimeout",value:function(){throw this.dispatchEvent("timeout"),new Error("delayedAnswerWithoutQuestion: "+this.getId()+" "+p.describeValue(this.msg))}},{key:"getMsgAndClearTimeout",value:function(){return clearTimeout(this.timeout),this.msg}}]),n}(z);function qi(e){return qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qi(e)}function Ji(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==qi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===qi(i)?i:String(i)),r)}var o,i}function Gi(e,t){return Gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gi(e,t)}function Zi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ki(e);if(t){var o=Ki(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===qi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ki(e){return Ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ki(e)}var $i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gi(e,t)}(i,e);var t,n,r,o=Zi(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(){this.requestId=at.generateRandCode(7)}},{key:"getRequestId",value:function(){return this.requestId}}])&&Ji(t.prototype,n),r&&Ji(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Xi(e){return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xi(e)}function ea(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Xi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Xi(i)?i:String(i)),r)}var o,i}function ta(){return ta="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oa(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ta.apply(this,arguments)}function na(e,t){return na=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},na(e,t)}function ra(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oa(e);if(t){var o=oa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Xi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function oa(e){return oa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oa(e)}var ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&na(e,t)}(i,e);var t,n,r,o=ra(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e,t){ta(oa(i.prototype),"initialize",this).call(this),this.invocations=e,this.dontIndicateErrors=t,this.handledActionsByNumber={}}},{key:"mustRetryOnNetworkErrors",value:function(){return!0}},{key:"getMustIndicateErrors",value:function(){return!this.dontIndicateErrors}},{key:"getDescription",value:function(){for(var e="",t=0;t<this.invocations.length;++t)e+=this.invocations[t].getCallDescription()+"\n";return e}},{key:"getRequestPath",value:function(){return"synapserCall/"+L.get("serverCredentials").getCortex()}},{key:"getMessageToSendAndHandleSend",value:function(){for(var e=[],t=0;t<this.invocations.length;++t)e.push(this.invocations[t].getMessageToSendAndHandleSend());return e}},{key:"handleResponse",value:function(e,t){var n=this,r=[];if(t)for(var o=0;o<t.length;++o)r.push(this._handleIndividualResponse(e,t[o]));var i=r.filter((function(e){return e instanceof Promise}));Promise.all(i).then((function(){n.dispatchEvent("load",new U({response:t}))}))}},{key:"_createExceptionDecoder",value:function(){return new Lr}},{key:"_handleIndividualResponse",value:function(e,t){var n=this._createExceptionDecoder();if(void 0!==t.actionNumber)this.invocations[t.actionNumber].handle(t,e,n),this.handledActionsByNumber[t.actionNumber]=1;else{if("event"!=t.type){if("routerError"==t.type){var r=new Error("routerError");throw r.reportCode=t.reportCode,r}throw new Error("unknownResponseType")}if(!t.error)return e.handleEvent(t);e.handleEventError(n.create("Event",t.msg))}}},{key:"hasInvocations",value:function(){return this.invocations.length>0}},{key:"handleRequestError",value:function(e){for(var t=0;t<this.invocations.length;++t)this.handledActionsByNumber[t]||this.invocations[t].handleError(e);this.dispatchEvent("error",new U({remoteException:e}))}},{key:"getInvocations",value:function(){return this.invocations}}],n&&ea(t.prototype,n),r&&ea(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}($i);function aa(e){return aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aa(e)}function ua(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==aa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==aa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===aa(i)?i:String(i)),r)}var o,i}function la(e,t){return la=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},la(e,t)}function ca(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sa(e);if(t){var o=sa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===aa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function sa(e){return sa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sa(e)}var fa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&la(e,t)}(i,e);var t,n,r,o=ca(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e){this.messageSender=e,this.timeout=null,this.request=null,this.lastConnectWasAnError=!1,this.waitingForOnline=!1,this._fetch()}},{key:"_stopWaitingForOnline",value:function(){L.get("server").removeListener("online",this.caller("onOnline")),this.waitingForOnline=!1}},{key:"onOnline",value:function(){this._stopWaitingForOnline(),$.getInstance().log("Retrying permanent connection due to online"),this._fetch()}},{key:"onLoadError",value:function(e){if(!this.Deleted){var t=e.remoteException;if(!this.lastConnectWasAnError){var n="Permanent connection disconnected ("+t.getTechnicalDescription()+")";$.getInstance().log(n),L.get("userTrail").add(n),this.lastConnectWasAnError=!0}t instanceof fr?($.getInstance().log("Permanent connection request error ("+t.getTechnicalDescription()+"), waiting for online"),L.get("server").addListener("online",this.caller("onOnline")),this.waitingForOnline=!0):($.getInstance().log("Permanent connection request error ("+t.getTechnicalDescription()+"), will retry in 10000ms"),this.timeout=setTimeout(this.caller("onTimeout"),1e4))}}},{key:"onLoadOk",value:function(e){if(!this.Deleted){if(this.lastConnectWasAnError){var t="Permanent connection reconnected";$.getInstance().log(t),L.get("userTrail").add(t)}this.lastConnectWasAnError=!1;var n=At.now()-this.lastFetchDate,r=0,o=L.get("config");r=0==e.response.length&&n<o.router.minPendingMessagesDelay?o.router.minPendingMessagesDelay-n:0,this.timeout=setTimeout(this.caller("onTimeout"),r)}}},{key:"onTimeout",value:function(){this.timeout=null,this._fetch()}},{key:"_fetch",value:function(){this.lastFetchDate=At.now();var e=new ia([],!1);e.addListener("load",this.caller("onLoadOk")),e.addListener("error",this.caller("onLoadError")),this.request=this.messageSender.sendMessage(e)}},{key:"uninit",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.waitingForOnline&&this._stopWaitingForOnline()}}])&&ua(t.prototype,n),r&&ua(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function pa(e){return pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pa(e)}function da(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==pa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==pa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===pa(i)?i:String(i)),r)}var o,i}function ya(e,t){return ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ya(e,t)}function ha(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=va(e);if(t){var o=va(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===pa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function va(e){return va=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},va(e)}var ba=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ya(e,t)}(i,e);var t,n,r,o=ha(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n){this.url=e,this.pageSessionId=t,this.request=null,this.message=n}},{key:"resend",value:function(){this.request=null,this.send(this.callback)}},{key:"send",value:function(e){if(this.request)throw new Error("Already sent");this.callback=e;var t,n=L.get("serverCredentials"),r=this.url+"?applicationCode="+n.getApplicationCode()+"&version="+n.getPacksVersion();t=this.message.mustRetryOnNetworkErrors()?new mi("POST",r):new fi("POST",r),this.request=new Ii(t),this.request.send(this.getRequestStruct(),this.caller("onRequestResponse"))}},{key:"onRequestResponse",value:function(e){this.callback(this.message,e,this)}},{key:"abort",value:function(){this.request.abort()}},{key:"getRequestStruct",value:function(){var e=L.get("serverCredentials");return{m:this.message.getMessageToSendAndHandleSend(),p:e.getPublicSessionName(),t:this.pageSessionId,i:this.message.getRequestId()}}}])&&da(t.prototype,n),r&&da(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function ma(e){return ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ma(e)}function ga(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ma(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ma(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ma(i)?i:String(i)),r)}var o,i}function _a(e,t){return _a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_a(e,t)}function wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sa(e);if(t){var o=Sa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ma(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Sa(e){return Sa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sa(e)}var Oa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_a(e,t)}(i,e);var t,n,r,o=wa(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e,t){this.pageSessionId=e,this.responseReceiveCallback=t,this.currentRequests=[],this.waitingMessageCount=0,this.busy=!1}},{key:"isBusy",value:function(){return this.busy}},{key:"onRequestResponse",value:function(e,t,n){this.Deleted||(e.hasInvocations()>0&&--this.waitingMessageCount,$.getInstance().notifyExecManyResponseReceive(e,t),Ke.remove(this.currentRequests,n),this.responseReceiveCallback(e,t,n),this._dispatchBusyStateChangeIfNecessary())}},{key:"_dispatchBusyStateChangeIfNecessary",value:function(){var e=this.waitingMessageCount>0;this.busy!=e&&(this.busy=e,this.dispatchEvent("busystatechange"))}},{key:"sendMessage",value:function(e,t){e.hasInvocations()&&++this.waitingMessageCount,$.getInstance().notifyExecMany(e,t);var n=new ba(e.getRequestPath(),this.pageSessionId,e);return this.currentRequests.push(n),n.send(this.caller("onRequestResponse")),this._dispatchBusyStateChangeIfNecessary(),n}},{key:"uninit",value:function(){for(var e=this.currentRequests.slice(),t=0;t<e.length;++t)e[t].abort();delete this.responseReceiveCallback}}],n&&ga(t.prototype,n),r&&ga(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Pa(e){return Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pa(e)}function Ea(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Pa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Pa(i)?i:String(i)),r)}var o,i}function ka(){return ka="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fa(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ka.apply(this,arguments)}function ja(e,t){return ja=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ja(e,t)}function Ta(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fa(e);if(t){var o=Fa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Pa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fa(e){return Fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fa(e)}var Ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ja(e,t)}(i,e);var t,n,r,o=Ta(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n,r){ka(Fa(i.prototype),"initialize",this).call(this),this.onload=t,this.onerror=n,this.code=e,this.cortexToUse=r||TIN_start_GlobalConfig.get("serverCredentials").getCortex()}},{key:"mustRetryOnNetworkErrors",value:function(){return!1}},{key:"getMustIndicateErrors",value:function(){return!1}},{key:"getMessageToSendAndHandleSend",value:function(){return this.code}},{key:"getRequestPath",value:function(){return"synapserCall/"+this.cortexToUse}},{key:"handleResponse",value:function(e,t){this.onload(t)}},{key:"hasInvocations",value:function(){return!1}},{key:"handleRequestError",value:function(e){this.onerror()}},{key:"getDescription",value:function(){return"ICO.harp.SynapserMessage. Code: "+this.code}},{key:"getInvocations",value:function(){return[]}}])&&Ea(t.prototype,n),r&&Ea(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}($i);function Ra(e){return Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(e)}function Ca(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Da(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Da(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ra(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ra(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ra(i)?i:String(i)),r)}var o,i}function Aa(e,t){return Aa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Aa(e,t)}function La(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Na(e);if(t){var o=Na(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ra(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Na(e){return Na=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Na(e)}var Ma=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Aa(e,t)}(i,e);var t,n,r,o=La(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n){this.callbackQueue=[],this.invocationQueue=[],this.busy=!1,this.hasPendingTimeout=!1,this.hasPendingCallbacks=!1,this.messageSender=Peg(new Oa(e,t),{onbusystatechange:this.caller("_dispatchBusyStateChangeIfNecessary")}),n&&(this.fetcher=new fa(this.messageSender)),this.currentBundleStartTime,this.nextBundleStartTime}},{key:"callBeforeExecLater",value:function(e){this.callbackQueue.push(e),this._ensureSendRequestTimeoutPresent()}},{key:"enqueueInvocationRequest",value:function(e){this.invocationQueue.push(e),this._ensureSendRequestTimeoutPresent()}},{key:"isBusy",value:function(){return this.messageSender.isBusy()||this.invocationQueue.length>0||this.callbackQueue.length>0}},{key:"ping",value:function(e,t){return this.messageSender.sendMessage(new Ia("ping",e,t,"1"))}},{key:"processInvocationRequest",value:function(e,t){return this.messageSender.sendMessage(new ia([e],t))}},{key:"uninit",value:function(){this.Delete("messageSender"),this.fetcher&&this.Delete("fetcher")}},{key:"_dispatchBusyStateChangeIfNecessary",value:function(){if(!this.Deleted){var e=this.isBusy();this.busy!==e&&(this.busy=e,this.dispatchEvent("busystatechange"))}}},{key:"_ensureSendRequestTimeoutPresent",value:function(){this.hasPendingTimeout&&!this.hasPendingCallbacks||(this._saveBundleStartTime(performance.now()),this.hasPendingTimeout=!0,Jr.delay(this.caller("_execPending"))),this._dispatchBusyStateChangeIfNecessary()}},{key:"_execPending",value:function(){if(!this.Deleted){var e=this.callbackQueue;this.callbackQueue=[];var t=this.invocationQueue;this.invocationQueue=[],this.hasPendingCallbacks=!0;var n,r=Ca(e);try{for(r.s();!(n=r.n()).done;)(0,n.value)()}catch(e){r.e(e)}finally{r.f()}var o=performance.now()-this.currentBundleStartTime;if(t.length>0){var i=new ia(t,!1);this.messageSender.sendMessage(i,o)}this.hasPendingTimeout=!1,this.hasPendingCallbacks=!1,this._dispatchBusyStateChangeIfNecessary(),this._saveNextBundleStartTime()}}},{key:"_saveBundleStartTime",value:function(e){this.hasPendingCallbacks?this.nextBundleStartTime=e:this.currentBundleStartTime=e}},{key:"_saveNextBundleStartTime",value:function(){this.nextBundleInit&&(this.currentBundleInit=this.nextBundleInit,this.nextBundleInit=null)}}])&&xa(t.prototype,n),r&&xa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Va(e){return Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Va(e)}function Ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Va(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Va(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Va(i)?i:String(i)),r)}var o,i}function Ua(){return Ua="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qa(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ua.apply(this,arguments)}function Wa(e,t){return Wa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wa(e,t)}function Ya(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qa(e);if(t){var o=Qa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Va(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Qa(e){return Qa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qa(e)}var Ha=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wa(e,t)}(i,e);var t,n,r,o=Ya(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=Ua(Qa(i.prototype),"initialize",this)).call.apply(e,[this].concat(n)),this.config=L.get("config")}},{key:"callBeforeExecLater",value:function(e){this.callbackQueue.push(e),this._initializeInvocationHandling()}},{key:"enqueueInvocationRequest",value:function(e){this._initializeInvocationHandling(),this.invocationQueue.push(e),this._getMaxRequestPerMessageConfig()&&this.invocationQueue.length>=this._getMaxRequestPerMessageConfig()&&(this._cancelExistingDelayer(),this._cancelExistingTimeout(),this._sendInvocationBundle())}},{key:"_cancelExistingDelayer",value:function(){this.pendingBrowserDelayer&&(clearTimeout(this.pendingBrowserDelayer),this.pendingBrowserDelayer=null)}},{key:"_cancelExistingTimeout",value:function(){this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=null)}},{key:"_getMaxRequestPerMessageConfig",value:function(){return this.config.harp.control.maxRequestPerMessage}},{key:"_getMaxPreflightWaitTime",value:function(){return this.config.harp.control.maxPreflightWaitTime}},{key:"_initializeInvocationHandling",value:function(){var e=this;!this.pendingTimeout&&!this.pendingBrowserDelayer&&(0===this.invocationQueue.length||this.callbackQueue.length>0)&&(this.pendingTimeout=setTimeout((function(){e._cancelExistingDelayer(),e.pendingTimeout=null,e._sendInvocationBundle()}),this._getMaxPreflightWaitTime()),this.pendingBrowserDelayer=Jr.delay((function(){e._cancelExistingTimeout(),e.pendingBrowserDelayer=null,e._sendInvocationBundle()})))}},{key:"_sendInvocationBundle",value:function(){this._saveBundleStartTime(performance.now()),this._execPending(),this._dispatchBusyStateChangeIfNecessary()}}],n&&Ba(t.prototype,n),r&&Ba(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ma);function za(e){return za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},za(e)}function qa(e,t,n){return qa=Ka()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Ga(o,n.prototype),o},qa.apply(null,arguments)}function Ja(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==za(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==za(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===za(i)?i:String(i)),r)}var o,i}function Ga(e,t){return Ga=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ga(e,t)}function Za(e){var t=Ka();return function(){var n,r=$a(e);if(t){var o=$a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===za(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ka(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function $a(e){return $a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$a(e)}var Xa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ga(e,t)}(i,e);var t,n,r,o=Za(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(){for(var e=this._isHarpControlEnabled()?Ha:Ma,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.bundler=qa(e,n),this.bundler.addListener("busystatechange",this.dispatcher("busystatechange"))}},{key:"callBeforeExecLater",value:function(e){this.bundler.callBeforeExecLater(e)}},{key:"exec",value:function(e,t,n){if(t)return this.bundler.processInvocationRequest(e,n);this.bundler.enqueueInvocationRequest(e)}},{key:"isBusy",value:function(){return this.bundler.isBusy()}},{key:"ping",value:function(e,t){return this.bundler.ping(e,t)}},{key:"uninit",value:function(){this.bundler.uninit(),this.Delete("bundler")}},{key:"_isHarpControlEnabled",value:function(){var e=L.get("config");return e.harp&&e.harp.control&&e.harp.control.enabled}}],n&&Ja(t.prototype,n),r&&Ja(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function eu(e){return eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eu(e)}function tu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==eu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===eu(i)?i:String(i)),r)}var o,i}function ru(e,t,n){return t&&nu(e.prototype,t),n&&nu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ou(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iu(e,t)}function iu(e,t){return iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},iu(e,t)}function au(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=uu(e);if(t){var o=uu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===eu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function uu(e){return uu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},uu(e)}var lu=function(e){ou(n,e);var t=au(n);function n(){return tu(this,n),t.apply(this,arguments)}return ru(n,null,[{key:"callWhenReady",value:function(e,t,n){for(var r=new cu(n),o=0;o<e.length;++o)r.add(e[o].getBusyMonitor?e[o].getBusyMonitor():e[o]);if(r.isBusy()){return r.addListener("busystatechange",(function e(){r.removeListener("busystatechange",e),t(),Delete(r)})),r}return Delete(r),t(),null}}]),n}(z),cu=function(e){ou(n,e);var t=au(n);function n(){return tu(this,n),t.apply(this,arguments)}return ru(n,[{key:"initialize",value:function(e){this.objectsToMonitor=[],this.busy=this.isBusy(),this.mustNotify=e}},{key:"checkForBusyStateChange",value:function(){var e=this.isBusy();e!=this.busy&&(this.busy=e,this.dispatchEvent("busystatechange"))}},{key:"onChildBusyStateChange",value:function(){this.checkForBusyStateChange()}},{key:"add",value:function(e){if(L.get("ENABLE_UI_VALIDATION")&&-1!==Ke.sloppyIndexOf(this.objectsToMonitor,e))throw new Error("Object is already being monitored");this.objectsToMonitor.push(e),this.mustNotify&&e.notifyWaiting&&e.notifyWaiting(),e.addListener("busystatechange",this.caller("onChildBusyStateChange")),this.checkForBusyStateChange()}},{key:"remove",value:function(e,t){Ke.remove(this.objectsToMonitor,e)?(e.removeListener("busystatechange",this.caller("onChildBusyStateChange")),t||this.checkForBusyStateChange()):L.get("defaultErrorHandler").reportAsException("Cannot remove an Object that is not in monitor: "+e)}},{key:"isBusy",value:function(){for(var e=0;e<this.objectsToMonitor.length;++e)if(this.objectsToMonitor[e].isBusy())return!0;return!1}},{key:"uninit",value:function(){for(var e=this.objectsToMonitor.length-1;e>=0;--e)this.remove(this.objectsToMonitor[e],!0)}}]),n}(z);function su(e){return su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},su(e)}function fu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==su(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==su(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===su(i)?i:String(i)),r)}var o,i}function pu(){return pu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},pu.apply(this,arguments)}function du(e,t){return du=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},du(e,t)}function yu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hu(e);if(t){var o=hu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===su(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function hu(e){return hu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hu(e)}var vu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&du(e,t)}(i,e);var t,n,r,o=yu(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n,r,o){pu(hu(i.prototype),"initialize",this).call(this),this.pageSession=e,this.listenerNumber=t,this.className=n,this.eventName=r,this.callback=o,this.removing=!1,this.removed=!1;var a=void 0;this.response=a,this.errorResponse=a,this.parentObject=null}},{key:"getDescription",value:function(){return this.className+"-"+this.eventName+"#"+this.listenerNumber}},{key:"handleEvent",value:function(e){this.callback(e),this.dispatchEvent("eventreceive")}},{key:"handleEventError",value:function(e){var t=new U({response:e,error:!0});this.dispatchEvent("beforeload",t),this.onerror&&this.onerror(e)||$.getInstance().handleRemoteException(e)}},{key:"setAsRemoved",value:function(){this.removed||(this.removed=!0,this.removing=!1,this.dispatchEvent("remove"))}},{key:"_assertRemovable",value:function(){if(this.removed)throw new Error("cannot remove already-removed listener");if(this.removing)throw new Error("cannot remove already-scheduled to be removed listener")}},{key:"removeNow",value:function(){this._assertRemovable(),this.pageSession.removeRemoteListenerNow(this)}},{key:"removeLater",value:function(){this._assertRemovable(),this.removing=!0,this.pageSession.removeRemoteListenerLater(this)}},{key:"getEventName",value:function(){return this.eventName}},{key:"getServerClassName",value:function(){return this.className}},{key:"getListenerNumber",value:function(){return this.listenerNumber}},{key:"cancelRemove",value:function(){this.removing=!1,this.pageSession.cancelRemoveRemoteListener(this)}},{key:"isValid",value:function(){return!this.removed}},{key:"isRemoving",value:function(){return this.removing}},{key:"getResponse",value:function(){return this.response}},{key:"getErrorResponse",value:function(){return this.errorResponse}},{key:"setResponse",value:function(e){this.response=e,this.dispatchEvent("responsereceive")}},{key:"setErrorResponse",value:function(e){this.errorResponse=e,this.dispatchEvent("error")}},{key:"setParentObject",value:function(e){this.parentObject=e}},{key:"getParentObject",value:function(){return this.parentObject}}])&&fu(t.prototype,n),r&&fu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);vu.prototype.dontGuessNamesList=["pageSession"];n(49337),n(33321);function bu(e){return bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bu(e)}function mu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==bu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==bu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===bu(i)?i:String(i)),r)}var o,i}var gu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createCaller",value:function(e,t,n){return function(){if(e[t])return e[t].apply(e,n);if(L.get("ENABLE_UI_VALIDATION"))throw new Error("MethodDoesNotExists: Couldn't find method "+t+" in "+e)}}},{key:"shallowCloneMap",value:function(e){var t={};if(!e||"object"!=bu(e))return t;if(e.clone)return e.clone();if(e.classRef)return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e));var n=Object.keys(e).reduce((function(t,n){return t[n]=Object.getOwnPropertyDescriptor(e,n),t}),{});return Object.getOwnPropertySymbols(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);r.enumerable&&(n[t]=r)})),Object.defineProperties(t,n),t}},{key:"merge",value:function(e,t){for(var n in t)e[n]=t[n];return e}},{key:"clone",value:function(t,n,r){if(r=r||"",n&&new RegExp(n).test(r))return t;if(t&&t.clone)return t.clone();if(!t||"object"!=bu(t))return t;var o;if(t instanceof Date)o=new Date(t.getTime());else if(Array.isArray(t))o=t.map((function(t,o){return e.clone(t,n,r+"."+o)}));else if(t.classRef)o=Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t));else for(var i in o={},t)o[i]=e.clone(t[i],n,r+"."+i);return o}},{key:"clean",value:function(e){for(var t in e)null!==e[t]&&void 0!==e[t]||delete e[t];return e}},{key:"hasMethod",value:function(e,t){return!(!e||"function"!=typeof e[t])}}],(n=null)&&mu(t.prototype,n),r&&mu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _u(e){return _u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_u(e)}function wu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==_u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===_u(i)?i:String(i)),r)}var o,i}function Su(){return Su="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Eu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Su.apply(this,arguments)}function Ou(e,t){return Ou=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ou(e,t)}function Pu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Eu(e);if(t){var o=Eu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===_u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Eu(e){return Eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Eu(e)}var ku=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ou(e,t)}(i,e);var t,n,r,o=Pu(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t){Su(Eu(i.prototype),"initialize",this).call(this,e,"getDataAndProps",[]),this.instanceProperties=t||{}}},{key:"getTypeLetter",value:function(){return"R"}},{key:"getMessageToSend",value:function(){var e=Mo.prototype.getMessageToSend.call(this);return e.push(this.instanceProperties),e}},{key:"getDescriptionPrefix",value:function(){return"remoteview:"}}])&&wu(t.prototype,n),r&&wu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Mo);function ju(e){return ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ju(e)}function Tu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ju(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ju(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ju(i)?i:String(i)),r)}var o,i}function Fu(){return Fu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Fu.apply(this,arguments)}function Iu(e,t){return Iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Iu(e,t)}function Ru(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Cu(e);if(t){var o=Cu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ju(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Cu(e){return Cu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cu(e)}L.get("DEBUG_MODE")&&(ku.prototype.getPropertiesAsPhpCode=function(e){var t="";for(var n in this.instanceProperties)t+=e+"->"+n+" = "+ICO_harp_PhpSerializer.serialize(this.instanceProperties[n],0)+";\n";return t});var Du=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iu(e,t)}(i,e);var t,n,r,o=Ru(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n,r){Fu(Cu(i.prototype),"initialize",this).call(this,e,t,n),this.instanceProperties=r||{}}},{key:"getInstanceProperties",value:function(){return this.instanceProperties}},{key:"updateDatasourceProperty",value:function(e,t){this.instanceProperties[e]=t}},{key:"getTypeLetter",value:function(){return"O"}},{key:"getMessageToSend",value:function(){var e=Mo.prototype.getMessageToSend.call(this);return e.push(this.instanceProperties),e}},{key:"getDescriptionPrefix",value:function(){return"staticview:"}},{key:"getInnerValue",value:function(e){return e.msg}},{key:"replaceInnerValue",value:function(e,t){return e.msg=t,e}}])&&Tu(t.prototype,n),r&&Tu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Mo);L.get("DEBUG_MODE")&&(Du.prototype.getPropertiesAsPhpCode=function(e){var t="";for(var n in this.instanceProperties)t+=e+"->"+n+" = "+ICO_harp_PhpSerializer.serialize(this.instanceProperties[n],0)+";\n";return t});n(5212);function xu(e){return xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xu(e)}function Au(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==xu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===xu(i)?i:String(i)),r)}var o,i}function Lu(e,t){return Lu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lu(e,t)}function Nu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mu(e);if(t){var o=Mu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===xu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Mu(e){return Mu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mu(e)}var Vu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lu(e,t)}(i,e);var t,n,r,o=Nu(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e){this.cleanupTimeout=null,this.monitor=e,this.active=this.monitor.get(),this.monitor.addListener("change",this.caller("onMonitorChange"))}},{key:"isBusy",value:function(){return!1}},{key:"get",value:function(){return this.active}},{key:"_startInactiveTimeout",value:function(){if(this.cleanupTimeout)throw new Error("cleanup timeout already started");var e=TIN_start_GlobalConfig.get("config");this.cleanupTimeout=setTimeout(this.caller("onInactiveTimeout"),e.WebsiteSettings.liveQueryCleanupTimeout)}},{key:"_cancelInactiveTimeout",value:function(){clearTimeout(this.cleanupTimeout),this.cleanupTimeout=null}},{key:"hurryUp",value:function(){this.cleanupTimeout&&(this._cancelInactiveTimeout(),this.onInactiveTimeout())}},{key:"onInactiveTimeout",value:function(){if(this.cleanupTimeout=null,!this.active)throw new Error("unexpected timeout reached");this.active=!1,this.dispatchEvent("change")}},{key:"onMonitorChange",value:function(){this.monitor.get()?(this.cleanupTimeout&&this._cancelInactiveTimeout(),this.active=!0,this.dispatchEvent("change")):this._startInactiveTimeout()}}])&&Au(t.prototype,n),r&&Au(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Bu(e){return Bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bu(e)}function Uu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Bu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Bu(i)?i:String(i)),r)}var o,i}function Wu(){return Wu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hu(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Wu.apply(this,arguments)}function Yu(e,t){return Yu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yu(e,t)}function Qu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Hu(e);if(t){var o=Hu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Hu(e){return Hu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hu(e)}var zu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yu(e,t)}(i,e);var t,n,r,o=Qu(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e,t){if(Wu(Hu(i.prototype),"initialize",this).call(this),this.dataSources=e,this.combineCallback=t,!Array.isArray(e))throw new Error("dataSources must be an array");this.busy=!0,this._someDataSourceIsBusy()?lu.callWhenReady(e,this.caller("onDataSourcesReady")):this.onDataSourcesReady()}},{key:"uninit",value:function(){for(var e=0;e<this.dataSources.length;++e)this.busy||this.dataSources[e].removeListener("change",this.caller("onDataSourceChange"));this.dataSources=[]}},{key:"notifyWaiting",value:function(){for(var e=0;e<this.dataSources.length;++e)this.dataSources[e].notifyWaiting&&this.dataSources[e].notifyWaiting()}},{key:"_someDataSourceIsBusy",value:function(){for(var e=0;e<this.dataSources.length;++e)if(this.dataSources[e].isBusy())return!0;return!1}},{key:"onDataSourcesReady",value:function(){this.busy=!1,this.data=this._calculateData();for(var e=0;e<this.dataSources.length;++e)this.dataSources[e].addListener("change",this.caller("onDataSourceChange"));this.dispatchEvent("busystatechange")}},{key:"onDataSourceChange",value:function(e){if(!this.busy){var t=this.data;this.data=this._calculateData(),this.data!=t&&this.dispatchChange()}}},{key:"isBusy",value:function(){return this.busy}},{key:"get",value:function(){return this.data}},{key:"isEmpty",value:function(){return 0==this.data.length}},{key:"_calculateData",value:function(){for(var e=[],t=0;t<this.dataSources.length;++t)e.push(this.dataSources[t].get());return this.combineCallback(e)}},{key:"removeDependencyOf",value:function(e){for(var t=0;t<this.dataSources.length;++t)this.dataSources[t].removeDependencyOf&&this.dataSources[t].removeDependencyOf(e)}},{key:"addDependencyOf",value:function(e){for(var t=0;t<this.dataSources.length;++t)this.dataSources[t].addDependencyOf&&this.dataSources[t].addDependencyOf(e)}}],n&&Uu(t.prototype,n),r&&Uu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(mn);function qu(e){return qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qu(e)}function Ju(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==qu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===qu(i)?i:String(i)),r)}var o,i}function Gu(){return Gu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$u(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Gu.apply(this,arguments)}function Zu(e,t){return Zu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zu(e,t)}function Ku(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$u(e);if(t){var o=$u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===qu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $u(e){return $u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$u(e)}L.get("DEBUG_MODE")&&(zu.prototype.getDomNodesToHighlight=function(){for(var e=[],t=0;t<this.dataSources.length;++t)this.dataSources[t].getDomNodesToHighlight&&(e=e.concat(this.dataSources[t].getDomNodesToHighlight()));return e});var Xu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zu(e,t)}(i,e);var t,n,r,o=Ku(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e){Gu($u(i.prototype),"initialize",this).call(this,e,this.caller("combineValues"))}},{key:"combineValues",value:function(e){for(var t=0;t<e.length;++t)if(e[t])return!0;return!1}}],n&&Ju(t.prototype,n),r&&Ju(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(zu);function el(e){return el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},el(e)}function tl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==el(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==el(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===el(i)?i:String(i)),r)}var o,i}function nl(e,t){return nl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nl(e,t)}function rl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ol(e);if(t){var o=ol(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===el(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ol(e){return ol=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ol(e)}var il=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nl(e,t)}(i,e);var t,n,r,o=rl(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(){this.childWidgets=[],this.active=!1}},{key:"isBusy",value:function(){return!1}},{key:"onChildWidgetsChange",value:function(){this.childWidgets.length>0?this.addIdlenessListener():this.removeIdlenessListener(),this.dispatchEvent("domnodestohighlightchange"),this.updateIsActive()}},{key:"calculateIsActive",value:function(){return this.childWidgets.length>0&&"xidle"!=L.get("browserWindow").getUserIdleness()}},{key:"updateIsActive",value:function(){var e=this.calculateIsActive();e!=this.active&&(this.active=e,this.dispatchEvent("change"))}},{key:"get",value:function(){return this.active}},{key:"addIdlenessListener",value:function(){this.userIdleChangelistenerWasAdded||(L.get("browserWindow").addListener("useridlechange",this.caller("updateIsActive")),this.userIdleChangelistenerWasAdded=!0)}},{key:"removeIdlenessListener",value:function(){this.userIdleChangelistenerWasAdded&&(L.get("browserWindow").removeListener("useridlechange",this.caller("updateIsActive")),this.userIdleChangelistenerWasAdded=!1)}},{key:"add",value:function(e){this.childWidgets.push(e),this.onChildWidgetsChange()}},{key:"remove",value:function(e){if(!Ke.remove(this.childWidgets,e))throw new Error("widgetWasNotBeingWatched");this.onChildWidgetsChange()}},{key:"uninit",value:function(){this.childWidgets.length>0&&this.removeIdlenessListener()}},{key:"getDomNodesToHighlight",value:function(){for(var e=[],t=0;t<this.childWidgets.length;++t)if(this.childWidgets[t].getDomNode){var n=this.childWidgets[t].getDomNode();n&&e.push(n)}return e}}],n&&tl(t.prototype,n),r&&tl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function al(e){return al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},al(e)}function ul(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==al(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==al(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===al(i)?i:String(i)),r)}var o,i}function ll(){return ll="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ll.apply(this,arguments)}function cl(e,t){return cl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cl(e,t)}function sl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fl(e);if(t){var o=fl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===al(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function fl(e){return fl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fl(e)}var pl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cl(e,t)}(i,e);var t,n,r,o=sl(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t){if(ll(fl(i.prototype),"initialize",this).call(this,null,!0),this.actionCall=e,this.sendingRemote=null,this.fetchDuration=null,this.activeMonitor=Peg(new Vu(new Xu([this.widgetsActiveMonitor=new il,this.mustLoadOnceDataSource=new En(!0)])),{onchange:this.caller("onActiveMonitorChange")}),t)this._addRemoteListener(t.listenerNumber,t.addListenerOutput),this.onDataReceive(t.data);else{if(!this.activeMonitor.get())throw new Error("activeMonitorShouldStartActive");this._fetchAndStartListeningIfNecessary()}}},{key:"getActiveMonitorToHurryUp",value:function(){return this.activeMonitor}},{key:"getFetchDuration",value:function(){return this.fetchDuration}},{key:"onActiveMonitorChange",value:function(){this.activeMonitor.get()?this._fetchAndStartListeningIfNecessary():this._stopListening()}},{key:"_deleteRemoteListenerIfPresent",value:function(){this.remoteListener&&(this.remoteListener.removeListener("remove",this.caller("onRemoteListenerRemove")),this.remoteListener.setParentObject(null),this.Delete("remoteListener"))}},{key:"_addRemoteListener",value:function(e,t){this._deleteRemoteListenerIfPresent(),this.remoteListener=TIN_start_GlobalConfig.get("server").addRemoteListener(this.actionCall.getServerClassName(),"change",this.caller("onDataReceive"),null,null,!0,!1,e),this.remoteListener.setResponse(t),this.remoteListener.setParentObject(this),this.remoteListener.addListener("remove",this.caller("onRemoteListenerRemove"))}},{key:"onRemoteListenerRemove",value:function(){this._deleteRemoteListenerIfPresent(),this.activeMonitor.get()?this._fetchAndStartListeningIfNecessary():this.dispatchEvent("expire")}},{key:"onError",value:function(e){this.sendingRemote=null,this._stopListening(),this.dispatchEvent("error",e)}},{key:"onDataReceive",value:function(e){if(this.set(e),this.mustLoadOnceDataSource.set(!1),!this.isBusy()){var t=this._isPotentialUnneededCallback();t&&ICO_harp_Logger.getInstance().notifyPotentialUnneededCallback(t,this.actionCall)}this.setIsBusy(!1)}},{key:"_isPotentialUnneededCallback",value:function(){var e={};return this.remoteListener||(e.noRemoteListener=1),"xidle"===TIN_start_GlobalConfig.get("browserWindow").getUserIdleness()&&(e.tabIsIdle=1),this.hadDependencies&&this.widgetsActiveMonitor&&0===this.widgetsActiveMonitor.childWidgets.length&&(e.notInDom=1),"hidden"===document.visibilityState&&(e.tabNotVisible=1),!!Object.values(e).some((function(e){return e}))&&e}},{key:"_fetchAndStartListeningIfNecessary",value:function(){this.sendingRemote||(this.remoteListener?this.remoteListener.isRemoving()&&this.remoteListener.cancelRemove():this.sendingRemote=Peg(new ko(this.actionCall),{onreceive:this.caller("onGetDataAndStartListeningReceive"),onerror:this.caller("onError")}))}},{key:"_stopListening",value:function(){this.remoteListener&&!this.remoteListener.isRemoving()&&this.remoteListener.removeLater()}},{key:"addDependencyOf",value:function(e){this.hadDependencies=!0,this.widgetsActiveMonitor.add(e)}},{key:"removeDependencyOf",value:function(e){this.widgetsActiveMonitor.remove(e)}},{key:"uninit",value:function(){this._stopListening(),this.remoteListener&&this._deleteRemoteListenerIfPresent(),this.Delete("widgetsActiveMonitor")}},{key:"onGetDataAndStartListeningReceive",value:function(){var e=this.sendingRemote.get();this.fetchDuration=this.sendingRemote.getFetchDuration(),this.Delete("sendingRemote"),this._addRemoteListener(e[1],e[2]),this.onDataReceive(e[0])}},{key:"getApiCall",value:function(){return this.actionCall}},{key:"getDomNodesToHighlight",value:function(){return this.widgetsActiveMonitor.getDomNodesToHighlight()}}])&&ul(t.prototype,n),r&&ul(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(En);function dl(e){return dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dl(e)}function yl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==dl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==dl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===dl(i)?i:String(i)),r)}var o,i}function hl(){return hl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ml(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},hl.apply(this,arguments)}function vl(e,t){return vl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vl(e,t)}function bl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ml(e);if(t){var o=ml(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ml(e){return ml=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ml(e)}pl.prototype.dontGuessNamesList=["activeMonitor","widgetsActiveMonitor"];var gl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vl(e,t)}(i,e);var t,n,r,o=bl(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n,r,o,a){hl(ml(i.prototype),"initialize",this).call(this,e,t,n,r),this.filter=o,this.noCache=a}},{key:"getTypeLetter",value:function(){return"L"}},{key:"getDescriptionPrefix",value:function(){var e="liveview:";return this.noCache&&(e+="nocache:"),e}},{key:"createDataSource",value:function(){return new pl(this)}},{key:"getMessageToSend",value:function(){var e=Du.prototype.getMessageToSend.call(this);return e.push(this.filter),this.noCache&&e.push("nocache"),e}},{key:"getInnerValue",value:function(e){return e[0]}},{key:"replaceInnerValue",value:function(e,t){return e[0]=t,e}}])&&yl(t.prototype,n),r&&yl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Du);function _l(e){return _l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_l(e)}function wl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==_l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===_l(i)?i:String(i)),r)}var o,i}function Sl(e,t){return Sl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sl(e,t)}function Ol(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pl(e);if(t){var o=Pl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===_l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Pl(e){return Pl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pl(e)}var El=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sl(e,t)}(i,e);var t,n,r,o=Ol(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e){this.busy=!!e}},{key:"isBusy",value:function(){return this.busy}},{key:"setIsBusy",value:function(e){this.busy!=e&&(this.busy=e,this.dispatchEvent("busystatechange"))}},{key:"setAsFree",value:function(){this.setIsBusy(!1)}},{key:"setAsBusy",value:function(){this.setIsBusy(!0)}}])&&wl(t.prototype,n),r&&wl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function kl(e){return kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kl(e)}function jl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==kl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==kl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===kl(i)?i:String(i)),r)}var o,i}function Tl(e,t){return Tl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tl(e,t)}function Fl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Il(e);if(t){var o=Il(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===kl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Il(e){return Il=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Il(e)}var Rl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tl(e,t)}(i,e);var t,n,r,o=Fl(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(){this.value=null,this.setAsActive()}},{key:"get",value:function(){return this.value}},{key:"isBusy",value:function(){return!1}},{key:"_clearTimeoutIfPresent",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}},{key:"_setTimeoutReplacing",value:function(e,t){this._clearTimeoutIfPresent();var n=this;this.timeout=setTimeout((function(){n.timeout=null,e()}),t)}},{key:"_setIfDifferent",value:function(e){this.value!=e&&(this.value=e,this.dispatchEvent("change"))}},{key:"setAsActive",value:function(){this._clearTimeoutIfPresent(),this.lastActiveDate=At.now(),this._setIfDifferent("active"),this._setTimeoutReplacing(this.caller("onIdleTimeout"),i.IDLE_MS)}},{key:"onIdleTimeout",value:function(){this._setIfDifferent("idle"),this._setTimeoutReplacing(this.caller("onXIdleTimeout"),i.XIDLE_MS-(At.now()-this.lastActiveDate))}},{key:"onXIdleTimeout",value:function(){this._setIfDifferent("xidle")}}])&&jl(t.prototype,n),r&&jl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Cl(e){return Cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cl(e)}function Dl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Cl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Cl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Cl(i)?i:String(i)),r)}var o,i}function xl(e,t){return xl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xl(e,t)}function Al(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ll(e);if(t){var o=Ll(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Cl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ll(e){return Ll=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ll(e)}Rl.IDLE_MS=3e5,Rl.XIDLE_MS=18e5;var Nl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xl(e,t)}(i,e);var t,n,r,o=Al(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"getInstance",value:function(){return i.instance||(i.instance=new i),i.instance}}],(n=[{key:"initialize",value:function(){}},{key:"notify",value:function(e){e instanceof Event&&this.dispatchEvent("stoppeddomevent",e)}}])&&Dl(t.prototype,n),r&&Dl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Ml(e){return Ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ml(e)}function Vl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ml(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ml(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ml(i)?i:String(i)),r)}var o,i}var Bl=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"addEventToRegistry",value:function(e,t,n,r,o){o[t]||(o[t]=[]);var i={handler:n,element:e,useCapture:r};o[t].push(i)}},{key:"removeEventFromRegistry",value:function(e,t,n,r,o){for(var i,a=o[t],u=!1,l=0;l<a.length;++l)if(a[l].handler==n&&a[l].element==e&&a[l].useCapture==r){i=l,u=!0;break}if(!u)throw new Error(t+" event not found in registry for specified handler");a.splice(i,1),0==a.length&&delete o[t]}},{key:"getElementFromEvent",value:function(e){return e.target}},{key:"getPositionFromEvent",value:function(e){return{x:e.pageX,y:e.pageY,clientX:e.clientX,clientY:e.clientY}}},{key:"getButtonFromEvent",value:function(t){return void 0===t.button?e.MOUSE_LEFT_BUTTON:2===t.button?e.MOUSE_RIGHT_BUTTON:0===t.button?e.MOUSE_LEFT_BUTTON:e.MOUSE_MIDDLE_BUTTON}},{key:"preventDefault",value:function(e){("boolean"!=typeof e.cancelable||e.cancelable)&&e.preventDefault&&e.preventDefault()}},{key:"getPreventDefault",value:function(e){return"defaultPrevented"in e?e.defaultPrevented:e.getPreventDefault&&e.getPreventDefault()}},{key:"stopPropagation",value:function(e){e.stopPropagation&&e.stopPropagation(),Nl.getInstance().notify(e)}},{key:"cancelEvent",value:function(t){e.preventDefault(t),e.stopPropagation(t)}},{key:"addEventListener",value:function(e,t,n,r){n._wrappedHandler||(n._wrappedHandler=L.get("defaultErrorHandler").wrapHandlingErrors(n)),e.addEventListener(t,n._wrappedHandler,r)}},{key:"removeEventListener",value:function(e,t,n,r){e.removeEventListener(t,n._wrappedHandler,r)}}],(n=null)&&Vl(t.prototype,n),r&&Vl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ul(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))}function Wl(e){return Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wl(e)}function Yl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Wl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Wl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Wl(i)?i:String(i)),r)}var o,i}function Ql(e,t){return Ql=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ql(e,t)}function Hl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zl(e);if(t){var o=zl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Wl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zl(e){return zl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zl(e)}Bl.MOUSE_LEFT_BUTTON="left",Bl.MOUSE_RIGHT_BUTTON="right",Bl.MOUSE_MIDDLE_BUTTON="middle",C.supports("getComputedStyle")?Bl.getCurrentStyle=function(e,t){return e.ownerDocument.defaultView.getComputedStyle(e,null)[Ul(t)]}:Bl.getCurrentStyle=function(e,t){return e.currentStyle[Ul(t)]};var ql=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ql(e,t)}(i,e);var t,n,r,o=Hl(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"topDocument",value:function(){return window.tinkerman?top.document:window.document}}],(n=[{key:"initialize",value:function(){this.startingToUnload=!1,this.unloading=!1,this.userIsIdleDetector=Peg(new Rl,{onchange:this.dispatcher("useridlechange")}),this.innerSize=null,Bl.addEventListener(window,"beforeunload",this.caller("onBeforeUnload")),Bl.addEventListener(window,"unload",this.caller("onUnload")),Bl.addEventListener(window,"resize",this.caller("onResize")),Bl.addEventListener(document,"keypress",this.caller("onKeypress")),Bl.addEventListener(document,"mousemove",this.caller("onMousemove")),Bl.addEventListener(document,"click",this.caller("onClick"))}},{key:"getUserIdleness",value:function(){return this.userIsIdleDetector.get()}},{key:"reload",value:function(){if(L.get("TEST_ENV"))throw new Error("cannotReloadBrowserOnATest");i.topDocument().location.reload()}},{key:"isUnloading",value:function(){return this.unloading}},{key:"getInnerSize",value:function(){return this.innerSize?this.innerSize:this.innerSize=this._getCurrentSize()}},{key:"updateInnerSize",value:function(){var e=this._getCurrentSize();!this.innerSize||this.innerSize.w===e.w&&this.innerSize.h===e.h||(this.innerSize=e,this.dispatchEvent("resize"))}},{key:"_beforeUnloadTimeout",value:function(){this.dispatchEvent("beforeunloadtimeout"),this.startingToUnload=!1}},{key:"_getCurrentSize",value:function(){var e,t,n,r=((e=document.documentElement)||(e=document.body.parentNode))&&"number"==typeof e.clientWidth?e:document.body,o=document.body;return"number"==typeof r.clientWidth?{w:r.clientWidth,h:r.clientHeight}:r===o||(t=Math.max(r.clientWidth,o.clientWidth))>self.innerWidth||(n=Math.max(r.clientHeight,o.clientHeight))>self.innerHeight?{w:o.clientWidth,h:o.clientHeight}:{w:t,h:n}}},{key:"onClick",value:function(e){this.userIsIdleDetector.setAsActive()}},{key:"onMousemove",value:function(e){this.userIsIdleDetector.setAsActive()}},{key:"onKeypress",value:function(e){27==e.keyCode&&Bl.preventDefault(e),this.userIsIdleDetector.setAsActive()}},{key:"onUnload",value:function(){this.unloading=!0,this.dispatchEvent("unload")}},{key:"onBeforeUnload",value:function(){this.startingToUnload||(this.dispatchEvent("beforeunload"),this.startingToUnload=!0,setTimeout(this.caller("_beforeUnloadTimeout"),1e4))}},{key:"onResize",value:function(){this.updateInnerSize()}}])&&Yl(t.prototype,n),r&&Yl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Jl(e){return Jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jl(e)}function Gl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Jl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Jl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Jl(i)?i:String(i)),r)}var o,i}function Zl(e,t){return Zl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zl(e,t)}function Kl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$l(e);if(t){var o=$l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Jl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $l(e){return $l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$l(e)}var Xl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zl(e,t)}(i,e);var t,n,r,o=Kl(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"getInstance",value:function(){return i.instance||(i.instance=new cu),i.instance}}],(n=null)&&Gl(t.prototype,n),r&&Gl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function ec(e){return ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ec(e)}function tc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ec(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ec(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ec(i)?i:String(i)),r)}var o,i}var nc=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"initialize",value:function(){this.tasks=new Map,Bl.addEventListener(ql.topDocument(),"visibilitychange",this.caller("onPageVisibilityChange")),Xl.getInstance().add(this.busyHandler=new El)}},{key:"isHidden",value:function(){return"hidden"===ql.topDocument().visibilityState}},{key:"enqueue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at.uuidv4();if(this.tasks.has(t))throw new Error("PageVisibilityTaskQueueDuplicatedKey: duplicated key "+t);if("function"!=typeof e)throw new Error("PageVisibilityTaskQueueNotAFunction: Task must be a function");this.isHidden()?(this.tasks.set(t,e),this.busyHandler.setAsBusy()):this._runTask(e)}},{key:"remove",value:function(e){return this.tasks.delete(e)}},{key:"getTaskById",value:function(e){return this.tasks.get(e)}},{key:"_processQueue",value:function(){var e=this;this.tasks.forEach((function(t){return e._runTask(t)})),this.tasks.clear(),this.busyHandler.setAsFree()}},{key:"_runTask",value:function(e){e()}},{key:"onPageVisibilityChange",value:function(){this.isHidden()||this._processQueue()}}],r=[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}},{key:"callWhenVisible",value:function(t,n){e.getInstance().enqueue(t,n)}}],n&&tc(t.prototype,n),r&&tc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rc(e){return rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rc(e)}function oc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ic(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ic(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ic(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ac(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==rc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==rc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===rc(i)?i:String(i)),r)}var o,i}function uc(){return uc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},uc.apply(this,arguments)}function lc(e,t){return lc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lc(e,t)}function cc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sc(e);if(t){var o=sc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===rc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function sc(e){return sc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sc(e)}var fc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lc(e,t)}(i,e);var t,n,r,o=cc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e,t,n,r){uc(sc(i.prototype),"initialize",this).call(this),this.id=e,this.online=n,this.startTime=At.now(),this.listeners={},this.nextListenerNumber=1,this.remoteListenersToRemove=[],this.delayedResponseManager=new Hi,this.tunnel=new Xa(this.id,t,r),this.busyStateMonitor=Peg(new cu,{onbusystatechange:this.dispatcher("busystatechange")}),this.busyStateMonitor.add(this.delayedResponseManager),this.busyStateMonitor.add(this.tunnel)}},{key:"registerDelayedResponse",value:function(e){this.delayedResponseManager.add(e)}},{key:"callBeforeExecLater",value:function(e){this.tunnel.callBeforeExecLater(e)}},{key:"ping",value:function(e,t){return this.assertActive(),this.tunnel.ping(e,t)}},{key:"exec",value:function(e,t,n){this.assertActive();var r=this.tunnel.exec(e,t,n);return t||this.removePendingListeners(),r}},{key:"setIsOnline",value:function(e){this.assertActive(),this.online=e,e?this.removePendingListeners():this.cancelRemoveListenersTimeoutIfPresent()}},{key:"getStartTime",value:function(){return this.startTime}},{key:"onAddRemoteListenerError",value:function(e,t){var n=this._getListenerFromRemoteListener(e);this._removeRemoteListenerFromMap(e),n.setErrorResponse(t)}},{key:"_addRemoteListenerToServer",value:function(e,t,n,r,o,i){var a=this;this.tunnel.exec(new go(new Mo(t,"addListener",[n,e.getListenerNumber(),r,o,i]),(function(t){return e.setResponse(t)}),(function(){return a.onAddRemoteListenerError(e)})))}},{key:"addRemoteListener",value:function(e,t,n,r,o,i,a,u){this.assertActive();var l=u||this.nextListenerNumber++,c=new vu(this,l,e,t,n);return $.getInstance().notifyRemoteListenerAdd(c),l in this.listeners&&this.throwRemoteListenerError(this.listeners[l],"duplicateListenerNumber (new: "+c.getDescription()+"), old: "),this.listeners[l]=c,i||this._addRemoteListenerToServer(c,e,t,r,o,a),c}},{key:"cancelRemoveListenersTimeoutIfPresent",value:function(){this.removeListenersTimeout&&(clearTimeout(this.removeListenersTimeout),this.removeListenersTimeout=null)}},{key:"removePendingListeners",value:function(){this.assertActive(),this.cancelRemoveListenersTimeoutIfPresent();var e=this.remoteListenersToRemove;this.remoteListenersToRemove=[];for(var t=0;t<e.length;++t)this._removeRemoteListenerWithoutDoingChecks(e[t])}},{key:"onRemoveListenersTimeout",value:function(){this.removeListenersTimeout=null,this.removePendingListeners()}},{key:"assertActive",value:function(){if(this.deleting)throw new Error("pageSession is being deleted");if(this.Deleted)throw new Error("pageSession is deleted")}},{key:"throwRemoteListenerError",value:function(e,t){throw new Error(t+" ("+e.getDescription()+")")}},{key:"cancelRemoveRemoteListener",value:function(e){this.assertActive(),Ke.remove(this.remoteListenersToRemove,e)||this.throwRemoteListenerError(e,"remoteListener wasn't being removed")}},{key:"_removeRemoteListenerFromServer",value:function(e){this.tunnel.exec(new go(new Mo(e.getServerClassName(),"removeListener",[e.getListenerNumber()])))}},{key:"_removeRemoteListenerWithoutDoingChecks",value:function(e){var t=this._getListenerFromRemoteListener(e);this._removeRemoteListenerFromServer(e),this._removeRemoteListenerFromMap(e),t.setAsRemoved()}},{key:"_removeRemoteListenerFromMap",value:function(e){delete this.listeners[e.getListenerNumber()],e.setAsRemoved()}},{key:"_getListenerFromRemoteListener",value:function(e){return this.listeners[e.getListenerNumber()]}},{key:"_assertActiveAndRemovableListener",value:function(e){this.assertActive();var t=e.getListenerNumber();-1!=this.remoteListenersToRemove.indexOf(e)&&this.throwRemoteListenerError(e,"cannotRemoveAlreadyToBeRemovedListener"),this.listeners[t]||this.throwRemoteListenerError(e,"cannotRemoveNonExistentListener")}},{key:"removeRemoteListenerNow",value:function(e){this._assertActiveAndRemovableListener(e),this._removeRemoteListenerWithoutDoingChecks(e)}},{key:"removeRemoteListenerLater",value:function(e){var t=TIN_start_GlobalConfig.get("config");this._assertActiveAndRemovableListener(e),this.remoteListenersToRemove.push(e),this.online&&!this.removeListenersTimeout&&(this.removeListenersTimeout=setTimeout(this.caller("onRemoveListenersTimeout"),t.WebsiteSettings.liveQueryCleanupTimeout/3))}},{key:"_sendDataToEventHandler",value:function(e,t){this.listeners[e]&&this.listeners[e].handleEvent(t)}},{key:"_handleListenerEvent",value:function(e,t){var n=this;if(this.listeners[e])if(t.msg instanceof ICO_harp_DelayedResponse){var r=t.msg;r.addListener("load",(function(t){return n._sendDataToEventHandler(e,t.data)})),this.registerDelayedResponse(r)}else this._sendDataToEventHandler(e,t.msg)}},{key:"handleEvent",value:function(e){this.assertActive();var t=e.dst;if("number"==typeof t){if(e.serverCallback)return this._scheduleServerCallback(e);this._handleListenerEvent(t,e)}else if("delayedresponse"==t)this.delayedResponseManager.exec(e.msg);else{if("servererror"!=t)throw new Error("Unknown dst: "+t);$.getInstance().notifyServerError(e.msg.randomCode)}}},{key:"_scheduleServerCallback",value:function(e){var t=this,n=JSON.parse(e.serverCallback);e.serverCallback=null;var r=oc(n,3),o=r[0],i=r[1],a=r[2],u=this._getActionCall(o,i,a),l=ICO_harp_LiveRemoteMap.getInstance().getActionCallHash(u);return nc.getInstance().getTaskById(l)?null:new Promise((function(n,r){var o=function(r){e.msg=null==r?e.msg:r,t._handleListenerEvent(e.dst,e),n()},i=function(){return n()};nc.callWhenVisible((function(){u instanceof gl&&!ICO_harp_LiveRemoteMap.getInstance().has(l)?n():TIN_start_GlobalConfig.get("server").execCall(u,o,i)}),l)}))}},{key:"_getActionCall",value:function(e,t,n){t=t||[],n=n||{};var r=oc(e.split("."),2),o=r[0],i=r[1],a=o[0],u=o.substring(1);switch(a){case"R":return new ku(u,n);case"O":return new Du(u,i,t,n);case"L":return new gl(u,i,t,n);default:return new Mo(u,i,t)}}},{key:"handleEventError",value:function(e,t){this.listeners[e.dst]&&this.listeners[e.dst].handleEventError(t)}},{key:"isBusy",value:function(){return this.busyStateMonitor.isBusy()}},{key:"uninit",value:function(){this.deleting=!0,this.cancelRemoveListenersTimeoutIfPresent();var e=gu.shallowCloneMap(this.listeners);for(var t in e)e[t].setAsRemoved();this.listeners={},this.Delete("tunnel"),this.deleting=!1}}],n&&ac(t.prototype,n),r&&ac(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function pc(e){return pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pc(e)}function dc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==pc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==pc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===pc(i)?i:String(i)),r)}var o,i}function yc(e,t){return yc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yc(e,t)}function hc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vc(e);if(t){var o=vc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===pc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function vc(e){return vc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vc(e)}var bc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yc(e,t)}(i,e);var t,n,r,o=hc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e,t,n){this.requestLoadHandler=new to(n),this.pageSession=null,this.online=!0,this.usePermanentConnection=t,this.pageSessionFrequencyValidator=new po,this.setTabId(e),this.idlenessChangedAndNotNotified=!1,L.get("browserWindow").addListener("useridlechange",this.caller("onUserIdleChange"))}},{key:"sendIdlenessToServer",value:function(){this.idlenessChangedAndNotNotified=!1,this.exec(new go(new Mo("ICO_session_PageSession","setIdleness",[L.get("browserWindow").getUserIdleness()])))}},{key:"onUserIdleChange",value:function(){this.online?this.sendIdlenessToServer():this.idlenessChangedAndNotNotified=!0}},{key:"isBusy",value:function(){return this.requesting||this.pageSession&&this.pageSession.isBusy()}},{key:"setIsOnline",value:function(e){this.online=e,this.pageSession&&(this.pageSession.setIsOnline(e),this.idlenessChangedAndNotNotified&&this.sendIdlenessToServer())}},{key:"callBeforeExecLater",value:function(e){this.pageSession.callBeforeExecLater(e)}},{key:"ping",value:function(e,t){return this.pageSession.ping(e,t)}},{key:"exec",value:function(e,t,n){return this.pageSession.exec(e,t,n)}},{key:"getPageSession",value:function(){return this.pageSession}},{key:"getPageSessionStartTime",value:function(){return this.pageSession?this.pageSession.getStartTime():null}},{key:"getTabId",value:function(){return this.pageSessionId}},{key:"setTabId",value:function(e,t){this.isBusy();var n=this.getAndEndOldPageSessionIfPresentWithoutDeletingIt();null==e?(this.pageSessionId=null,t||this.requestNewPageSession()):this.startNewPageSession(e),n&&Delete(n),this.wasBusy!=this.isBusy()&&this.dispatchEvent("busystatechange")}},{key:"requestNewPageSession",value:function(){this.requesting||(this.requesting=!0,new Li(this.caller("onCreatePageSessionRequestLoadOk")).send())}},{key:"onCreatePageSessionRequestLoadOk",value:function(e,t){t&&L.get("serverCredentials").setCortex(t),this.setTabId(e),this.requesting=!1}},{key:"getAndEndOldPageSessionIfPresentWithoutDeletingIt",value:function(){if(this.pageSession){this.pageSession.removeListener("busystatechange",this.dispatcher("busystatechange"));var e=this.pageSession;return this.pageSession=null,e}return null}},{key:"onGroupedRequestLoad",value:function(e,t,n){this.requestLoadHandler.handleGroupedResponse(this.pageSession,e,t,n)}},{key:"startNewPageSession",value:function(e){var t=At.now();this.pageSessionFrequencyValidator.removeOldDates(t),this.pageSessionFrequencyValidator.appendDate(t),this.pageSessionFrequencyValidator.assertNotTooManyPageSessionRenews(t),this.pageSessionId=e,this.pageSession=new fc(this.pageSessionId,this.caller("onGroupedRequestLoad"),this.online,this.usePermanentConnection),this.pageSession.addListener("busystatechange",this.dispatcher("busystatechange")),this.sendIdlenessToServer(),L.get("AUTO_RELOAD_FILES")&&this.addRemoteListener("test_TestUtils","filechange",this.caller("onFilechange")),this.dispatchEvent("pagesessionrenew")}},{key:"addRemoteListener",value:function(){return this.pageSession.addRemoteListener.apply(this.pageSession,arguments)}},{key:"endPageSession",value:function(){var e=L.get("serverCredentials");if(null!=this.pageSessionId&&!L.get("TEST_ENV")){var t="/_endPageSession?applicationCode="+e.getApplicationCode()+"&version="+e.getPacksVersion(),n={m:[],p:e.getPublicSessionName(),t:this.pageSessionId};fetch(t,{keepalive:!0,method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)})}}}],n&&dc(t.prototype,n),r&&dc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function mc(e){return mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mc(e)}function gc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==mc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==mc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===mc(i)?i:String(i)),r)}var o,i}function _c(e,t){return _c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_c(e,t)}function wc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sc(e);if(t){var o=Sc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===mc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Sc(e){return Sc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sc(e)}L.get("AUTO_RELOAD_FILES")&&(bc.prototype.onFilechange=function(e){L.get("assetLoader").reloadCssAsset(e.name.replace(/\.css$/,""))});var Oc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_c(e,t)}(i,e);var t,n,r,o=wc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"setRetryMs",value:function(e){i.retryMs=e}}],(n=[{key:"initialize",value:function(e){this.pageSessionManager=e,this.started=!1,this.attempt=0,this.interval=null,this.pingTimeout=null,this.secondsLeftToWait=null,this.tryingRequest=null}},{key:"getValue",value:function(){return{trying:!!this.tryingRequest,secondsLeftToWait:this.secondsLeftToWait}}},{key:"getSecondsLeftToWait",value:function(){return this.secondsLeftToWait}},{key:"retryNow",value:function(){this._clearIntervalAndRetry(),this.dispatchEvent("change")}},{key:"startToCheck",value:function(){if(this.started)throw new Error("Already checking");this.started=!0,this._ping()}},{key:"_getSecondsToWaitForAttempt",value:function(){var e=this.attempt;return 0==e?1:1==e?5:2==e||3==e?15:60}},{key:"_setInterval",value:function(){this.interval=setInterval(this.caller("onInterval"),i.retryMs)}},{key:"_clearInterval",value:function(){clearInterval(this.interval),this.interval=null}},{key:"_clearIntervalAndRetry",value:function(){this.tryingRequest||(this.secondsLeftToWait=null,this._clearInterval(),this._ping())}},{key:"_clearPingTimeoutIfPresent",value:function(){this.pingTimeout&&(clearTimeout(this.pingTimeout),this.pingTimeout=null)}},{key:"_ping",value:function(){++this.attempt,this.pingTimeout=setTimeout(this.caller("onPingTimeout"),4e3),this.tryingRequest=this.pageSessionManager.ping(this.caller("onPingLoad"),this.caller("onPingError"))}},{key:"onInterval",value:function(){--this.secondsLeftToWait,this.secondsLeftToWait<=0&&this._clearIntervalAndRetry(),this.dispatchEvent("change")}},{key:"onPingLoad",value:function(e){this.Deleted||(this.onPingEnd(),this.dispatchEvent("online"))}},{key:"onPingEnd",value:function(e){this._clearPingTimeoutIfPresent(),this.tryingRequest=null}},{key:"onPingError",value:function(e){if(!this.Deleted)return this.onPingEnd(),this.secondsLeftToWait=this._getSecondsToWaitForAttempt(),this._setInterval(),!0}},{key:"onPingTimeout",value:function(){this.pingTimeout=null,this.tryingRequest&&this.tryingRequest.abort()}},{key:"uninit",value:function(){this.interval&&this._clearInterval(),this._clearPingTimeoutIfPresent()}}])&&gc(t.prototype,n),r&&gc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Pc(e){return Pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pc(e)}function Ec(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Pc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Pc(i)?i:String(i)),r)}var o,i}function kc(e,t){return kc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kc(e,t)}function jc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tc(e);if(t){var o=Tc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Pc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Tc(e){return Tc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tc(e)}Oc.retryMs=1e3;var Fc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kc(e,t)}(i,e);var t,n,r,o=jc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"initialize",value:function(e,t,n){this.logoutUrl=n,this.status=Peg(new sr,{onpollrequired:this.caller("onStatusPollRequired"),onpollrequiredend:this.caller("onStatusPollRequiredEnd"),ononline:this.caller("onStatusOnline"),onuserless:this.caller("onStatusUserLess"),onpagesessionless:this.caller("onStatusPageSessionLess"),onnotonline:this.caller("onStatusNotOnline")}),this.pageSessionManager=Peg(new bc(e,t,this.status),{onpagesessionrenew:this.caller("onPagesessionrenew"),onbusystatechange:this.dispatcher("busystatechange")}),L.get("browserWindow").addListener("unload",this.caller("onUnload")),L.get("assetLoader").addListener("offline",this.caller("onAssetLoaderOffline")),L.get("assetLoader").addListener("packagenotloadedoffline",this.caller("onAssetLoaderPackageNotLoadedDueToOffline"))}},{key:"callBeforeExecLater",value:function(e){this.status.isOnline()?this.pageSessionManager.callBeforeExecLater(e):e()}},{key:"notifyLoginTabId",value:function(e,t,n){var r=L.get("serverCredentials");r.setPublicSessionName(e),r.setCortex(t),this.pageSessionManager.setTabId(n)}},{key:"notifyCouldNotLoadContentDueToOffline",value:function(e){$.getInstance().handleRemoteException(this.status.createRemoteException(e))}},{key:"onAssetLoaderPackageNotLoadedDueToOffline",value:function(){$.getInstance().handleRemoteException(this.status.createRemoteException("triedToLoadPackageWhileOffline"))}},{key:"onAssetLoaderOffline",value:function(){this.status.setAsOffline(),$.getInstance().handleRemoteException(this.status.createRemoteException("couldNotLoadPackage"))}},{key:"getCredentials",value:function(){return L.get("serverCredentials")}},{key:"execCall",value:function(e,t,n,r){var o=new go(e,t,n);this.status.isOnline()?this.pageSessionManager.exec(o,r):o.handleError(this.status.createRemoteException(o.getCallDescription()))}},{key:"exec",value:function(e,t){this.execCall(new Mo(e.className,e.method,e.parameters),e.onload,e.onerror,t)}},{key:"execAsync",value:function(e,t,n,r){var o=this;return new Promise((function(i,a){o.execCall(new Mo(e,t,n),i,(function(e){var t=new Error("execAsync: "+e.getTechnicalDescription());t.remoteException=e,a(t)}),r)}))}},{key:"logout",value:function(e){this.isOnline()||this._isOtherUserLogged()?(this.dispatchEvent("logout"),location.href=e?this.logoutUrl+"/"+e:this.logoutUrl):$.getInstance().handleRemoteException(this.status.createRemoteException("logout"))}},{key:"onPagesessionrenew",value:function(e){this.status.isPageSessionLessOrUserLess()&&this.status.setAsOnline(),this.dispatchEvent("pagesessionrenew"),L.get("userTrail").logPageSessionRenew(),$.getInstance().log("Page session renew")}},{key:"getPageSession",value:function(){return this.pageSessionManager.getPageSession()}},{key:"addRemoteListener",value:function(){return this.pageSessionManager.addRemoteListener.apply(this.pageSessionManager,arguments)}},{key:"getTabId",value:function(){return this.pageSessionManager.getTabId()}},{key:"getPageSessionStartTime",value:function(){return this.pageSessionManager.getPageSessionStartTime()}},{key:"onOfflineCheckerOnline",value:function(){this.status.setAsOnline()}},{key:"getOfflineChecker",value:function(){return this.offlineChecker}},{key:"isOnline",value:function(){return this.status.isOnline()}},{key:"_isOtherUserLogged",value:function(){return this.status.isOtherUserLogged()}},{key:"onStatusPollRequired",value:function(){this.offlineChecker=Peg(new Oc(this.pageSessionManager),{ononline:this.caller("onOfflineCheckerOnline")}),this.offlineChecker.startToCheck()}},{key:"onStatusPollRequiredEnd",value:function(){this.dispatchEvent("pollrequiredend"),this.offlineChecker&&this.Delete("offlineChecker")}},{key:"onStatusOnline",value:function(){L.get("assetLoader").setAsOnline(),this.dispatchEvent("online"),this.pageSessionManager.setIsOnline(!0)}},{key:"onStatusUserLess",value:function(){this.pageSessionManager.setTabId(null,!0)}},{key:"onStatusPageSessionLess",value:function(){this.pageSessionManager.setTabId(null,!1)}},{key:"onStatusNotOnline",value:function(){this.dispatchEvent("offline"),this.pageSessionManager.setIsOnline(!1)}},{key:"onUnload",value:function(){this.pageSessionManager.endPageSession()}},{key:"isBusy",value:function(){return this.pageSessionManager.isBusy()}}],n&&Ec(t.prototype,n),r&&Ec(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Ic(e){return Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(e)}function Rc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ic(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ic(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ic(i)?i:String(i)),r)}var o,i}function Cc(e,t){return Cc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cc(e,t)}function Dc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xc(e);if(t){var o=xc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ic(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function xc(e){return xc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xc(e)}var Ac=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cc(e,t)}(i,e);var t,n,r,o=Dc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"getInstance",value:function(){return i.instance||(i.instance=new i),i.instance}}],(n=[{key:"initialize",value:function(){this.monitoredEvents=["click","mousedown","keydown","keyup"],Nl.getInstance().addListener("stoppeddomevent",this.caller("onStoppedEvent")),this.start()}},{key:"start",value:function(){var e=this,t=document;this.monitoredEvents.forEach((function(n){Bl.addEventListener(t,n,e.dispatcher(n))}))}},{key:"stop",value:function(){var e=this,t=document;this.monitoredEvents.forEach((function(n){Bl.removeEventListener(t,n,e.dispatcher(n))}))}},{key:"onStoppedEvent",value:function(e){Ke.hasElement(this.monitoredEvents,e.type)&&this.dispatchEvent(e.type,e)}}])&&Rc(t.prototype,n),r&&Rc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Lc(e){return Lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc(e)}function Nc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Lc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Lc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Lc(i)?i:String(i)),r)}var o,i}function Mc(e,t){return Mc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mc(e,t)}function Vc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bc(e);if(t){var o=Bc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Lc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Bc(e){return Bc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bc(e)}var Uc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mc(e,t)}(i,e);var t,n,r,o=Vc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(){this.trail=[],Peg(Ac.getInstance(),{onkeydown:this.caller("onDocumentKeyDown"),onmousedown:this.caller("onDocumentMouseDown")}),L.get("defaultErrorHandler").addListener("error",this.caller("onError")),L.get("defaultErrorHandler").addListener("errorreportok",this.caller("onErrorReportOk")),L.get("browserWindow").addListener("beforeunload",this.caller("onBrowserWindowBeforeUnload"))}},{key:"logUserChange",value:function(){this.add("user change")}},{key:"onBrowserWindowBeforeUnload",value:function(){this.add("before unload")}},{key:"onErrorReportOk",value:function(e){this.add("Error reporter accepted js error: "+e.reportUrl)}},{key:"onError",value:function(e){this.add("defaultErrorHandler reported: "+e.error)}},{key:"logPageSessionRenew",value:function(){this.add("page session renew")}},{key:"logPageLocationChange",value:function(e){this.add('location: "'+e.replace(/"/g,'\\"')+'"')}},{key:"onDocumentKeyDown",value:function(e){var t;13==e.keyCode?t="enter":9==e.keyCode?t="tab":27==e.keyCode&&(t="esc"),t&&this.add(t+" keydown at: "+p.describeValue(Bl.getElementFromEvent(e)))}},{key:"onDocumentMouseDown",value:function(e){this.add(Bl.getButtonFromEvent(e)+" click at "+p.describeValue(Bl.getElementFromEvent(e)))}},{key:"get",value:function(){return this.trail}},{key:"add",value:function(e){this.trail.length>200&&this.trail.shift(),this.trail.push({date:At.now(),description:e})}}])&&Nc(t.prototype,n),r&&Nc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Wc(e){return Wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(e)}function Yc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Wc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Wc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Wc(i)?i:String(i)),r)}var o,i}function Qc(e,t){return Qc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qc(e,t)}function Hc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zc(e);if(t){var o=zc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Wc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zc(e){return zc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zc(e)}var qc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qc(e,t)}(i,e);var t,n,r,o=Hc(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getLocation",value:function(){return this.getLocationFromQueryString(this.lastQueryString)}},{key:"initialize",value:function(e){this.topDocument=ql.topDocument(),this.applicationCode=e,this.lastQueryString=this.getUrlHash(),this.enableInterval(),this.history=[]}},{key:"getHistory",value:function(){return this.history}},{key:"disableInterval",value:function(){this.interval&&(clearInterval(this.interval),delete this.interval)}},{key:"enableInterval",value:function(){this.interval=setInterval(this.caller("checkForUrlChanges"),1e3)}},{key:"getLocationFromQueryString",value:function(e){return"Home"==e?"":e}},{key:"callOnHashChange",value:function(e){this.onhashchange&&this.onhashchange(this.getLocationFromQueryString(e))}},{key:"goTo",value:function(e,t){var n=at.isWhitespace(e)?"Home":e;if(this.lastQueryString!=n){if(this.topDocument.defaultView&&this.topDocument!==document&&(t?history.replaceState:history.pushState))t?this.topDocument.defaultView.history.replaceState(null,this.topDocument.title,"#"+n):this.topDocument.defaultView.history.pushState(null,this.topDocument.title,"#"+n);else{var r=this.topDocument.location.protocol+"//"+this.topDocument.location.host+this.topDocument.location.pathname+this.topDocument.location.search+"#"+n;t?this.topDocument.location.replace(r):this.topDocument.location=r}this.lastQueryString=this.getUrlHash(),t&&this.history.pop(),this.history.push(n)}}},{key:"checkForUrlChanges",value:function(){var e=this.getUrlHash();e!=this.lastQueryString&&(this.lastQueryString=e,this.history.push(e),this.callOnHashChange(e))}},{key:"getUrlHash",value:function(){var e,t=this.topDocument.location.href,n=t.indexOf("#");if(-1==n)e="";else try{e=decodeURIComponent(t.substr(n+1))}catch(r){e=t.substr(n+1)}return e}}])&&Yc(t.prototype,n),r&&Yc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function Jc(e){return Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jc(e)}function Gc(e){return function(e){if(Array.isArray(e))return Zc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Zc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zc(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Jc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Jc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Jc(i)?i:String(i)),r)}var o,i}var $c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"add",value:function(e,t){var n,r;t&&(Array.isArray(t)?(n=e.classList).add.apply(n,Gc(t)):(r=e.classList).add.apply(r,Gc(t.split(" "))))}},{key:"remove",value:function(e,t){var n,r;t&&(Array.isArray(t)?(n=e.classList).remove.apply(n,Gc(t)):(r=e.classList).remove.apply(r,Gc(t.split(" "))))}},{key:"toggle",value:function(t,n){e.has(t,n)?e.remove(t,n):e.add(t,n)}},{key:"setHas",value:function(t,n,r){r?e.add(t,n):e.remove(t,n)}},{key:"toggleFromSet",value:function(t,n,r){Array.isArray(n)||(n=n?n.split(" "):[]),r.forEach((function(r){e.setHas(t,r,n.includes(r))}))}},{key:"set",value:function(e,t){e.className=t}},{key:"has",value:function(e,t){return!!t&&e.classList.contains(t)}}],(n=null)&&Kc(t.prototype,n),r&&Kc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xc(e){return Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xc(e)}function es(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Xc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Xc(i)?i:String(i)),r)}var o,i}function ts(e,t){return ts=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ts(e,t)}function ns(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rs(e);if(t){var o=rs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Xc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function rs(e){return rs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rs(e)}var os=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ts(e,t)}(i,e);var t,n,r,o=ns(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"toggleScrollBars",value:function(e,t){var n=!$c.has(document.documentElement,"NoScrollBars");if(t&&!n){var r=parseInt(Bl.getCurrentStyle(e,"left"),10),o=isNaN(r)?0:Math.abs(r),a=parseInt(Bl.getCurrentStyle(e,"top"),10),u=isNaN(a)?0:Math.abs(a);$c.remove(document.documentElement,"NoScrollBars"),i.scrollTo(o,u),e.style.left="auto",e.style.top="auto",i.SCROLL_Y=0}else if(!t&&n){var l=i.getWindowScrollBarPositions();e.style.left=-l.x+"px",e.style.top=-l.y+"px",i.SCROLL_Y=l.y,$c.add(document.documentElement,"NoScrollBars")}timeoutManager.set((function(){}),0)}},{key:"scrollToTop",value:function(){i.scrollTo(0,0)}},{key:"scrollTo",value:function(e,t){window.scrollTo(e,t),timeoutManager.set((function(){}),0)}},{key:"getScrollBarPositions",value:function(){var e=i.getWindowScrollBarPositions(window);return e.y=e.y||i.SCROLL_Y,e}},{key:"getWindowScrollBarPositions",value:function(e){return{x:(e=e||window).pageXOffset,y:e.pageYOffset}}}],(n=null)&&es(t.prototype,n),r&&es(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function is(e){return is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},is(e)}function as(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==is(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==is(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===is(i)?i:String(i)),r)}var o,i}function us(e,t){return us=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},us(e,t)}function ls(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cs(e);if(t){var o=cs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===is(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function cs(e){return cs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cs(e)}os.SCROLL_Y=0;var ss=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&us(e,t)}(i,e);var t,n,r,o=ls(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"isFixed",value:function(e){var t=e;do{if("fixed"===Bl.getCurrentStyle(t,"position"))return!0}while(t=t.offsetParent);return!1}},{key:"get",value:function(e){for(var t=0,n=0,r=e;;){var o=i.getTranslate3d(r);if(t+=r.offsetLeft+o.x,n+=r.offsetTop+o.y,!r.offsetParent)break;r=r.offsetParent}for(var a=e.parentNode;a&&a!=document.body;)t-=a.scrollLeft,n-=a.scrollTop,a=a.parentNode;return{x:t,y:n}}},{key:"getTranslate3d",value:function(e,t){var n=function(e){var t=/translate3d\((-?\d+)(?:px)?,\s(-?\d+)(?:px)?,\s(-?\d+)(?:px)?\)/i.exec(e.style?e.style.transform:""),n={x:0,y:0,z:0};return t&&(n={x:parseInt(t[1],10),y:parseInt(t[2],10),z:parseInt(t[3],10)}),n};if(t){for(var r=e,o={x:0,y:0,z:0};;){var i=n(e);if(o.x+=i.x,o.y+=i.y,o.z+=i.z,!r.offsetParent)break;r=r.offsetParent}return o}return n(e)}},{key:"getIntoDocument",value:function(e,t){for(var n=0,r=0,o=t;n+=o.offsetLeft,r+=o.offsetTop,o.offsetParent;)o=o.offsetParent;return{x:n,y:r}}},{key:"isInsideElement",value:function(e,t){var n=i.get(t);return n.x1=n.x+t.offsetWidth,n.y1=n.y+t.offsetHeight,e.x>=n.x&&e.x<=n.x1&&e.y>=n.y&&e.y<=n.y1}},{key:"getElementBoundaries",value:function(e){var t=i.get(e);return{x0:t.x,x1:t.x+e.offsetWidth,y0:t.y,y1:t.y+e.offsetHeight}}},{key:"getElementBoundariesIntoIframe",value:function(e,t){var n=i.getIntoDocument(e,t);return{x0:n.x,x1:n.x+t.offsetWidth,y0:n.y,y1:n.y+t.offsetHeight}}},{key:"getInsideBoundaries",value:function(e,t){return e.x>=t.x0&&e.x<=t.x1&&e.y>=t.y0&&e.y<=t.y1?{x:e.x-t.x0,y:e.y-t.y0}:null}},{key:"getInsideElement",value:function(e,t){return i.getInsideBoundaries(e,i.getElementBoundaries(t))}},{key:"calculateAvailableRoom",value:function(e){var t=L.get("browserWindow").getInnerSize(),n=e.getBoundingClientRect();return{toTop:n.top,toBottom:t.h-n.bottom,toLeft:n.left,toRight:t.w-n.right}}},{key:"scrollIntoView",value:function(e,t){t=t||0;var n=L.get("browserWindow").getInnerSize(),r=i.getElementBoundaries(e),o=os.getWindowScrollBarPositions(),a=n.h+o.y-t;if(r.y1>a){var u=r.y1-r.y0>a?r.y0:r.y1-n.h+t+5;L.get("page").scrollTo(0,u)}else r.y0<o.y&&e.scrollIntoView()}},{key:"initialize",value:function(){i.topHtmlElement=document.getElementsByTagName("html")[0]}}],(n=null)&&as(t.prototype,n),r&&as(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function fs(e){return fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fs(e)}function ps(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==fs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===fs(i)?i:String(i)),r)}var o,i}function ds(e,t){return ds=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ds(e,t)}function ys(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hs(e);if(t){var o=hs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===fs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function hs(e){return hs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hs(e)}ss.initialize();var vs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ds(e,t)}(i,e);var t,n,r,o=ys(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"generateUniqueId",value:function(e,t){e||(e="baseName"),i.uniqueId++;var n="boolean"!=typeof t||t?"_"+Math.random().toString(36).substring(2,15):"";return e+i.uniqueId+n}},{key:"getValue",value:function(e){return e.getValue?e.getValue():void 0===e.value?e:e.type&&"checkbox"===e.type?e.checked:e.value}},{key:"setValue",value:function(e,t){"function"==typeof e.setValue?e.setValue(t):e.type&&"checkbox"===e.type?e.checked=t:void 0!==e.value&&(e.value=t)}},{key:"createDocument",value:function(e){return document.implementation.createHTMLDocument(e)}},{key:"createNodeFromHTML",value:function(e){var t=this.createDocument().createElement("body");return t.innerHTML=e,t.childNodes.length>1?t.childNodes:t.childNodes[0]}},{key:"createOutlineFromElement",value:function(e,t,n){var r=document.createElement("div");r.style.backgroundColor=n&&n.backColor?n.backColor:"cyan",r.style.opacity=n&&n.opacity?n.opacity:"0.5",r.style.zIndex="1000",r.style.position="absolute",r.style.width=e.offsetWidth+"px",r.style.height=e.offsetHeight+"px";var o=ss.getInsideElement(ss.get(e),t);return r.style.left=o.x+"px",r.style.top=o.y+"px",r}},{key:"autoAdjustElementHeightToContent",value:function(e,t){var n=os.getScrollBarPositions(),r=parseInt(e.style.height,10);e.style.height="auto",e.style.height=Math.max(e.scrollHeight,t)+"px";var o=parseInt(e.style.height,10)-r;L.get("page").scrollTo(n.x,Math.max(n.y,n.y+o))}},{key:"getRelativeCoordsFromEvent",value:function(e){var t=Bl.getPositionFromEvent(e),n=ss.get(Bl.getElementFromEvent(e));return{x:t.x-n.x,y:t.y-n.y}}},{key:"hasModifiersKeysPressed",value:function(e){return e.ctrlKey||e.altKey||e.shiftKey||e.metaKey}},{key:"copyToClipboard",value:function(e){if(navigator.clipboard)navigator.clipboard.writeText(e);else{var t=document,n=t.createElement("textarea");n.value=e,n.style.cssText="display:block;width:0;height:0;opacity:0;",t.body.appendChild(n),n.select(),t.execCommand("copy"),t.body.removeChild(n)}}},{key:"getPreferredSize",value:function(e,t,n){var r=e.ownerDocument.body,o=e.cloneNode(!0),a=i.filterCssText(o.style.cssText)+"position:absolute;visibility:hidden;right:auto;bottom:auto;";a+="width:"+(t||"auto")+";",a+="height:"+(n||"auto")+";",o.style.cssText=a,r.appendChild(o);var u=i.getElementSize(o);return r.removeChild(o),u}},{key:"getElementSize",value:function(e){return{clientWidth:e.clientWidth,clientHeight:e.clientHeight,offsetWidth:e.offsetWidth,offsetHeight:e.offsetHeight}}},{key:"getElementCenter",value:function(e){var t=e.getBoundingClientRect();return{y:(t.bottom+t.top)/2,x:(t.right+t.left)/2}}},{key:"filterCssText",value:function(e){var t=e.toLowerCase().split(";"),n=["display","position","width","height","visibility","top","right","bottom","left"];return t.filter((function(e){var t=e.split(":")[0].replace(/\s/g,"");return-1===n.indexOf(t)})).join(";")}},{key:"setPositionAndKeepInsideViewport",value:function(e,t,n){var r=L.get("browserWindow").getInnerSize(),o=os.getScrollBarPositions(),i=e.offsetWidth,a=e.offsetHeight;t+i-o.x>r.w&&(t=r.w-i+o.x),n+a-o.y>r.h&&(n=r.h-a+o.y),e.style.left=Math.max(t,0)+"px",e.style.top=Math.max(n,0)+"px"}},{key:"getScrollbarsWidth",value:function(){if(!i.scrollWidth){var e=document.createElement("div");e.style.overflow="scroll",document.body.appendChild(e);var t=document.createElement("div");t.style.width="100%",e.appendChild(t),i.scrollWidth=e.offsetWidth-t.offsetWidth,document.body.removeChild(e)}return i.scrollWidth}},{key:"getDomNodeText",value:function(e,t){return function e(t,n){if(1!=t.nodeType)return 3==t.nodeType?t.nodeValue:"";if("IFRAME"!=t.nodeName){if("TEXTAREA"==t.nodeName||"INPUT"==t.nodeName&&"checkbox"!=t.type&&"radio"!=t.type)return t.value||t.placeholder;if("BR"==t.nodeName)return"\n";if("WBR"==t.nodeName)return"";if("none"==n)return"";for(var r="",o=!0,i=0,a=t.childNodes.length;i<a;i++){var u,l=t.childNodes[i],c=e(l,u=1==l.nodeType?Bl.getCurrentStyle(l,"display"):null);c&&("block"==u||"table-row"==u||"table-cell"==u||"OPTION"==l.nodeName?(o||(r+="\n"),r+=c.trim(),r+="\n",o=!0):(r+=c,o=!1))}return r}try{return e(t.contentWindow.document.body)}catch(e){return""}}(e&&e.widget?e.widget:e,t).replace(/\u200b+/gim,"").replace(/[ \t]+/g," ").replace(/\u00a0/gim," ")}},{key:"getPinchZoomRatio",value:function(){return(window.visualViewport?window.visualViewport.width:window.innerWidth)/document.documentElement.clientWidth}}],(n=null)&&ps(t.prototype,n),r&&ps(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);function bs(e){return bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bs(e)}function ms(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==bs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==bs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===bs(i)?i:String(i)),r)}var o,i}function gs(e,t){return gs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gs(e,t)}function _s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ws(e);if(t){var o=ws(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===bs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ws(e){return ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ws(e)}vs.uniqueId=0;var Ss,Os=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gs(e,t)}(i,e);var t,n,r,o=_s(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n&&ms(t.prototype,n),r&&ms(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(z);function Ps(e){return Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ps(e)}function Es(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ps(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ps(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ps(i)?i:String(i)),r)}var o,i}function ks(e,t){return ks=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ks(e,t)}function js(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ts(e);if(t){var o=Ts(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ps(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ts(e){return Ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ts(e)}Os.DOWN_KEY=40,Os.UP_KEY=38,Os.LEFT_KEY=37,Os.RIGHT_KEY=39,Os.ENTER_KEY=13,Os.ESC_KEY=27,Os.BACKSPACE_KEY=8,Os.SPACE_KEY=32,Os.HOME_KEY=36,Os.END_KEY=35,Os.TAB_KEY=9,Os.ALT_KEY=18,Os.DELETE_KEY=46,Os.CTRL_KEY=17,Os.SHIFT_KEY=16,Os.F_KEY=70,Os.S_KEY=83;var Fs,Is,Rs,Cs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ks(e,t)}(i,e);var t,n,r,o=js(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,r=[{key:"getInstance",value:function(){if(!Ss)throw new Error("Must setup an instance first.");return Ss}},{key:"setupInstance",value:function(e,t){if(Ss)throw new Error("Instance already exists.");Ss=new i(e,t)}}],(n=[{key:"initialize",value:function(e,t){this.navigation=e,this.navigation.onhashchange=this.caller("onHashChange"),this.confirmFollowingExternalLinks=t,this.pageWidget=null}},{key:"onPageContentAdded",value:function(e){this.setMainContent(e.content)}},{key:"onHashChange",value:function(e){var t=new U({location:e});this.dispatchEvent("locationstatechange",t),t.getDefaultPrevented()||this.setLocation(e,!0)}},{key:"onContentLocationChange",value:function(e){this.navigation.goTo(this._getContentLocation(),e&&e.replaceState)}},{key:"setMainContent",value:function(e){this.content&&this.content.removeListener("locationchange",this.caller("onContentLocationChange")),this.content=e,this.content.addListener("locationchange",this.caller("onContentLocationChange"))}},{key:"setInterceptor",value:function(e){this.interceptor=e}},{key:"_checkForExternalLocation",value:function(e){return i.isExternalUrl(e)}},{key:"setLocation",value:function(e,t,n,r){n||this._checkForExternalLocation(e)?this.handleExternalLocation(e,"_blank",null,r):this._handleInternalLocation(e,t)}},{key:"_handleInternalLocation",value:function(e,t){var n=e.match(/^.?#(.*)/)||e.match(/^http.+\/\/.+\/#(.*)/);if(n&&(e=n[1]),!this.interceptor||!this.interceptor(e)){try{this.content&&(this.content.setLocation||e)&&(this.content.setLocation(e),e=e||this._getContentLocation())}catch(e){if("pageNotFound"!=e.message)throw e;this.showPageNotFound()}finally{t||this.navigation.goTo(e)}var r=new U({newLocation:e});this.dispatchEvent("locationchange",r),L.get("userTrail").logPageLocationChange(e)}}},{key:"handleExternalLocation",value:function(e,t,n,r){var o=new U;this.dispatchEvent("externallinkclick",o),o.getDefaultPrevented()||(this._checkForExternalLocation(e)&&!r&&this.confirmFollowingExternalLinks?this.showExternalUrlConfirm(e,t,n):this.goToExternalLocation(e,t,n))}},{key:"showExternalUrlConfirm",value:function(e,t,n){this.dispatchEvent("showexternalurlconfirm",new Os({location:e,target:t,otherOptionsForExternalLocations:n}))}},{key:"goToExternalLocation",value:function(e,t,n){e=e.startsWith("www.")?"http://"+e:e;var r=t||vs.generateUniqueId("windowTarget");n?window.open(e,r,n):window.open(e,r)}},{key:"showPageNotFound",value:function(){this.dispatchEvent("showpagenotfound")}},{key:"setPageWidget",value:function(e){this.pageWidget&&this.pageWidget.removeListener("contentadded",this.caller("onPageContentAdded")),this.pageWidget=e,this.pageWidget&&this.pageWidget.addListener("contentadded",this.caller("onPageContentAdded"))}},{key:"getPageWidget",value:function(){return this.pageWidget}},{key:"onPageNotFoundCloseClick",value:function(){this.setLocation(this.getLastVisitedLocation())}},{key:"_getContentLocation",value:function(){var e;return this.content&&this.content.getLocation&&(e=this.content.getLocation()),e||""}},{key:"getLocation",value:function(){return this.navigation.getLocation()}},{key:"getNavigation",value:function(){return this.navigation}},{key:"getLastVisitedLocation",value:function(){return this.content?this.content.getChild().getLastVisitedLocation():""}},{key:"getPreviousVisitedLocation",value:function(){return this.content?this.content.getChild().getLocatedWidget().getPreviousVisitedLocation():""}}])&&Es(t.prototype,n),r&&Es(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);Cs.isExternalUrl=(Rs=function(e){return Fs.href=e.startsWith("www.")?"http://"+e:e,Fs.hostname},function(e){try{return Fs||(Fs=document.createElement("a"),Is=Rs(window.location.href)),Is!==Rs(e)}catch(n){var t=new Error("InvalidUrl: "+e);if("uiUnitTest"==L.get("page").getApplicationCode())throw t;return L.get("defaultErrorHandler").handleCatchedException(t),!0}});var Ds=n(24996),xs=n(68806),As=n.n(xs);function Ls(e){return Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ls(e)}function Ns(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ls(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ls(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ls(i)?i:String(i)),r)}var o,i}function Ms(e,t){return Ms=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ms(e,t)}function Vs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bs(e);if(t){var o=Bs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ls(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Bs(e){return Bs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bs(e)}var Us=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ms(e,t)}(i,e);var t,n,r,o=Vs(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(){this.reportedErrorCount=0}},{key:"watchForErrorsAndNotify",value:function(){L.get("defaultErrorHandler").setReportErrorCallbackAndReportPending(this.caller("_report")),$.getInstance().addListener("servererror",this.caller("onServerError"))}},{key:"onServerError",value:function(e){L.get("server").exec({className:"squealer_Squealer",method:"addPageInformationToServerErrorReport",parameters:[e.randomCode,{location:L.get("page")?Cs.getInstance().getLocation():"",trail:L.get("userTrail")?L.get("userTrail").get():"",pageSessionId:L.get("server").getTabId()}]},!0),L.get("defaultErrorHandler").notifyError("phpReportedAnError: "+this._getSquealerUrlForReportRandomCode(e.randomCode))}},{key:"_report",value:function(e){var t={fileName:e.getFileName(),lineNumber:e.getLineNumber(),message:e.getMessage(),name:e.getName(),stack:e.getStack()},n=!1;L.get("DEBUG_MODE")&&(n=!0),(this.reportedErrorCount<10||n)&&(++this.reportedErrorCount,L.get("userTrail")&&(L.get("userTrail").add("reporting error number "+this.reportedErrorCount),10==this.reportedErrorCount&&L.get("userTrail").add("Disabled error reporting after "+this.reportedErrorCount+" errors")),this.attemptToLogError(t,L.get("page")?Cs.getInstance().getLocation():"",L.get("userTrail")?L.get("userTrail").get():""))}},{key:"_getSquealerUrlForReportRandomCode",value:function(e){var t=L.get("config");return t&&t.squealer_Squealer&&t.squealer_Squealer.publicUrl?t.squealer_Squealer.publicUrl+"view.php?randomCode="+e:"Error handler config Url is not available. Report randomCode: "+e}},{key:"onLogErrorLoad",value:function(e){if(!e.isError()){var t=e.get();if(!t.error){var n=t.msg;if(!n)return void L.get("page").info("Error while reporting an error (empty router responses)");var r=n[0];if(!r)return void L.get("page").info("Error while reporting an error (no report response)");var o=L.get("richJson");L.get("defaultErrorHandler").notifyReportedError(this._getSquealerUrlForReportRandomCode(r));var i=o.unserialize(e.requestResponse.responseText);L.get("userTrail").add("randomCode: "+i.msg)}}}},{key:"attemptToLogError",value:function(e,t,n,r){var o=this,a=r||0;if(Ii.isAvailable())this.logError(e,t,n);else{if(!(a<i.MAX_LOG_ATTEMPTS))throw e;setTimeout((function(){o.attemptToLogError(e,t,n,function(e){throw new TypeError('"'+e+'" is read-only')}("attempt"))}),i.LOG_ATTEMPTS_INTERVAL)}}},{key:"logError",value:function(e,t,n){if(this.shouldLogError(e)){var r=L.get("serverCredentials");new Ii(new mi("POST","/_logJsError?applicationCode="+(r?r.getApplicationCode():"")+"&version="+r.getPacksVersion()+"&trackerCode="+r.getTrackerCode())).send({error:[e,{location:t,trail:n}]},this.caller("onLogErrorLoad"))}}},{key:"setShouldLogErrorCallback",value:function(e){this.shouldLogErrorCallback=e}},{key:"shouldLogError",value:function(e){return!this.shouldLogErrorCallback||!1!==this.shouldLogErrorCallback(e)}}])&&Ns(t.prototype,n),r&&Ns(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(z);Us.MAX_LOG_ATTEMPTS=10,Us.LOG_ATTEMPTS_INTERVAL=1e3;var Ws,Ys=n(78879),Qs=(Ws=function(e,t){return Ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ws(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ws(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Hs=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function u(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}l((r=r.apply(e,t||[])).next())}))},zs=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(l){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}},qs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qs(t,e),t.prototype.setAsOnline=function(){},t.prototype.setAsOffline=function(){},t}(z),Js=function(e){function t(t,n){var r=e.call(this)||this;return r.location=n,L.set("applicationCode",t),r}return Qs(t,e),t.prototype.getDomNode=function(){return document.body},t.prototype.getLocation=function(){return this.location},t.prototype.alert=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];L.get("DEBUG_MODE")&&console.log("page alert: ",e)},t.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];L.get("DEBUG_MODE")&&console.log("page alert: ",e)},t}(z),Gs=function(){function e(){}return e.prototype.config=function(e,t,n,r,o,i){this._initializeGlobalParams(t);var a=new oe(new se(e,t),n,r,o,i);L.set("serverCredentials",a)},e.prototype._initializeGlobalParams=function(e){var t=new qc(e),n=new Ys.Z,r=n.get("avature.portal.urlPath")+"/"+n.get("avature.portal.page"),o=new Js(e,r);L.set("browserWindow",new ql),L.set("userTrail",new Uc),L.set("assetLoader",new qs),L.set("page",o),Cs.setupInstance(o,t),L.set("richJson",new de),Bn.registerDefaultCodecs()},e.prototype.connect=function(){return Hs(this,void 0,void 0,(function(){var e=this;return zs(this,(function(t){return[2,new Promise((function(t,n){document.addEventListener("DOMContentLoaded",(function(){var n=(new Ds.Z).get("synapserBootstrap");if(n.enabled){n&&(e.pageSessionId=n.pagesessionid?n.pagesessionid:null,e.logoutUrl=n.logouturl?n.logouturl:null,e.config(n.applicationname,n.applicationcode,n.publicsessionname,parseInt(n.cortex,10),n.trackercode,n.packversion)),L.set("config",{WebsiteSettings:{liveQueryCleanupTimeout:4e4},router:{minPendingMessagesDelay:1e3}});var r=Fe.peg(new Fc(e.pageSessionId,!0,e.logoutUrl),{onpagesessionrenew:function(){var e=Fe.peg(new Us,{shouldLogErrorCallback:function(e){return e.fileName.includes("portalpacks")}});try{e.watchForErrorsAndNotify()}catch(e){}L.set("server",r),t(r)},onoffline:function(){As().getInstance().dispatchEvent("serveroffline")}})}}))}))]}))}))},e}();const Zs={connectServer:function(){return Hs(this,void 0,void 0,(function(){return zs(this,(function(e){switch(e.label){case 0:return[4,(new Gs).connect()];case 1:return[2,e.sent()]}}))}))}};function Ks(e){return Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ks(e)}function $s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ks(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ks(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ks(i)?i:String(i)),r)}var o,i}function Xs(){return Xs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nf(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Xs.apply(this,arguments)}function ef(e,t){return ef=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ef(e,t)}function tf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nf(e);if(t){var o=nf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ks(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function nf(e){return nf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nf(e)}var rf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ef(e,t)}(i,e);var t,n,r,o=tf(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"initialize",value:function(e,t,n){Xs(nf(i.prototype),"initialize",this).call(this,new Mo(e,t,n))}}])&&$s(t.prototype,n),r&&$s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ko),of=null,af=null,uf=null;const lf={connect:function(){return of?af?Promise.resolve():of:(of=Zs.connectServer().then((function(e){uf=e,af=!0})),of)},exec:function(e,t,n,r){return void 0===r&&(r=!1),new Promise((function(o,i){uf.exec({className:e,method:t,parameters:n,onload:function(e){o(e)},onerror:function(e){i(e)}},r)}))},datasource:function(e,t,n){return new Promise((function(r,o){var i=new rf(e,t,n);i.addListener("receive",(function(){r(i.get())})),i.addListener("error",(function(e){o(e)}))}))}};const cf=function(){function e(e,t,n,r){this.timeout=e,this.title=t,this.message=n,this.mainButton=r}return e.prototype.showAlertOnTimeout=function(){var e=this;this.timerId&&clearTimeout(this.timerId),this.timerId=window.setTimeout((function(){e.showAlert()}),this.timeout)},e.prototype.onMainButtonCLick=function(){throw new Error("Unimplemented method: SessionPopUpBase.onMainButtonCLick")},e.prototype.onCloseDialogButtonClick=function(){throw new Error("Unimplemented method: SessionPopUpBase.onCloseDialogButtonClick")},e.prototype.getExtraButtons=function(){return[{text:"",click:null}]},e.prototype.showAlert=function(){var e=pjQuery("#"+this.getId());e.length?this.reusePopup(e):this.createPopup()},e.prototype.reusePopup=function(e){e.dialog("option","title",this.title),e.dialog("option","buttons",this.getButtons()),e.dialog("open")},e.prototype.createPopup=function(){var e=this;pjQuery('<div id="'+this.getId()+'" title="'+this.title+'"><p>'+this.message+"</p></div>").dialog({modal:!0,close:function(){e.onCloseDialogButtonClick()},buttons:this.getButtons(),open:function(e){e.target.parentElement.setAttribute("aria-modal",!0)}})},e.prototype.getId=function(){return"timeoutSessionPopup"},e.prototype.getButtons=function(){var e=this;return this.getExtraButtons().concat([{text:this.mainButton,click:function(){e.onMainButtonCLick()}}])},e}();var sf=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const ff=function(e){function t(t,n,r,o,i){var a=e.call(this,t,n,r,o)||this;return a.portalUrl=i,a}return sf(t,e),t.prototype.onMainButtonCLick=function(){window.location.href=this.portalUrl},t.prototype.onCloseDialogButtonClick=function(){this.onMainButtonCLick()},t}(cf);var pf=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),df=function(e){function t(t,n,r,o,i,a,u){var l=e.call(this,t,n,r,o)||this;return l.okButton=i,l.isSynapserEnabled=a,l.timeoutSessionPopUp=u,l}return pf(t,e),t.prototype.onMainButtonCLick=function(){this.extendSession()},t.prototype.onCloseDialogButtonClick=function(){},t.prototype.getExtraButtons=function(){var e=this;return[{text:this.okButton,click:function(){e.closeDialog()}}]},t.prototype.extendSession=function(){this.isSynapserEnabled?this.extendSessionWithSynapser():this.extendSessionWithoutSynapser(),this.showAlertOnTimeout(),this.timeoutSessionPopUp.showAlertOnTimeout(),this.closeDialog()},t.prototype.extendSessionWithSynapser=function(){lf.connect().then((function(){lf.exec("ICO_session_PageSession","setIdleness",[L.get("browserWindow").getUserIdleness()])}))},t.prototype.extendSessionWithoutSynapser=function(){var e=new Ys.Z;pjQuery.post("/"+e.get("avature.portal.id")+"/_extendSession")},t.prototype.closeDialog=function(){var e=pjQuery("#"+this.getId());e.length&&e.dialog("close")},t}(cf);const yf=df;var hf=As().getInstance(),vf=new Ds.Z;function bf(e){return bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(e)}function mf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==bf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==bf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===bf(i)?i:String(i)),r)}var o,i}if(hf.addEventHandler(As().EVENT_LOAD_NAME,(function(){var e,t;!function(e){var t=vf.get("showAlertOnSessionExtend");if(!t)return;var n=new yf(t.timeout,t.title,t.message,t.mainbutton,t.okbutton,t.issynapserenabled,e);n.showAlertOnTimeout()}((e=vf.get("showAlertOnSessionTimeout"),(t=new ff(e.timeout,e.title,e.message,e.mainbutton,e.portalurl)).showAlertOnTimeout(),t))}),As().PRIORITY_MEDIUM),hf.addEventHandler("serveroffline",(function(){throw new Error("Server is offline")})),!gf)var gf=n(68806);var _f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"replaceEmailShareButtonHref",value:function(e,t){var n,r=document.querySelectorAll(".shareButton--email");r&&r.forEach((function(r){n=window.location.href.includes(e)?document.title:r.getAttribute("data-jobname")+" - "+t,r.href=r.href.replace("subject=","subject="+encodeURIComponent(n))}))}}])&&mf(t.prototype,n),r&&mf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),wf=gf.getInstance(),Sf=new Ds.Z,Of=new Ys.Z;wf.addEventHandler(gf.EVENT_LOAD_NAME,(function(){var e=Sf.get("replaceEmailShareButtonHref");e&&(new _f).replaceEmailShareButtonHref(e.jobdetailpagename,Of.get("avature.portal.name"))}),gf.PRIORITY_MEDIUM);var Pf=n(34039);function Ef(e){return Ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ef(e)}function kf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ef(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ef(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ef(i)?i:String(i)),r)}var o,i}var jf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cookieUserConsentPopupData=t}var t,n,r;return t=e,(n=[{key:"initialise",value:function(){o().getInstance().initialise({content:{description:this.cookieUserConsentPopupData.description,acceptAll:this.cookieUserConsentPopupData.acceptall,rejectAll:this.cookieUserConsentPopupData.rejectall,save:this.cookieUserConsentPopupData.save,cancel:this.cookieUserConsentPopupData.cancel,settings:this.cookieUserConsentPopupData.settings,cookiesDisabled:this.cookieUserConsentPopupData.cookiesdisabled},showOnTop:!1})}}])&&kf(t.prototype,n),r&&kf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();Pf.Z.getEventManager().attachToLoadEvent((function(){var e=(new Ds.Z).get("cookieUserConsentPopupData");e&&new jf(e).initialise()}));function Tf(e){return Tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(e)}function Ff(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Tf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Tf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Tf(i)?i:String(i)),r)}var o,i}if(!If)var If=n(68806);var Rf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=t}var t,n,r;return t=e,n=[{key:"validate",value:function(){var e=this,t=new Ys.Z;grecaptcha.ready((function(){grecaptcha.execute(e.key,{action:"submit"}).then((function(e){pjQuery.post("/"+t.get("avature.portal.id")+"/_visitValidator",{token:e},null,"json")}))}))}}],n&&Ff(t.prototype,n),r&&Ff(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Cf=If.getInstance(),Df=new Ds.Z;Cf.addEventHandler(If.EVENT_LOAD_NAME,(function(){var e=Df.get("executeReCaptcha");e&&new Rf(e.key).validate()}),If.PRIORITY_MEDIUM);function xf(e){return xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(e)}function Af(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==xf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===xf(i)?i:String(i)),r)}var o,i}if(!Lf)var Lf=n(68806);var Nf=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"makeDateFieldWorkWithTimestamp",value:function(e){this._convertFromTimestampOnLoad(e),this._convertToTimestampOnSubmit(e)}},{key:"_convertToTimestampOnSubmit",value:function(e){pjQuery("form").submit((function(){var t=this;pjQuery(this).find('[name="'+e+'"]').each((function(){var e=pjQuery(this),n=e.val();if(n){n=n.split("-");var r=parseInt(n[1],10)-1,o=parseInt(new Date(n[0],r,n[2]).getTime()/1e3,10);pjQuery("<input>").attr({type:"hidden",name:e.attr("name")+"Timestamp",value:o}).appendTo(t)}}))}))}},{key:"_convertFromTimestampOnLoad",value:function(e){var t=this;pjQuery('[name="'+e+'"]').each((function(){var e=pjQuery(this),n=e.attr("value");if(t._shouldConvertFromTimstampToDateString(n)){var r=LuxonDateTime.fromMillis(1e3*n).toFormat("yyyy-MM-dd");e.val(r),e.attr("value",r)}}))}},{key:"_shouldConvertFromTimstampToDateString",value:function(e){return""!=e&&-1==e.indexOf("-")}}])&&Af(t.prototype,n),r&&Af(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Mf=Lf.getInstance(),Vf=new Ds.Z;Mf.addEventHandler(Lf.EVENT_LOAD_NAME,(function(){var e=Vf.get("makeExpiresDateFieldWorkWithTimestamp");e&&e.inputname&&(new Nf).makeDateFieldWorkWithTimestamp(e.inputname);var t=Vf.get("makeStartsDateFieldWorkWithTimestamp");t&&t.inputname&&(new Nf).makeDateFieldWorkWithTimestamp(t.inputname)}),Lf.PRIORITY_MEDIUM);function Bf(e){return Bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bf(e)}function Uf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Bf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Bf(i)?i:String(i)),r)}var o,i}if(!Wf)var Wf=n(68806);var Yf=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"scheduleAutomaticRedirectionToHome",value:function(e,t){setTimeout((function(){window.location.href="/"+e}),t)}}])&&Uf(t.prototype,n),r&&Uf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Qf=Wf.getInstance(),Hf=new Ds.Z;function zf(e){return zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zf(e)}function qf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gf(r.key),r)}}function Jf(e,t,n){return(t=Gf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gf(e){var t=function(e,t){if("object"!==zf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===zf(t)?t:String(t)}if(Qf.addEventHandler(Wf.EVENT_LOAD_NAME,(function(){var e=Hf.get("automaticRedirectionToHome");e&&(new Yf).scheduleAutomaticRedirectionToHome(e.url,e.timeout)}),Wf.PRIORITY_MEDIUM),!Zf)var Zf=n(68806);var Kf=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Jf(this,"initialized",!1),Jf(this,"$widgets",{})}var t,n,r;return t=e,n=[{key:"init",value:function(){this.initialized||(this.initialized=!0,this._doInit())}},{key:"_doInit",value:function(){var e=this;pjQuery('select[data-rel="wsp"]').each((function(){var t=pjQuery(this);e._setCurrentStepId(t,t.val()),t.on("change",(function(){e._updateStep(t,e._getRequestData(t.data("id")))}))}))}},{key:"_getRequestData",value:function(e){var t=this._findForm(e),n=pjQuery('input[name="tokenField"]',t).val(),r={personId:t.data("personid"),jobId:t.data("jobid")},o=pjQuery('select[data-rel="wsp"]',t);return r.newStep=o.val(),r.isPrevious=o.find(":selected").data("previous"),void 0!==n&&n.length&&(r.tokenField=n),r}},{key:"_getFormAction",value:function(e){return this._findForm(e).attr("action")}},{key:"_findForm",value:function(e){return this.$widgets.hasOwnProperty(e)||(this.$widgets[e]=this._findElementOrException("form#"+e)),this.$widgets[e]}},{key:"_updateStep",value:function(e,t){var n=e.data("id"),r=this._getFormAction(n);if(!r.length)throw"Endpoint not found for picker '"+n+"'";this._removeErrorLabel(n);var o=this;pjQuery.post(r,t).done((function(e){o._fillPickerOptions(n,e.steps.next,e.steps.previous,e.texts)})).fail((function(t){var r=t.responseText.replace(/^"|"$/g,"");o._showErrorLabel(n,r),e.val(e.attr("data-current"))}))}},{key:"_fillPickerOptions",value:function(e,t,n,r){t instanceof Array||(t=[]),n instanceof Array||(n=[]);var o,i,a=this._findElementOrException('select[data-id="'+e+'"]'),u=document.createDocumentFragment();for(o in t)t.hasOwnProperty(o)&&((i=document.createElement("option")).value=t[o].id,i.text=t[o].name,i.selected=t[o].selected,i.dataset.previous=!1,u.appendChild(i),i.selected&&this._setCurrentStepId(a,i.value));if(n.length){var l=document.createElement("optgroup");for(o in l.label=r.previousSteps,n)(i=document.createElement("option")).value=n[o].id,i.text=n[o].name,i.dataset.previous=!0,l.appendChild(i);u.appendChild(l)}a.empty().append(u)}},{key:"_showErrorLabel",value:function(e,t){var n=this._findElementOrException('select[data-id="'+e+'"]'),r=pjQuery("<span>").addClass("errorMessage").attr({id:this._getErrorLabelId(e)}).text(t);n.after(r)}},{key:"_removeErrorLabel",value:function(e){this._findElement("#"+this._getErrorLabelId(e)).remove()}},{key:"_getErrorLabelId",value:function(e){return e+"-errorMessage"}},{key:"_findElementOrException",value:function(e){var t=this._findElement(e);if(!t.length)throw'Selector "'+e+'" not found';return t}},{key:"_findElement",value:function(e){return pjQuery(e)}},{key:"_setCurrentStepId",value:function(e,t){e.attr("data-current",t)}}],n&&qf(t.prototype,n),r&&qf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();Zf.getInstance().addEventHandler(Zf.EVENT_LOAD_NAME,(function(){document.querySelectorAll('select[data-rel="wsp"]')&&(new Kf).init()}),Zf.PRIORITY_MEDIUM);function $f(e){return $f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$f(e)}function Xf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==$f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==$f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===$f(i)?i:String(i)),r)}var o,i}if(!ep)var ep=n(68806);var tp=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"addCaptchaError",value:function(e){if(e){var t=pjQuery("<span/>",{class:"errorMessage",html:e});pjQuery(".g-recaptcha").before(t)}}}])&&Xf(t.prototype,n),r&&Xf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),np=ep.getInstance(),rp=new Ds.Z;np.addEventHandler(ep.EVENT_LOAD_NAME,(function(){var e=rp.get("captchaError");e&&(new tp).addCaptchaError(e.error)}),ep.PRIORITY_MEDIUM);function op(e){return op="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},op(e)}function ip(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==op(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==op(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===op(i)?i:String(i)),r)}var o,i}if(!ap)var ap=n(68806);var up=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"renderChart",value:function(e,t){AvatureChart.render(e,JSON.parse(t))}}])&&ip(t.prototype,n),r&&ip(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),lp=ap.getInstance(),cp=new Ds.Z;lp.addEventHandler(ap.EVENT_LOAD_NAME,(function(){var e=cp.getAllByDataValue("type","avatureChart");e&&e.forEach((function(e){var t=cp.get(e.id);(new up).renderChart(t.id,t.json)}))}),ap.PRIORITY_MEDIUM);function sp(e){return sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(e)}function fp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==sp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==sp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===sp(i)?i:String(i)),r)}var o,i}n(7556);var pp=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t,this._dictionary=this._buildDictionaryFromData(t),this._uploadButtonId=n,this._errorContainerId=r,this._methodContainerCssClass=o}var t,n,r;return t=e,(n=[{key:"_buildDictionaryFromData",value:function(e){return this._getCommonDictionaryFromData(e)}},{key:"_getCommonDictionaryFromData",value:function(e){var t=document.getElementById(e);return{continue:t.dataset.continue,fieldIsRequired:t.dataset.fieldisrequired,noFileSelected:t.dataset.nofileselected,requirePrivacyPolicyAcceptance:t.dataset.requireprivacypolicyacceptance,requirePrivacyPolicyAcceptanceText:t.dataset.requireprivacypolicyacceptancetext}}},{key:"_appendFieldContainerToForm",value:function(e,t,n){var r=this._getForm(),o=this._buildManualMethodContainer(),i=this._buildInputFieldSpecContainer(),a=this._buildErrorContainer(this._dictionary.fieldIsRequired,n),u=this._buildErrorContainerAccessibilityMessage(this._dictionary.fieldIsRequired,n);i.append(e),o.append(u),t.append(a),i.append(t),o.append(i),o.hide(),r.append(o),this._attachResumeRegistrationFileModeIfNeeded()}},{key:"_appendContinueButton",value:function(){var e=this._buildUploadResumeButton(this._dictionary.continue);this._getFieldSetContainer().append(e)}},{key:"_getForm",value:function(){return pjQuery("#manualRegisterMethodsForm")}},{key:"_submitForm",value:function(){this._getForm().submit()}},{key:"_attachResumeRegistrationFileModeIfNeeded",value:function(){if(!this._getResumeRegistrationFileModeInput().length){var e=pjQuery("<input/>",{class:"resumeRegistrationFileMode",type:"hidden",name:"radio"});this._getForm().prepend(e)}}},{key:"_setResumeRegistrationFileMode",value:function(e){this._getResumeRegistrationFileModeInput().val(e)}},{key:"_getResumeRegistrationFileModeInput",value:function(){return pjQuery("input.resumeRegistrationFileMode")}},{key:"_buildManualMethodContainer",value:function(){return pjQuery("<fieldset/>",{id:this._id+"FieldSetContainer",class:"manualRegisterMethodExtra Section"})}},{key:"_buildInputFieldSpecContainer",value:function(){return pjQuery("<div/>",{id:this._id+"FieldSpec",class:"fieldSpec"})}},{key:"_buildUploadResumeButton",value:function(e){var t=pjQuery("<button/>",{id:this._uploadButtonId,class:"button button--primary button--default",type:"submit",value:e,text:e}),n=pjQuery("<div/>",{id:this._uploadButtonId+"Container",class:"fieldSpec button-bar"}).append(t);return n.hide(),n}},{key:"_buildErrorContainer",value:function(e,t){var n=pjQuery("<span/>",{id:this._errorContainerId,class:"errorMessage",role:"alert","data-fieldlabel":t,text:e}).prepend(pjQuery("<span/>",{"aria-hidden":"true",class:"errorMessageIcon",text:"(!)"}));return n.hide(),n}},{key:"_buildErrorContainerAccessibilityMessage",value:function(e,t){return pjQuery("<div/>",{id:this._errorContainerId+"Message",class:"screenReaderVisibility",role:"alert","data-fieldlabel":t,text:e})}},{key:"_buildRequiredFieldLabel",value:function(e,t){return pjQuery("<label/>",{class:"requiredField",text:e,for:t}).append(this._buildLabelRequiredIcon())}},{key:"_buildRequiredHtmlFieldLabel",value:function(e,t){return pjQuery("<label/>",{class:"requiredField",html:e,for:t}).append(this._buildLabelRequiredIcon())}},{key:"_buildAnotherFileButtonContainer",value:function(e,t){return pjQuery("<div/>",{class:"fieldContainer"}).append([pjQuery("<div/>",{class:"selectedFile"}).append([pjQuery("<span/>",{id:e,text:this._dictionary.noFileSelected}),pjQuery("<a/>",{id:t,class:"button button--secondary button--small",text:this._dictionary.chooseAnotherFile,tabindex:0,role:"button"})])])}},{key:"_buildLabelRequiredIcon",value:function(e,t){return pjQuery("<span/>",{class:"labelRequiredIcon","aria-hidden":!0,text:" *"})}},{key:"_showCurrentManualMethodContainerAndHideMoreManualMethods",value:function(){pjQuery("fieldset.manualRegisterMethodExtra").each((function(){pjQuery(this).hide()})),pjQuery("#"+this._id+"FieldSetContainer").show(),pjQuery("a.list__item__link").each((function(){pjQuery(this).removeClass("manualRegisterMethodSelected")})),this._getManualMethodButton().addClass("manualRegisterMethodSelected")}},{key:"_getManualMethodButton",value:function(){return pjQuery("#"+this._id)}},{key:"_getUploadButton",value:function(){return pjQuery("#"+this._uploadButtonId)}},{key:"_getUploadButtonContainer",value:function(){return pjQuery("#"+this._uploadButtonId+"Container")}},{key:"_getErrorContainer",value:function(){return pjQuery("#"+this._errorContainerId)}},{key:"_getFieldSetContainer",value:function(){return pjQuery("#"+this._id+"FieldSetContainer")}},{key:"_getFieldContainer",value:function(){return pjQuery("#"+this._id+"FieldSpec")}},{key:"_showInputErrorContainer",value:function(){this._getErrorContainer().show(),this._getFieldContainer().addClass("hasErrors")}},{key:"_hideInputErrorContainer",value:function(){this._getErrorContainer().hide(),this._getFieldContainer().removeClass("hasErrors")}},{key:"_enableKeyboardClickForAccessibility",value:function(e){e.keypress((function(e){var t=e.keyCode?e.keyCode:e.which;13!==t&&32!==t||(e.preventDefault(),this.click())}))}}])&&fp(t.prototype,n),r&&fp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const dp=pp;function yp(e){return yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(e)}function hp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hp(Object(n),!0).forEach((function(t){bp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bp(e,t,n){return(t=gp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gp(r.key),r)}}function gp(e){var t=function(e,t){if("object"!==yp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==yp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===yp(t)?t:String(t)}function _p(){return _p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Op(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_p.apply(this,arguments)}function wp(e,t){return wp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wp(e,t)}function Sp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Op(e);if(t){var o=Op(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===yp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Op(e){return Op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Op(e)}if(!Pp)var Pp=n(68806);n(7556);var Ep=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wp(e,t)}(i,e);var t,n,r,o=Sp(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e,"uploadPasteResume","pasteManualMethodErrorContainer","resumePasteField")).textAreaId="resumePaste",t}return t=i,(n=[{key:"prepare",value:function(){this._appendTextAreaContainer(),this._appendContinueButton(),this._attachEvents()}},{key:"_buildDictionaryFromData",value:function(e){var t=document.getElementById(e),n=_p(Op(i.prototype),"_getCommonDictionaryFromData",this).call(this,e),r={copyAndPasteResume:t.dataset.copyandpasteresume};return vp(vp({},n),r)}},{key:"_appendTextAreaContainer",value:function(){var e=pjQuery("<label/>",{class:"requiredField",for:this.textAreaId,text:this._dictionary.copyAndPasteResume}).append(this._buildLabelRequiredIcon()),t=pjQuery("<div/>",{class:"fieldContainer"}).append(pjQuery("<textarea/>",{id:this.textAreaId,name:"resumePaste","aria-required":!0}));this._appendFieldContainerToForm(e,t,this._dictionary.copyAndPasteResume)}},{key:"_attachEvents",value:function(){var e=this,t=this._getManualMethodButton();t.click((function(){e._showCurrentManualMethodContainerAndHideMoreManualMethods(),e._getTextArea().focus()})),this._enableKeyboardClickForAccessibility(t),this._getUploadButton().click((function(t){t.preventDefault(),e._isResumePasted()?(e._setResumeRegistrationFileMode("paste"),e._submitForm()):(e._getUploadButtonContainer().hide(),e._getErrorContainer().show())})),this._getTextArea().on("keyup change focusout",(function(t){pjQuery(this).val()?(e._getUploadButtonContainer().show(),e._hideInputErrorContainer()):(e._getUploadButtonContainer().hide(),e._showInputErrorContainer())}))}},{key:"_isResumePasted",value:function(){return!!this._getTextArea().val()}},{key:"_getTextArea",value:function(){return pjQuery("#"+this.textAreaId)}}])&&mp(t.prototype,n),r&&mp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(dp);Pp.getInstance().addEventHandler(Pp.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('a[data-registermethod="paste"]');e&&e.forEach((function(e){new Ep(e.id).prepare()}))}),Pp.PRIORITY_MEDIUM);n(29254);function kp(e){return kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(e)}function jp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==kp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==kp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===kp(i)?i:String(i)),r)}var o,i}function Tp(){return Tp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rp(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Tp.apply(this,arguments)}function Fp(e,t){return Fp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fp(e,t)}function Ip(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Rp(e);if(t){var o=Rp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===kp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Rp(e){return Rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rp(e)}n(7556);var Cp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fp(e,t)}(i,e);var t,n,r,o=Ip(i);function i(e,t,n,r){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,e,t,n,r))._checkboxErrorContainerId="checkboxErrorContainer",a._checkboxInputId="checkBox",a}return t=i,(n=[{key:"_getRegisterMethodUploadType",value:function(){throw new Error("unimplementedMethod: ManualRegisterMethodUploadBase#_getRegisterMethodUploadType")}},{key:"_isFileAvailable",value:function(){throw new Error("unimplementedMethod: ManualRegisterMethodUploadBase#_isFileAvailable")}},{key:"_appendCheckboxToForm",value:function(e,t,n){var r=this._getFieldSetContainer(),o=this._buildCheckboxFieldSpecContainer(),i=this._buildCheckboxErrorContainer(this._dictionary.fieldIsRequired,n),a=this._buildCheckboxErrorContainerAccessibilityMessage(this._dictionary.fieldIsRequired,n);r.append(a),o.append(e),e.append(t),o.append(i),r.append(o),r.hide(),this._attachResumeRegistrationFileModeIfNeeded()}},{key:"_appendPrivacyPolicyAcceptanceContainer",value:function(){var e=this._checkboxInputId+this._getRegisterMethodUploadType(),t=this._buildRequiredHtmlFieldLabel(this._dictionary.requirePrivacyPolicyAcceptanceText,e),n=pjQuery("<input/>",{id:e,type:"checkbox",name:e,"aria-required":!0}),r=this._buildPrivacyPolicyAcceptanceCheckboxContainer();r.prepend(n),this._appendCheckboxToForm(r,t,this._dictionary.requirePrivacyPolicyAcceptanceText)}},{key:"_buildPrivacyPolicyAcceptanceCheckboxContainer",value:function(){return pjQuery("<div/>",{class:"fieldContainerCheckbox"})}},{key:"_buildCheckboxErrorContainerAccessibilityMessage",value:function(e,t){return pjQuery("<div/>",{id:this._checkboxErrorContainerId+this._getRegisterMethodUploadType()+"Message",class:"screenReaderVisibility",role:"alert","data-fieldlabel":t,text:e})}},{key:"_showCurrentManualMethodContainerAndHideMoreManualMethods",value:function(){pjQuery("#"+this._id+"Checkbox").show(),this._getUploadButtonContainer().show(),Tp(Rp(i.prototype),"_showCurrentManualMethodContainerAndHideMoreManualMethods",this).call(this)}},{key:"_getCheckbox",value:function(){return pjQuery("#"+this._checkboxInputId+this._getRegisterMethodUploadType())}},{key:"_setCheckboxEvents",value:function(){if(this._dictionary.requirePrivacyPolicyAcceptance){var e=this,t=this._getCheckbox();t.click((function(){t.prop("checked")?e._hideCheckboxErrorContainer():e._showCheckboxErrorContainer()}))}}},{key:"_showCheckboxErrorContainer",value:function(){this._getCheckboxErrorContainer().show(),this._getCheckboxErrorContainer().addClass("hasErrors")}},{key:"_getCheckboxErrorContainer",value:function(){return pjQuery("#"+this._checkboxErrorContainerId+this._getRegisterMethodUploadType())}},{key:"_hideCheckboxErrorContainer",value:function(){this._getCheckboxErrorContainer().hide(),this._getCheckboxErrorContainer().removeClass("hasErrors")}},{key:"_buildCheckboxFieldSpecContainer",value:function(){return pjQuery("<div/>",{id:this._id+"FieldSpecCheckbox",class:"fieldSpecCheckbox"})}},{key:"_buildCheckboxErrorContainer",value:function(e,t){var n=pjQuery("<span/>",{id:this._checkboxErrorContainerId+this._getRegisterMethodUploadType(),class:"errorMessage",role:"alert","data-fieldlabel":t,text:e}).prepend(pjQuery("<span/>",{"aria-hidden":"true",class:"errorMessageIcon",text:"(!)"}));return n.hide(),n}},{key:"_setUploadButtonEvents",value:function(){if(this._dictionary.requirePrivacyPolicyAcceptance)this._setUploadButtonEventWithPrivacyPolicyAcceptanceCheckbox();else{var e=this;this._getUploadButton().click((function(t){t.preventDefault(),e._isFileAvailable()?(e._setResumeRegistrationFileMode(e._getRegisterMethodUploadType()),e._submitForm()):e._showInputErrorContainer()}))}}},{key:"_setUploadButtonEventWithPrivacyPolicyAcceptanceCheckbox",value:function(){var e=this,t=this._getUploadButton(),n=this._getCheckbox();t.click((function(t){t.preventDefault(),e._isFileAvailable()&&n.prop("checked")?(e._setResumeRegistrationFileMode(e._getRegisterMethodUploadType()),e._submitForm()):e._isFileAvailable()||n.prop("checked")?n.prop("checked")?e._isFileAvailable()||e._showInputErrorContainer():e._showCheckboxErrorContainer():(e._showInputErrorContainer(),e._showCheckboxErrorContainer())}))}}])&&jp(t.prototype,n),r&&jp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(dp);const Dp=Cp;const xp=function(){var e=[{name:"fakeDropboxResume.txt",link:"fakeDropboxResumeLink"}];function t(){}function n(e){this.options=e}return t.prototype.createChooseButton=function(e){return new n(e)},n.prototype.click=function(){this.options.success(e)},{getApi:function(){return(new Ds.Z).get("enableDropboxDummyApi")?new t:Dropbox}}}();function Ap(e){return Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(e)}function Lp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Np(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lp(Object(n),!0).forEach((function(t){Mp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mp(e,t,n){return(t=Bp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bp(r.key),r)}}function Bp(e){var t=function(e,t){if("object"!==Ap(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ap(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ap(t)?t:String(t)}function Up(){return Up="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qp(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Up.apply(this,arguments)}function Wp(e,t){return Wp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wp(e,t)}function Yp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qp(e);if(t){var o=Qp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ap(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Qp(e){return Qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qp(e)}if(!Hp)var Hp=n(68806);n(7556);var zp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wp(e,t)}(i,e);var t,n,r,o=Yp(i);function i(e,t,n,r,a,u){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,e,"uploadDropboxResume","dropboxManualMethodErrorContainer","resumeDropboxField"))._appKey=t,l._allowedFileExtensions=n,l._dropboxLinkId=r,l._dropboxFileNameId=a,l._dropboxHiddenContainerId=u,l._dropboxLinkNameContainerId="dropboxLinkNameContainer",l._dropboxPickerAnotherId="dropboxPickerAnother",l}return t=i,(n=[{key:"_getRegisterMethodUploadType",value:function(){return"dropbox"}},{key:"prepare",value:function(){this._appendDropboxContainer(),this._dictionary.requirePrivacyPolicyAcceptance&&this._appendPrivacyPolicyAcceptanceContainer(),this._appendContinueButton(),this._appendHiddenInputs();var e=this._buildDropboxButton();this._attachEvents(e)}},{key:"_buildDictionaryFromData",value:function(e){var t=document.getElementById(e),n=Up(Qp(i.prototype),"_getCommonDictionaryFromData",this).call(this,e),r={chooseAnotherFile:t.dataset.chooseanotherfile,fromDropbox:t.dataset.fromdropbox};return Np(Np({},n),r)}},{key:"_appendHiddenInputs",value:function(){this._getForm().append([pjQuery("<input/>",{type:"hidden",name:this._dropboxFileNameId,id:this._dropboxFileNameId}),pjQuery("<input/>",{type:"hidden",name:this._dropboxLinkId,id:this._dropboxLinkId})])}},{key:"_appendDropboxContainer",value:function(){var e=this._buildRequiredFieldLabel(this._dictionary.fromDropbox,this._dropboxLinkId),t=this._buildAnotherFileButtonContainer(this._dropboxLinkNameContainerId,this._dropboxPickerAnotherId);this._appendFieldContainerToForm(e,t,this._dictionary.fromDropbox)}},{key:"_attachEvents",value:function(e){var t=this,n=this._getManualMethodButton();n.click((function(n){n.preventDefault(),t._initDropboxPicker(e)})),this._enableKeyboardClickForAccessibility(n);var r=pjQuery("#"+this._dropboxPickerAnotherId);r.click((function(n){n.preventDefault(),t._initDropboxPicker(e)})),this._enableKeyboardClickForAccessibility(r),this._setUploadButtonEvents(),this._setCheckboxEvents()}},{key:"_isFileAvailable",value:function(){return!!pjQuery("#dropboxLink").val()}},{key:"_initDropboxPicker",value:function(e){this._showCurrentManualMethodContainerAndHideMoreManualMethods(),e.click(),pjQuery("#"+this._dropboxPickerAnotherId).focus()}},{key:"_buildDropboxButton",value:function(){var e=this,t={success:function(t){pjQuery("#"+e._dropboxFileNameId).val(t[0].name),pjQuery("#"+e._dropboxLinkId).val(t[0].link),pjQuery("#"+e._dropboxPickerAnotherId).show(),pjQuery("#"+e._dropboxLinkNameContainerId).text(t[0].name),e._hideInputErrorContainer(),e._getUploadButtonContainer().show(),e._getUploadButton().focus()},cancel:function(){pjQuery("#"+e._dropboxLinkId).val()?(e._getUploadButtonContainer().show(),e._getUploadButton().focus()):(e._getUploadButtonContainer().hide(),e._showInputErrorContainer(),e._setResumeRegistrationFileMode(""),pjQuery("#"+e._dropboxPickerAnotherId).focus())},linkType:"direct",extensions:JSON.parse(this._allowedFileExtensions)},n=xp.getApi().createChooseButton(t);return pjQuery("#"+this._dropboxHiddenContainerId).append(n),n}}])&&Vp(t.prototype,n),r&&Vp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Dp);Hp.getInstance().addEventHandler(Hp.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('a[data-registermethod="dropbox"]');e&&e.forEach((function(e){new zp(e.id,e.dataset.appkey,e.dataset.allowedmimetypes,e.dataset.linkid,e.dataset.filenameid,e.dataset.hiddencontainerid).prepare()}))}),Hp.PRIORITY_MEDIUM);function qp(e){return qp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qp(e)}function Jp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jp(Object(n),!0).forEach((function(t){Zp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zp(e,t,n){return(t=$p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$p(r.key),r)}}function $p(e){var t=function(e,t){if("object"!==qp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===qp(t)?t:String(t)}function Xp(){return Xp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nd(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Xp.apply(this,arguments)}function ed(e,t){return ed=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ed(e,t)}function td(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nd(e);if(t){var o=nd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===qp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function nd(e){return nd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nd(e)}if(!rd)var rd=n(68806);n(7556);var od=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ed(e,t)}(i,e);var t,n,r,o=td(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,"uploadFileResume","fileManualMethodErrorContainer","resumeFileField"))._fileInputId="resumeFile",n._allowedFileExtensions=t,n._fileNameContainerId="fileNameContainer",n._filePickerAnotherId="filePickerAnother",n}return t=i,(n=[{key:"prepare",value:function(){this._appendInputFileContainer(),this._dictionary.requirePrivacyPolicyAcceptance&&this._appendPrivacyPolicyAcceptanceContainer(),this._appendContinueButton(),this._attachEvents()}},{key:"_buildDictionaryFromData",value:function(e){var t=document.getElementById(e),n=Xp(nd(i.prototype),"_getCommonDictionaryFromData",this).call(this,e),r={chooseAnotherFile:t.dataset.chooseanotherfile,fromComputer:t.dataset.fromcomputer};return Gp(Gp({},n),r)}},{key:"_appendInputFileContainer",value:function(){var e=this._buildRequiredFieldLabel(this._dictionary.fromComputer,this._fileInputId),t=pjQuery("<input/>",{id:this._fileInputId,type:"file",name:this._fileInputId,"aria-required":!0,accept:this._allowedFileExtensions});t.hide();var n=this._buildAnotherFileButtonContainer(this._fileNameContainerId,this._filePickerAnotherId);n.prepend(t),this._appendFieldContainerToForm(e,n,this._dictionary.fromComputer)}},{key:"_attachEvents",value:function(){var e=this,t=this._getManualMethodButton();t.click((function(){e._showCurrentManualMethodContainerAndHideMoreManualMethods(),e._getFileInput().click(),pjQuery("#"+e._filePickerAnotherId).focus()})),this._enableKeyboardClickForAccessibility(t);var n=pjQuery("#"+this._filePickerAnotherId);n.click((function(t){t.preventDefault(),e._getManualMethodButton().click()})),this._enableKeyboardClickForAccessibility(n),this._setCheckboxEvents(),this._setUploadButtonEvents(),this._getFileInput().change((function(){pjQuery(this).val()?(e._hideInputErrorContainer(),e._getUploadButton().focus(),pjQuery("#"+e._fileNameContainerId).text(this.files[0].name)):(e._setResumeRegistrationFileMode(""),e._getFileInput().focus(),pjQuery("#"+e._fileNameContainerId).text(e._dictionary.noFileSelected))}))}},{key:"_getRegisterMethodUploadType",value:function(){return"file"}},{key:"_isFileAvailable",value:function(){return!!this._getFileInput().val()}},{key:"_getFileInput",value:function(){return pjQuery("#"+this._fileInputId)}}])&&Kp(t.prototype,n),r&&Kp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Dp);rd.getInstance().addEventHandler(rd.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('a[data-registermethod="file"]');e&&e.forEach((function(e){new od(e.id,e.dataset.allowedfilextensions).prepare()}))}),rd.PRIORITY_MEDIUM);const id=function(){var e={access_token:"fakeAccessToken"},t={id:"fakeDriveResumeId",title:"fakeDriveResume.txt"};function n(){}function r(){}function o(e){this.options=e,e.onSelect(t)}return n.prototype.auth=new r,r.prototype.getToken=function(){return e},{getApi:function(){return(new Ds.Z).get("enableGoogleDriveDummyApi")?new n:gapi},createFilePicker:function(e){return(new Ds.Z).get("enableGoogleDriveDummyApi")?new o(e):new FilePicker(e)}}}();function ad(e){return ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ad(e)}function ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ld(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ud(Object(n),!0).forEach((function(t){cd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cd(e,t,n){return(t=fd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fd(r.key),r)}}function fd(e){var t=function(e,t){if("object"!==ad(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ad(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ad(t)?t:String(t)}function pd(){return pd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hd(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},pd.apply(this,arguments)}function dd(e,t){return dd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dd(e,t)}function yd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hd(e);if(t){var o=hd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ad(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function hd(e){return hd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hd(e)}if(!vd)var vd=n(68806);n(7556);var bd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dd(e,t)}(i,e);var t,n,r,o=yd(i);function i(e,t,n,r,a,u){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,e,"uploadDriveResume","driveManualMethodErrorContainer","resumeDriveField"))._appKey=t,l._clientId=n,l._exportTpye=r,l._allowedFileExtensions=a,l._driveFileNameId=u,l._driveLinkNameContainerId="driveLinkNameContainer",l._drivePickerAnotherId="drivePickerAnother",l}return t=i,(n=[{key:"_getRegisterMethodUploadType",value:function(){return"drive"}},{key:"prepare",value:function(){this._appendGoogleDriveContainer(),this._dictionary.requirePrivacyPolicyAcceptance&&this._appendPrivacyPolicyAcceptanceContainer(),this._appendContinueButton(),this._appendHiddenInput(),this._attachEvents()}},{key:"_buildDictionaryFromData",value:function(e){var t=document.getElementById(e),n=pd(hd(i.prototype),"_getCommonDictionaryFromData",this).call(this,e),r={chooseAnotherFile:t.dataset.chooseanotherfile,fromDrive:t.dataset.fromdrive};return ld(ld({},n),r)}},{key:"_appendHiddenInput",value:function(){this._getForm().append(pjQuery("<input/>",{type:"hidden",name:this._driveFileNameId,id:this._driveFileNameId}))}},{key:"_appendGoogleDriveContainer",value:function(){var e=this._buildRequiredFieldLabel(this._dictionary.fromDrive,this._driveFileNameId),t=this._buildAnotherFileButtonContainer(this._driveLinkNameContainerId,this._drivePickerAnotherId);this._appendFieldContainerToForm(e,t,this._dictionary.fromDrive)}},{key:"_attachEvents",value:function(){var e=this,t=this._getManualMethodButton();t.click((function(t){t.preventDefault(),e._initDrivePicker(e._id)})),this._enableKeyboardClickForAccessibility(t);var n=pjQuery("#"+this._drivePickerAnotherId);n.click((function(t){t.preventDefault(),e._initDrivePicker(e._drivePickerAnotherId)})),this._enableKeyboardClickForAccessibility(n),this._setCheckboxEvents(),this._setUploadButtonEvents()}},{key:"_isFileAvailable",value:function(){return!!pjQuery("#driveFileId").val()}},{key:"_initDrivePicker",value:function(e){this._showCurrentManualMethodContainerAndHideMoreManualMethods();var t=this;id.createFilePicker({apiKey:this._appKey,clientId:this._clientId,buttonEl:document.getElementById(e),onSelect:function(e){var n=e.title;e&&e.id&&(t.addFileDataToDownload(e),pjQuery("#"+t._drivePickerAnotherId).show(),t._getUploadButtonContainer().show(),t._hideInputErrorContainer()),pjQuery("#"+t._driveFileNameId).val(n),pjQuery("#"+t._driveLinkNameContainerId).text(e.title),t._getUploadButton().focus()},onCancel:function(){pjQuery("#"+t._driveLinkId).val()?(t._getUploadButtonContainer().show(),t._getUploadButton().focus()):(t._getUploadButtonContainer().hide(),t._showInputErrorContainer(),t._setResumeRegistrationFileMode(""),pjQuery("#"+t._drivePickerAnotherId).focus())},extensions:this._allowedFileExtensions}),pjQuery("#"+this._drivePickerAnotherId).focus()}},{key:"addFileDataToDownload",value:function(e){if(e&&e.id){var t=id.getApi().auth.getToken().access_token,n=this._getForm();this.createInputIfNotExists({name:"driveFileId",id:"driveFileId",value:e.id,type:"hidden"}).appendTo(n),this.createInputIfNotExists({name:"driveAccessToken",id:"driveAccessToken",value:t,type:"hidden"}).appendTo(n)}}},{key:"createInputIfNotExists",value:function(e){var t=pjQuery("#"+e.id);return 0===t.length&&(t=pjQuery("<input>")),t.attr(e),t}}])&&sd(t.prototype,n),r&&sd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Dp);vd.getInstance().addEventHandler(vd.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('a[data-registermethod="drive"]');e&&e.forEach((function(e){new bd(e.id,e.dataset.appkey,e.dataset.clientid,e.dataset.exportmimetype,e.dataset.allowedmimetypes,e.dataset.filenameid).prepare()}))}),vd.PRIORITY_MEDIUM);function md(e){return md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},md(e)}function gd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==md(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==md(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===md(i)?i:String(i)),r)}var o,i}function _d(e,t){return _d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_d(e,t)}function wd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sd(e);if(t){var o=Sd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===md(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Sd(e){return Sd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sd(e)}if(!Od)var Od=n(68806);n(7556);var Pd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_d(e,t)}(i,e);var t,n,r,o=wd(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"prepare",value:function(){this._attachEvents()}},{key:"_attachEvents",value:function(){var e=this._getManualMethodButton();this._enableKeyboardClickForAccessibility(e)}}])&&gd(t.prototype,n),r&&gd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(dp);Od.getInstance().addEventHandler(Od.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('a[data-registermethod="later"]');e&&e.forEach((function(e){new Pd(e.id).prepare()}))}),Od.PRIORITY_MEDIUM);function Ed(e){return Ed="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ed(e)}function kd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ed(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ed(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ed(i)?i:String(i)),r)}var o,i}if(!jd)var jd=n(68806);var Td=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"inject",value:function(e,t){var n=document.getElementById(t);(n=n.contentWindow||n.contentDocument.document||n.contentDocument).document.open(),n.document.write(e),n.document.close()}}])&&kd(t.prototype,n),r&&kd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();jd.getInstance().addEventHandler(jd.EVENT_LOAD_NAME,(function(){var e=document.querySelectorAll('iframe[class="pCustomFrame"]');if(e){var t=new Td;e.forEach((function(e){t.inject(e.dataset.content,e.id)}))}}),jd.PRIORITY_MEDIUM);function Fd(e){return Fd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fd(e)}function Id(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Fd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Fd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Fd(i)?i:String(i)),r)}var o,i}if(!Rd)var Rd=n(68806);var Cd=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"configureButtonClick",value:function(e){var t=document.getElementById("default-apply-button");t&&(t.onclick=window[e])}}])&&Id(t.prototype,n),r&&Id(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Dd=Rd.getInstance(),xd=new Ds.Z;Dd.addEventHandler(Rd.EVENT_LOAD_NAME,(function(){var e=xd.get("linkedinDefaultApplyButton");e&&(new Cd).configureButtonClick(e.onclickmethod)}),Rd.PRIORITY_MEDIUM);function Ad(e){return Ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ad(e)}function Ld(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ad(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ad(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ad(i)?i:String(i)),r)}var o,i}if(!Nd)var Nd=n(68806);var Md=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"formatWidth",value:function(e){for(var t=document.querySelectorAll('div.progress__bar[data-progress="'+e+'%"]'),n=0;n<t.length;n++)t[n].style.width=e+"%"}}],n&&Ld(t.prototype,n),r&&Ld(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Vd=Nd.getInstance(),Bd=new Ds.Z;Vd.addEventHandler(Nd.EVENT_LOAD_NAME,(function(){var e=Bd.getAllByDataValue("type","listProgressBarData");if(e){var t=new Md;e.forEach((function(e){t.formatWidth(e.dataset.progress)}))}}),Nd.PRIORITY_MEDIUM);function Ud(e){return Ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ud(e)}function Wd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ud(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ud(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ud(i)?i:String(i)),r)}var o,i}if(!Yd)var Yd=n(68806);var Qd=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"configureDelegateWidget",value:function(e){pjQuery("#delegateWidget").autocomplete({source:function(t,n){pjQuery.ajax({type:"POST",url:"/"+e+"/_portalUserApi?delegates=true",dataType:"json",cache:!1,xhrFields:{withCredentials:!0},data:JSON.stringify({key:t.term}),success:function(e){n(pjQuery.map(e,(function(e){return{label:e.longName,shortName:e.shortName,value:e.id}})))}})},minLength:2,select:function(e,t){return pjQuery("#delegateUserId").val(""),0!=t.item.value&&(pjQuery("#delegateWidget").val(t.item.label),pjQuery("#delegateUserId").val(t.item.value)),!1},focus:function(e,t){return pjQuery("#delegateUserId").val(""),0!=t.item.value&&(pjQuery("#delegateWidget").val(t.item.label),pjQuery("#delegateUserId").val(t.item.value)),!1}});var t=pjQuery("#delegateEnabled"),n=pjQuery("#delegateNotify");if(t.length&&n.length){var r=this;t.on("change",(function(){r._delegateEnableChecker(t,n)})),this._delegateEnableChecker(t,n)}}},{key:"_delegateEnableChecker",value:function(e,t){e.prop("checked")?t.attr("disabled",!1):(t.attr("disabled","disabled"),t.attr("checked",!1))}}])&&Wd(t.prototype,n),r&&Wd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Hd=Yd.getInstance(),zd=new Ds.Z;Hd.addEventHandler(Yd.EVENT_LOAD_NAME,(function(){var e=zd.get("portalsDelegateWidget");e&&(new Qd).configureDelegateWidget(e.portalurlpath)}),Yd.PRIORITY_HIGH);function qd(e){return qd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qd(e)}function Jd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==qd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===qd(i)?i:String(i)),r)}var o,i}if(!Gd)var Gd=n(68806);var Zd=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"configureSelect",value:function(e){var t=document.querySelector('select[name="template"]');t&&t.addEventListener("change",(function(){var n=e[t.options[t.selectedIndex].value],r=document.getElementById("jobTemplateWidgetDescription");if(r&&r.parentNode.removeChild(r),0!==t.selectedIndex&&n){var o=document.createElement("span");o.setAttribute("id","jobTemplateWidgetDescription");var i=document.createTextNode(n);o.appendChild(i),document.getElementById("jobTemplateWidget").appendChild(o)}}))}}])&&Jd(t.prototype,n),r&&Jd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Kd=Gd.getInstance(),$d=new Ds.Z;Kd.addEventHandler(Gd.EVENT_LOAD_NAME,(function(){var e=$d.get("jobTemplateWidget");e&&(new Zd).configureSelect(JSON.parse(e.templatesdatajson))}),Gd.PRIORITY_MEDIUM);function Xd(){}Xd.assertIsValid=function(e){if(!(e&&e instanceof Xd))throw new Error("invalidArgumentException: invalid value. It must be an instance of ValueBaseLegacy.")},Xd.prototype.getType=function(){throw new Error("notImplementedError")},Xd.prototype.toString=function(){throw new Error("notImplementedError")},Xd.prototype.isEmpty=function(){return!1};const ey=Xd;function ty(){ey.call(this)}ty.TYPE="FieldEmptyValueLegacy",ty.prototype=Object.create(ey.prototype),ty.prototype.getType=function(){return ty.TYPE},ty.prototype.toString=function(){return""},ty.prototype.isEmpty=function(){return!0};const ny=ty;function ry(){}ry.registerFieldDependency=function(e,t,n){PortalHtml.elementExists(e)&&PortalHtml.elementExists(t)&&(n!==ry.TYPE_DISPLAY&&n!==ry.TYPE_VALUES||(ry._existsFieldWithDependencies(t)||(ry._fieldsDependencies[t]=[]),-1===ry._fieldsDependencies[t].indexOf(e)&&(ry._fieldsDependencies[t][e]=[]),-1===ry._fieldsDependencies[t][e].indexOf(n)&&ry._fieldsDependencies[t][e].push(n)))},ry.getChildDependentFieldsOf=function(e){return ry._existsFieldWithDependencies(e)?ry._fieldsDependencies[e]:[]},ry._existsFieldWithDependencies=function(e){return e in ry._fieldsDependencies},ry.TYPE_DISPLAY="Display",ry.TYPE_VALUES="Values",ry._fieldsDependencies={};const oy=ry;function iy(e){return iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iy(e)}function ay(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==iy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==iy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===iy(i)?i:String(i)),r)}var o,i}var uy=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._parentDependencyFieldId=t,this._operator=n,this._value=r}var t,n,r;return t=e,(n=[{key:"getParentDependencyFieldId",value:function(){return this._parentDependencyFieldId}},{key:"getOperator",value:function(){return this._operator}},{key:"getValue",value:function(){return this._value}}])&&ay(t.prototype,n),r&&ay(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const ly=uy;function cy(){}cy.isFieldRegistered=function(e){return e in cy._fields},cy.registerField=function(e,t){return!(cy.isFieldRegistered(e)||!PortalHtml.elementExists(e))&&(cy._fields[e]=t,!0)},cy.getFieldValue=function(e){return cy._getFieldOrDie(e).getValue()},cy.getFieldValueByType=function(e,t){var n=cy._getFieldOrDie(e).getValue();if(n.getType()!==t&&n.getType()!==ny.TYPE)throw new Error("invalidValueError: field "+e+" returns "+n.getType()+" values");return n},cy.getFieldValueForVisibilityCondition=function(e){return cy._getFieldOrDie(e).getValueForVisibilityCondition()},cy.setFieldValue=function(e,t){cy._getFieldOrDie(e).setValue(t)},cy.hasValue=function(e){var t=cy.getField(e);if(null!==t)return t.hasValue();cy._throwFieldNotRegisteredException(e)},cy.cloneForNewTableRow=function(e,t,n){PortalString.isString(n)||(n="");var r=e+"-0"+n,o=e+"-"+t+n;if(null===cy.getField(o)){var i=cy.getField(r);null===i&&cy._throwFieldNotRegisteredException(e),i.cloneForNewTableRow(o,t)}},cy.isVisible=function(e){var t=cy.getField(e);return null!==t&&t.isVisible()},cy.setFieldVisibilityConditionFromParams=function(e,t,n,r){if(cy.isFieldRegistered(e)){var o=cy.getField(e),i=new ly(t,n,r);o.addVisibilityCondition(i)}},cy.onFieldValueChange=function(e){if(cy.isFieldRegistered(e)){var t,n,r,o=oy.getChildDependentFieldsOf(e);for(n in o)if(o.hasOwnProperty(n))for(t=0;t<o[n].length;t++)r=o[n][t],cy._addFieldAsPendingToBeUpdated(n,r,e);var i=cy._getFieldsPendingToBeUpdated(e);for(t=0;t<i.length;t++){n=i[t];var a=cy.getField(n);null!==a&&(a.onRelatedFieldValueChange(e),cy._removePendingToBeUpdatedField(n))}}},cy.fieldAcceptsValueType=function(e,t){return cy._getFieldOrDie(e).fieldAcceptsValueType(t)},cy.isSomeFieldBeingUpdated=function(){for(var e in cy._fields)if(cy._fields.hasOwnProperty(e)&&cy.getField(e).isBeingUpdated())return!0;return!1},cy.getField=function(e){return cy.isFieldRegistered(e)?cy._fields[e]:null},cy.dispatchBeforeSubmit=function(){for(var e in cy._fields)cy.getField(e).onBeforeSubmit()},cy._throwFieldNotRegisteredException=function(e){throw new Error("tryToAccessNonRegisteredField: "+e)},cy._addFieldAsPendingToBeUpdated=function(e,t,n){-1===cy._fieldsPendingToBeUpdated.indexOf(e)?cy._fieldsPendingToBeUpdated[e]={dependencyType:t,parentFieldId:n}:cy._fieldsPendingToBeUpdated[e].dependencyType===oy.TYPE_DISPLAY&&t===oy.TYPE_VALUES&&(cy._fieldsPendingToBeUpdated[e]={dependencyType:t,parentFieldId:n})},cy._getFieldsPendingToBeUpdated=function(e){var t=[];for(var n in cy._fieldsPendingToBeUpdated){if(cy._fieldsPendingToBeUpdated.hasOwnProperty(n))cy._fieldsPendingToBeUpdated[n].parentFieldId===e&&t.push(n)}return t},cy._removePendingToBeUpdatedField=function(e){var t=cy._fieldsPendingToBeUpdated.indexOf(e);t>-1&&cy._fieldsPendingToBeUpdated.splice(t,1)},cy._getFieldOrDie=function(e){var t=cy.getField(e);if(null!==t)return t;cy._throwFieldNotRegisteredException(e)},cy._fieldsPendingToBeUpdated=[],cy._fields={};const sy=cy;function fy(e){return fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fy(e)}function py(){}py.evaluateForField=function(e,t){if(!t)return!1;for(var n=!0,r=t.length-1;r>=0;r--){var o=t[r],i=o.getParentDependencyFieldId(),a=sy.getFieldValueForVisibilityCondition(i);if(!(n=sy.isVisible(i)&&(a instanceof Array?this._evaluateArrayedValue(a,o.getValue(),o.getOperator()):this._evaluateValue(a,o.getValue(),o.getOperator()))))break}var u=e.isVisible();return n?!u&&(e.show(),!0):!!u&&(e.hide(),!0)},py._evaluateArrayedValue=function(e,t,n){return"all"===n||"=="===n?this._arrayEquals(e,t):"!="===n?!this._arrayEquals(e,t):"any"===n?this._arrayContainsAny(e,t):"none"===n?!this._arrayContainsAny(e,t):void 0},py._arrayContainsAny=function(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)if(py._parseValueForEvaluation(e[n])==py._parseValueForEvaluation(t[r]))return!0;return!1},py._arrayEquals=function(e,t){if(e.length<t.length)return!1;for(var n=!0,r=0;r<t.length;r++){for(var o=!1,i=0;i<e.length&&!o;i++)py._parseValueForEvaluation(t[r])==py._parseValueForEvaluation(e[i])&&(o=!0);n=o&&n}return n},py._evaluateValue=function(e,t,n){return e=py._parseValueForEvaluation(e),"=="===n?(null!==e||null===t)&&(e==t||!(e<t||e>t)):"!="===n?e!=t:"any"===n||"none"===n?this._evaluateArrayedValue([e],t,n):"isSet"===n?this._evaluateValueIsSet(e,t):"isEmpty"===n?!this._isValueSet(e):void 0},py._evaluateValueIsSet=function(e,t){return this._isWhenIsSetConditionValue(t)?this._isValueSet(e):this._isWhenIsNotSetConditionValue(t)?!this._isValueSet(e):void 0},py._isValueSet=function(e){return""!==e&&null!=e},py._isWhenIsSetConditionValue=function(e){return"1"===e},py._isWhenIsNotSetConditionValue=function(e){return"2"===e},py._parseValueForEvaluation=function(e){if(null===e)return null;if("string"==typeof e&&-1!==e.indexOf("JSNType")){var t=JSON.parse(e);return t.value&&t.value.id?t.value.id:null}return"object"===fy(e)&&e.value?e.value.id:e};const dy=py;function yy(e){this._fieldId=e,this._visibilityConditions=[],this._isBeingUpdated=!1,this._shouldReupdateAfterCurrentUpdate=!1,this._nextUpdateParentFieldId=null}yy.prototype.register=function(){sy.registerField(this._fieldId,this)&&this._postRegister()},yy.prototype.getType=function(){throw new Error("notImplementedError")},yy.prototype.getValue=function(){throw new Error("notImplementedError")},yy.prototype.getValueForVisibilityCondition=function(){throw new Error("notImplementedError")},yy.prototype.setValue=function(e){throw new Error("notImplementedError")},yy.prototype.hasValue=function(){return!this.getValue().isEmpty()},yy.prototype._assertIsAllowedValueToSet=function(e){if(ey.assertIsValid(e),!(this._getAllowedValueTypesToSet().indexOf(e.getType())>-1))throw new Error("invalidArgumentException: value to set must be an instance of: "+this._getAllowedValueTypesToSet().join(", "))},yy.prototype._getAllowedValueTypesToSet=function(){throw new Error("notImplementedError")},yy.prototype.isRequired=function(){return pjQuery("#fieldSpecContainer"+this._fieldId).find(".requiredField").length||pjQuery("#fieldSpecContainer"+this._fieldId).find(".formrequiredField").length||pjQuery("#fieldSpecContainer"+this._fieldId).find(".datasetrequiredField").length},yy.prototype.isBeingUpdated=function(){return this._isBeingUpdated||this._shouldReupdateAfterCurrentUpdate},yy.prototype.cloneForNewTableRow=function(e,t){for(var n=this._buildClonedFieldForNewTableRow(e,t),r=this._visibilityConditions.length-1;r>=0;r--)n.addVisibilityCondition(new ly(this._visibilityConditions[r].getParentDependencyFieldId().replace(/^((\d+-)+)\d+$/,"$1"+t),this._visibilityConditions[r].getOperator(),this._visibilityConditions[r].getValue()));n.register()},yy.prototype.getFieldId=function(){return this._fieldId},yy.prototype.addVisibilityCondition=function(e){null!==e&&(this._visibilityConditions.push(e),FieldsDependenciesLegacy.registerFieldDependency(this._fieldId,e.getParentDependencyFieldId(),FieldsDependenciesLegacy.TYPE_DISPLAY))},yy.prototype.isVisible=function(){if(null===this._getFieldContainerElement())return!1;var e=this._getHiddenFieldIndicatorElement();return null===e||0==e.length},yy.prototype.show=function(){var e=this._getFieldContainerElement();if(e){var t=this._getFieldElement();e.css("display",""),this._resetAttributes(t),this._removeHiddenElementIndicator()}},yy.prototype.hide=function(){if(this.isVisible()){var e=this._getFieldContainerElement();if(e){e.css("display","none");var t=this._getFieldElement();this._hideElement(t),this._addHiddenElementIndicator()}}},yy.prototype.onRelatedFieldValueChange=function(e){this._isBeingUpdated?(this._shouldReupdateAfterCurrentUpdate=!0,this._nextUpdateParentFieldId=e):(this._isBeingUpdated=!0,this._shouldReupdateAfterCurrentUpdate=!1,this._nextUpdateParentFieldId=null,this._updateFieldAfterParentFieldValueChange(e))},yy.prototype.fieldAcceptsValueType=function(e){return this._getAllowedValueTypesToSet().indexOf(e)>-1},yy.prototype._postRegister=function(){if(this._attachOnChangeListener(),this.hasValue()){var e=this._fieldId;pjQuery((function(){sy.onFieldValueChange(e)}))}},yy.prototype._updateFieldAfterParentFieldValueChange=function(e){var t=this._evaluateConditionalVisibilityAfterRelatedFieldValueChange();this._onFieldUpdated(t)},yy.prototype._onFieldUpdated=function(e){if(e&&sy.onFieldValueChange(this._fieldId),this._isBeingUpdated=!1,this._shouldReupdateAfterCurrentUpdate){this._shouldReupdateAfterCurrentUpdate=!1;var t=this._nextUpdateParentFieldId;this._nextUpdateParentFieldId=null,this.onRelatedFieldValueChange(t)}},yy.prototype._evaluateConditionalVisibilityAfterRelatedFieldValueChange=function(){return dy.evaluateForField(this,this._visibilityConditions)},yy.prototype._buildClonedFieldForNewTableRow=function(e,t){throw new Error("notImplementedError")},yy.prototype._resetAttributes=function(e){if(e){var t=e.attr("data-required");t&&(e.prop("required",t),e.attr("aria-required",t));var n=e.data("hiddentype");n&&(this._setElementType(e,n),e.removeAttr("data-hiddenType"));var r=e.attr("data-hiddenValue");r&&(e.val(r),r!==e.val()&&this._unsetOnHide(e),e.removeAttr("data-hiddenValue")),this._resetChildren(e)}},yy.prototype._hideElement=function(e){if(e&&0!==e.length){e.removeAttr("required"),e.removeAttr("aria-required"),e.attr("data-hiddenType",e.prop("type")),this._setElementType(e,"hidden");var t=e.val();t&&e.attr("data-hiddenValue",t),this._unsetOnHide(e),this._hideChildren(e)}},yy.prototype._unsetOnHide=function(e){e.val("")},yy.prototype._hideChildren=function(e){var t=this;e.find("[data-parentid='"+e.attr("id")+"']").each((function(e,n){t._hideElement(pjQuery("#"+n.id))}))},yy.prototype._resetChildren=function(e){var t=this;e.find("[data-parentid='"+e.attr("id")+"']").each((function(e,n){t._resetAttributes(pjQuery("#"+n.id))}))},yy.prototype._addHiddenElementIndicator=function(){this._getFieldContainerElement().append('<input id="'+this._fieldId+'_hidden" name="'+this._fieldId+'_hidden" type="hidden" value="true" />')},yy.prototype._removeHiddenElementIndicator=function(){pjQuery("#"+this._fieldId+"_hidden").remove()},yy.prototype._setElementType=function(e,t){if(e.prop("type")!==t)switch(t){case"select-one":e[0].multiple=!1;break;case"select-multiple":e[0].multiple=!0;break;default:this._elementAllowsChangingType(e[0])&&e.prop("type",t)}},yy.prototype._elementAllowsChangingType=function(e){var t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"type");return t&&"function"==typeof t.set},yy.prototype._attachOnChangeListener=function(){var e=this;pjQuery("#"+this._fieldId).on("change",(function(){sy.onFieldValueChange(e.getFieldId())}))},yy.prototype._getFieldElement=function(){return pjQuery("#"+this._fieldId)},yy.prototype._getFieldContainerElement=function(){return pjQuery("#fieldSpecContainer"+this._fieldId)},yy.prototype._getHiddenFieldIndicatorElement=function(){return pjQuery("#"+this._fieldId+"_hidden")},yy.prototype._triggerEvent=function(e){e=e||"change",this._getFieldElement().trigger(e)},yy.prototype.onBeforeSubmit=function(){};const hy=yy;function vy(){}vy.registerDatasource=function(e,t){vy._isDatasourceRegistered(e)||(vy._datasources[e]=t)},vy.getForField=function(e){var t=vy._getDatasource(e);if(null!==t)return t;throw new Error("tryToAccessNonRegisteredDatasource: "+e)},vy.cloneDatasourceForNewTableRow=function(e,t,n){var r=vy.getForField(e).cloneForNewTableRow(t,n);vy.registerDatasource(t,r)},vy._getDatasource=function(e){return vy._isDatasourceRegistered(e)?vy._datasources[e]:null},vy._isDatasourceRegistered=function(e){return e in vy._datasources},vy._datasources={};const by=vy;function my(e,t){if(ey.call(this),!PortalString.isString(e))throw new Error("invalidValue: option ID must be a valid string");if(!PortalString.isString(t))throw new Error("invalidValue: option text must be a valid string");this._optionId=e,this._optionText=t}my.TYPE="FieldOptionValueLegacy",my.prototype=Object.create(ey.prototype),my.prototype.getType=function(){return my.TYPE},my.prototype.toString=function(){return this._optionText},my.prototype.getOptionId=function(){return this._optionId},my.prototype.getOptionText=function(){return this._optionText};const gy=my;function _y(e){if(ey.call(this),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: options must be a non-empty array");var t=this;e.forEach((function(e,n){t._assertIsValidOption(e)})),this._options=e}_y.buildOption=function(e,t){return{id:e,text:t}},_y.TYPE="FieldMultipleOptionsValueLegacy",_y.prototype=Object.create(ey.prototype),_y.prototype.getType=function(){return _y.TYPE},_y.prototype.toString=function(){var e=[];return this._options.forEach((function(t,n){e.push(t.text)})),"["+e.join(",")+"]"},_y.prototype.getOptionsIds=function(){var e=[];return this._options.forEach((function(t,n){e.push(t.id)})),e},_y.prototype.getOptionsTexts=function(){var e=[];return this._options.forEach((function(t,n){e.push(t.text)})),e},_y.prototype._assertIsValidOption=function(e){var t=e.id,n=e.text;if(!PortalString.isString(t))throw new Error("invalidValue: option ID must be a valid string");if(!PortalString.isString(n))throw new Error("invalidValue: option text must be a valid string")};const wy=_y;function Sy(e){hy.call(this,e),this._datasource=by.getForField(e),pjQuery.each(this._datasource.getParentDependenciesFieldsIds(),(function(t,n){oy.registerFieldDependency(e,n,oy.TYPE_VALUES)}))}Sy.prototype=Object.create(hy.prototype),Sy.prototype._getOptionsPage=function(){throw new Error("notImplementedError")},Sy.prototype._getOptionsPageSize=function(){throw new Error("notImplementedError")},Sy.prototype._createWithNewOptions=function(e){throw new Error("notImplementedError")},Sy.prototype._updateFieldAfterParentFieldValueChange=function(e){if(this._datasource.isParentDependentField(e))this.isVisible()?(this._evaluateConditionalVisibilityAfterRelatedFieldValueChange(),this._datasource.fetchNewOptions(this._getSelectedOptionsIds(),this._getOptionsPage(),this._getOptionsPageSize(),this._getOnNewOptionsCallback())):(this._datasource.fetchNewOptions(this._getSelectedOptionsIds(),this._getOptionsPage(),this._getOptionsPageSize(),this._getOnNewOptionsCallback()),this._evaluateConditionalVisibilityAfterRelatedFieldValueChange());else{var t=this._evaluateConditionalVisibilityAfterRelatedFieldValueChange();this._onFieldUpdated(t)}},Sy.prototype._getOnNewOptionsCallback=function(){var e=this;return function(t,n){var r=[],o=[],i=function(e,t){e.map((function(e){-1===pjQuery.inArray(e.id,r)&&(o.push({id:e.id,name:e.name,isSelected:t}),r.push(e.id))}))};i(n,!0),i(t,!1);var a=1===o.length;e.isRequired()&&a&&(o[0].isSelected=!0);var u=e._getSelectedOptionsIds();e._createWithNewOptions(o);var l=e._getSelectedOptionsIds(),c=JSON.stringify(u)!==JSON.stringify(l);e._onFieldUpdated(c)}},Sy.prototype._cloneDatasourceForNewTableRow=function(e,t){by.cloneDatasourceForNewTableRow(this._fieldId,e,t)},Sy.prototype._getSelectedOptionsIds=function(){var e=this.getValue();if(e.isEmpty())return[];switch(e.getType()){case gy.TYPE:return[PortalString.toInt(e.getOptionId())];case wy.TYPE:return e.getOptionsIds().map((function(e){return PortalString.toInt(e)}))}return[]},Sy.prototype._buildOptionHtmlId=function(e){return this._fieldId+"_"+e};const Oy=Sy;function Py(e){if(ey.call(this),!PortalString.isString(e))throw new Error("invalidValue: value must be a valid string");this._value=e}Py.TYPE="FieldTextValueLegacy",Py.prototype=Object.create(ey.prototype),Py.prototype.getType=function(){return Py.TYPE},Py.prototype.toString=function(){return this._value},Py.prototype.getValue=function(){return this._value};const Ey=Py;function ky(e){if(ey.call(this),!PortalString.isString(e))throw new Error("invalidValue: option ID must be a valid string");this._optionId=e}ky.TYPE="FieldIdValueLegacy",ky.prototype=Object.create(ey.prototype),ky.prototype.getType=function(){return ky.TYPE},ky.prototype.toString=function(){return this._optionId},ky.prototype.getOptionId=function(){return this._optionId};const jy=ky;var Ty=n(16655),Fy=n.n(Ty),Iy=n(81396),Ry=n.n(Iy);function Cy(e,t,n,r,o,i,a,u,l,c,s){Oy.call(this,e),this._dropdownCssClass=t,this._placeholderText=n,this._minimumInputLength=r,this._ajaxDelayMs=o,this._visibleOptionsLimit=i,this._optionIdsToSearchLimit=a,this._dictionary=u,this._label=l,this._isRequired=c,this._isAccessible=s}Cy.TYPE="AutocompleteSelectFieldLegacy",Cy.register=function(e,t,n,r,o,i,a,u,l,c,s){new Cy(e,t,n,r,o,i,a,u,l,c,s).register()},Cy.prototype=Object.create(Oy.prototype),Cy.prototype._postRegister=function(){this._attachLazyPicker(),Oy.prototype._postRegister.call(this)},Cy.prototype._getAllowedValueTypesToSet=function(){return[jy.TYPE,Ey.TYPE]},Cy.prototype.getType=function(){return Cy.TYPE},Cy.prototype.getValue=function(){var e=this._getFieldElement().select2("data");if(!e||0===e.length)return new ny;var t=e[0].id,n=e[0].text;return null===t||""===t?new ny:new gy(t,n)},Cy.prototype.getValueForVisibilityCondition=function(){var e=this._getFieldElement().val();return null!==e&&""!==e||(e=null),e},Cy.prototype.setValue=function(e){switch(this._assertIsAllowedValueToSet(e),e.getType()){case jy.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],this._buildOnFieldOptionsRetrieveCallback());break;case Ey.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],this._buildOnFieldOptionsRetrieveCallback());break;default:throw new Error("modeNotSupported")}},Cy.prototype._buildOnFieldOptionsRetrieveCallback=function(){var e=this;return function(t){t=e._markOptionsFoundAsSelected(t),e._createWithNewOptions(t),sy.onFieldValueChange(e.getFieldId())}},Cy.prototype._markOptionsFoundAsSelected=function(e){return e&&Array.isArray(e)?(pjQuery.each(e,(function(t){e[t].isSelected=!0})),e):e},Cy.prototype._getOptionsPage=function(){return 1},Cy.prototype._getOptionsPageSize=function(){return 2},Cy.prototype._createWithNewOptions=function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>").attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join("")),this._getFieldElement().trigger("change.select2")},Cy.prototype._removeAllOptions=function(){this._getFieldElement().find("option:gt(0)").remove()},Cy.prototype._attachLazyPicker=function(){var e=this._getFieldElement();e.select2(this._getLazyPickerProperties());var t=this._getEventCallbacksForLazyPicker();if(t.length)for(var n in t)t.hasOwnProperty(n)&&e.on(t[n].eventName,t[n].eventCallback);var r=this;pjQuery((function(){setTimeout((function(){e.trigger("select2-"+r.getFieldId()+"-ready")}),10)}))},Cy.prototype._getLazyPickerProperties=function(){var e={placeholder:this._placeholderText,allowClear:!0,width:"100%",minimumInputLength:this._minimumInputLength,multiple:this._isMultiple(),containerCssClass:"select2Container"+this._fieldId,dropdownCssClass:this._dropdownCssClass,escapeMarkup:function(e){return e},dictionary:this._dictionary,label:this._label,fieldId:this._fieldId,isRequired:this._isRequired,isAccessible:this._isAccessible,closeOnSelect:!this._isMultiple()};if(this._datasource.isLocalDatasource())e.data=this._adaptDatasourceOptionsToSelect2LocalDataFormat(this._datasource.getOptions());else{var t=this,n=this._getCache();e.ajax={url:this._datasource.getOptionsSearchApiUrl(),type:"POST",delay:this._ajaxDelayMs,quietMillis:this._ajaxDelayMs,dataType:"json",data:this._getDataPayload.bind(this),transport:function(e,r,o){var i=t._generateCacheKey(e.data);return n.get(i).done(r).fail((function(){return pjQuery.ajax(e).done(r).done((function(e){n.set(i,e)})).fail(o)}))},processResults:function(e,n){return t._datasource.processLazyPickerAjaxResponseData(e)}}}return e},Cy.prototype._getEventCallbacksForLazyPicker=function(){return[this._buildEventCallback(Cy.ITEM_SELECTION_EVENT_NAME,(function(){pjQuery(this).focus()}))]},Cy.prototype._buildEventCallback=function(e,t){return{eventName:e,eventCallback:t}},Cy.prototype._adaptDatasourceOptionsToSelect2LocalDataFormat=function(e){return pjQuery.each(e,(function(t){e[t].hasOwnProperty("name")&&(e[t].text=e[t].name)})),e},Cy.prototype._isMultiple=function(){return!1},Cy.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new Cy(e,this._dropdownCssClass,this._placeholderText,this._minimumInputLength,this._ajaxDelayMs,this._visibleOptionsLimit,this._optionIdsToSearchLimit,pjQuery.extend(!0,{},this._dictionary),this._label,this._isRequired,this._isAccessible)},Cy.prototype._getDataPayload=function(e){var t=this._visibleOptionsLimit,n=e.searchIds;return n&&(n=n.split(","),t=this._optionIdsToSearchLimit),this._datasource.buildRequestDataFromParams(e.page||1,t,e.term,!1,n,null)},Cy.prototype._getCache=function(){return Fy().getInstance()},Cy.prototype._generateCacheKey=function(e){return Ry()(this._datasource.getOptionsSearchApiUrl()+JSON.stringify(e))},Cy.ITEM_SELECTION_EVENT_NAME="select2:select";const Dy=Cy;function xy(e){if(ey.call(this),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: options IDs must be a non-empty array");e.forEach((function(e,t){if(!PortalString.isString(e))throw new Error("invalidValue: option ID must be a valid string")})),this._optionsIds=e}xy.TYPE="FieldMultipleIdsValueLegacy",xy.prototype=Object.create(ey.prototype),xy.prototype.getType=function(){return xy.TYPE},xy.prototype.toString=function(){return"["+this._optionsIds.join(",")+"]"},xy.prototype.getOptionsIds=function(){return this._optionsIds};const Ay=xy;function Ly(e){if(ey.call(this),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: values must be a non-empty array");e.forEach((function(e,t){if(!PortalString.isString(e))throw new Error("invalidValue: inner values should be strings")})),this._values=e}Ly.TYPE="FieldMultipleTextsValueLegacy",Ly.prototype=Object.create(ey.prototype),Ly.prototype.getType=function(){return Ly.TYPE},Ly.prototype.toString=function(){return"["+this._values.join(",")+"]"},Ly.prototype.getOptionsTexts=function(){return this._values};const Ny=Ly;function My(e,t,n,r,o,i,a,u,l,c,s){Dy.call(this,e,t,n,r,o,i,a,u,l,c,s)}My.TYPE="AutocompleteMultipleSelectFieldLegacy",My.register=function(e,t,n,r,o,i,a,u,l,c,s){new My(e,t,n,r,o,i,a,u,l,c,s).register()},My.prototype=Object.create(Dy.prototype),My.prototype._getAllowedValueTypesToSet=function(){return[Ay.TYPE,Ny.TYPE]},My.prototype.getType=function(){return My.TYPE},My.prototype.setValue=function(e){switch(this._assertIsAllowedValueToSet(e),e.getType()){case Ay.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),this._buildOnFieldOptionsRetrieveCallback());break;case Ny.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),this._buildOnFieldOptionsRetrieveCallback());break;default:throw new Error("modeNotSupported")}},My.prototype.getValue=function(){var e=this._getFieldElement().select2("data");if(null===e||0===e.length)return new ny;var t=[];return e.forEach((function(e,n){var r=e.id,o=e.text;null!==r&&""!==r&&t.push(wy.buildOption(r,o))})),new wy(t)},My.prototype._removeAllOptions=function(){this._getFieldElement().empty()},My.prototype._isMultiple=function(){return!0},My.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new My(e,this._dropdownCssClass,this._placeholderText,this._minimumInputLength,this._ajaxDelayMs,this._visibleOptionsLimit,this._optionIdsToSearchLimit,pjQuery.extend(!0,{},this._dictionary),this._label,this._isRequired,this._isAccessible)};const Vy=My;function By(e){if(ey.call(this),"boolean"!=typeof e)throw new Error("invalidValue: value must be a valid boolean");this._isSelected=e}By.TYPE="FieldBooleanValueLegacy",By.prototype=Object.create(ey.prototype),By.prototype.getType=function(){return By.TYPE},By.prototype.toString=function(){return this._isSelected.toString()},By.prototype.isSelected=function(){return this._isSelected};const Uy=By;function Wy(e){hy.call(this,e)}Wy.TYPE="CheckboxFieldLegacy",Wy.register=function(e){new Wy(e).register()},Wy.prototype=Object.create(hy.prototype),Wy.prototype.getType=function(){return Wy.TYPE},Wy.prototype._getAllowedValueTypesToSet=function(){return[Uy.TYPE]},Wy.prototype.getValue=function(){var e=this._getFieldElement().prop("checked");return new Uy(!!e)},Wy.prototype.getValueForVisibilityCondition=function(){return this._getFieldElement().prop("checked")?this._getFieldElement().val():null},Wy.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().prop("checked",e.isSelected()),this._triggerEvent("change")},Wy.prototype._buildClonedFieldForNewTableRow=function(e,t){return new Wy(e)};const Yy=Wy;function Qy(e){Oy.call(this,e)}Qy.TYPE="CheckboxListFieldLegacy",Qy.register=function(e){new Qy(e).register()},Qy.prototype=Object.create(Oy.prototype),Qy.prototype._getAllowedValueTypesToSet=function(){return[Ay.TYPE,Ny.TYPE]},Qy.prototype.getType=function(){return Qy.TYPE},Qy.prototype.getValue=function(){var e=this._getSelectedElements();if(0===e.length)return new ny;var t=[];return e.each((function(){t.push(wy.buildOption(pjQuery(this).val(),pjQuery(this).data("option-name").toString()))})),new wy(t)},Qy.prototype.getValueForVisibilityCondition=function(){var e=[];return this._getSelectedElements().each((function(){e.push(pjQuery(this).val())})),e},Qy.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery('input[type="checkbox"]',this._getFieldElement()),n=this;switch(e.getType()){case Ay.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("checked",!0),n._triggerEvent("change")}));break;case Ny.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("checked",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}},Qy.prototype._getSelectedElements=function(){return this._getFieldElement().find("input:checked")},Qy.prototype._getOptionsPage=function(){return null},Qy.prototype._getOptionsPageSize=function(){return null},Qy.prototype._createWithNewOptions=function(e){var t=this;this._removeAllOptions();var n=this._getFieldElement(),r=n.find(".CheckBoxListFormField_more"),o=n.find(".CheckBoxListFormField_hiddenOptions"),i=r.data("numOptionsToShow");e.forEach((function(e,r){var a=t._buildOptionHtmlId(e.id),u=pjQuery("<input />").attr("id",a).attr("type","checkbox").attr("name",t._fieldId+"[]").attr("value",e.id).attr("data-option-name",e.name);e.isSelected&&u.attr("checked","checked");var l=pjQuery("<label>").attr("for",a).append(u,e.name,pjQuery('<div class="cb" />'));!i||r<i?n.append(l):o.append(l)})),i&&e.length>i&&(r.css("display",""),o.css("display","none"))},Qy.prototype._removeAllOptions=function(){this._getFieldElement().find("label, div.cb, div.cb-a11y").remove()},Qy.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new Qy(e)};const Hy=Qy;function zy(e){hy.call(this,e),this._registerFieldDependenciesForDependentFields(e,this._getDepedentFieldsMetadata())}zy.register=function(e){new zy(e).register()},zy.prototype=Object.create(hy.prototype),zy.prototype._getDepedentFieldsMetadata=function(){throw new Error("notImplementedError")},zy.prototype._registerFieldDependenciesForDependentFields=function(e,t){if(!t||!Array.isArray(t))throw new Error("invalidArgumentException: not an array");for(var n in t)t.hasOwnProperty(n)&&FieldsDependenciesLegacy.registerFieldDependency(e,t[n].id,FieldsDependenciesLegacy.TYPE_VALUES)},zy.prototype.onRelatedFieldValueChange=function(e){hy.prototype.onRelatedFieldValueChange.call(this,e),FieldsLegacy.onFieldValueChange(this._fieldId)},zy.prototype.cloneForNewTableRow=function(e,t){this._cloneDependentFieldsForNewTableRow(e,t),this._cloneCurrentFieldForNewTableRow(e,t)},zy.prototype._cloneCurrentFieldForNewTableRow=function(e,t){hy.prototype.cloneForNewTableRow.call(this,e,t)},zy.prototype._cloneDependentFieldsForNewTableRow=function(e,t){var n=this._getDepedentFieldsMetadata();for(var r in n)if(n.hasOwnProperty(r)){var o=FieldsLegacy.getField(n[r].id),i=e+n[r].suffix;o.cloneForNewTableRow(i,t)}},zy.prototype._createFieldMetadata=function(e,t){return{id:e,suffix:t}};const qy=zy;function Jy(e){this._assertIsValidPortalDateObject(e),ey.call(this),this._date=e}Jy.TYPE="FieldDateValueLegacy",Jy.prototype=Object.create(ey.prototype),Jy.prototype.getType=function(){return Jy.TYPE},Jy.prototype.toString=function(){return this._date.format()},Jy.prototype.getFormattedDateString=function(e){return this._date.format(e)},Jy.prototype.getPortalDate=function(){return this._date},Jy.prototype._assertIsValidPortalDateObject=function(e){if(!(e&&e instanceof PortalDate))throw new Error("invalidArgumentException: expected an instance of PortalDate")};const Gy=Jy;function Zy(e){qy.call(this,e)}Zy.register=function(e){new Zy(e).register()},Zy.prototype=Object.create(qy.prototype),Zy.prototype._postRegister=function(){sy.onFieldValueChange(this._fieldId),qy.prototype._postRegister.call(this)},Zy.prototype._getAllowedValueTypesToSet=function(){return[Gy.TYPE]},Zy.prototype._createYearInput=function(e,t,n,r,o){var i=this,a=this._createSelectElement(e,"year",n,n),u=by.getForField(this._fieldId+"_year");return this._populateSelectElementFromDatasource(a,u,t),a.fnt=function(){var t=document.getElementById(e+"_month");t=t?t.value:void 0,i._updateDayInput(e,t,r,o)},a.addEventListener?a.addEventListener("change",a.fnt,!1):a.attachEvent("onchange",a.fnt),a},Zy.prototype._createMonthInput=function(e,t,n,r,o,i,a){var u=this,l=this._createSelectElement(e,"month",r),c=by.getForField(this._fieldId+"_month");return this._populateSelectElementFromDatasource(l,c,t),l.fnt=function(){u._updateDayInput(e,l.value,o,i)},l.addEventListener?l.addEventListener("change",l.fnt,!1):l.attachEvent("onchange",l.fnt),l},Zy.prototype._createDayInput=function(e,t,n,r,o,i,a,u){var l=this._createSelectElement(e,"day",o),c=by.getForField(this._fieldId+"_day");return this._populateSelectElementFromDatasource(l,c,t),l},Zy.prototype._updateDayInput=function(e,t,n,r){var o=document.getElementById(e+"_year");o=o?o.value:void 0;var i=this._clearSelectElementById(e+"_day"),a=by.getForField(this._fieldId+"_day").getOptions(),u=parseInt(a[1].id,10),l="0"!==t?this._getMaxDaysForInput(a,t,o):0;n&&o===n.getFullYear()&&t===(n.getMonth()+1).toString()&&(u=n.getDate()),r&&o===r.getFullYear()&&t.toString()===(r.getMonth()+1).toString()&&(l=r.getDate()),this._populateSelectElement(i,u,l,void 0,0,"--")},Zy.prototype._hideInput=function(e){var t;if(e){t=document.createElement("input"),e.getAttributeNames().filter((function(e){return-1===["data-hiddenType","data-required"].indexOf(e)})).forEach((function(n){t.setAttribute(n,e.getAttribute(n))})),t.type="hidden";var n=e.parentNode;n.removeChild(e),n.appendChild(t)}return t},Zy.prototype._populateSelectElement=function(e,t,n,r,o,i){if(e){e.appendChild(this._createOptionElement(0,o,(function(e){return i})));for(var a=t;a<=n;++a)e.appendChild(this._createOptionElement(a,o,r))}},Zy.prototype._populateSelectElementFromDatasource=function(e,t,n){if(e)for(var r=t.getOptions(),o=0;o<r.length;++o){var i=r[o];e.appendChild(this._createOptionElement(parseInt(i.id,10),n,(function(e){return i.name})))}},Zy.prototype._createSelectElement=function(e,t,n){var r=document.createElement("select");return r.setAttribute("id",e+"_"+t),r.setAttribute("name",e+"_"+t),r.setAttribute("class",t+"Input"),r.setAttribute("tabindex",n),r},Zy.prototype._createOptionElement=function(e,t,n){var r=document.createElement("option");return r.setAttribute("value",0===e?"":e),r.innerHTML=n?n(e):e,e===t&&r.setAttribute("selected","selected"),r},Zy.prototype._getMaxDaysForInput=function(e,t,n){return e.length<31?parseInt(e[e.length-1].id,10):this._getDaysForMonthAndYear(t,n)},Zy.prototype._getDaysForMonthAndYear=function(e,t){var n=!1;e=e?PortalString.toInt(e):1,t=t?PortalString.toInt(t):1;return e>7&&(e-=7,n=!0),2!==e||n?1===e||(e-2)%2==1?31:30:t%4==0?29:28},Zy.prototype._clearSelectElementById=function(e){var t=document.getElementById(e);if(t)for(;t.hasChildNodes();)t.removeChild(t.firstChild);return t},Zy.prototype._normalize=function(e){return PortalString.zeroPad(e,2)},Zy.prototype._cloneDatasourceForNewTableRow=function(e,t,n){by.cloneDatasourceForNewTableRow(this._fieldId+"_"+e,t+"_"+e,n)};const Ky=Zy;n(83112);function $y(e,t,n,r,o,i,a){this._tabIndex=t,this._minDate=n,this._maxDate=r,this._accessibleLabelsDictionary=o,this._isAccessible=i,this._year=this._month=this._day=0,this._yearInput=this._monthInput=this._dayInput=null,this.isRequired=a,Ky.call(this,e)}$y.TYPE="FullDateFieldLegacy",$y.register=function(e,t,n,r,o,i,a){new $y(e,t,n,r,o,i,a).register()},$y.prototype=Object.create(Ky.prototype),$y.prototype._postRegister=function(){this._createWidget(),Ky.prototype._postRegister.call(this)},$y.prototype.cloneForNewTableRow=function(e,t){this._cloneCurrentFieldForNewTableRow(e,t),this._cloneDependentFieldsForNewTableRow(e,t)},$y.prototype.getType=function(){return $y.TYPE},$y.prototype.getValue=function(){var e=this._getFieldElement().val();if(!e)return new FieldEmptyValueLegacy;var t=e.split("-"),n=PortalString.toInt(t[0]),r=PortalString.toInt(t[1]),o=PortalString.toInt(t[2]);return new FieldFullDateValueLegacy(n,r,o)},$y.prototype.getValueForVisibilityCondition=function(){var e=this._getFieldElement().val();return e||""},$y.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getFormattedDateString("yyyy-MM-dd")),this._triggerEvent("change")},$y.prototype.show=function(){var e=this._getFieldContainerElement(),t=this._getFieldElement();e&&t&&this._valueDiffersForElement(t)&&t.val(t.val()),Ky.prototype.show.call(this)},$y.prototype.hide=function(){if(this.isVisible()){var e=this._getFieldElement();this._saveDateValueForField(e),Ky.prototype.hide.call(this)}},$y.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow("day",e,t),this._cloneDatasourceForNewTableRow("month",e,t),this._cloneDatasourceForNewTableRow("year",e,t),new $y(e,this._tabIndex,this._minDate,this._maxDate,this._accessibleLabelsDictionary,this._isAccessible)},$y.prototype._valueDiffersForElement=function(e){var t=e.val(),n=this.getValue();return""!==t&&!n.isEmpty()&&n.getFormattedDateString("yyyy-MM-dd")!==t},$y.prototype._saveDateValueForField=function(e){var t=this.getValue();if(!t.isEmpty()){var n=new Date(t.getFormattedDateString("yyyy-MM-dd")+"T00:00:00"),r=n.getFullYear(),o=this._addLeadingZeros(n.getMonth()+1),i=this._addLeadingZeros(n.getDate());e.val(r+"-"+o+"-"+i)}},$y.prototype._addLeadingZeros=function(e){return e.toString().padStart(2,"0")},$y.prototype._getDepedentFieldsMetadata=function(){return[]},$y.prototype._createWidget=function(){var e=this;this._browserSupportsInputDate()||pjQuery((function(){e._createFallbackWidget()}))},$y.prototype._browserSupportsInputDate=function(){return H5H.inputSupported("date")&&!(GLOBALS.BROWSER.name&&"Safari"==GLOBALS.BROWSER.name)},$y.prototype._createFallbackWidget=function(){var e=this._hideInput(document.getElementById(this._fieldId));if(e){var t=new PortalDate(LuxonDateTime.fromFormat(this._minDate,"yyyy-MM-dd")).toDate(),n=new PortalDate(LuxonDateTime.fromFormat(this._maxDate,"yyyy-MM-dd")).toDate();this._initDefaultValues(e);var r=this._createInput(this._tabIndex,t,n);e.parentNode.appendChild(r)}},$y.prototype._initDefaultValues=function(e){this._year=this._month=this._day=0;var t=e.value||e.getAttribute("data-hiddenValue");if(t){var n=t.split("-");this._year=PortalString.toInt(n[0]),this._month=PortalString.toInt(n[1]),this._day=PortalString.toInt(n[2])}},$y.prototype._createInput=function(e,t,n){var r,o=this;return this._yearInput=this._createYearInput(this._fieldId,this._year,e,t,n),this._yearInput.onchange=function(){o._year=this.value,o._day=0,o._updateHiddenInputValue()},this._monthInput=this._createMonthInput(this._fieldId,this._month,this._year,e,t,n),this._monthInput.onchange=function(){o._month=this.value,o._day=0,o._updateHiddenInputValue()},this._dayInput=this._createDayInput(this._fieldId,this._day,this._month,this._year,e,t,n),this._dayInput.onchange=function(){o._day=this.value,o._updateHiddenInputValue()},this._isAccessible?(r=this._createWidgetWithLabelsFromInputs(this._yearInput,this._monthInput,this._dayInput),this._wrapFieldAsFieldSetWithLegend()):r=this._createWidgetWithoutLabelsFromInputs(this._yearInput,this._monthInput,this._dayInput),r},$y.prototype._updateHiddenInputValue=function(){document.getElementById(this._fieldId).value=this._year>0||this._month>0||this._day>0?this._year+"-"+this._normalize(this._month)+"-"+this._normalize(this._day):"",sy.onFieldValueChange(this._fieldId)},$y.prototype._createWidgetWithLabelsFromInputs=function(e,t,n){var r=document.createElement("div"),o=document.createElement("div");o.className="FullDate_YearWrapper",o.appendChild(this._createLabelFor(e.id,this._accessibleLabelsDictionary.yearLabel)),o.appendChild(e);var i=document.createElement("div");i.className="FullDate_MonthWrapper",i.appendChild(this._createLabelFor(t.id,this._accessibleLabelsDictionary.monthLabel)),i.appendChild(t);var a=document.createElement("div");return a.className="FullDate_DayWrapper",a.appendChild(this._createLabelFor(n.id,this._accessibleLabelsDictionary.dayLabel)),a.appendChild(n),r.appendChild(o),r.appendChild(i),r.appendChild(a),r},$y.prototype._createLabelFor=function(e,t){var n=document.createElement("label");return n.setAttribute("for",e),n.setAttribute("class","screenReaderVisibility"),n.innerHTML=t,n},$y.prototype._createWidgetWithoutLabelsFromInputs=function(e,t,n){var r=document.createElement("div");return r.appendChild(e),r.appendChild(t),r.appendChild(n),r},$y.prototype._wrapFieldAsFieldSetWithLegend=function(){var e=pjQuery("#"+this._fieldId+"-accessibleContainer");e.children().appendTo(pjQuery("<fieldset/>").insertBefore(e)),e.remove();var t=this;pjQuery("#"+this._fieldId+"-label").replaceWith((function(){var e=this.textContent;e&&t.isRequired&&(e=e.substring(0,e.length-2),e+=pjQuery("<div/>",{}).append(pjQuery("<span/>",{"aria-hidden":!0,class:"labelRequiredIcon",text:" *"})).html());return pjQuery("<div/>",{}).append(pjQuery("<legend/>",{id:this.id,html:e})).html()}))},$y.prototype._resetDayInput=function(e){this._day=0;var t=this.monthInput.parentNode;t.removeChild(this._dayInput),this._dayInput=this._createDayInput(this._fieldId,this._day,this._month,this._year,e),t.appendChild(this._dayInput);var n=this;this._dayInput.onchange=function(){n._day=this.value,n._updateHiddenInputValue()}};const Xy=$y;function eh(e){hy.call(this,e)}eh.TYPE="GenericFieldLegacy",eh.register=function(e){new eh(e).register()},eh.prototype=Object.create(hy.prototype),eh.prototype.getType=function(){return eh.TYPE},eh.prototype._buildClonedFieldForNewTableRow=function(e,t){return new eh(e)},eh.prototype._postRegister=function(){};const th=eh;function nh(e){hy.call(this,e)}nh.TYPE="InputFieldLegacy",nh.register=function(e){new nh(e).register()},nh.prototype=Object.create(hy.prototype),nh.prototype._getAllowedValueTypesToSet=function(){return[Ey.TYPE]},nh.prototype.getType=function(){return nh.TYPE},nh.prototype.getValue=function(){var e=this._getFieldElement().val();return e?new Ey(e):new ny},nh.prototype.getValueForVisibilityCondition=function(){return this._getFieldElement().val()},nh.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getValue()),this._triggerEvent("input")},nh.prototype._buildClonedFieldForNewTableRow=function(e,t){return new nh(e)},nh.prototype._attachOnChangeListener=function(){var e=this;pjQuery("#"+this._fieldId).on("input",(function(){this.onkeyup=null,sy.onFieldValueChange(e.getFieldId())}))};const rh=nh;function oh(e,t,n){this._setCountry(e),this._setState(t),this._setCity(n),ey.call(this)}oh.TYPE="FieldLocationValueLegacy",oh.prototype=Object.create(ey.prototype),oh.prototype.getType=function(){return oh.TYPE},oh.prototype.toString=function(){return JSON.stringify({country:this._country.toString(),state:this._state.toString(),city:this._city.toString()})},oh.prototype.getCountry=function(){return this._country},oh.prototype.getState=function(){return this._state},oh.prototype.getCity=function(){return this._city},oh.prototype._setCountry=function(e){ey.assertIsValid(e),this._country=e},oh.prototype._setState=function(e){ey.assertIsValid(e),this._state=e},oh.prototype._setCity=function(e){ey.assertIsValid(e),this._city=e};const ih=oh;function ah(e){qy.call(this,e)}ah.TYPE="LocationFieldLegacy",ah.register=function(e){new ah(e).register()},ah.prototype=Object.create(qy.prototype),ah.prototype._getAllowedValueTypesToSet=function(){return[ih.TYPE]},ah.prototype.getType=function(){return ah.TYPE},ah.prototype.getValue=function(){var e=sy.getFieldValue(this._getCountryId()),t=sy.getFieldValue(this._getStateId()),n=sy.getFieldValue(this._getCityId());return e.isEmpty()||t.isEmpty()||n.isEmpty()?new ny:new ih(e,t,n)},ah.prototype.getValueForVisibilityCondition=function(){return[pjQuery("#"+this._getCountryId()+" option:selected").text(),pjQuery("#"+this._getStateId()).is("select")?pjQuery("#"+this._getStateId()+" option:selected").text():pjQuery("#"+this._getStateId()).val(),pjQuery("#"+this._getCityId()).val()]},ah.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e),sy.setFieldValue(this._getCountryId(),e.getCountry()),sy.setFieldValue(this._getStateId(),e.getState()),sy.setFieldValue(this._getCityId(),e.getCity())},ah.prototype._buildClonedFieldForNewTableRow=function(e,t){return new ah(e)},ah.prototype._getDepedentFieldsMetadata=function(){return[this._createFieldMetadata(this._getCountryId(),this._getCountrySuffix()),this._createFieldMetadata(this._getStateId(),this._getStateSuffix()),this._createFieldMetadata(this._getCityId(),this._getCitySuffix())]},ah.prototype._getCountryId=function(){return this.getFieldId()+this._getCountrySuffix()},ah.prototype._getStateId=function(){return this.getFieldId()+this._getStateSuffix()},ah.prototype._getCityId=function(){return this.getFieldId()+this._getCitySuffix()},ah.prototype._getCountrySuffix=function(){return"_location_country"},ah.prototype._getStateSuffix=function(){return"_location_state"},ah.prototype._getCitySuffix=function(){return"_location_city"},ah.prototype._attachOnChangeListener=function(){};const uh=ah;function lh(e){Oy.call(this,e)}lh.TYPE="MultipleSelectFieldLegacy",lh.register=function(e){new lh(e).register()},lh.prototype=Object.create(Oy.prototype),lh.prototype._getAllowedValueTypesToSet=function(){return[Ay.TYPE,Ny.TYPE]},lh.prototype.getType=function(){return lh.TYPE},lh.prototype.getValue=function(){var e=this._getSelectedElements();if(0===e.length)return new ny;var t=[];return e.each((function(){t.push(wy.buildOption(pjQuery(this).val(),pjQuery(this).data("option-name").toString()))})),new wy(t)},lh.prototype.getValueForVisibilityCondition=function(){var e=[];return this._getSelectedElements().each((function(){e.push(pjQuery(this).val())})),e},lh.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery("option",this._getFieldElement()),n=this;switch(e.getType()){case Ay.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;case Ny.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}},lh.prototype._getSelectedElements=function(){return this._getFieldElement().find("option:selected")},lh.prototype._getOptionsPage=function(){return null},lh.prototype._getOptionsPageSize=function(){return null},lh.prototype._createWithNewOptions=function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>").attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join(""))},lh.prototype._removeAllOptions=function(){this._getFieldElement().find("option").remove()},lh.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new lh(e)};const ch=lh;function sh(e){this._assertIsValidNumberValue(e),ey.call(this),this._value=e}sh.TYPE="FieldNumberValueLegacy",sh.prototype=Object.create(ey.prototype),sh.prototype.getType=function(){return sh.TYPE},sh.prototype.toString=function(){return this._value.toString()},sh.prototype.getValue=function(){return this._value},sh.prototype._assertIsValidNumberValue=function(e){if(!PortalNumber.isNumber(e))throw new Error("invalidArgumentException: expected number value")};const fh=sh;function ph(e){rh.call(this,e)}ph.TYPE="NumberFieldLegacy",ph.register=function(e){new ph(e).register()},ph.prototype=Object.create(rh.prototype),ph.prototype._getAllowedValueTypesToSet=function(){return[fh.TYPE]},ph.prototype.getType=function(){return ph.TYPE},ph.prototype.getValue=function(){var e=this._getFieldElement().val();return e?new fh(PortalString.toFloat(e)):new ny},ph.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getValue()),this._triggerEvent("input")},ph.prototype._buildClonedFieldForNewTableRow=function(e,t){return new ph(e)};const dh=ph;function yh(e){Oy.call(this,e)}yh.TYPE="RadioButtonListFieldLegacy",yh.register=function(e){new yh(e).register()},yh.prototype=Object.create(Oy.prototype),yh.prototype._getAllowedValueTypesToSet=function(){return[jy.TYPE,Ey.TYPE]},yh.prototype.getType=function(){return yh.TYPE},yh.prototype.getValue=function(){var e=this._getSelectedElements();if(0===e.length)return new FieldEmptyValueLegacy;var t=null,n=null;return e.each((function(){t=pjQuery(this).val(),n=pjQuery(this).data("option-name").toString()})),new gy(t,n)},yh.prototype.getValueForVisibilityCondition=function(){var e=[];return this._getSelectedElements().each((function(){e.push(pjQuery(this).val())})),e},yh.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery('input[type="radio"]',this._getFieldElement());switch(e.getType()){case jy.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("checked",!0).trigger("change")}));break;case Ey.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("checked",!0).trigger("change")}));break;default:throw new Error("modeNotSupported")}},yh.prototype._getSelectedElements=function(){return this._getFieldElement().find("input:checked")},yh.prototype._attachOnChangeListener=function(){var e=this;pjQuery("#"+this._fieldId).on("change","input",(function(){sy.onFieldValueChange(e.getFieldId())}))},yh.prototype._getOptionsPage=function(){return null},yh.prototype._getOptionsPageSize=function(){return null},yh.prototype._createWithNewOptions=function(e){var t=this;this._removeAllOptions();var n=this._getFieldElement();e.forEach((function(e){var r=pjQuery("<input />").attr("id",t._buildOptionHtmlId(e.id)).attr("type","radio").attr("name",t._fieldId).attr("value",e.id).attr("data-option-name",e.name);e.isSelected&&r.attr("checked","checked");var o=pjQuery("<label>").attr("for",t._buildOptionHtmlId(e.id)).append(r,e.name,pjQuery('<div class="cb" />'));n.append(o)})),this._attachOnChangeListener()},yh.prototype._removeAllOptions=function(){this._getFieldElement().find("label, div.cb").remove()},yh.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new yh(e)};const hh=yh;function vh(e,t){Oy.call(this,e),this._notSelectedOptionValue=t}vh.TYPE="SelectFieldLegacy",vh.register=function(e,t){new vh(e,t).register()},vh.prototype=Object.create(Oy.prototype),vh.prototype._getAllowedValueTypesToSet=function(){return[jy.TYPE,Ey.TYPE]},vh.prototype.getType=function(){return vh.TYPE},vh.prototype.getValue=function(){var e=this._getFieldElement().val();return e==this._notSelectedOptionValue?new ny:new gy(e,pjQuery("#"+this._fieldId+" option:selected").text())},vh.prototype.getValueForVisibilityCondition=function(){var e=this._getFieldElement().val();return e!=this._notSelectedOptionValue?e:null},vh.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery("option",this._getFieldElement()),n=this;switch(e.getType()){case jy.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;case Ey.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).text()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}},vh.prototype._unsetOnHide=function(e){e.val(this._notSelectedOptionValue)},vh.prototype._getOptionsPage=function(){return null},vh.prototype._getOptionsPageSize=function(){return null},vh.prototype._createWithNewOptions=function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>").attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join(""))},vh.prototype._removeAllOptions=function(){this._getFieldElement().find("option:gt(0)").remove()},vh.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new vh(e,this._notSelectedOptionValue)};const bh=vh;function mh(e,t,n){this._setHours(e),this._setMinutes(t),this._setSeconds(n),ey.call(this)}mh.TYPE="FieldTimeValueLegacy",mh.prototype=Object.create(ey.prototype),mh.prototype.getType=function(){return mh.TYPE},mh.prototype.toString=function(){return PortalString.zeroPad(this._hours.toString(),2)+":"+PortalString.zeroPad(this._minutes.toString(),2)+":"+PortalString.zeroPad(this._seconds.toString(),2)},mh.prototype.getHours=function(){return this._hours},mh.prototype.getMinutes=function(){return this._minutes},mh.prototype.getSeconds=function(){return this._seconds},mh.prototype._setHours=function(e){if(!PortalNumber.isNumber(e)||e<0||e>23)throw new Error("invalidArgumentException: Hours should be between 0 and 23");this._hours=e},mh.prototype._setMinutes=function(e){if(!PortalNumber.isNumber(e)||e<0||e>59)throw new Error("invalidArgumentException: Minutes should be between 0 and 59");this._minutes=e},mh.prototype._setSeconds=function(e){if(!PortalNumber.isNumber(e)||e<0||e>59)throw new Error("invalidArgumentException: Seconds should be between 0 and 59");this._seconds=e};const gh=mh;function _h(e){bh.call(this,e,"-1")}_h.TYPE="SimpleTimeFieldLegacy",_h.register=function(e){new _h(e).register()},_h.prototype=Object.create(bh.prototype),_h.prototype.getType=function(){return _h.TYPE},_h.prototype.getValue=function(){var e=this._getFieldElement().val();return e==this._notSelectedOptionValue?new ny:new gh(PortalString.toInt(e),0,0)},_h.prototype.getValueForVisibilityCondition=function(){var e=this._getFieldElement().val();return[e=e!=this._notSelectedOptionValue?e:null,0,0]},_h.prototype._buildClonedFieldForNewTableRow=function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new _h(e)};const wh=_h;function Sh(e,t){qy.call(this,e),this.shouldUseMilitaryTimeFormat=t}Sh.TYPE="TimeFieldLegacy",Sh.register=function(e,t){new Sh(e,t).register()},Sh.prototype=Object.create(qy.prototype),Sh.prototype.getType=function(){return Sh.TYPE},Sh.prototype._getAllowedValueTypesToSet=function(){return[gh.TYPE]},Sh.prototype.setValue=function(e){this._assertIsAllowedValueToSet(e);var t=e.getHours(),n=null;this.shouldUseMilitaryTimeFormat||(n=t>=12?"PM":"AM",t>12?t-=12:0===t&&(t=12)),sy.setFieldValue(this._getHoursId(),new jy(t.toString())),sy.setFieldValue(this._getMinutesId(),new jy(e.getMinutes().toString())),n&&sy.setFieldValue(this._getAMPMId(),new Ey(n))},Sh.prototype.getValue=function(){return sy.hasValue(this._getHoursId())&&sy.hasValue(this._getMinutesId())?new gh(this._getHoursFieldValue(),this._getMinutesFieldValue(),0):new ny},Sh.prototype.getValueForVisibilityCondition=function(){return[this._getHoursFieldValue(),this._getMinutesFieldValue(),0]},Sh.prototype._getHoursFieldValue=function(){var e=sy.getFieldValueByType(this._getHoursId(),gy.TYPE);if(e.isEmpty())return 0;var t=PortalString.toInt(e.getOptionId());return isNaN(t)?0:(t=PortalString.toInt(t,10),this.shouldUseMilitaryTimeFormat?t:this._adaptHoursToAMPMFormat(t))},Sh.prototype._adaptHoursToAMPMFormat=function(e){var t=sy.getFieldValueByType(this._getAMPMId(),gy.TYPE);if(t.isEmpty())return e;var n=t.getOptionText();return"PM"===n&&12!==e?e+=12:"AM"===n&&12===e&&(e=0),e},Sh.prototype._getMinutesFieldValue=function(){var e=sy.getFieldValueByType(this._getMinutesId(),gy.TYPE);return e.isEmpty()?0:PortalString.toInt(e.getOptionId())||0},Sh.prototype._buildClonedFieldForNewTableRow=function(e,t){return new Sh(e,this.shouldUseMilitaryTimeFormat)},Sh.prototype._getDepedentFieldsMetadata=function(){var e=[this._createFieldMetadata(this._getHoursId(),this._getHoursSuffix()),this._createFieldMetadata(this._getMinutesId(),this._getMinutesSuffix())];return this.shouldUseMilitaryTimeFormat||e.push(this._createFieldMetadata(this._getAMPMId(),this._getAMPMSuffix())),e},Sh.prototype._getHoursId=function(){return this.getFieldId()+this._getHoursSuffix()},Sh.prototype._getMinutesId=function(){return this.getFieldId()+this._getMinutesSuffix()},Sh.prototype._getAMPMId=function(){return this.getFieldId()+this._getAMPMSuffix()},Sh.prototype._getHoursSuffix=function(){return"_hours"},Sh.prototype._getMinutesSuffix=function(){return"_minutes"},Sh.prototype._getAMPMSuffix=function(){return"_ampm"};const Oh=Sh;function Ph(e,t,n,r,o,i,a,u,l,c,s,f,p,d,y,h,v,b,m,g){this.fieldId=e,this.dropdownCssClass=t,this.placeholderText=n,this.minimumInputLength=r,this.isMultiple=o,this.ajaxDelayMs=i,this.visibleOptionsLimit=a,this.optionsSearchApiUrl=u,this.dictionary=l,this.label=c,this.isRequired=s,this.isAccessible=f,this.requestedDataFieldId=p,this.jobId=d,this.contactOrJobIdEdit=y,this.wizardId=h,this.wizardFormId=v,this.schemaFieldId=b,this.optionFormatJson=m,this.alphabeticalOrder=g||!1}Ph.prototype.attachToFieldAndRefreshOptions=function(e){var t=this;pjQuery("#"+e).select2({placeholder:t.placeholderText,allowClear:!0,width:"100%",minimumInputLength:t.minimumInputLength,multiple:t.isMultiple,containerCssClass:"select2Container"+e,dropdownCssClass:t.dropdownCssClass,escapeMarkup:function(e){return e},dictionary:t.dictionary,label:t.label,fieldId:t.fieldId,isRequired:t.isRequired,isAccessible:t.isAccessible,ajax:{url:t.optionsSearchApiUrl,type:"POST",delay:t.ajaxDelayMs,quietMillis:t.ajaxDelayMs,dataType:"json",data:function(n){return t._buildAjaxRequestData(e,n)},processResults:function(e,n){return t._processAjaxResponseData(e,n)}}}),pjQuery("#"+e).on("select2:select",(function(e){pjQuery(this).focus()})),pjQuery("#"+e).trigger("select2-"+e+"-ready")},Ph.prototype._buildAjaxRequestData=function(e,t){var n={searchText:t.term,ids:t.searchIds,fieldId:this.requestedDataFieldId,jobId:this.jobId,page:t.page||1,limit:this.visibleOptionsLimit,wizardFormId:this.wizardFormId,optionFormat:this.optionFormatJson,schemaFieldId:this.schemaFieldId,alphabeticalOrder:this.alphabeticalOrder},r=this.wizardId;r&&(n.wizardId=r);var o=this.contactOrJobIdEdit;return o&&(n.contactOrJobIdEdit=o),JSON.stringify(n)},Ph.prototype._processAjaxResponseData=function(e,t){var n=e.results?e.results:e;Array.isArray(n)||(n=[n]);for(var r=0,o=n.length;r<o;r++)n[r].value&&(n[r]=n[r].value);var i=!!e.more&&e.more;return t.page=t.page||1,{results:n.map((function(e){return{id:e.id,text:e.name,children:e.children?e.children.map((function(e){return{id:e.id,text:e.name,category:e.category}})):null}})),pagination:{more:i}}};const Eh=Ph;function kh(){}kh.registerJobTemplateAutocompletableWidgetLazyPicker=function(e,t,n,r,o,i,a,u,l,c,s,f,p,d,y,h,v,b,m,g){kh._lazyPickers[e]=new JobTemplateAutocompletableWidgetLazyPickerLegacy(e,t,n,r,o,i,a,u,l,c,s,f,p,d,y,h,v,b,m,g)},kh.refreshLazyPickerOptions=function(e){kh.refreshLazyPickerOptionsUsingOtherLazyPickerConfigAsSource(e,e)},kh.refreshLazyPickerOptionsUsingOtherLazyPickerConfigAsSource=function(e,t){var n=kh._getLazyPicker(e);null!==n&&n.attachToFieldAndRefreshOptions(t)},kh._getLazyPicker=function(e){return kh._isLazyPickerRegistered(e)?kh._lazyPickers[e]:null},kh._isLazyPickerRegistered=function(e){return e in kh._lazyPickers},kh._lazyPickers={};const jh=kh;function Th(e,t,n){if(!PortalNumber.isNumber(n))throw new Error("invalidValue: day must be a valid integer");if(!PortalNumber.isNumber(t))throw new Error("invalidValue: month must be a valid integer");if(!PortalNumber.isNumber(e))throw new Error("invalidValue: year must be a valid integer");var r=PortalDate.fromParams(e,t,n);this._assertIsValidPortalDateObject(r),Gy.call(this,r),this._day=n,this._month=t,this._year=e}Th.TYPE="FieldFullDateValueLegacy",Th.prototype=Object.create(Gy.prototype),Th.prototype.getType=function(){return Th.TYPE},Th.prototype.toString=function(){return this.getFormattedDateString("yyyy-MM-dd")},Th.prototype.getDay=function(){return this._day},Th.prototype.getMonth=function(){return this._month},Th.prototype.getYear=function(){return this._year};const Fh=Th;var Ih=n(16655);const Rh=function e(){if(e.prototype._singletonInstance)return e.prototype._singletonInstance;e.prototype._singletonInstance=this,this.run=function(e,t,n){var r=Ih.getInstance(),o=r.buildKey(e,t);r.get(o).fail((function(){var i=pjQuery.ajax({type:"POST",url:e,dataType:"json",data:t});r.set(o,i),i.done(n)})).done((function(e){e.done(n)}))}};function Ch(e,t){this._fieldId=e,this._portalUrlPath=t,this._datasourcesCallRunner=new Rh}Ch.prototype.isLocalDatasource=function(){return!1},Ch.prototype.getOptions=function(){return[]},Ch.prototype.fetchNewOptions=function(e,t,n,r){throw new Error("notImplementedError")},Ch.prototype.fetchOptionsById=function(e,t){throw new Error("notImplementedError")},Ch.prototype.fetchOptionsByValue=function(e,t){throw new Error("notImplementedError")},Ch.prototype.getParentDependenciesFieldsIds=function(){throw new Error("notImplementedError")},Ch.prototype.isParentDependentField=function(e){throw new Error("notImplementedError")},Ch.prototype.cloneForNewTableRow=function(e,t){throw new Error("notImplementedError")},Ch.prototype.getOptionsSearchApiUrl=function(){throw new Error("notImplementedError")},Ch.prototype.buildRequestDataFromParams=function(e,t,n,r,o,i){throw new Error("notImplementedError")},Ch.prototype.processLazyPickerAjaxResponseData=function(e){throw new Error("notImplementedError")},Ch.prototype._fetchOptions=function(e,t){var n=this._getDatasourcesCallRunnerOnSuccessCallback(t);this._datasourcesCallRunner.run(this.getOptionsSearchApiUrl(),e,n)},Ch.prototype._getDatasourcesCallRunnerOnSuccessCallback=function(e){return function(t){var n=t.hasOwnProperty("results")?t.results:[],r=t.hasOwnProperty("currentOptionsFoundInResults")?t.currentOptionsFoundInResults:[];e(n,r)}},Ch.prototype._getFieldId=function(){return this._fieldId};const Dh=Ch;function xh(e,t,n,r,o){Dh.call(this,e,o),this._datasetFilters=r||[],this._optionFormatComponents=t,this._schemaFieldIdToUseForIndirectFiltering=n}xh.prototype=Object.create(Dh.prototype),xh.prototype._shouldIgnoreFilterIfNoValueIsSelected=function(){throw new Error("notImplemented")},xh.prototype.getParentDependenciesFieldsIds=function(){var e=[];return pjQuery.each(this._datasetFilters,(function(t,n){"field"===n.type&&e.push(n.parentDependencyFieldId)})),e},xh.prototype.isParentDependentField=function(e){var t=!1;return pjQuery.each(this._datasetFilters,(function(n,r){if("field"===r.type&&r.parentDependencyFieldId===e)return t=!0,!1})),t},xh.prototype.fetchNewOptions=function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e);this._fetchOptions(o,r)},xh.prototype.fetchOptionsById=function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null);this._fetchOptions(n,t)}else t([])},xh.prototype.fetchOptionsByValue=function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e,!0,null,null);this._fetchOptions(n,t)}else t([])},xh.prototype._buildClonedFiltersForNewTableRow=function(e,t){for(var n=[],r=this._fieldId.split("-"),o=0;o<this._datasetFilters.length;o++){var i=pjQuery.extend(!0,{},this._datasetFilters[o]);if("field"===i.type&&i.parentDependencyFieldId.indexOf("-")>0){var a=i.parentDependencyFieldId.split("-");a[0]===r[0]&&(a[a.length-1]=t,i.parentDependencyFieldId=a.join("-"))}n.push(i)}return n},xh.prototype._buildFiltersWithCurrentFieldsValues=function(){for(var e=[],t=0;t<this._datasetFilters.length;t++){var n=pjQuery.extend(!0,{},this._datasetFilters[t]);if("field"===n.type){var r=n.parentDependencyFieldId;if(!sy.isFieldRegistered(r))continue;var o=sy.getFieldValue(r);if(this._shouldIgnoreFilterIfNoValueIsSelected()&&o.isEmpty())continue;switch(o.getType()){case ny.TYPE:n.value=[];break;case gy.TYPE:n.value=PortalString.toInt(o.getOptionId());break;case wy.TYPE:n.value=o.getOptionsIds().map((function(e){return PortalString.toInt(e)}));break;default:throw new Error("invalidValue: dataset filtering requires a field with options to filter by")}n.type="fixed"}e.push(n)}return e};const Ah=xh;function Lh(e,t,n,r,o,i){this._datasetSchemaSpecId=i,Ah.call(this,e,t,n,r,o)}Lh.register=function(e,t,n,r,o,i){var a=new Lh(e,t,n,r,o,i);by.registerDatasource(e,a)},Lh.prototype=Object.create(Ah.prototype),Lh.prototype._shouldIgnoreFilterIfNoValueIsSelected=function(){return!1},Lh.prototype.cloneForNewTableRow=function(e,t){var n=this._buildClonedFiltersForNewTableRow(e,t);return new Lh(e,pjQuery.extend(!0,[],this._optionFormatComponents),this._schemaFieldIdToUseForIndirectFiltering,n,this._portalUrlPath,this._datasetSchemaSpecId)},Lh.prototype.getOptionsSearchApiUrl=function(){return this._portalUrlPath+"/_portalDatasetOptionsSearchApi"},Lh.prototype.buildRequestDataFromParams=function(e,t,n,r,o,i){for(var a=this._buildFiltersWithCurrentFieldsValues(),u=[],l=0;l<a.length;++l)u.push({operator:a[l].operator,datasetSpecIdFilter:a[l].datasetSpecIdFilter||null,schemaFieldNumberFilter:a[l].schemaFieldNumberFilter||null,value:a[l].value||null,type:a[l].type});var c=this._optionFormatComponents,s=[];for(l=0;l<c.length;++l)s.push({type:c[l].type,order:c[l].order,fieldNumberOrText:c[l].fieldNumberOrText});var f={datasetSchemaSpecId:this._datasetSchemaSpecId,schemaFieldIdToUseForIndirectFiltering:this._schemaFieldIdToUseForIndirectFiltering||null,filters:u,optionFormatComponents:s,searchIds:o||null,currentOptionsIds:i||[],page:e||null,limit:t||null,searchText:n||null,exactMatch:r||!1};return JSON.stringify(f)},Lh.prototype.processLazyPickerAjaxResponseData=function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}};const Nh=Lh;function Mh(e,t,n,r,o,i){this._datasetSchemaFieldId=i,Ah.call(this,e,t,n,r,o)}Mh.register=function(e,t,n,r,o,i){var a=new Mh(e,t,n,r,o,i);by.registerDatasource(e,a)},Mh.prototype=Object.create(Ah.prototype),Mh.prototype._shouldIgnoreFilterIfNoValueIsSelected=function(){return!0},Mh.prototype.cloneForNewTableRow=function(e,t){var n=this._buildClonedFiltersForNewTableRow(e,t);return new Mh(e,pjQuery.extend(!0,[],this._optionFormatComponents),this._schemaFieldIdToUseForIndirectFiltering,n,this._portalUrlPath,this._datasetSchemaFieldId)},Mh.prototype.getOptionsSearchApiUrl=function(){return this._portalUrlPath+"/_portalDatasetSingleColumnOptionsSearchApi"},Mh.prototype.buildRequestDataFromParams=function(e,t,n,r,o,i){var a=this._buildFiltersWithCurrentFieldsValues().map((function(e){return{operator:e.operator,datasetSpecIdFilter:e.datasetSpecIdFilter||null,schemaFieldNumberFilter:e.schemaFieldNumberFilter||null,value:e.value||null,type:e.type}})),u=this._optionFormatComponents.map((function(e){return{type:e.type,order:e.order,fieldNumberOrText:e.fieldNumberOrText}}));return JSON.stringify({datasetFieldSchemaFieldId:this._datasetSchemaFieldId,schemaFieldIdToUseForIndirectFiltering:this._schemaFieldIdToUseForIndirectFiltering||null,filters:a,optionFormatComponents:u,searchIds:o||null,currentOptionsIds:i||[],page:e||null,limit:t||null,searchText:n||null,exactMatch:r||!1})},Mh.prototype.processLazyPickerAjaxResponseData=function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}};const Vh=Mh;function Bh(e,t){this._setOptions(t),Dh.call(this,e)}Bh.register=function(e,t){var n=new Bh(e,t);by.registerDatasource(e,n)},Bh.prototype=Object.create(Dh.prototype),Bh.prototype.isLocalDatasource=function(){return!0},Bh.prototype.getOptions=function(){return this._options},Bh.prototype.getParentDependenciesFieldsIds=function(){return[]},Bh.prototype.isParentDependentField=function(e){return!1},Bh.prototype.fetchNewOptions=function(e,t,n,r){var o=[],i=[];if(this._options.forEach((function(t){PortalArray.contains(t.id,e)&&i.push(t),o.push(t)})),null!==t&&null!==n){var a=(t-1)*n;o=o.slice(a,a+n)}r(o,i)},Bh.prototype.fetchOptionsById=function(e,t){var n=[];e.forEach((function(e){this._options.forEach((function(t){return t.id==e&&(n.push(t),!0)}))}),this),t(n)},Bh.prototype.fetchOptionsByValue=function(e,t){var n=[];e.forEach((function(e){this._options.forEach((function(t){return t.name==e&&(n.push(t),!0)}))}),this),t(n)},Bh.prototype.cloneForNewTableRow=function(e,t){return new Bh(e,this._options)},Bh.prototype._setOptions=function(e){this._options=[],e&&Array.isArray(e)&&e.forEach((function(e){e.hasOwnProperty("id")&&e.hasOwnProperty("name")&&this._options.push({id:e.id,name:e.name})}),this)};const Uh=Bh;function Wh(e){Uh.call(this,e)}Wh.register=function(e){var t=new Wh(e);by.registerDatasource(e,t)},Wh.prototype=Object.create(Uh.prototype),Wh.prototype.getParentDependenciesFieldsIds=function(){return[]},Wh.prototype.isParentDependentField=function(e){return!1},Wh.prototype.fetchNewOptions=function(e,t,n,r){return[]},Wh.prototype.fetchOptionsById=function(e,t){var n=[];e.forEach((function(e){n.push({id:e})}),this),t(n)},Wh.prototype.fetchOptionsByValue=function(e,t){var n=[];e.forEach((function(e){n.push({name:e})}),this),t(n)},Wh.prototype.cloneForNewTableRow=function(e,t){return new Wh(e)};const Yh=Wh;function Qh(e,t,n,r,o,i,a,u){Dh.call(this,e,t),this._jobId=n,this._contactOrJobIdEdit=r,this._wizardId=o,this._wizardFormId=i,this._schemaFieldId=a,this._optionFormatJson=u}Qh.register=function(e,t,n,r,o,i,a,u){var l=new Qh(e,t,n,r,o,i,a,u);by.registerDatasource(e,l)},Qh.prototype=Object.create(Dh.prototype),Qh.prototype.cloneForNewTableRow=function(e,t){return new Qh(e,this._portalUrlPath,this._jobId,this._contactOrJobIdEdit,this._wizardId,this._includeDisabledUsers,this._wizardFormId,this._schemaFieldId,this._optionFormatJson)},Qh.prototype.getOptionsSearchApiUrl=function(){return this._portalUrlPath+"/_portalOptionSearchApi"},Qh.prototype.getParentDependenciesFieldsIds=function(){return[]},Qh.prototype.isParentDependentField=function(e){return!1},Qh.prototype.fetchNewOptions=function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e),i=this;this._fetchOptions(o,(function(e){var t=i._buildApiAdaptedResults(e);r(t)}))},Qh.prototype.fetchOptionsById=function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null),r=this;this._fetchOptions(n,(function(e){var n=r._buildApiAdaptedResults(e);t(n)}))}else t([])},Qh.prototype.fetchOptionsByValue=function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0,null,null),r=this;this._fetchOptions(n,(function(e){var n=r._buildApiAdaptedResults(e);t(n)}))}else t([])},Qh.prototype.buildRequestDataFromParams=function(e,t,n,r,o,i){var a={searchText:n,exactTextMatch:r,ids:o,fieldId:this._fieldId,jobId:this._jobId,page:e||1,limit:t,wizardFormId:this._wizardFormId,optionFormat:this._optionFormatJson,schemaFieldId:this._schemaFieldId,currentSelectedOptionsIds:i},u=this._wizardId;u&&(a.wizardId=u);var l=this._contactOrJobIdEdit;return l&&(a.contactOrJobIdEdit=l),JSON.stringify(a)},Qh.prototype.processLazyPickerAjaxResponseData=function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name,children:e.children?e.children.map((function(e){return{id:e.id,text:e.name}})):null}})),pagination:{more:e.more}}},Qh.prototype._buildApiAdaptedResults=function(e){var t=[];return pjQuery.each(e,(function(e,n){n.children?pjQuery.each(n.children,(function(e,n){t.push({id:n.id,name:n.name})})):t.push({id:n.id,name:n.name})})),t};const Hh=Qh;function zh(e,t,n,r){Dh.call(this,t,r),this._schemaFieldId=e,this._fieldId=t,this._isSearchMode=n}zh.register=function(e,t,n,r){var o=new zh(e,t,n,r);by.registerDatasource(t,o)},zh.prototype=Object.create(Dh.prototype),zh.prototype.cloneForNewTableRow=function(e,t){return new zh(this._schemaFieldId,e,this._isSearchMode,this._portalUrlPath)},zh.prototype.getOptionsSearchApiUrl=function(){return this._portalUrlPath+"/_portalUserSearch"},zh.prototype.getParentDependenciesFieldsIds=function(){return[]},zh.prototype.isParentDependentField=function(e){return!1},zh.prototype.fetchNewOptions=function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e);this._fetchOptions(o,r)},zh.prototype.fetchOptionsById=function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null);this._fetchOptions(n,(function(e){t(e)}))}else t([])},zh.prototype.fetchOptionsByValue=function(e,t){throw new Error("notSupportedError: currently is not possible to set an option by value.")},zh.prototype.buildRequestDataFromParams=function(e,t,n,r,o,i){var a={schemaFieldId:this._schemaFieldId,key:n||"",searchIds:o||null,currentOptionsIds:i||[],isSearchMode:this._isSearchMode};return JSON.stringify(a)},zh.prototype.processLazyPickerAjaxResponseData=function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}};const qh=zh;n(53493),n.g.CookieConsentPopupService=o(),n.g.MassiveActionService=a(),lf.connect(),n.g.ApiCacheLegacy=n(16655),n(16509),n.g.md5=n(81396),n.g.AutocompleteSelectFieldLegacy=Dy,n.g.AutocompleteMultipleSelectFieldLegacy=Vy,n.g.CheckboxFieldLegacy=Yy,n.g.CheckboxListFieldLegacy=Hy,n.g.CompoundFieldBaseLegacy=qy,n.g.DateFieldBaseLegacy=Ky,n.g.FieldBaseLegacy=hy,n.g.FieldsDependenciesLegacy=oy,n.g.FieldsLegacy=sy,n.g.FullDateFieldLegacy=Xy,n.g.GenericFieldLegacy=th,n.g.InputFieldLegacy=rh,n.g.LocationFieldLegacy=uh,n.g.MultipleSelectFieldLegacy=ch,n.g.NumberFieldLegacy=dh,n.g.OptionsFieldBaseLegacy=Oy,n.g.RadioButtonListFieldLegacy=hh,n.g.SelectFieldLegacy=bh,n.g.SimpleTimeFieldLegacy=wh,n.g.TimeFieldLegacy=Oh,n.g.VisibilityEvaluatorLegacy=dy,n.g.JobTemplateAutocompletableWidgetLazyPickerLegacy=Eh,n.g.LazyPickersLegacy=jh,n.g.FieldBooleanValueLegacy=Uy,n.g.FieldDateValueLegacy=Gy,n.g.FieldEmptyValueLegacy=ny,n.g.FieldFullDateValueLegacy=Fh,n.g.FieldIdValueLegacy=jy,n.g.FieldLocationValueLegacy=ih,n.g.FieldMultipleIdsValueLegacy=Ay,n.g.FieldMultipleOptionsValueLegacy=wy,n.g.FieldMultipleTextsValueLegacy=Ny,n.g.FieldNumberValueLegacy=fh,n.g.FieldOptionValueLegacy=gy,n.g.FieldTextValueLegacy=Ey,n.g.FieldTimeValueLegacy=gh,n.g.ValueBaseLegacy=ey,n.g.DatasourcesCallRunnerLegacy=Rh,n.g.DatasetFieldOptionsDatasourceLegacy=Nh,n.g.DatasetOptionsDatasourceBaseLegacy=Ah,n.g.DatasetSingleColumnFieldOptionsDatasourceLegacy=Vh,n.g.DatasourcesLegacy=by,n.g.DummyDatasourceLegacy=Yh,n.g.GeneralOptionsDatasourceLegacy=Hh,n.g.LocalDatasourceLegacy=Uh,n.g.OptionsDatasourceBaseLegacy=Dh,n.g.UsersDatasourceLegacy=qh},81396:function(e,t,n){var r;n(92222),n(82526),n(41817),n(41539),n(32165),n(66992),n(78783),n(33948),function(o){"use strict";function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e,t,n,r,o,a){return i(function(e,t){return e<<t|e>>>32-t}(i(i(t,e),i(r,a)),o),n)}function u(e,t,n,r,o,i,u){return a(t&n|~t&r,e,t,o,i,u)}function l(e,t,n,r,o,i,u){return a(t&r|n&~r,e,t,o,i,u)}function c(e,t,n,r,o,i,u){return a(t^n^r,e,t,o,i,u)}function s(e,t,n,r,o,i,u){return a(n^(t|~r),e,t,o,i,u)}function f(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,r,o,a,f,p=1732584193,d=-271733879,y=-1732584194,h=271733878;for(n=0;n<e.length;n+=16)r=p,o=d,a=y,f=h,p=u(p,d,y,h,e[n],7,-680876936),h=u(h,p,d,y,e[n+1],12,-389564586),y=u(y,h,p,d,e[n+2],17,606105819),d=u(d,y,h,p,e[n+3],22,-1044525330),p=u(p,d,y,h,e[n+4],7,-176418897),h=u(h,p,d,y,e[n+5],12,1200080426),y=u(y,h,p,d,e[n+6],17,-1473231341),d=u(d,y,h,p,e[n+7],22,-45705983),p=u(p,d,y,h,e[n+8],7,1770035416),h=u(h,p,d,y,e[n+9],12,-1958414417),y=u(y,h,p,d,e[n+10],17,-42063),d=u(d,y,h,p,e[n+11],22,-1990404162),p=u(p,d,y,h,e[n+12],7,1804603682),h=u(h,p,d,y,e[n+13],12,-40341101),y=u(y,h,p,d,e[n+14],17,-1502002290),p=l(p,d=u(d,y,h,p,e[n+15],22,1236535329),y,h,e[n+1],5,-165796510),h=l(h,p,d,y,e[n+6],9,-1069501632),y=l(y,h,p,d,e[n+11],14,643717713),d=l(d,y,h,p,e[n],20,-373897302),p=l(p,d,y,h,e[n+5],5,-701558691),h=l(h,p,d,y,e[n+10],9,38016083),y=l(y,h,p,d,e[n+15],14,-660478335),d=l(d,y,h,p,e[n+4],20,-405537848),p=l(p,d,y,h,e[n+9],5,568446438),h=l(h,p,d,y,e[n+14],9,-1019803690),y=l(y,h,p,d,e[n+3],14,-187363961),d=l(d,y,h,p,e[n+8],20,1163531501),p=l(p,d,y,h,e[n+13],5,-1444681467),h=l(h,p,d,y,e[n+2],9,-51403784),y=l(y,h,p,d,e[n+7],14,1735328473),p=c(p,d=l(d,y,h,p,e[n+12],20,-1926607734),y,h,e[n+5],4,-378558),h=c(h,p,d,y,e[n+8],11,-2022574463),y=c(y,h,p,d,e[n+11],16,1839030562),d=c(d,y,h,p,e[n+14],23,-35309556),p=c(p,d,y,h,e[n+1],4,-1530992060),h=c(h,p,d,y,e[n+4],11,1272893353),y=c(y,h,p,d,e[n+7],16,-155497632),d=c(d,y,h,p,e[n+10],23,-1094730640),p=c(p,d,y,h,e[n+13],4,681279174),h=c(h,p,d,y,e[n],11,-358537222),y=c(y,h,p,d,e[n+3],16,-722521979),d=c(d,y,h,p,e[n+6],23,76029189),p=c(p,d,y,h,e[n+9],4,-640364487),h=c(h,p,d,y,e[n+12],11,-421815835),y=c(y,h,p,d,e[n+15],16,530742520),p=s(p,d=c(d,y,h,p,e[n+2],23,-995338651),y,h,e[n],6,-198630844),h=s(h,p,d,y,e[n+7],10,1126891415),y=s(y,h,p,d,e[n+14],15,-1416354905),d=s(d,y,h,p,e[n+5],21,-57434055),p=s(p,d,y,h,e[n+12],6,1700485571),h=s(h,p,d,y,e[n+3],10,-1894986606),y=s(y,h,p,d,e[n+10],15,-1051523),d=s(d,y,h,p,e[n+1],21,-2054922799),p=s(p,d,y,h,e[n+8],6,1873313359),h=s(h,p,d,y,e[n+15],10,-30611744),y=s(y,h,p,d,e[n+6],15,-1560198380),d=s(d,y,h,p,e[n+13],21,1309151649),p=s(p,d,y,h,e[n+4],6,-145523070),h=s(h,p,d,y,e[n+11],10,-1120210379),y=s(y,h,p,d,e[n+2],15,718787259),d=s(d,y,h,p,e[n+9],21,-343485551),p=i(p,r),d=i(d,o),y=i(y,a),h=i(h,f);return[p,d,y,h]}function p(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function d(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function y(e){var t,n,r="0123456789abcdef",o="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),o+=r.charAt(t>>>4&15)+r.charAt(15&t);return o}function h(e){return unescape(encodeURIComponent(e))}function v(e){return function(e){return p(f(d(e),8*e.length))}(h(e))}function b(e,t){return function(e,t){var n,r,o=d(e),i=[],a=[];for(i[15]=a[15]=void 0,o.length>16&&(o=f(o,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],a[n]=1549556828^o[n];return r=f(i.concat(d(t)),512+8*t.length),p(f(a.concat(r),640))}(h(e),h(t))}function m(e,t,n){return t?n?b(t,e):function(e,t){return y(b(e,t))}(t,e):n?v(e):function(e){return y(v(e))}(e)}void 0===(r=function(){return m}.call(t,n,t,e))||(e.exports=r)}()},40454:e=>{function t(e){this.cookieUserConsentService=e}t.prototype.init=function(e){this.cookieUserConsentService.init(e)},t.prototype.getCurrentUserConsent=function(e){this.cookieUserConsentService.getCurrentUserConsent(e)},t.prototype.getCookieUsage=function(e){this.cookieUserConsentService.getCookieUsage(e)},t.prototype.updateTypesConsent=function(e,t){this.cookieUserConsentService.updateTypesConsent(e,t)},t.prototype.acceptAll=function(e){this.cookieUserConsentService.acceptAll(e)},t.prototype.shouldRequestUserConsent=function(e){this.cookieUserConsentService.shouldRequestUserConsent(e)},e.exports=t},23467:(e,t,n)=>{if(!r)var r=n(68806);function o(e){this.eventManager=e}o.prototype.attachToLoadEvent=function(e){this.eventManager.addEventHandler(o.EVENT_LOAD_NAME,e,r.PRIORITY_LOWEST)},o.prototype.attachToAutoSaveEvent=function(e){this.eventManager.addEventHandler(o.EVENT_AUTO_SAVE_NAME,e,r.PRIORITY_LOWEST)},o.EVENT_LOAD_NAME=r.EVENT_LOAD_NAME,o.EVENT_AUTO_SAVE_NAME=r.EVENT_AUTO_SAVE_NAME,o.STATUS_SUCCESS=r.STATUS_SUCCESS,o.STATUS_ERROR=r.STATUS_ERROR,e.exports=o},30309:e=>{function t(e){this.integrationService=e}t.prototype.setIntegrationCallback=function(e,t){this.integrationService.setIntegrationCallback(e,t)},e.exports=t},34039:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(89415),o=n(37797);if(!i)var i=n(23467),a=n(68806);if(!u)var u=n(40454);if(!l)var l=n(30309);function c(){}c.getEventManager=function(){return new i(a.getInstance())},c.getCookieUserConsentService=function(){return new u(r.Z.getInstance())},c.getIntegrationService=function(){return new l(o.Z.getInstance())};const s=c},77250:(e,t,n)=>{n(21249);var r=n(47128),o=n(11952);function i(){this._actionsFactory=new r,this._requestConfigFactory=new o}i.prototype.getListSelectedIds=function(e){return this._assertIsAValidList(e),pjQuery(this._getListSelectorString(e)+":checked").map((function(){return pjQuery(this).data("record-id")})).get()},i.prototype.getRequestConfigFactory=function(){return this._requestConfigFactory},i.prototype.getActionsFactory=function(){return this._actionsFactory},i.prototype._assertIsAValidList=function(e){if(!e)throw"invalidArgumentException: list ID not provided.";if(0===pjQuery(this._getListSelectorString(e)).length)throw"invalidList: No selector was found for the list with ID: "+e},i.prototype._getListSelectorString=function(e){return'[data-selector-type="massiveAction"][data-list-id="'+e+'"]'},e.exports=i},32211:e=>{MassiveActionActionBase=function(){},MassiveActionActionBase.prototype.getName=function(){throw"notImplementedException"},MassiveActionActionBase.prototype.getRequestObject=function(){throw"notImplementedException"},e.exports=MassiveActionActionBase},47128:(e,t,n)=>{var r=n(17060),o=n(45295);MassiveActionActionFactory=function(){},MassiveActionActionFactory.prototype.buildWorkflowForPeopleStepUpdateAction=function(e,t,n){return new r(e,t,n)},MassiveActionActionFactory.prototype.buildWorkflowForJobsStepUpdateAction=function(e,t){return new o(e,t)},e.exports=MassiveActionActionFactory},45295:(e,t,n)=>{n(78011);var r=n(32211);MassiveActionWorkflowForJobsStepUpdateAction=function(e,t){this._setOriginWorkflowStepId(e),this._setDestinationWorkflowStepId(t),r.call(this)},MassiveActionWorkflowForJobsStepUpdateAction.prototype=Object.create(r.prototype),MassiveActionWorkflowForJobsStepUpdateAction.prototype.getName=function(){return"workflowForJobsStepUpdate"},MassiveActionWorkflowForJobsStepUpdateAction.prototype.getRequestObject=function(){return{name:this.getName(),params:{originWorkflowStepId:this._originWorkflowStepId,destinationWorkflowStepId:this._destinationWorkflowStepId}}},MassiveActionWorkflowForJobsStepUpdateAction.prototype._setOriginWorkflowStepId=function(e){this._originWorkflowStepId=e},MassiveActionWorkflowForJobsStepUpdateAction.prototype._setDestinationWorkflowStepId=function(e){if(!e)throw"invalidArgumentException: the destination workflow step ID must be defined.";this._destinationWorkflowStepId=e},e.exports=MassiveActionWorkflowForJobsStepUpdateAction},17060:(e,t,n)=>{n(78011);var r=n(32211);MassiveActionWorkflowForPeopleStepUpdateAction=function(e,t,n){this._setOriginWorkflowStepId(e),this._setDestinationWorkflowStepId(t),this._setJobId(n),r.call(this)},MassiveActionWorkflowForPeopleStepUpdateAction.prototype=Object.create(r.prototype),MassiveActionWorkflowForPeopleStepUpdateAction.prototype.getName=function(){return"workflowForPeopleStepUpdate"},MassiveActionWorkflowForPeopleStepUpdateAction.prototype.getRequestObject=function(){return{name:this.getName(),params:{originWorkflowStepId:this._originWorkflowStepId,destinationWorkflowStepId:this._destinationWorkflowStepId,jobId:this._jobId}}},MassiveActionWorkflowForPeopleStepUpdateAction.prototype._setOriginWorkflowStepId=function(e){this._originWorkflowStepId=e},MassiveActionWorkflowForPeopleStepUpdateAction.prototype._setDestinationWorkflowStepId=function(e){if(!e)throw"invalidArgumentException: the destination workflow step ID must be defined.";this._destinationWorkflowStepId=e},MassiveActionWorkflowForPeopleStepUpdateAction.prototype._setJobId=function(e){this._jobId=e},e.exports=MassiveActionWorkflowForPeopleStepUpdateAction},11952:(e,t,n)=>{var r=n(94606);MassiveActionRequestConfigFactory=function(){},MassiveActionRequestConfigFactory.prototype.MassiveActionRecordsSubsetRequestConfig=r,MassiveActionRequestConfigFactory.prototype.buildRecordsSubsetRequestConfig=function(e,t,n){return new r(e,t,n)},e.exports=MassiveActionRequestConfigFactory},94606:(e,t,n)=>{n(78011),n(79753);var r=n(33386);function o(e,t,n){this._setRecordIds(e),r.call(this,t,n)}o.prototype=Object.create(r.prototype),o.prototype._getName=function(){return"recordsSubset"},o.prototype._getExtraTaskDataForRequestObject=function(){return{recordIds:this._recordIds}},o.prototype._setRecordIds=function(e){e&&Array.isArray(e)||(e=[]),this._recordIds=e},e.exports=o},33386:(e,t,n)=>{n(79753);var r=n(32211);function o(e,t){this._setActions(e),this._setListId(t)}o.prototype.getEncodedRequestData=function(){return this._encodeObject(this._getRequestObject())},o.prototype._getName=function(){throw"notImplementedException"},o.prototype._getExtraTaskDataForRequestObject=function(){return{}},o.prototype._setActions=function(e){if(!e||!Array.isArray(e)||0==e.length)throw"invalidArgumentException: at least one action must be defined.";for(var t in this._actions=[],e)e.hasOwnProperty(t)&&this._addAction(e[t])},o.prototype._addAction=function(e){if(!(e&&e instanceof r))throw'invalidArgumentException: object not defined or not an instance of "MassiveActionActionBase"';this._actions.push(e.getRequestObject())},o.prototype._setListId=function(e){this._listId=e||null},o.prototype._getRequestObject=function(){return{task:{name:this._getName(),listId:this._listId,actions:this._actions,extraData:this._getExtraTaskDataForRequestObject()}}},o.prototype._encodeObject=function(e){return encodeURIComponent(JSON.stringify(e))},e.exports=o},86698:(e,t,n)=>{"use strict";n(41539),n(88674),n(32564),n(74916),n(69070),n(82526),n(41817),n(32165),n(66992),n(78783),n(33948),n(72443),n(39341),n(73706),n(10408),n(78011),n(30489),n(89554),n(54747),n(68309),n(68304),n(65069),n(47042);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,a=Object.create(o.prototype),u=new j(r||[]);return i(a,"_invoke",{value:O(e,n,u)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var d={};function y(){}function h(){}function v(){}var b={};s(b,u,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(T([])));g&&g!==t&&n.call(g,u)&&(b=g);var _=v.prototype=y.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function o(i,a,u,l){var c=p(e[i],e,a);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==r(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,u,l)}),(function(e){o("throw",e,u,l)})):t.resolve(f).then((function(e){s.value=e,u(s)}),(function(e){return o("throw",e,u,l)}))}l(c.arg)}var a;i(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function O(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return F()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=P(a,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=p(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function P(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=p(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:F}}function F(){return{value:void 0,done:!0}}return h.prototype=v,i(_,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:h,configurable:!0}),h.displayName=s(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(S.prototype),s(S.prototype,l,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(f(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(_),s(_,c,"Generator"),s(_,u,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function i(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,l,"next",e)}function l(e){i(a,r,o,u,l,"throw",e)}u(void 0)}))}}n(34039).Z.getEventManager().attachToLoadEvent((function(){function e(e,t){var n=function(e,t){var n=e.getAttribute("data-width"),r=e.getAttribute("data-height"),o=e.getAttribute("data-lang"),i=e.getAttribute("data-is-moderator"),a=e.getAttribute("data-user-jwt"),u=function(e,t,n,r){var o=["microphone","camera","fullscreen","fodeviceselection","hangup","chat","settings","filmstrip","stats","shortcuts","tileview","raisehand","select-background","noisesuppression"];return e||o.push("desktop"),t&&(o.push("mute-everyone"),o.push("mute-video-everyone"),o.push("videoquality"),n&&o.push("recording"),r&&o.push("participants-pane")),o}(t,i,"1"===e.getAttribute("data-recording-enabled"),"1"===e.getAttribute("data-participants-pane-enabled")),l={roomName:e.getAttribute("data-room-name"),parentNode:e,userInfo:{email:e.getAttribute("data-user-name")+(t?"@mobile":""),displayName:e.getAttribute("data-display-name")},configOverwrite:{prejoinPageEnabled:"1"===e.getAttribute("data-prejoin-page-enabled"),toolbarButtons:u},interfaceConfigOverwrite:{TOOLBAR_BUTTONS:u},toggleLobby:"1"===e.getAttribute("data-use-lobby-enabled"),noiseSuppressionEnabled:!1};return i&&a&&(l.jwt=a),n&&(l.width=n),r&&(l.height=r),o&&(l.configOverwrite.defaultLanguage=o),l}(t,e),r="1"===t.getAttribute("data-noise-suppression-enabled"),i=new JitsiMeetExternalAPI(t.getAttribute("data-jitsi-domain"),n);i.executeCommand("subject","‎"),i.executeCommand("localSubject","‎");var u=t.getAttribute("data-hangup-callback");u&&i.addListener("readyToClose",(function(){window[u]()})),r&&i.addListener("videoConferenceJoined",(function(e){i.isAudioMuted().then(function(){var e=a(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t||i.executeCommand("setNoiseSuppressionEnabled",{enabled:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.addListener("audioMuteStatusChanged",function(){var e=a(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,100)}));case 2:return e.next=4,i.isAudioMuted().then((function(e){t.muted||e||i.executeCommand("setNoiseSuppressionEnabled",{enabled:!0})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),i.addListener("participantRoleChanged",(function(e){"moderator"===e.role&&(n.toggleLobby&&n.jwt&&i.executeCommand("toggleLobby",!0),i.executeCommand("subject","‎")),i.executeCommand("localSubject","‎")}))}!function(){for(var t=/\b(iPhone|iPad|iPod|Android)\b/i.test(navigator.userAgent),n=document.body.getElementsByClassName("rtcPortalExtension"),r=0;r<n.length;++r)e(t,n[r])}()}))},36406:(e,t,n)=>{"use strict";n(47042),n(83710),n(57327),n(41539),n(74916),n(15306),n(91058),n(47941);var r=n(67991),o=n(69940),i=(0,r.wT)("TimeslotsFreeTimePicker",r.$L);i.prototype.init=function(e,t,n,r,o,i,a){this.container=e,this.selectedDate=t,this.previousMonth=t.getMonth(),this.daysWithFreeTime=n,this.freeTimesForSelectedDate=r,this.slotDuration=o,this.relatedUserId=i,this.timezoneOffset=a,this.drawUI(),this.container&&this.container.appendChild(this.element)},i.prototype.drawUI=function(){this.element=this.e("div",{class:"FreeTimePicker"},[this.e("table",{class:"FreeTimePickerTable",cellPadding:0,cellSpacing:0},[this.e("tbody",null,[this.e("tr",null,[this.e("td",{class:"FreeTimePickerTableCell"},[this.datePicker=(0,r.WN)(new u(this.selectedDate,this.daysWithFreeTime),{onselectdate:this.caller("onSelectDate")})]),this.e("td",{class:"FreeTimePickerTableCell"},[this.timeSelector=new s(this.selectedDate,this.freeTimesForSelectedDate)])])])])])},i.prototype.onScheduleAppointmentClick=function(e){this.cancelEvent(e)},i.prototype.onSelectDate=function(e){this.selectedDate=e.date;var t=TimeSlotApiHelper.portalBaseUrl?TimeSlotApiHelper.getFreeTime(this.selectedDate):getFreeTime(this.selectedDate),n=this,r=new Date(this.selectedDate),o=new Date(this.selectedDate);o.setHours(23),o.setSeconds(59),o.setMinutes(59),t.done((function(e){for(var t=[],i=0;i<e.length;++i){var a=new Date(1e3*e[i].targetDate.timestamp);a>=r&&a<=o&&t.push({targetDate:a,slot:e[i]})}n.freeTimesForSelectedDate=t,n.datePicker.setDate(n.selectedDate),n.timeSelector.setDate(n.selectedDate,n.freeTimesForSelectedDate)}))};var a=(0,r.wT)("Toolbar",r.$L);a.prototype.init=function(e){this.content=e,this.drawUI()},a.prototype.drawUI=function(){this.element=this.e("div",{class:"FreeTimePickerToolbar"},[this.content])};var u=(0,r.wT)("DatePicker",r.$L);u.prototype.init=function(e,t){this.baseCssClassName="DatePicker",this.selectedDate=e,this.daysWithFreeTime=t,this.drawUI()},u.prototype.setDate=function(e){this.selectedDate=e,this.updateData()},u.prototype.drawUI=function(){this.element=this.e("tr",{class:"DatePicker"},[new a(this.e("div",null,[this.title=this.e("span"),this.e("a",{class:"DatePickerToolbarButton",href:"#",onclick:this.caller("onNextClick")},[">"]),this.e("a",{class:"DatePickerToolbarButton",href:"#",onclick:this.caller("onPrevClick")},["<"])])),this.e("div",{class:"DatePickerContent"},[this.e("table",{cellPadding:0,cellSpacing:0},[this.headersContainer=this.e("thead",null,this.getHeaders()),this.createWeeksTbody()])])]),this.updateData()},u.prototype.getHeaders=function(){return[this.e("tr",null,[this.e("th",null,[o.Z.shortDayOfWeekNames[0].charAt(0).toUpperCase()+o.Z.shortDayOfWeekNames[0].slice(1)]),this.e("th",null,[o.Z.shortDayOfWeekNames[1].charAt(0).toUpperCase()+o.Z.shortDayOfWeekNames[1].slice(1)]),this.e("th",null,[o.Z.shortDayOfWeekNames[2].charAt(0).toUpperCase()+o.Z.shortDayOfWeekNames[2].slice(1)]),this.e("th",null,[o.Z.shortDayOfWeekNames[3].charAt(0).toUpperCase()+o.Z.shortDayOfWeekNames[3].slice(1)]),this.e("th",null,[o.Z.shortDayOfWeekNames[4].charAt(0).toUpperCase()+o.Z.shortDayOfWeekNames[4].slice(1)]),this.e("th",null,[o.Z.shortDayOfWeekNames[5].charAt(0).toUpperCase()+o.Z.shortDayOfWeekNames[5].slice(1)]),this.e("th",null,[o.Z.shortDayOfWeekNames[6].charAt(0).toUpperCase()+o.Z.shortDayOfWeekNames[6].slice(1)])])]},u.prototype.createWeeksTbody=function(){function e(e){t.ondayheaderclick&&t.ondayheaderclick(e)}var t=this;this.weeks=[];for(var n,o=this.e("tbody"),i=0;i<=5;++i)(n=(0,r.WN)(new l(this,this.baseCssClassName),{onselectdate:this.caller("onSelectDate")})).ondayheaderclick=e,this.weeks.push(n),this.appendChild(o,n);return o},u.prototype.toTitleCase=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},u.prototype.updateData=function(){this.removeAllChildren(this.title),this.appendChild(this.title,this.toTitleCase(o.Z.getDayAndMonthFormat(this.selectedDate)));for(var e=this.selectedDate.getFullYear(),t=this.selectedDate.getMonth(),n=o.Z.getLastDayInMonth(this.selectedDate),r=1-function(e){return(e=new Date(e.getFullYear(),e.getMonth(),1)).getDay()}(this.selectedDate),i=(u=new Date).getFullYear(),a=u.getMonth(),u=u.getDate(),l=!1,c=0;c<6;++c){this.weeks[c].element.style.display=r>n?"none":"";for(var s=0;s<7;++s){var f=new Date(e,t,r);this.weeks[c].days[s].setDay(f),this.setHasClass(this.weeks[c].days[s].element,this.baseCssClassName+"Past",r<=0||r>n),!l&&r+1>=n&&(l=!0),this.setHasClass(this.weeks[c].days[s].element,this.baseCssClassName+"Today",f.getDate()==u&&f.getFullYear()==i&&f.getMonth()==a),this.setHasClass(this.weeks[c].days[s].element,this.baseCssClassName+"Selected",this.selectedDate.getDate()==f.getDate()&&this.selectedDate.getFullYear()==f.getFullYear()&&this.selectedDate.getMonth()==f.getMonth()),this.setHasClass(this.weeks[c].days[s].element,this.baseCssClassName+"HasFreeTime",this.dateHasFreeTime(f)),++r}}},u.prototype.dateHasFreeTime=function(e){for(var t=0;t<this.daysWithFreeTime.length;++t)if(this.daysWithFreeTime[t].getDate()==e.getDate()&&this.daysWithFreeTime[t].getFullYear()==e.getFullYear()&&this.daysWithFreeTime[t].getMonth()==e.getMonth())return!0;return!1},u.prototype.onPrevClick=function(e){this.cancelEvent(e),this.changeDate(-1)},u.prototype.onNextClick=function(e){this.cancelEvent(e),this.changeDate(1)},u.prototype.changeDate=function(e){var t=new r.uW,n=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+2*e,0);t.date=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+e,this.selectedDate.getDate()>n.getDate()?n.getDate():this.selectedDate.getDate());var o=TimeSlotApiHelper.portalBaseUrl?TimeSlotApiHelper.getSlotDays(t.date):getSlotDays(t.date),i=this;o.done((function(e){for(var n=e.days,r=[],o=0;o<=n.length;++o)r.push(new Date(t.date.getFullYear(),t.date.getMonth(),n[o]));i.daysWithFreeTime=r,i.dispatchEvent("selectdate",t)}))},u.prototype.onSelectDate=function(e){this.dispatchEvent("selectdate",e)};var l=(0,r.wT)("DatePickerWeek",r.$L);l.prototype.init=function(e,t){var n=this;function o(e){n.ondayheaderclick&&n.ondayheaderclick(e)}this.monthView=e,this.baseCssClassName=t,this.days=[],this.element=this.e("tr",{class:this.baseCssClassName+"WeekHeader"});for(var i=0;i<7;++i){var a;(a=(0,r.WN)(new c(this.monthView,this.baseCssClassName),{onselectdate:this.dispatcher("selectdate")})).onheaderclick=o,this.days.push(a),this.appendChild(this.element,a)}return this.widget};var c=(0,r.wT)("DatePickerCell",r.$L);c.prototype.init=function(e,t){this.monthView=e,this.baseCssClassName=t,this.element=this.e("td",{class:this.baseCssClassName+"DayHeaderTd"},[this.e("div",{class:"tdContainer"},[this.e("div",{class:this.baseCssClassName+"DayHeader",onclick:this.caller("onHeaderClick")},[this.dayText=document.createTextNode("")])])])},c.prototype.setDay=function(e){this.date=e,this.dayText.nodeValue=e.getDate()},c.prototype.onHeaderClick=function(){var e=new r.uW;e.date=this.date,this.dispatchEvent("selectdate",e)};var s=(0,r.wT)("TimeSelector",r.$L);s.prototype.init=function(e,t,n){this.selectedDate=e,this.freeTimes=t,this.maxColumns=3,this.timezoneOffset=n,this.drawUI()},s.prototype.setDate=function(e,t){this.selectedDate=e,this.freeTimes=t,this.updateData()},s.prototype.drawUI=function(){this.element=this.element=this.e("div",{class:"TimeSelector"},[new a(this.e("div",null,["Availability for ",this.selectedDateTextContainer=this.e("span")])),this.e("div",{class:"TimeSelectorContent"},[this.checkboxsContainer=this.e("table",{class:"TimeSelectorTable",cellPadding:0,cellSpacing:0})])]),this.updateData()},s.prototype.getCheckboxs=function(){for(var e=parseInt(this.freeTimes.length/this.maxColumns)+1,t=e<2?1:e<4?2:3,n=(parseInt(this.freeTimes.length/t),[]),r=0;r<this.freeTimes.length;++r){for(var o=[],i=0;i<t&&r<this.freeTimes.length;++i)o.push(this.e("td",{class:"TimeSelectorCell"},[new f(this.freeTimes[r],this.timezoneOffset)])),++r;n.push(this.e("tr",null,o)),--r}return this.e("tbody",null,n)},s.prototype.updateData=function(){this.removeAllChildren(this.selectedDateTextContainer),this.appendChild(this.selectedDateTextContainer,this.toTitleCase(o.Z.getLongDateFormat(this.selectedDate))),this.removeAllChildren(this.checkboxsContainer),this.appendChild(this.checkboxsContainer,this.getCheckboxs())},s.prototype.toTitleCase=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))};var f=(0,r.wT)("TimeSelectorOption",r.$L);f.prototype.init=function(e,t){var n=e.targetDate;this.startDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),0),this.endDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes()+e.slot.slotInMinutes,0),this.slot=e.slot,this.timezoneOffset=t,this.drawUI()},f.prototype.getValueForCheckbox=function(){return JSON.stringify({slotPartitionNumber:Object.keys(this.slot.availablePartitionNumbers)[0],targetDate:{date:this.startDate.getTime()/1e3,hasTime:!0},timeSlotId:this.slot.appUserTimeSlotId,title:"Event for timeslot id "+this.slot.appUserTimeSlotId,contactIdAssignee:null,durationInSeconds:60*this.slot.slotInMinutes,relatedObjects:{addedItems:[],removedItems:[]},typeId:2,timezoneOffset:this.timezoneOffset})},f.prototype.drawUI=function(){var e="";""!==this.slot.location&&null!==this.slot.location&&(e=" ("+this.slot.location+")"),this.element=this.e("label",null,[this.input=this.e("input",{type:"radio",name:"selectedTimeSlot",onchange:this.caller("onChange")}),o.Z.getOnlyTimeFromDate(this.startDate)," - ",o.Z.getOnlyTimeFromDate(this.endDate),this.e("span",{class:"timeSlotLocation"},[e])]),this.input.value=this.getValueForCheckbox()},f.prototype.onChange=function(){var e=this.input.checked;this.setHasClass(this.element,"TimeSelectorTimeSelected",e);var t=new r.uW;t.date=this.date,this.dispatchEvent("selecttime",t)};const p=i;var d=!1,y={load:function(e,t,n){y.portalBaseUrl=e,y.companiesSelector=n,y.selectedCompanySelector=n+" option:selected",","==t.slice(-1)&&(t=t.slice(0,-1)),y.entityIds=t},getFreeTime:function(e){return pjQuery.ajax({contentType:"application/json",data:'{ "year":'+e.getFullYear()+', "month":'+(e.getMonth()+1)+', "day": '+e.getDate()+', "entityIds": [ '+y._getEntityIds()+' ], "timezoneOffset": '+e.getTimezoneOffset()+"}",dataType:"json",type:"POST",url:y.portalBaseUrl+"/_timeSlotApi?action=2"})},getSlotDays:function(e){return pjQuery.ajax({contentType:"application/json",data:'{ "year":'+e.getFullYear()+', "month":'+(e.getMonth()+1)+', "entityIds": [ '+y._getEntityIds()+' ], "timezoneOffset": '+e.getTimezoneOffset()+"}",dataType:"json",type:"POST",url:y.portalBaseUrl+"/_timeSlotApi?action=1"})},getSlotDaysAndTodaysFreeTime:function(e,t,n){var r=new Date,o=e||r.getFullYear(),i=t||r.getMonth(),a=n||null;pjQuery.ajax({contentType:"application/json",data:'{ "year":'+o+', "month":'+(i+1)+', "day":'+a+', "entityIds": [ '+y._getEntityIds()+' ], "timezoneOffset": '+r.getTimezoneOffset()+"}",dataType:"json",success:function(e){for(var t=[],n=0;n<=e.days.length;++n)t.push(new Date(o,e.month-1,e.days[n]));var i=[],a=new Date;a.setFullYear(e.year,e.month-1,e.day),a.setHours(23,59,59,999);for(n=0;n<e.times.length;++n)r.getTime()<=1e3*e.times[n].targetDate.timestamp&&a.getTime()>=1e3*e.times[n].targetDate.timestamp&&i.push({targetDate:new Date(1e3*e.times[n].targetDate.timestamp),slot:e.times[n]});d||(d=!0,pjQuery(y.companiesSelector+" option").filter((function(){return-1==pjQuery.inArray(this.value,["0","-1"])})).remove(),pjQuery.each(e.companies,(function(e,t){pjQuery(y.companiesSelector).append(pjQuery("<option></option>").attr("value",t.entityId).text(t.entityName))}))),new p(document.getElementById("freeTimePickerContainer"),new Date(e.year,e.month-1,e.day?e.day:(new Date).getDate()),t,i,30,1,(new Date).getTimezoneOffset())},type:"POST",url:y.portalBaseUrl+"/_timeSlotApi?action=4"})},_getEntityIds:function(){var e=y.entityIds;return""!=e&&y.companiesSelector?e=y.entityIds+","+pjQuery(y.selectedCompanySelector).val():y.companiesSelector&&(e=pjQuery(y.selectedCompanySelector).val()),e}};const h=y;n.g.TimeSlotApiHelper=h},57939:(e,t,n)=>{"use strict";n(96649),n(96078),n(82526),n(41817),n(41539),n(9653),n(69070),n(32165),n(66992),n(78783),n(33948);var r=n(81396),o=n.n(r);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),r)}var o,a}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialize()}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}],(n=[{key:"get",value:function(e){var t=pjQuery.Deferred();return this.cache[e]?t.resolve(this.cache[e]):t.reject(null),t.promise()}},{key:"set",value:function(e,t){var n=pjQuery.Deferred();return this.cache[e]=t,n.resolve(!0),n.promise()}},{key:"clear",value:function(e){var t=pjQuery.Deferred();return this.cache.hasOwnProperty(e)?(delete this.cache[e],t.resolve(!0)):t.reject(null),t.promise()}},{key:"purge",value:function(){var e=pjQuery.Deferred();return this._initialize(),e.resolve(!0),e.promise()}},{key:"buildKey",value:function(e,t){return t=t||{},o()(e+JSON.stringify(t))}},{key:"_initialize",value:function(){this.cache={}}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const l=u;n(69826),n(32564);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function f(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}var y=f((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));p(y,"WIZARD_FIELD_DESCRIPTION","WizardFieldDescription"),p(y,"WIZARD_FIELD_LABEL","WizardFieldLabel"),p(y,"WIZARD_FIELD_SUBFIELD_LABEL","WizardSubFieldLabel"),p(y,"WIZARD_FIELD_LINK","WizardFieldLink"),p(y,"WIZARD_FIELD_INPUT_CONTAINER","WizardFieldInputContainer"),p(y,"WIZARD_FIELD_INPUT","WizardFieldInput"),p(y,"WIZARD_FIELD_ERROR","WizardFieldError"),p(y,"WIZARD_FIELD_SUBFIELD_LABEL_TC","tc_formSublabel"),p(y,"WIZARD_DIV_AFTER_DESCRIPTION_TC","tc_formField");const h=y;function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===v(i)?i:String(i)),r)}var o,i}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"setWizardValidationAccessible",value:function(t){var n="";pjQuery("body").find(".errorMessage").each((function(e,t){var r=pjQuery(this),o=r.text(),i=r.attr("data-fieldLabel");if(i&&o){var a=o.split(")")[1].substr(1);n+=i+": "+a+" "}})),n&&(pjQuery("#liveErrorsContainer").append("<p>"+t+" "+n+"</p>"),setTimeout((function(){e.cleanDuplicatedNotices(),e.appendToWizardFormVisibleNoticeOfFieldErrors(t)}),1e3))}},{key:"cleanDuplicatedNotices",value:function(){pjQuery("div.alert--error").remove(),pjQuery("div.message--error").remove()}},{key:"appendToWizardFormVisibleNoticeOfFieldErrors",value:function(e){pjQuery("form").each((function(){pjQuery(this).find(':input[name ="entityData"]').length>0&&pjQuery(this).prepend(pjQuery("<div/>",{class:"alert alert--error "+h.WIZARD_FIELD_ERROR,"aria-hidden":"true"}).append([pjQuery("<i/>",{class:"fa fa-exclamation-circle"}),e]))}))}}],(n=null)&&b(t.prototype,n),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const g=m;n(74916),n(15306),n(24603),n(39714),n(54678),n(83710),n(68304),n(24812),n(30489),n(12419),n(78011),n(74819),n(38880),n(21249),n(26833),n(88674),n(97314),n(82772),n(40561);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===_(i)?i:String(i)),r)}var o,i}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"assertIsValid",value:function(t){if(!(t&&t instanceof e))throw new Error("invalidArgumentException: invalid value. It must be an instance of ValueBase.")}}],(n=[{key:"getType",value:function(){throw new Error("notImplementedError")}},{key:"toString",value:function(){throw new Error("notImplementedError")}},{key:"isEmpty",value:function(){return!1}}])&&w(t.prototype,n),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const O=S;function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F(r.key),r)}}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var o=T(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function F(e){var t=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===P(t)?t:String(t)}var I,R,C,D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(i,e);var t,n,r,o=j(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return""}},{key:"isEmpty",value:function(){return!0}}])&&E(t.prototype,n),r&&E(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);I=D,C="FieldEmptyValue",(R=F(R="TYPE"))in I?Object.defineProperty(I,R,{value:C,enumerable:!0,configurable:!0,writable:!0}):I[R]=C;const x=D;function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function N(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}var M=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"registerFieldDependency",value:function(t,n,r){PortalHtml.elementExists(t)&&PortalHtml.elementExists(n)&&(r!==e.TYPE_DISPLAY&&r!==e.TYPE_VALUES&&r!==e.TYPE_EDIT||(e._existsFieldWithDependencies(n)||(e._fieldsDependencies[n]=[]),-1===e._fieldsDependencies[n].indexOf(t)&&(e._fieldsDependencies[n][t]=[]),-1===e._fieldsDependencies[n][t].indexOf(r)&&e._fieldsDependencies[n][t].push(r)))}},{key:"getChildDependentFieldsOf",value:function(t){return e._existsFieldWithDependencies(t)?e._fieldsDependencies[t]:[]}},{key:"_existsFieldWithDependencies",value:function(t){return t in e._fieldsDependencies}}],(n=null)&&L(t.prototype,n),r&&L(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();M.TYPE_DISPLAY="Display",M.TYPE_VALUES="Values",M.TYPE_EDIT="Edit",M._fieldsDependencies={};const V=M;function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W(r.key),r)}}function W(e){var t=function(e,t){if("object"!==B(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===B(t)?t:String(t)}var Y=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._parentDependencyFieldId=t,this._operator=n,this._value=r}var t,n,r;return t=e,(n=[{key:"getParentDependencyFieldId",value:function(){return this._parentDependencyFieldId}},{key:"getOperator",value:function(){return this._operator}},{key:"getValue",value:function(){return this._value}}])&&U(t.prototype,n),r&&U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Q=Y;function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q(r.key),r)}}function q(e){var t=function(e,t){if("object"!==H(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===H(t)?t:String(t)}var J=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"isFieldRegistered",value:function(t){return t in e._fields}},{key:"registerField",value:function(t,n){return!(e.isFieldRegistered(t)||!PortalHtml.elementExists(t)||(e._fields[t]=n,0))}},{key:"unregisterField",value:function(t){e.isFieldRegistered(t)&&!PortalHtml.elementExists(t)&&delete e._fields[t]}},{key:"getFieldValue",value:function(t){return e._getFieldOrDie(t).getValue()}},{key:"getFieldValueByType",value:function(t,n){var r=e._getFieldOrDie(t).getValue();if(r.getType()!==n&&r.getType()!==x.TYPE)throw new Error("invalidValueError: field "+t+" returns "+r.getType()+" values");return r}},{key:"getFieldValueForCondition",value:function(t){return e._getFieldOrDie(t).getValueForCondition()}},{key:"setFieldValue",value:function(t,n){e._getFieldOrDie(t).setValue(n)}},{key:"hasValue",value:function(t){var n=e.getField(t);if(null!==n)return n.hasValue();e._throwFieldNotRegisteredException(t)}},{key:"cloneForNewTableRow",value:function(t,n,r){PortalString.isString(r)||(r="");var o=t+"-0"+r,i=t+"-"+n+r;if(null===e.getField(i)){var a=e.getField(o);null===a&&e._throwFieldNotRegisteredException(t),a.cloneForNewTableRow(i,n)}}},{key:"isVisible",value:function(t){var n=e.getField(t);return null!==n&&n.isVisible()}},{key:"setFieldVisibilityConditionFromParams",value:function(t,n,r,o){if(e.isFieldRegistered(t)){var i=e.getField(t),a=new Q(n,r,o);i.addVisibilityCondition(a)}}},{key:"setFieldEditConditionFromParams",value:function(t,n,r,o){if(e.isFieldRegistered(t)){var i=e.getField(t),a=new Q(n,r,o);i.addEditCondition(a)}}},{key:"onFieldValueChange",value:function(t){if(e.isFieldRegistered(t)){var n,r,o,i=V.getChildDependentFieldsOf(t);for(r in i)if(i.hasOwnProperty(r))for(n=0;n<i[r].length;n++)o=i[r][n],e._addFieldAsPendingToBeUpdated(r,o,t);var a=e._getFieldsPendingToBeUpdated(t);for(n=0;n<a.length;n++){r=a[n];var u=e.getField(r);null!==u&&(u.onRelatedFieldValueChange(t),e._removePendingToBeUpdatedField(r))}}}},{key:"evaluateEditRestrictions",value:function(t){var n=e.getField(t);null!==n&&n.evaluateEditRestrictions()}},{key:"fieldAcceptsValueType",value:function(t,n){return e._getFieldOrDie(t).fieldAcceptsValueType(n)}},{key:"isSomeFieldBeingUpdated",value:function(){for(var t in e._fields)if(e._fields.hasOwnProperty(t)&&e.getField(t).isBeingUpdated())return!0;return!1}},{key:"getField",value:function(t){return e.isFieldRegistered(t)?e._fields[t]:null}},{key:"dispatchBeforeSubmitAutoPartialSave",value:function(){var t=Object.values(e._fields).map((function(e){return e.onBeforeSubmitAutoPartialSave()}));return Promise.allSettled(t)}},{key:"_throwFieldNotRegisteredException",value:function(e){throw new Error("tryToAccessNonRegisteredField: "+e)}},{key:"_addFieldAsPendingToBeUpdated",value:function(t,n,r){(-1===e._fieldsPendingToBeUpdated.indexOf(t)||e._fieldsPendingToBeUpdated[t].dependencyType===V.TYPE_DISPLAY&&n===V.TYPE_VALUES)&&(e._fieldsPendingToBeUpdated[t]={dependencyType:n,parentFieldId:r})}},{key:"_getFieldsPendingToBeUpdated",value:function(t){var n=[];for(var r in e._fieldsPendingToBeUpdated)e._fieldsPendingToBeUpdated.hasOwnProperty(r)&&e._fieldsPendingToBeUpdated[r].parentFieldId===t&&n.push(r);return n}},{key:"_removePendingToBeUpdatedField",value:function(t){var n=e._fieldsPendingToBeUpdated.indexOf(t);n>-1&&e._fieldsPendingToBeUpdated.splice(n,1)}},{key:"_getFieldOrDie",value:function(t){var n=e.getField(t);if(null!==n)return n;e._throwFieldNotRegisteredException(t)}},{key:"_isCollapsible",value:function(t){var n=e.getField(t);return n&&n._getFieldContainerElement().hasClass("fieldSpec--collapsible")}}],(n=null)&&z(t.prototype,n),r&&z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();J._fieldsPendingToBeUpdated=[],J._fields={};const G=J;n(69600),n(51532),n(89554),n(54747),n(26699),n(47042),n(68309),n(91038),n(79753),n(72443),n(39341),n(73706),n(10408),n(65069),n(26541),n(5212),n(32023);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ee(r.key),r)}}function $(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function X(e,t,n){return(t=ee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e){var t=function(e,t){if("object"!==Z(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Z(t)?t:String(t)}var te=$((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));X(te,"EQUAL","=="),X(te,"NOT_EQUAL","!="),X(te,"ANY","any"),X(te,"ALL","all"),X(te,"NONE","none"),X(te,"IS_ATTACHED","isAttached"),X(te,"IS_SET","isSet"),X(te,"IS_COMPLETED","isCompleted"),X(te,"IS_EMPTY","isEmpty"),X(te,"TIME_SLOT_SELECTED","timeSlotSelected"),X(te,"NO_TIME_SLOT_SELECTED","noTimeSlotSelected");const ne=te;function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ie(r.key),r)}}function ie(e){var t=function(e,t){if("object"!==re(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===re(t)?t:String(t)}var ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"areFieldConditionsSatisfied",value:function(e,t){var n=this;return!!e&&e.every((function(e){return n._isFieldConditionSatisfied(e)}))}},{key:"_isFieldConditionSatisfied",value:function(e){var t=e.getParentDependencyFieldId();try{var n=G.getFieldValueForCondition(t);return Array.isArray(n)?this._evaluateArrayedValue(n,e.getValue(),e.getOperator()):this._evaluateSimpleValue(n,e.getValue(),e.getOperator())}catch(e){return!1}}},{key:"_evaluateArrayedValue",value:function(e,t,n){switch(n){case ne.ALL:case ne.EQUAL:return this._arrayEquals(e,t);case ne.NOT_EQUAL:return!this._arrayEquals(e,t);case ne.ANY:return this._arrayContainsAny(e,t);case ne.NONE:return!this._arrayContainsAny(e,t);default:return!1}}},{key:"_arrayContainsAny",value:function(e,t){var n=this;return e.some((function(e){return t.some((function(t){return n._parseValueForEvaluation(t)==n._parseValueForEvaluation(e)}))}))}},{key:"_arrayEquals",value:function(e,t){var n=this;return!(e.length<t.length)&&t.every((function(t){return e.some((function(e){return n._parseValueForEvaluation(t)==n._parseValueForEvaluation(e)}))}))}},{key:"_evaluateSimpleValue",value:function(e,t,n){switch(e=this._parseValueForEvaluation(e),t=null===t?"":t,n){case ne.EQUAL:return this._evaluateSimpleEqual(e,t);case ne.NOT_EQUAL:return e!=t;case ne.ANY:case ne.NONE:return this._evaluateArrayedValue([e],t,n);case ne.IS_SET:case ne.IS_ATTACHED:return this._evaluateValueIsSetOrFileIsAttached(e,t);case ne.IS_EMPTY:return!this._isValueSetOrFileAttached(e);case ne.TIME_SLOT_SELECTED:case ne.NO_TIME_SLOT_SELECTED:return this._evaluateTimeSlotFieldValue(e,n);default:return!1}}},{key:"_evaluateSimpleEqual",value:function(e,t){return!(null===e&&null!==t||e!=t&&(e<t||e>t))}},{key:"_evaluateTimeSlotFieldValue",value:function(e,t){return e&&t===ne.TIME_SLOT_SELECTED||!e&&t===ne.NO_TIME_SLOT_SELECTED}},{key:"_evaluateValueIsSetOrFileIsAttached",value:function(e,t){return this._isSetOrIsAttachedConditionValue(t)?this._isValueSetOrFileAttached(e):!this._isValueSetOrFileAttached(e)}},{key:"_isValueSetOrFileAttached",value:function(e){return""!==e&&null!=e}},{key:"_isSetOrIsAttachedConditionValue",value:function(e){return 1===e||"1"===e}},{key:"_parseValueForEvaluation",value:function(e){return null===e?"":"string"==typeof e&&e.includes("JSNType")?(null===(t=JSON.parse(e).value)||void 0===t?void 0:t.id)||null:"object"===re(e)&&e.value?e.value.id:e;var t}}],n&&oe(t.prototype,n),r&&oe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const ue=ae;function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,se(r.key),r)}}function se(e){var t=function(e,t){if("object"!==le(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===le(t)?t:String(t)}function fe(){return fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ye(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},fe.apply(this,arguments)}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ye(e);if(t){var o=ye(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(i,e);var t,n,r,o=de(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"_isFieldConditionSatisfied",value:function(e){var t=e.getParentDependencyFieldId();return(G.isVisible(t)||G._isCollapsible(t))&&fe(ye(i.prototype),"_isFieldConditionSatisfied",this).call(this,e)}}])&&ce(t.prototype,n),r&&ce(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue);const ve=he;function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ge(r.key),r)}}function ge(e){var t=function(e,t){if("object"!==be(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===be(t)?t:String(t)}function _e(){return _e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Oe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_e.apply(this,arguments)}function we(e,t){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},we(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oe(e);if(t){var o=Oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&we(e,t)}(i,e);var t,n,r,o=Se(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"areFieldConditionsSatisfied",value:function(e,t){return(!e||1!==e.length||e[0].getParentDependencyFieldId()!==t)&&_e(Oe(i.prototype),"areFieldConditionsSatisfied",this).call(this,e,t)}}])&&me(t.prototype,n),r&&me(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ue);const Ee=Pe;function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Te(r.key),r)}}function Te(e){var t=function(e,t){if("object"!==ke(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ke(t)?t:String(t)}var Fe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"registerValidator",value:function(t,n){e._isValidatorRegistered(t)||(e._validators[t]=[]),e._validators[t].push(n)}},{key:"getForField",value:function(t){var n=e.__getValidators(t);return null!==n?n:[]}},{key:"cloneValidatorForNewTableRow",value:function(t,n,r){for(var o=e.getForField(t),i=0;i<o.length;i++){var a=o[i].cloneForNewTableRow(n,r);e.registerValidator(n,a)}}},{key:"__getValidators",value:function(t){return e._isValidatorRegistered(t)?e._validators[t]:null}},{key:"_isValidatorRegistered",value:function(t){return t in e._validators}}],(n=null)&&je(t.prototype,n),r&&je(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();Fe._validators={};const Ie=Fe;function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ae(r.key),r)}}function De(e,t,n){return t&&Ce(e.prototype,t),n&&Ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xe(e,t,n){return(t=Ae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ae(e){var t=function(e,t){if("object"!==Re(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Re(t)?t:String(t)}var Le=De((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));xe(Le,"DISPLAY_CONDITIONALLY","DisplayConditionally"),xe(Le,"SECTION_COLLAPSIBLE","SectionCollapsible"),xe(Le,"SHOW_FIELD_BY_FIELD","ShowFieldByField");const Ne=Le;function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Be(r.key),r)}}function Be(e){var t=function(e,t){if("object"!==Me(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Me(t)?t:String(t)}var Ue=null,We=!1,Ye=[],Qe=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!We)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return Ue||(We=!0,Ue=new e,We=!1),Ue}}],(n=[{key:"addWizard",value:function(e,t){Ye[e]=t}},{key:"getWizard",value:function(e){if(!Ye.hasOwnProperty(e))throw new Error("Wizard (ID: "+e+") does not exist.");return Ye[e]}}])&&Ve(t.prototype,n),r&&Ve(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const He=Qe;n(34553);function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Je(r.key),r)}}function Je(e){var t=function(e,t){if("object"!==ze(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ze(t)?t:String(t)}var Ge=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._assign.apply(this,arguments),this.prevented=!1,this.sourceWidget=null,this.currentWidget=null}var t,n,r;return t=e,(n=[{key:"_assign",value:function(e){if(e&&"object"!==ze(e))throw new Error("Parameter must be an object.");for(var t in e)this[t]=e[t]}},{key:"preventDefault",value:function(){this.prevented=!0}},{key:"getDefaultPrevented",value:function(){return this.prevented}},{key:"setSourceWidget",value:function(e){this.sourceWidget=e}},{key:"getSourceWidget",value:function(){return this.sourceWidget}},{key:"setCurrentWidget",value:function(e){this.currentWidget=e}},{key:"getCurrentWidget",value:function(){return this.currentWidget}}])&&qe(t.prototype,n),r&&qe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Ze=Ge;function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xe(r.key),r)}}function Xe(e){var t=function(e,t){if("object"!==Ke(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ke(t)?t:String(t)}var et=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventListeners={},this._callers={}}var t,n,r;return t=e,n=[{key:"addListener",value:function(e,t){if(this._eventListeners[e]||(this._eventListeners[e]=[]),this._eventListeners[e].includes(t))throw new Error("Adding repeated listener ("+e+")");t.callerObj&&t.callerObj.attachedTo.push({context:this,eventName:e}),this._eventListeners[e].push(t)}},{key:"addListenerOnce",value:function(e,t){var n=this;this.addListener(e,(function r(o){t(o),n.removeListener(e,r)}))}},{key:"dispatchEvent",value:function(e,t){return void 0===t&&(t=new Ze),t instanceof Ze&&(t.getSourceWidget()||t.setSourceWidget(this),t.setCurrentWidget(this)),this._eventListeners[e]&&this._eventListeners[e].slice().forEach((function(e){return e(t)})),t}},{key:"removeListener",value:function(e,t){if(this._eventListeners[e]&&this._eventListeners[e].length){var n=this._eventListeners[e].indexOf(t);-1!==n?(this._detachFromEvent(t,e),this._eventListeners[e].splice(n,1)):error.log("Cannot remove listener. Listener not added or already removed. Event: "+e+".")}else error.log("Cannot remove listener. Event has no listeners. Event: "+e+".")}},{key:"caller",value:function(e){return this._callers[e]?this._callers[e]:this._callers[e]=this._createCaller(e)}},{key:"_createCaller",value:function(e){var t=this;if(!this[e])throw new Error("missingCaller: "+e);return function(){return t[e].apply(t,arguments)}}},{key:"_detachFromEvent",value:function(e,t){var n=this;if(e.callerObj&&e.callerObj.attachedTo){var r=e.callerObj.attachedTo.findIndex((function(e){return e.context===n&&e.eventName===t}));e.callerObj.attachedTo.splice(r,1)}}}],n&&$e(t.prototype,n),r&&$e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const tt=et;function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function rt(){rt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),u=new E(o||[]);return r(a,"_invoke",{value:w(e,n,u)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function d(){}function y(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(h=b);var m=y.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(r,i,a,u){var l=s(e[r],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==nt(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return o("throw",e,a,u)}))}u(l.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return j()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=y,r(m,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),l(m,u,"Generator"),l(m,i,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||ut(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function at(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ut(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ut(e,t){if(e){if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,st(r.key),r)}}function st(e){var t=function(e,t){if("object"!==nt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nt(t)?t:String(t)}function ft(e,t){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ft(e,t)}function pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dt(e);if(t){var o=dt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function dt(e){return dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dt(e)}var yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ft(e,t)}(u,e);var t,n,r,o,i,a=pt(u);function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=a.call(this))._fieldId=e,n._fieldSettings=t||{},n._visibilityConditions=[],n._editConditions=[],n._isBeingUpdated=!1,n._shouldReupdateAfterCurrentUpdate=!1,n._nextUpdateParentFieldId=null,n._visibilityConditionsEvaluator=new ve,n._editConditionsEvaluator=new Ee,n}return t=u,n=[{key:"register",value:function(){G.registerField(this._fieldId,this)&&(this._buildVisibilityStatus(),this._postRegister(),this._changeVisibilityIfNeeded(),this.evaluateEditRestrictions())}},{key:"getType",value:function(){throw new Error("notImplementedError")}},{key:"getValue",value:function(){throw new Error("notImplementedError")}},{key:"getValueForCondition",value:function(){throw new Error("notImplementedError")}},{key:"setValue",value:function(e){throw new Error("notImplementedError")}},{key:"hasValue",value:function(){return!this.getValue().isEmpty()}},{key:"getLabel",value:function(){var e=pjQuery("#"+this._fieldId+"-label").text();return e&&this.isRequired()?e.replace(/\s\*$/,""):e}},{key:"_assertIsAllowedValueToSet",value:function(e){if(O.assertIsValid(e),!(this._getAllowedValueTypesToSet().indexOf(e.getType())>-1))throw new Error("invalidArgumentException: value to set must be an instance of: "+this._getAllowedValueTypesToSet().join(", "))}},{key:"_getAllowedValueTypesToSet",value:function(){throw new Error("notImplementedError")}},{key:"isRequired",value:function(){return this._getFieldContainerElement().find(".requiredField").length||this._getFieldContainerElement().find(".formrequiredField").length||this._getFieldContainerElement().find(".datasetrequiredField").length}},{key:"isValid",value:function(){if(!this._isActive())return!0;var e,t=Ie.getForField(this._fieldId),n=new Map,r=at(t);try{for(r.s();!(e=r.n()).done;){var o=e.value,i=o.isValid();if(!1===i)return this._addValidationErrorIfNeeded(o.getValidationErrorText()),this.dispatchEvent(u.EVENT_ON_VALIDATION_FAIL),!1;i instanceof Promise&&n.set(o,i)}}catch(e){r.e(e)}finally{r.f()}return n.size>0?this._runAsyncValidators(n):(this._removeValidationErrorIfNeeded(),!0)}},{key:"getFieldSettings",value:function(){return this._fieldSettings}},{key:"getSetting",value:function(e){return this._fieldSettings.hasOwnProperty(e)?this._fieldSettings[e]:null}},{key:"getWizard",value:function(){return this._wizard||(this._wizard=He.getInstance().getWizard(this.getWizardId())),this._wizard}},{key:"getWizardId",value:function(){return this._wizardId||(this._wizardId=this._getFieldElement().closest(".wizard").data("id")),this._wizardId}},{key:"_addValidationErrorIfNeeded",value:function(e){if(pjQuery("#"+this._fieldId+"-errorMessage").length)pjQuery("#"+this._fieldId+"-errorMessage").text(e),pjQuery("#"+this._fieldId+"-errorMessage").prepend(pjQuery("<span/>",{"aria-hidden":"true",class:"errorMessageIcon",text:"(!) "}));else{var t=pjQuery("<span/>",{id:this._fieldId+"-errorMessage",class:"errorMessage "+h.WIZARD_FIELD_ERROR,role:"alert","aria-live":"assertive","data-fieldlabel":pjQuery("#"+this._fieldId+"-label").text(),text:e}).prepend(pjQuery("<span/>",{"aria-hidden":"true",class:"errorMessageIcon",text:"(!) "}));pjQuery("#"+this._fieldId).parent().append(t)}}},{key:"_removeValidationErrorIfNeeded",value:function(){pjQuery("#"+this._fieldId+"-errorMessage").length&&pjQuery("#"+this._fieldId+"-errorMessage").remove()}},{key:"isBeingUpdated",value:function(){return this._isBeingUpdated||this._shouldReupdateAfterCurrentUpdate}},{key:"cloneForNewTableRow",value:function(e,t){var n=this._buildClonedFieldForNewTableRow(e,t);this._addVisibilityConditionsToNewTableRow(n,t),this._addEditConditionsToNewTableRow(n,t),Ie.cloneValidatorForNewTableRow(this._fieldId,e,t),n.register()}},{key:"getFieldId",value:function(){return this._fieldId}},{key:"addVisibilityCondition",value:function(e){null!==e&&(this._visibilityConditions.push(e),V.registerFieldDependency(this._fieldId,e.getParentDependencyFieldId(),V.TYPE_DISPLAY))}},{key:"addEditCondition",value:function(e){null!==e&&(this._editConditions.push(e),V.registerFieldDependency(this._fieldId,e.getParentDependencyFieldId(),V.TYPE_EDIT))}},{key:"shouldShowIf",value:function(e,t){var n=this.visibilityStatus[e];this.visibilityStatus[e]=t;var r=this._shouldShow();return this.visibilityStatus[e]=n,r}},{key:"isVisible",value:function(){var e=this._getFieldContainerElement();return null!==e&&!e.attr("hidden")}},{key:"focus",value:function(){pjQuery("#"+this._fieldId).focus()}},{key:"onRelatedFieldValueChange",value:function(e){this._isBeingUpdated?(this._shouldReupdateAfterCurrentUpdate=!0,this._nextUpdateParentFieldId=e):(this._isBeingUpdated=!0,this._shouldReupdateAfterCurrentUpdate=!1,this._nextUpdateParentFieldId=null,this._updateFieldAfterParentFieldValueChange(e))}},{key:"fieldAcceptsValueType",value:function(e){return this._getAllowedValueTypesToSet().indexOf(e)>-1}},{key:"evaluateEditRestrictions",value:function(){var e=this._editConditionsEvaluator.areFieldConditionsSatisfied(this._editConditions,this._fieldId);this._changeEditRestrictionsIfNeeded(e)}},{key:"_postRegister",value:function(){if(this._attachOnChangeListener(),this.hasValue()){var e=this._fieldId;pjQuery((function(){G.onFieldValueChange(e)}))}}},{key:"_updateFieldAfterParentFieldValueChange",value:function(e){this.evaluateEditRestrictions();var t=this._updateFieldVisibilityAfterParentFieldValueChange();this._onFieldUpdated(t)}},{key:"_onFieldUpdated",value:function(e){if(e&&G.onFieldValueChange(this._fieldId),this._isBeingUpdated=!1,this._shouldReupdateAfterCurrentUpdate){this._shouldReupdateAfterCurrentUpdate=!1;var t=this._nextUpdateParentFieldId;this._nextUpdateParentFieldId=null,this.onRelatedFieldValueChange(t)}}},{key:"_updateFieldVisibilityAfterParentFieldValueChange",value:function(){var e=this._visibilityConditionsEvaluator.areFieldConditionsSatisfied(this._visibilityConditions),t=this.isVisible();return this.setVisibilityStatusByType(Ne.DISPLAY_CONDITIONALLY,e),t!==this.isVisible()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._buildClonedField(e)}},{key:"_buildClonedField",value:function(e){throw new Error("notImplementedError")}},{key:"_addVisibilityConditionsToNewTableRow",value:function(e,t){for(var n=this._visibilityConditions.length-1;n>=0;n--)e.addVisibilityCondition(this._buildFieldConditionForNewTableRow(this._visibilityConditions[n],t))}},{key:"_addEditConditionsToNewTableRow",value:function(e,t){for(var n=this._editConditions.length-1;n>=0;n--)e.addEditCondition(this._buildFieldConditionForNewTableRow(this._editConditions[n],t))}},{key:"_buildFieldConditionForNewTableRow",value:function(e,t){return new Q(e.getParentDependencyFieldId().replace(/^((\d+-)+)\d+$/,"$1"+t),e.getOperator(),e.getValue())}},{key:"_unsetField",value:function(e){e.val("")}},{key:"_deactivateChildren",value:function(e){var t=this;e.find("[data-parentid='"+e.attr("id")+"']").each((function(e,n){t._deactivate(pjQuery("#"+n.id))}))}},{key:"_activateChildren",value:function(e){var t=this;e.find("[data-parentid='"+e.attr("id")+"']").each((function(e,n){t._activate(pjQuery("#"+n.id))}))}},{key:"_addHiddenElementIndicator",value:function(){this._getFieldContainerElement().append('<input id="'+this._fieldId+'_hidden" name="'+this._fieldId+'_hidden" type="hidden" value="true" />')}},{key:"_removeHiddenElementIndicator",value:function(){pjQuery("#"+this._fieldId+"_hidden").remove()}},{key:"_shouldHaveHiddenElementIndicator",value:function(){return!0}},{key:"_setElementType",value:function(e,t){if(e.prop("type")!==t)switch(t){case"select-one":e[0].multiple=!1;break;case"select-multiple":e[0].multiple=!0;break;default:this._elementAllowsChangingType(e[0])&&e.prop("type",t)}}},{key:"_runAsyncValidators",value:(o=rt().mark((function e(t){var n,r,o,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=at(t.entries()),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=14;break}return o=ot(r.value,2),i=o[0],a=o[1],e.next=7,a;case 7:if(!1!==e.sent){e.next=12;break}return this._addValidationErrorIfNeeded(i.getValidationErrorText()),this.dispatchEvent(u.EVENT_ON_VALIDATION_FAIL),e.abrupt("return",!1);case 12:e.next=3;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:return e.abrupt("return",!0);case 23:case"end":return e.stop()}}),e,this,[[1,16,19,22]])})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){it(i,n,r,a,u,"next",e)}function u(e){it(i,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return i.apply(this,arguments)})},{key:"_elementAllowsChangingType",value:function(e){var t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"type");return t&&"function"==typeof t.set}},{key:"_attachOnChangeListener",value:function(){var e=this;pjQuery("#"+this._fieldId).on("change",(function(){G.onFieldValueChange(e.getFieldId())}))}},{key:"_getFieldElement",value:function(){return pjQuery("#"+this._fieldId)}},{key:"_getFieldContainerElement",value:function(){return pjQuery("#fieldSpecContainer"+this._fieldId)}},{key:"_buildVisibilityStatus",value:function(){var e=this._getFieldContainerElement();this.visibilityStatus=[],this.visibilityStatus[Ne.DISPLAY_CONDITIONALLY]="1"!==e.attr("data-displayConditionallyHidden"),this.visibilityStatus[Ne.SECTION_COLLAPSIBLE]="1"!==e.attr("data-sectionCollapsibleHidden"),this.visibilityStatus[Ne.SHOW_FIELD_BY_FIELD]=!0,e.removeAttr("data-displayConditionallyHidden"),e.removeAttr("data-sectionCollapsibleHidden")}},{key:"setVisibilityStatusByType",value:function(e,t){this.visibilityStatus[e]=t,this._changeVisibilityIfNeeded()}},{key:"_changeVisibilityIfNeeded",value:function(){this._shouldShow()?this._show():this._hide()}},{key:"_shouldShow",value:function(){for(var e in this.visibilityStatus)if(!this.visibilityStatus[e])return!1;return!0}},{key:"_show",value:function(){this._shouldActivate()&&(this._activate(this._getFieldElement()),this._removeHiddenElementIndicator()),this._getFieldContainerElement().attr("hidden",!1)}},{key:"_hide",value:function(){this._getFieldContainerElement().attr("hidden",!0),this._shouldDeactivate()&&(this._deactivate(this._getFieldElement()),this._addHiddenElementIndicator())}},{key:"_shouldActivate",value:function(){return!0===this.visibilityStatus[Ne.DISPLAY_CONDITIONALLY]&&!this._isActive()&&this._shouldHaveHiddenElementIndicator()}},{key:"_shouldDeactivate",value:function(){return!1===this.visibilityStatus[Ne.DISPLAY_CONDITIONALLY]&&this._isActive()&&this._shouldHaveHiddenElementIndicator()}},{key:"_isActive",value:function(){return 0===pjQuery("#"+this._fieldId+"_hidden").length}},{key:"_activate",value:function(e){if(e){var t=e.attr("data-required");t&&(e.prop("required",t),e.attr("aria-required",t));var n=e.data("hiddentype");n&&(this._setElementType(e,n),this._activateAttributesMetadata(e),e.removeAttr("data-hiddenType"));var r=this._getDataHiddenValue(e);void 0!==r&&r.length>0&&(e.val(r),JSON.stringify(r)!==JSON.stringify(e.val())&&this._unsetField(e),e.removeAttr("data-hiddenValue")),this._activateChildren(e)}}},{key:"_getDataHiddenValue",value:function(e){return e.attr("data-hiddenValue")}},{key:"_deactivate",value:function(e){if(e&&0!==e.length){e.removeAttr("required"),e.removeAttr("aria-required"),e.attr("data-hiddenType",e.prop("type"));var t=e.val();t&&e.attr("data-hiddenValue",t),this._setElementType(e,"hidden"),this._inactivateAttributesMetadata(e),this._unsetField(e),this._deactivateChildren(e)}}},{key:"_triggerEvent",value:function(e){e=e||"change",this._getFieldElement().trigger(e)}},{key:"_activateAttributesMetadata",value:function(e){this._getAttributesToFix().forEach((function(t){void 0!==e.attr("data-"+t)&&(e.attr(t,e.attr("data-"+t)),e.removeAttr("data-"+t))}))}},{key:"_inactivateAttributesMetadata",value:function(e){this._getAttributesToFix().forEach((function(t){void 0!==e.attr(t)&&(e.attr("data-"+t,e.attr(t)),e.removeAttr(t))}))}},{key:"_getAttributesToFix",value:function(){return["placeholder","min","max"]}},{key:"_changeEditRestrictionsIfNeeded",value:function(e){e?(this._getFieldContainerElement().removeClass("fieldSpec--disabled"),this._getFieldContainerElement().removeAttr("aria-disabled"),this._getFieldElement().removeAttr("readonly")):(this._getFieldContainerElement().addClass("fieldSpec--disabled"),this._getFieldContainerElement().attr("aria-disabled",!e),this._canBeMarkedAsReadOnly()&&this._getFieldElement().attr("readonly",!e))}},{key:"_canBeMarkedAsReadOnly",value:function(){return["INPUT","TEXTAREA"].includes(this._getFieldElement().prop("tagName"))}},{key:"changeEnabledField",value:function(e,t){t?(e.classList.remove("fieldSpec--disabled"),e.removeAttribute("aria-disabled"),e.removeAttribute("readonly")):(e.classList.add("fieldSpec--disabled"),e.setAttribute("aria-disabled",!t),e.setAttribute("readonly",!t))}},{key:"changeHiddenField",value:function(e,t){t?e.addClass("WizardFieldHidden"):e.removeClass("WizardFieldHidden")}},{key:"onBeforeSubmitAutoPartialSave",value:function(){return Promise.resolve()}},{key:"onFormStepVisibilityChange",value:function(){}},{key:"isAutocomplete",value:function(){return!1}}],n&&ct(t.prototype,n),r&&ct(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(tt);yt.EVENT_ON_VALIDATION_FAIL="onValidationFail";const ht=yt;function vt(e){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wt(r.key),r)}}function mt(e,t){return mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mt(e,t)}function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_t(e);if(t){var o=_t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===vt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _t(e){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_t(e)}function wt(e){var t=function(e,t){if("object"!==vt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===vt(t)?t:String(t)}var St=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mt(e,t)}(i,e);var t,n,r,o=gt(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),!PortalString.isString(e))throw new Error("invalidValue: value must be a valid string");return t._value=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._value}},{key:"getValue",value:function(){return this._value}}])&&bt(t.prototype,n),r&&bt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=wt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(St,"TYPE","FieldTextValue");const Ot=St;function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(e)}function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ft(r.key),r)}}function kt(e,t){return kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kt(e,t)}function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tt(e);if(t){var o=Tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Tt(e){return Tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tt(e)}function Ft(e){var t=function(e,t){if("object"!==Pt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Pt(t)?t:String(t)}var It=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kt(e,t)}(i,e);var t,n,r,o=jt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._value=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._value.toString()}},{key:"getValue",value:function(){return this._value}}])&&Et(t.prototype,n),r&&Et(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=Ft(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(It,"TYPE","FieldNumberValue");const Rt=It;function Ct(e){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(e)}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mt(r.key),r)}}function xt(){return xt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},xt.apply(this,arguments)}function At(e,t){return At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},At(e,t)}function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nt(e);if(t){var o=Nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Nt(e){return Nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nt(e)}function Mt(e){var t=function(e,t){if("object"!==Ct(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ct(t)?t:String(t)}var Vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&At(e,t)}(i,e);var t,n,r,o=Lt(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._formula=n||r.getSetting("formula"),r._currentValue=null,r._parentsFieldsIdsInFormula=[],r}return t=i,n=[{key:"_postRegister",value:function(){this._setNewFormula(this._formula),xt(Nt(i.prototype),"_postRegister",this).call(this)}},{key:"_getAllowedValueTypesToSet",value:function(){return[Ot.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){return null!==this._currentValue?new Rt(this._currentValue):new x}},{key:"getValueForCondition",value:function(){return this._currentValue}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._setNewFormula(e.getValue()),this._reevaluateFormula()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){var n=this._replaceRowIndexInFormula(this._formula,t);return new i(e,this.getFieldSettings(),n)}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_updateFieldAfterParentFieldValueChange",value:function(e){this._reevaluateFormula(),xt(Nt(i.prototype),"_updateFieldAfterParentFieldValueChange",this).call(this,e)}},{key:"_setNewFormula",value:function(e){this._formula=e,this._getFieldElement().attr("data-formula",e),this._reevaluateFormulaDependentFields()}},{key:"_reevaluateFormula",value:function(){this._currentValue=this._recalculateFieldValue(),this._getFieldElement().text(this._currentValue),G.onFieldValueChange(this._fieldId)}},{key:"_reevaluateFormulaDependentFields",value:function(){var e,t=/\{([\d-]+)\}/,n=this._formula;for(this._parentsFieldsIdsInFormula=[];e=t.exec(n);){var r=e[0],o=e[1];this._parentsFieldsIdsInFormula.push(o),V.registerFieldDependency(this._fieldId,o,V.TYPE_VALUES),n=n.replace(r,"")}}},{key:"_replaceRowIndexInFormula",value:function(e,t){for(var n,r=e,o=/\{([\d-]+)-\d\}/;n=o.exec(e);){var i=n[0],a=n[1],u=new RegExp(a+"-\\d","g"),l=a+"-"+t;r=r.replace(u,l),e=e.replace(i,"")}return r}},{key:"_recalculateFieldValue",value:function(){var e=this,t=this._formula;return pjQuery.each(this._parentsFieldsIdsInFormula,(function(n,r){var o=e._getNumericFieldValueById(r);t=t.replace("{"+r+"}",o)})),math.evaluate(t)||null}},{key:"_getNumericFieldValueById",value:function(e){var t=G.getFieldValue(e);if(t.isEmpty())return 0;var n=parseFloat(t.toString());return isNaN(n)?0:n}}],n&&Dt(t.prototype,n),r&&Dt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=Mt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Vt,"TYPE","ArithmeticField");const Bt=Vt;function Ut(e){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(e)}function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zt(r.key),r)}}function Yt(e,t){return Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yt(e,t)}function Qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ht(e);if(t){var o=Ht(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ut(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ht(e){return Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ht(e)}function zt(e){var t=function(e,t){if("object"!==Ut(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ut(t)?t:String(t)}var qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yt(e,t)}(i,e);var t,n,r,o=Qt(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),!PortalString.isString(e))throw new Error("invalidValue: option ID must be a valid string");return t._optionId=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._optionId}},{key:"getOptionId",value:function(){return this._optionId}}])&&Wt(t.prototype,n),r&&Wt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=zt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(qt,"TYPE","FieldIdValue");const Jt=qt;function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,en(r.key),r)}}function Kt(e,t){return Kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kt(e,t)}function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xt(e);if(t){var o=Xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Gt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Xt(e){return Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xt(e)}function en(e){var t=function(e,t){if("object"!==Gt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Gt(t)?t:String(t)}var tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kt(e,t)}(i,e);var t,n,r,o=$t(i);function i(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this),"string"!=typeof e)throw new Error("invalidValue: option ID must be a valid string");if("string"!=typeof t)throw new Error("invalidValue: option text must be a valid string");return n._optionId=e,n._optionText=t,n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._optionText}},{key:"getOptionId",value:function(){return this._optionId}},{key:"getOptionText",value:function(){return this._optionText}}])&&Zt(t.prototype,n),r&&Zt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=en(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(tn,"TYPE","FieldOptionValue");const nn=tn;function rn(e){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(e)}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sn(r.key),r)}}function an(e,t){return an=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},an(e,t)}function un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cn(e);if(t){var o=cn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===rn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ln(e)}(this,n)}}function ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cn(e){return cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cn(e)}function sn(e){var t=function(e,t){if("object"!==rn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==rn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===rn(t)?t:String(t)}var fn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&an(e,t)}(i,e);var t,n,r,o=un(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: options must be a non-empty array");var n=ln(t);return e.forEach((function(e,t){n._assertIsValidOption(e)})),t._options=e,t}return t=i,r=[{key:"buildOption",value:function(e,t){return{id:e,text:t}}}],(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){var e=[];return this._options.forEach((function(t,n){e.push(t.text)})),"["+e.join(",")+"]"}},{key:"getOptionsIds",value:function(){var e=[];return this._options.forEach((function(t,n){e.push(t.id)})),e}},{key:"getOptionsTexts",value:function(){var e=[];return this._options.forEach((function(t,n){e.push(t.text)})),e}},{key:"_assertIsValidOption",value:function(e){var t=e.id,n=e.text;if(!PortalString.isString(t))throw new Error("invalidValue: option ID must be a valid string");if(!PortalString.isString(n))throw new Error("invalidValue: option text must be a valid string")}}])&&on(t.prototype,n),r&&on(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=sn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(fn,"TYPE","FieldMultipleOptionsValue");const pn=fn;function dn(e){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(e)}function yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hn(r.key),r)}}function hn(e){var t=function(e,t){if("object"!==dn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==dn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===dn(t)?t:String(t)}var vn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"registerDatasource",value:function(t,n){e._isDatasourceRegistered(t)||(e._datasources[t]=n)}},{key:"getForField",value:function(t){var n=e._getDatasource(t);if(null!==n)return n;throw new Error("tryToAccessNonRegisteredDatasource: "+t)}},{key:"cloneDatasourceForNewTableRow",value:function(t,n,r){var o=e.getForField(t).cloneForNewTableRow(n,r);e.registerDatasource(n,o)}},{key:"cloneDatasource",value:function(t,n){var r=e.getForField(t).clone(n);e.registerDatasource(n,r)}},{key:"_getDatasource",value:function(t){return e._isDatasourceRegistered(t)?e._datasources[t]:null}},{key:"_isDatasourceRegistered",value:function(t){return t in e._datasources}}],(n=null)&&yn(t.prototype,n),r&&yn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();vn._datasources={};const bn=vn;function mn(e){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mn(e)}function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_n(r.key),r)}}function _n(e){var t=function(e,t){if("object"!==mn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==mn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===mn(t)?t:String(t)}function wn(){return wn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},wn.apply(this,arguments)}function Sn(e,t){return Sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sn(e,t)}function On(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pn(e);if(t){var o=Pn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===mn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Pn(e){return Pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pn(e)}var En=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sn(e,t)}(i,e);var t,n,r,o=On(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._datasource=bn.getForField(n||e),pjQuery.each(r._datasource.getParentDependenciesFieldsIds(),(function(t,n){V.registerFieldDependency(e,n,V.TYPE_VALUES)})),r}return t=i,(n=[{key:"_postRegister",value:function(){this._isPrePopulateEnabled()&&this._prePopulateIfOnlyOneOption(),wn(Pn(i.prototype),"_postRegister",this).call(this)}},{key:"_getOptionsPage",value:function(){throw new Error("notImplementedError")}},{key:"_getOptionsPageSize",value:function(){throw new Error("notImplementedError")}},{key:"_createWithNewOptions",value:function(e){throw new Error("notImplementedError")}},{key:"_isPrePopulateEnabled",value:function(){throw new Error("notImplementedError")}},{key:"_prePopulateIfOnlyOneOption",value:function(){throw new Error("notImplementedError")}},{key:"_updateFieldAfterParentFieldValueChange",value:function(e){if(this.evaluateEditRestrictions(),this._datasource.isParentDependentField(e))this.isVisible()?(this._updateFieldVisibilityAfterParentFieldValueChange(),this._datasource.fetchNewOptions(this._getSelectedOptionsIds(),this._getOptionsPage(),this._getOptionsPageSize(),this._getOnNewOptionsCallback())):(this._datasource.fetchNewOptions(this._getSelectedOptionsIds(),this._getOptionsPage(),this._getOptionsPageSize(),this._getOnNewOptionsCallback()),this._updateFieldVisibilityAfterParentFieldValueChange());else{var t=this._updateFieldVisibilityAfterParentFieldValueChange();this._onFieldUpdated(t)}}},{key:"_getOnNewOptionsCallback",value:function(){var e=this;return function(t,n){var r=[],o=[],i=function(e,t){e.map((function(e){-1===pjQuery.inArray(e.id,r)&&(o.push({id:e.id,name:e.name,isSelected:t}),r.push(e.id))}))};i(n,!0),i(t,!1);var a=1===o.length;(e.isRequired()||e._isPrePopulateEnabled())&&a&&(o[0].isSelected=!0);var u=e._getSelectedOptionsIds();e._createWithNewOptions(o);var l=e._getSelectedOptionsIds(),c=JSON.stringify(u)!==JSON.stringify(l);e._onFieldUpdated(c)}}},{key:"_getOnPrePopulateOptionsCallback",value:function(){var e=this;return function(t){1===t.length&&e.setValue(new Jt(t[0].id.toString()))}}},{key:"_cloneDatasourceForNewTableRow",value:function(e,t){bn.cloneDatasourceForNewTableRow(this._fieldId,e,t)}},{key:"_cloneDatasource",value:function(e){bn.cloneDatasource(this._fieldId,e)}},{key:"_getSelectedOptionsIds",value:function(){var e=this.getValue();if(e.isEmpty())return[];switch(e.getType()){case nn.TYPE:return[PortalString.toInt(e.getOptionId())];case pn.TYPE:return e.getOptionsIds().map((function(e){return PortalString.toInt(e)}))}return[]}},{key:"_buildOptionHtmlId",value:function(e){return this._fieldId+"_"+e}}])&&gn(t.prototype,n),r&&gn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);const kn=En;var jn=n(78879);function Tn(e){return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn(e)}function Fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xn(r.key),r)}}function In(){return In="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},In.apply(this,arguments)}function Rn(e,t){return Rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rn(e,t)}function Cn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dn(e);if(t){var o=Dn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Tn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Dn(e){return Dn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dn(e)}function xn(e){var t=function(e,t){if("object"!==Tn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Tn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Tn(t)?t:String(t)}var An=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rn(e,t)}(a,e);var t,n,r,i=Cn(a);function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t,n))._dropdownCssClass=r.getSetting("dropdownCssClass"),r._placeholderText=r.getSetting("placeholderText"),r._minimumInputLength=r.getSetting("minimumInputLength")||0,r._ajaxDelayMs=r.getSetting("ajaxDelayMs"),r._visibleOptionsLimit=r.getSetting("visibleOptionsLimit")||100,r._optionIdsToSearchLimit=r.getSetting("optionIdsToSearchLimit"),r._dictionary=r.getSetting("dictionary"),r._label=r.getSetting("label")||"",r._isRequired=r.getSetting("isRequired")||!1,r._isAccessible=r.getSetting("isAccessible"),r}return t=a,n=[{key:"_postRegister",value:function(){this._attachLazyPicker(),In(Dn(a.prototype),"_postRegister",this).call(this)}},{key:"_getAllowedValueTypesToSet",value:function(){return[Jt.TYPE,Ot.TYPE]}},{key:"getType",value:function(){return a.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().select2("data");if(!e||0===e.length)return new x;var t=e[0].id,n=e[0].text;return null===t||""===t?new x:new nn(t,n)}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return null!==e&&""!==e||(e=null),e}},{key:"setPlaceholderText",value:function(e){this._placeholderText=e}},{key:"setValue",value:function(e){switch(this._assertIsAllowedValueToSet(e),e.getType()){case Jt.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],this._buildOnFieldOptionsRetrieveCallback());break;case Ot.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],this._buildOnFieldOptionsRetrieveCallback());break;default:throw new Error("modeNotSupported")}}},{key:"_buildOnFieldOptionsRetrieveCallback",value:function(){var e=this;return function(t){t=e._markOptionsFoundAsSelected(t),e._createWithNewOptions(t),G.onFieldValueChange(e.getFieldId())}}},{key:"_markOptionsFoundAsSelected",value:function(e){return e&&Array.isArray(e)?(pjQuery.each(e,(function(t){e[t].isSelected=!0})),e):e}},{key:"_getOptionsPage",value:function(){return 1}},{key:"_getOptionsPageSize",value:function(){return 2}},{key:"_createWithNewOptions",value:function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>").attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join("")),this._getFieldElement().trigger("change.select2")}},{key:"_removeAllOptions",value:function(){this._getFieldElement().find("option:gt(0)").remove()}},{key:"_attachLazyPicker",value:function(){var e=this._getFieldElement();e.select2(this._getLazyPickerProperties());var t=this._getEventCallbacksForLazyPicker();if(t.length)for(var n in t)t.hasOwnProperty(n)&&e.on(t[n].eventName,t[n].eventCallback);var r=this;pjQuery((function(){setTimeout((function(){e.trigger("select2-"+r.getFieldId()+"-ready")}),10)}))}},{key:"_getLazyPickerProperties",value:function(){var e=new jn.Z,t={placeholder:this._placeholderText,allowClear:!0,width:"100%",minimumInputLength:this._minimumInputLength,multiple:this._isMultiple(),containerCssClass:"select2Container"+this._fieldId,dropdownCssClass:this._dropdownCssClass,escapeMarkup:function(e){return e},dictionary:this._dictionary,label:this._label,fieldId:this._fieldId,isRequired:this._isRequired,isAccessible:this._isAccessible,closeOnSelect:!this._isMultiple(),dropdownParent:e.get("avature.portal.mobile")?document.getElementById("ui-widget_"+this._fieldId):null};if(this._datasource.isLocalDatasource())t.data=this._adaptDatasourceOptionsToSelect2LocalDataFormat(this._datasource.getOptions());else{var n=this,r=this._getCache();t.ajax={url:this._datasource.getOptionsSearchApiUrl(),type:"POST",delay:this._ajaxDelayMs,quietMillis:this._ajaxDelayMs,dataType:"json",data:this._getDataPayload.bind(this),transport:function(e,t,o){var i=n._generateCacheKey(e.data);return r.get(i).done(t).fail((function(){return pjQuery.ajax(e).done(t).done((function(e){r.set(i,e)})).fail(o)}))},processResults:function(e,t){return n._datasource.processLazyPickerAjaxResponseData(e)}}}return t}},{key:"_getEventCallbacksForLazyPicker",value:function(){var e=this;return[this._buildEventCallback(a.ITEM_SELECTION_EVENT_NAME,(function(t){pjQuery(this).focus(),e.dispatchEvent("selectedAutocompleteValueEvent",t)})),this._buildEventCallback(a.ITEM_SELECTING_EVENT_NAME,(function(t){pjQuery(this).focus(),e.dispatchEvent("selectingAutocompleteValueEvent",t)}))]}},{key:"_buildEventCallback",value:function(e,t){return{eventName:e,eventCallback:t}}},{key:"_adaptDatasourceOptionsToSelect2LocalDataFormat",value:function(e){return pjQuery.each(e,(function(t){e[t].hasOwnProperty("name")&&(e[t].text=e[t].name)})),e}},{key:"_isMultiple",value:function(){return!1}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new a(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new a(e,this.getFieldSettings(),this.getFieldId())}},{key:"_getDataPayload",value:function(e){var t=this._visibleOptionsLimit,n=e.searchIds;return n&&(n=n.split(","),t=this._optionIdsToSearchLimit),this._datasource.buildRequestDataFromParams(e.page||1,t,e.term,!1,n,null)}},{key:"_getCache",value:function(){return l.getInstance()}},{key:"_generateCacheKey",value:function(e){return o()(this._datasource.getOptionsSearchApiUrl()+JSON.stringify(e))}},{key:"_isPrePopulateEnabled",value:function(){return"1"===pjQuery("#"+this.getFieldId()).parent().attr("data-prePopulate")}},{key:"_prePopulateIfOnlyOneOption",value:function(){this._datasource.fetchNewOptions(this._getSelectedOptionsIds(),this._getOptionsPage(),this._getOptionsPageSize(),this._getOnPrePopulateOptionsCallback())}},{key:"_getClearButton",value:function(){return document.querySelector(".select2Container".concat(this._fieldId," .select2-selection__clear"))}},{key:"isAutocomplete",value:function(){return!0}}],n&&Fn(t.prototype,n),r&&Fn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(kn);!function(e,t,n){(t=xn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(An,"TYPE","AutocompleteSelectField"),An.ITEM_SELECTION_EVENT_NAME="select2:select",An.ITEM_SELECTING_EVENT_NAME="select2:selecting";const Ln=An;function Nn(e){return Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(e)}function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wn(r.key),r)}}function Vn(e,t){return Vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vn(e,t)}function Bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Un(e);if(t){var o=Un(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Nn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Un(e){return Un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Un(e)}function Wn(e){var t=function(e,t){if("object"!==Nn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Nn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Nn(t)?t:String(t)}var Yn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vn(e,t)}(i,e);var t,n,r,o=Bn(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: options IDs must be a non-empty array");return e.forEach((function(e,t){if(!PortalString.isString(e))throw new Error("invalidValue: option ID must be a valid string")})),t._optionsIds=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return"["+this._optionsIds.join(",")+"]"}},{key:"getOptionsIds",value:function(){return this._optionsIds}}])&&Mn(t.prototype,n),r&&Mn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=Wn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Yn,"TYPE","FieldMultipleIdsValue");const Qn=Yn;function Hn(e){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hn(e)}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zn(r.key),r)}}function qn(e,t){return qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qn(e,t)}function Jn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gn(e);if(t){var o=Gn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Hn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Gn(e){return Gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gn(e)}function Zn(e){var t=function(e,t){if("object"!==Hn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Hn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Hn(t)?t:String(t)}var Kn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qn(e,t)}(i,e);var t,n,r,o=Jn(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),!pjQuery.isArray(e)||e.length<=0)throw new Error("invalidValue: values must be a non-empty array");return e.forEach((function(e,t){if(!PortalString.isString(e))throw new Error("invalidValue: inner values should be strings")})),t._values=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return"["+this._values.join(",")+"]"}},{key:"getOptionsTexts",value:function(){return this._values}}])&&zn(t.prototype,n),r&&zn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=Zn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Kn,"TYPE","FieldMultipleTextsValue");const $n=Kn;var Xn=n(33791);function er(e){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},er(e)}function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nr(r.key),r)}}function nr(e){var t=function(e,t){if("object"!==er(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==er(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===er(t)?t:String(t)}var rr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"addEmptyHiddenInputBeforeSubmit",value:function(e,t){var n=this;Xn.default.getInstance().addActionBeforeSubmit((function(){var r=e.getFieldId();if(e.getValue().isEmpty()&&!n._existsInputWithName(r)){var o=document.createElement("input");o.hidden=!0,o.value=null,o.name=r,t.insertAdjacentElement("beforebegin",o)}}))}},{key:"_existsInputWithName",value:function(e){return null!==document.querySelector('input[name="'+e+'"]')}}])&&tr(t.prototype,n),r&&tr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const or=rr;function ir(e){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ir(e)}function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fr(r.key),r)}}function ur(e,t){return ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ur(e,t)}function lr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sr(e);if(t){var o=sr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ir(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cr(e)}(this,n)}}function cr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sr(e){return sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sr(e)}function fr(e){var t=function(e,t){if("object"!==ir(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ir(t)?t:String(t)}var pr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ur(e,t)}(i,e);var t,n,r,o=lr(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t,n),(new or).addEmptyHiddenInputBeforeSubmit(cr(r),r._getFieldElement()[0]),r}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Qn.TYPE,$n.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"setValue",value:function(e){switch(this._assertIsAllowedValueToSet(e),e.getType()){case Qn.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),this._buildOnFieldOptionsRetrieveCallback());break;case $n.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),this._buildOnFieldOptionsRetrieveCallback());break;default:throw new Error("modeNotSupported")}}},{key:"getValue",value:function(){var e=this._getFieldElement().select2("data");if(null===e||0===e.length)return new x;var t=[];return e.forEach((function(e,n){var r=e.id,o=e.text;null!==r&&""!==r&&t.push(pn.buildOption(r,o))})),new pn(t)}},{key:"_removeAllOptions",value:function(){this._getFieldElement().empty()}},{key:"_isMultiple",value:function(){return!0}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings(),this.getFieldId())}},{key:"_getDataHiddenValue",value:function(e){var t=e.attr("data-hiddenValue");return t?t.split(","):[]}}],n&&ar(t.prototype,n),r&&ar(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ln);!function(e,t,n){(t=fr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(pr,"TYPE","AutocompleteMultipleSelectField");const dr=pr;n(57327),n(91058);function yr(e){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(e)}function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vr(r.key),r)}}function vr(e){var t=function(e,t){if("object"!==yr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==yr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===yr(t)?t:String(t)}var br=null,mr=!1,gr={},_r=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!mr)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return br||(mr=!0,br=new e,mr=!1),br}}],(n=[{key:"addFieldsetStepper",value:function(e,t){gr[e]=t}},{key:"getAllFieldsetSteppers",value:function(){return Object.values(gr)}}])&&hr(t.prototype,n),r&&hr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const wr=_r;n(60285),n(41637),n(47941),n(4723);function Sr(e){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr(e)}function Or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pr(r.key),r)}}function Pr(e){var t=function(e,t){if("object"!==Sr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Sr(t)?t:String(t)}var Er=function(){function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldsContainerId=t,this._textsDictionary=n,this._shouldUseBuiltinButtons=r,this._hasToHideWizardButtons=o,this._shouldIncludePreviousButton=i,this._initialFieldIndex=a||0}var t,n,r;return t=e,n=[{key:"generate",value:function(){this._addIndicatorClass(),this._hideUnimplementedFields(),this._setupFieldByFieldDisplayFormat(this._initialFieldIndex),this._updateCurrentStepIndicatorClass(),this._updateElementsVisibility(),this._removeSeparators(),this._showFieldSet(),this._addToFieldsetStepperManager()}},{key:"getFieldsStatus",value:function(){var e=this,t=[];return this._getFieldsContainers().forEach((function(n){var r=parseInt(n.getAttribute("data-field-index"),10),o=n.getAttribute("data-field-id"),i=G.getField(o);t.push({index:r,id:o,name:i.getLabel(),isCurrent:r===e._getCurrentFieldIndex()})})),t}},{key:"goToNextField",value:function(){this._hasCurrentFieldValidationErrors()||this._goToField(this._getNextFieldIndexToShow(this._getCurrentFieldIndex()))}},{key:"goToPreviousField",value:function(){this._goToField(this._getPrevFieldIndexToShow(this._getCurrentFieldIndex()))}},{key:"hasBuiltinButtonBar",value:function(){return this._shouldUseBuiltinButtons}},{key:"_showFieldSet",value:function(){var e;this._getFieldSetContainer().classList.remove("fieldSpec--loading","wizard--loading"),this._getFieldSetContainer().removeAttribute("hidden"),null===(e=this._getFieldSetContainer().parentElement.querySelector(".form__loader"))||void 0===e||e.remove()}},{key:"_addIndicatorClass",value:function(){this._getFieldSetContainer().classList.add("shownFieldByField")}},{key:"_setupFieldByFieldDisplayFormat",value:function(e){this._generateFieldsHelperData(),this._buildCurrentFieldIndex(),this._shouldUseBuiltinButtons&&(this._buildBuiltinButtonsContainer(),this._shouldIncludePreviousButton&&this._buildBuiltinPreviousButton(),this._buildBuiltinNextButton()),e=this._hasValidationErrors()?this._getFirstFieldIndexWithValidationError():this._getNextFieldIndexToShow(e-1),this._setCurrentFieldIndex(e)}},{key:"_generateFieldsHelperData",value:function(){var e=this;this._getFieldsContainers().forEach((function(t,n){t.setAttribute("data-field-index",n.toString()),t.setAttribute("data-field-id",e._getFieldIdFromFieldContainer(t))}))}},{key:"_buildCurrentFieldIndex",value:function(){var e=document.createElement("input");e.setAttribute("id",this._fieldsContainerId+"_currentFieldIndex"),e.setAttribute("name",this._fieldsContainerId+"_currentFieldIndex"),e.setAttribute("type","hidden"),this._getFieldSetContainer().append(e)}},{key:"_buildBuiltinButtonsContainer",value:function(){var e=document.createElement("div");e.setAttribute("id",this._fieldsContainerId+"_formContainerButtons"),e.setAttribute("class","button-bar__wrap"),e.setAttribute("role","navigation");var t=document.createElement("div");t.setAttribute("id","fieldSpecButtonContainer"+this._fieldsContainerId),t.setAttribute("class","formfieldSpec button-bar formfieldSpecPadder"),t.append(e);var n=document.createElement("div");n.setAttribute("id","schemaFieldButtonContainer"+this._fieldsContainerId),n.setAttribute("class","schemaFieldButtonContainer"),n.append(t),this._getFieldSetContainer().append(n)}},{key:"_buildBuiltinPreviousButton",value:function(){var e=this,t=document.createElement("a");t.innerText=this._textsDictionary.prevButtonText,t.setAttribute("id",this._fieldsContainerId+"_formContainerPrevButton"),t.setAttribute("href","#"),t.addEventListener("click",(function(e){e.preventDefault()})),t.setAttribute("class","button button--primary formContainerPrevButton"),t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.setAttribute("aria-label",this._textsDictionary.prevButtonAriaLabel),t.addEventListener("click",(function(){return e.goToPreviousField()})),document.getElementById(this._fieldsContainerId+"_formContainerButtons").append(t)}},{key:"_buildBuiltinNextButton",value:function(){var e=this,t=document.createElement("a");t.innerText=this._textsDictionary.nextButtonText,t.setAttribute("id",this._fieldsContainerId+"_formContainerNextButton"),t.setAttribute("href","#"),t.addEventListener("click",(function(e){return e.preventDefault()})),t.setAttribute("class","button button--primary formContainerNextButton"),t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.setAttribute("aria-label",this._textsDictionary.nextButtonAriaLabel),t.addEventListener("click",(function(){return e.goToNextField()})),document.getElementById(this._fieldsContainerId+"_formContainerButtons").append(t)}},{key:"_goToField",value:function(e){this._setCurrentFieldIndex(e),this._updateElementsVisibility(),this._focusInputInCurrentField()}},{key:"_updateElementsVisibility",value:function(){this._updatesFieldsVisibility(),this._updateNextButtonVisibility(),this._updatePreviousButtonVisibility(),this._hasToHideWizardButtons&&(this._updateSaveAndNextWizardButtonsVisibility(),this._updatePreviousWizardButtonVisibility()),this._getFieldSetContainer().dispatchEvent(new Event("form:refreshFormStepVisibility"))}},{key:"_removeSeparators",value:function(){this._getFieldSetContainer().querySelectorAll(".Separator").forEach((function(e){return e.remove()}))}},{key:"_hideUnimplementedFields",value:function(){this._getFieldsContainers().forEach((function(e){e.querySelectorAll(".WizardFieldUnimplemented").length>0&&e.setAttribute("hidden",!0)}))}},{key:"_updatesFieldsVisibility",value:function(){var e=this;this._getFieldsContainers().forEach((function(t,n){var r=t.getAttribute("data-field-id"),o=G.getField(r),i=n===e._getCurrentFieldIndex();o.setVisibilityStatusByType(Ne.SHOW_FIELD_BY_FIELD,i),o.onFormStepVisibilityChange(!i)}))}},{key:"_updateNextButtonVisibility",value:function(){this._getNextButton().hidden=this._isCurrentFieldTheLastField()}},{key:"_isCurrentFieldTheLastField",value:function(){return this._getNextFieldIndexToShow(this._getCurrentFieldIndex())===this._getCurrentFieldIndex()}},{key:"_updatePreviousButtonVisibility",value:function(){this._getPrevButton().hidden=this._isCurrentFieldTheFirstField()}},{key:"_isCurrentFieldTheFirstField",value:function(){return 0===this._getCurrentFieldIndex()||this._getPrevFieldIndexToShow(this._getCurrentFieldIndex())===this._getCurrentFieldIndex()}},{key:"_updateSaveAndNextWizardButtonsVisibility",value:function(){var e=this._areFieldsetsInLastField();this._getClosestWizard().querySelectorAll("button.saveButton, button.nextButton, button.submitButton").forEach((function(t){return t.hidden=!e}))}},{key:"_areFieldsetsInLastField",value:function(){var e=!0,t=this._shouldUseBuiltinButtons?".formContainerNextButton":"button.formNextButton";return this._getClosestWizard().querySelectorAll(t).forEach((function(t){return e=e&&t.hasAttribute("hidden")})),e}},{key:"_updatePreviousWizardButtonVisibility",value:function(){var e=this._areFieldsetsInFirstField();this._getClosestWizard().querySelectorAll("button.previousButton").forEach((function(t){return t.hidden=!e}))}},{key:"_areFieldsetsInFirstField",value:function(){var e=!0,t=this._shouldUseBuiltinButtons?".formContainerPrevButton":"button.formPreviousButton";return this._getClosestWizard().querySelectorAll(t).forEach((function(t){return e=e&&t.hasAttribute("hidden")})),e}},{key:"_addToFieldsetStepperManager",value:function(){wr.getInstance().addFieldsetStepper(this._fieldsContainerId,this)}},{key:"_getNextFieldIndexToShow",value:function(e){var t,n=e;do{if(n++,!(t=this._getFieldIdByFieldIndex(n))){n--;break}}while(!this._shouldShowField(t));return n}},{key:"_getPrevFieldIndexToShow",value:function(e){var t,n=e;do{if(--n<0)return e;if(!(t=this._getFieldIdByFieldIndex(n))){n++;break}}while(!this._shouldShowField(t));return n}},{key:"_shouldShowField",value:function(e){var t;return(null===(t=G.getField(e))||void 0===t?void 0:t.shouldShowIf(Ne.SHOW_FIELD_BY_FIELD,!0))||!1}},{key:"_updateCurrentStepIndicatorClass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._getFieldSetContainer(),n=this._getCurrentStepIndicatorClass();n&&t.classList.remove(n),t.classList.add("shownFieldByField--step"+(e+1))}},{key:"_getCurrentStepIndicatorClass",value:function(){return Array.from(this._getFieldSetContainer().classList).filter((function(e){return e.match(/^shownFieldByField--step\d+/gm)})).join("")}},{key:"_getFieldIdFromFieldContainer",value:function(e){return e.id.replace(/^[a-z]+(\d+(?:-\d+)*)$/i,"$1")}},{key:"_hasValidationErrors",value:function(){return this._getFieldSetContainer().querySelectorAll(".hasErrors").length>0}},{key:"_hasCurrentFieldValidationErrors",value:function(){var e=this._getFieldIdByFieldIndex(this._getCurrentFieldIndex());return!G.getField(e).isValid()}},{key:"_getFirstFieldIndexWithValidationError",value:function(){var e=Array.from(this._getFieldsContainers()).findIndex((function(e){return e.querySelectorAll(".hasErrors").length>0}));return-1===e?null:e}},{key:"_getFieldSetContainer",value:function(){return document.getElementById(this._fieldsContainerId)}},{key:"_getFieldsContainers",value:function(){return this._getFieldSetContainer().querySelectorAll(".fieldSpec:not(.ButtonBarField):not(.fieldSpec--in-dataset), .schemaFieldContainer:not([hidden])")}},{key:"_getClosestWizard",value:function(){return this._getFieldSetContainer().closest(".wizard")}},{key:"_getCurrentFieldIndex",value:function(){return parseInt(document.getElementById(this._fieldsContainerId+"_currentFieldIndex").value,10)}},{key:"_getNextButton",value:function(){return(this._shouldUseBuiltinButtons?this._getFieldSetContainer().querySelector(".formContainerNextButton"):this._getClosestWizard().querySelector("button.formNextButton"))||document.createElement("div")}},{key:"_getPrevButton",value:function(){return(this._shouldUseBuiltinButtons?this._getFieldSetContainer().querySelector(".formContainerPrevButton"):this._getClosestWizard().querySelector("button.formPreviousButton"))||document.createElement("div")}},{key:"_getFieldIdByFieldIndex",value:function(e){var t=this._getFieldSetContainer().querySelector('[data-field-index="'+e+'"]');return t?t.getAttribute("data-field-id"):null}},{key:"_focusInputInCurrentField",value:function(){G.getField(this._getFieldIdByFieldIndex(this._getCurrentFieldIndex())).focus(),this._updateCurrentStepIndicatorClass(this._getCurrentFieldIndex())}},{key:"_setCurrentFieldIndex",value:function(e){document.getElementById(this._fieldsContainerId+"_currentFieldIndex").value=e}}],n&&Or(t.prototype,n),r&&Or(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const kr=Er;function jr(e){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jr(e)}function Tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rr(r.key),r)}}function Fr(e,t,n){return t&&Tr(e.prototype,t),n&&Tr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ir(e,t,n){return(t=Rr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rr(e){var t=function(e,t){if("object"!==jr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===jr(t)?t:String(t)}var Cr=Fr((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));Ir(Cr,"FIELD","Field"),Ir(Cr,"VALUES_DATASOURCE","ValuesDatasource"),Ir(Cr,"DEFAULT_VALUES_DATASOURCE","DefaultValuesDatasource"),Ir(Cr,"VALIDATOR","Validator");const Dr=Cr;function xr(e){return xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xr(e)}function Ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vr(r.key),r)}}function Lr(e,t){return Lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lr(e,t)}function Nr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mr(e);if(t){var o=Mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===xr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Mr(e){return Mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mr(e)}function Vr(e){var t=function(e,t){if("object"!==xr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xr(t)?t:String(t)}var Br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lr(e,t)}(i,e);var t,n,r,o=Nr(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),"boolean"!=typeof e)throw new Error("invalidValue: value must be a valid boolean");return t._isSelected=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._isSelected.toString()}},{key:"isSelected",value:function(){return this._isSelected}}])&&Ar(t.prototype,n),r&&Ar(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=Vr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Br,"TYPE","FieldBooleanValue");const Ur=Br;function Wr(e){return Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr(e)}function Yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qr(r.key),r)}}function Qr(e,t){return Qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qr(e,t)}function Hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zr(e);if(t){var o=zr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Wr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zr(e){return zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zr(e)}function qr(e){var t=function(e,t){if("object"!==Wr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Wr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Wr(t)?t:String(t)}var Jr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qr(e,t)}(i,e);var t,n,r,o=Hr(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"_getAllowedValueTypesToSet",value:function(){return[Ur.TYPE]}},{key:"getValue",value:function(){var e=this._getFieldElement().prop("checked");return new Ur(!!e)}},{key:"getValueForCondition",value:function(){return this._getFieldElement().prop("checked")?this._getFieldElement().val():null}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().prop("checked",e.isSelected()),this._triggerEvent("change")}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}}],n&&Yr(t.prototype,n),r&&Yr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=qr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Jr,"TYPE","CheckboxField");const Gr=Jr;function Zr(e){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(e)}function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ro(r.key),r)}}function $r(){return $r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=no(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},$r.apply(this,arguments)}function Xr(e,t){return Xr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xr(e,t)}function eo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=no(e);if(t){var o=no(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Zr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return to(e)}(this,n)}}function to(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function no(e){return no=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},no(e)}function ro(e){var t=function(e,t){if("object"!==Zr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Zr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Zr(t)?t:String(t)}var oo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xr(e,t)}(i,e);var t,n,r,o=eo(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),(new or).addEmptyHiddenInputBeforeSubmit(to(n),n._getFieldElement()[0]),n}return t=i,n=[{key:"_postRegister",value:function(){$r(no(i.prototype),"_postRegister",this).call(this),this._addClickToShowMoreLinkIfNeeded()}},{key:"_addClickToShowMoreLinkIfNeeded",value:function(){var e=document.getElementById("showHiddenElements_"+this._fieldId);e&&(e.onclick=function(e){return this.nextSibling.style.display="inline",this.style.display="none",!1})}},{key:"_getAllowedValueTypesToSet",value:function(){return[Qn.TYPE,$n.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getSelectedElements();if(0===e.length)return new x;var t=[];return e.each((function(){t.push(pn.buildOption(pjQuery(this).val(),pjQuery(this).data("option-name").toString()))})),new pn(t)}},{key:"getValueForCondition",value:function(){var e=[];return this._getSelectedElements().each((function(){e.push(pjQuery(this).val())})),e}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery('input[type="checkbox"]',this._getFieldElement()),n=this;switch(e.getType()){case Qn.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("checked",!0),n._triggerEvent("change")}));break;case $n.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("checked",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}}},{key:"_getSelectedElements",value:function(){return this._getFieldElement().find("input:checked")}},{key:"_getOptionsPage",value:function(){return null}},{key:"_getOptionsPageSize",value:function(){return null}},{key:"_createWithNewOptions",value:function(e){var t=this;this._removeAllOptions();var n=this._getFieldElement(),r=n.find(".CheckBoxListFormField_more"),o=n.find(".CheckBoxListFormField_hiddenOptions"),i=r.data("numOptionsToShow");e.forEach((function(e,r){var a=t._buildOptionHtmlId(e.id),u=pjQuery("<input />").attr("id",a).attr("type","checkbox").attr("name",t._fieldId+"[]").attr("value",e.id).attr("data-option-name",e.name);e.isSelected&&u.attr("checked","checked");var l=pjQuery("<label>",{class:h.WIZARD_FIELD_INPUT}).attr("for",a).append(u,e.name,pjQuery('<div class="cb" />'));!i||r<i?n.append(l):o.append(l)})),i&&e.length>i&&(r.css("display",""),o.css("display","none"))}},{key:"_removeAllOptions",value:function(){this._getFieldElement().find("label, div.cb, div.cb-a11y").remove()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),this._setIdMoreButtonElement(e),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),this._setIdMoreButtonElement(e),new i(e,this.getFieldSettings())}},{key:"_setIdMoreButtonElement",value:function(e){pjQuery("#"+e).find(".CheckBoxListFormField_more").attr("id","showHiddenElements_"+e)}},{key:"_isPrePopulateEnabled",value:function(){return!1}},{key:"_prePopulateIfOnlyOneOption",value:function(){}}],n&&Kr(t.prototype,n),r&&Kr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(kn);!function(e,t,n){(t=ro(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(oo,"TYPE","CheckboxListField");const io=oo;function ao(e){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ao(e)}function uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fo(r.key),r)}}function lo(e,t){return lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lo(e,t)}function co(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=so(e);if(t){var o=so(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ao(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function so(e){return so=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},so(e)}function fo(e){var t=function(e,t){if("object"!==ao(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ao(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ao(t)?t:String(t)}var po=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lo(e,t)}(i,e);var t,n,r,o=co(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Ot.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();return e?new Ot(e):new x}},{key:"getValueForCondition",value:function(){return this._getFieldElement().val()}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getValue()),this._triggerEvent("input")}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_attachOnChangeListener",value:function(){var e=this;pjQuery("#"+this._fieldId).on("input",(function(){this.onkeyup=null,G.onFieldValueChange(e.getFieldId())}))}}],n&&uo(t.prototype,n),r&&uo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=fo(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(po,"TYPE","InputField");const yo=po;function ho(e){return ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ho(e)}function vo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_o(r.key),r)}}function bo(e,t){return bo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bo(e,t)}function mo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=go(e);if(t){var o=go(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ho(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function go(e){return go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},go(e)}function _o(e){var t=function(e,t){if("object"!==ho(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ho(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ho(t)?t:String(t)}var wo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bo(e,t)}(i,e);var t,n,r,o=mo(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Rt.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();return e?new Rt(PortalString.toFloat(e)):new x}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getValue()),this._triggerEvent("input")}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}}],n&&vo(t.prototype,n),r&&vo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yo);!function(e,t,n){(t=_o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(wo,"TYPE","CurrencyField");const So=wo;function Oo(e){return Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oo(e)}function Po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Eo(r.key),r)}}function Eo(e){var t=function(e,t){if("object"!==Oo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Oo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Oo(t)?t:String(t)}function ko(){return ko="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fo(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ko.apply(this,arguments)}function jo(e,t){return jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jo(e,t)}function To(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fo(e);if(t){var o=Fo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Oo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fo(e){return Fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fo(e)}var Io=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jo(e,t)}(i,e);var t,n,r,o=To(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._registerFieldDependenciesForDependentFields(e,n._getDepedentFieldsMetadata()),n}return t=i,(n=[{key:"_getDepedentFieldsMetadata",value:function(){throw new Error("notImplementedError")}},{key:"_registerFieldDependenciesForDependentFields",value:function(e,t){if(!t||!Array.isArray(t))throw new Error("invalidArgumentException: not an array");for(var n in t)t.hasOwnProperty(n)&&V.registerFieldDependency(e,t[n].id,V.TYPE_VALUES)}},{key:"onRelatedFieldValueChange",value:function(e){ko(Fo(i.prototype),"onRelatedFieldValueChange",this).call(this,e),e!==this._fieldId&&G.onFieldValueChange(this._fieldId)}},{key:"cloneForNewTableRow",value:function(e,t){this._cloneDependentFieldsForNewTableRow(e,t),this._cloneCurrentFieldForNewTableRow(e,t)}},{key:"_cloneCurrentFieldForNewTableRow",value:function(e,t){ko(Fo(i.prototype),"cloneForNewTableRow",this).call(this,e,t)}},{key:"_cloneDependentFieldsForNewTableRow",value:function(e,t){var n=this._getDepedentFieldsMetadata();for(var r in n)if(n.hasOwnProperty(r)){var o=G.getField(n[r].id),i=e+n[r].suffix;o.cloneForNewTableRow(i,t)}}},{key:"_createFieldMetadata",value:function(e,t){return{id:e,suffix:t}}}])&&Po(t.prototype,n),r&&Po(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);const Ro=Io;function Co(e){return Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Co(e)}function Do(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,No(r.key),r)}}function xo(e,t){return xo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xo(e,t)}function Ao(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lo(e);if(t){var o=Lo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Co(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Lo(e){return Lo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lo(e)}function No(e){var t=function(e,t){if("object"!==Co(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Co(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Co(t)?t:String(t)}var Mo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xo(e,t)}(i,e);var t,n,r,o=Ao(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._assertIsValidPortalDateObject(e),t._date=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._date.format()}},{key:"getFormattedDateString",value:function(e){return this._date.format(e)}},{key:"getPortalDate",value:function(){return this._date}},{key:"_assertIsValidPortalDateObject",value:function(e){if(!(e&&e instanceof PortalDate))throw new Error("invalidArgumentException: expected an instance of PortalDate")}}])&&Do(t.prototype,n),r&&Do(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=No(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Mo,"TYPE","FieldDateValue");const Vo=Mo;function Bo(e){return Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bo(e)}function Uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wo(r.key),r)}}function Wo(e){var t=function(e,t){if("object"!==Bo(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Bo(t)?t:String(t)}function Yo(){return Yo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zo(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Yo.apply(this,arguments)}function Qo(e,t){return Qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qo(e,t)}function Ho(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zo(e);if(t){var o=zo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zo(e){return zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zo(e)}var qo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qo(e,t)}(i,e);var t,n,r,o=Ho(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"_postRegister",value:function(){G.onFieldValueChange(this._fieldId),Yo(zo(i.prototype),"_postRegister",this).call(this)}},{key:"_getAllowedValueTypesToSet",value:function(){return[Vo.TYPE]}},{key:"_createYearInput",value:function(e,t,n,r,o){var i=this,a=this._createSelectElement(e,"year",n,n),u=bn.getForField(this._fieldId+"_year");return this._populateSelectElementFromDatasource(a,u,t),a.fnt=function(){var t=document.getElementById(e+"_month");t=t?t.value:void 0,i._updateDayInputIfNeeded(e,t,r,o)},a.addEventListener?a.addEventListener("change",a.fnt,!1):a.attachEvent("onchange",a.fnt),a}},{key:"_createMonthInput",value:function(e,t,n,r,o,i,a){var u=this,l=this._createSelectElement(e,"month",r),c=bn.getForField(this._fieldId+"_month");return this._populateSelectElementFromDatasource(l,c,t),l.fnt=function(){u._updateDayInputIfNeeded(e,l.value,o,i)},l.addEventListener?l.addEventListener("change",l.fnt,!1):l.attachEvent("onchange",l.fnt),l}},{key:"_createDayInput",value:function(e,t,n,r,o,i,a,u){var l=this._createSelectElement(e,"day",o),c=bn.getForField(this._fieldId+"_day");return this._populateSelectElementFromDatasource(l,c,t),l}},{key:"_updateDayInputIfNeeded",value:function(e,t,n,r){if(document.getElementById(e+"_day")){var o=document.getElementById(e+"_year");o=o?o.value:void 0;var i=this._clearSelectElementById(e+"_day"),a=bn.getForField(this._fieldId+"_day").getOptions(),u=parseInt(a[1].id,10),l="0"!==t?this._getMaxDaysForInput(a,t,o):0;n&&o===n.getFullYear()&&t===(n.getMonth()+1).toString()&&(u=n.getDate()),r&&o===r.getFullYear()&&t.toString()===(r.getMonth()+1).toString()&&(l=r.getDate()),this._populateSelectElement(i,u,l,void 0,0,a[0].name)}}},{key:"_hideInput",value:function(e){var t;if(e){t=document.createElement("input"),e.getAttributeNames().filter((function(e){return-1===["data-hiddentype","data-required"].indexOf(e)})).forEach((function(n){t.setAttribute(n,e.getAttribute(n))})),t.type="hidden";var n=e.parentNode;n.removeChild(e),n.appendChild(t)}return t}},{key:"_populateSelectElement",value:function(e,t,n,r,o,i){if(e){e.appendChild(this._createOptionElement(0,o,(function(e){return i})));for(var a=t;a<=n;++a)e.appendChild(this._createOptionElement(a,o,r))}}},{key:"_populateSelectElementFromDatasource",value:function(e,t,n){if(e)for(var r=t.getOptions(),o=0;o<r.length;++o){var i=r[o];e.appendChild(this._createOptionElement(parseInt(i.id,10),n,(function(e){return i.name})))}}},{key:"_createSelectElement",value:function(e,t,n){var r=document.createElement("select");return r.setAttribute("id",e+"_"+t),r.setAttribute("name",e+"_"+t),r.setAttribute("class",t+"Input "+h.WIZARD_FIELD_INPUT_CONTAINER+" "+h.WIZARD_FIELD_INPUT),r.setAttribute("tabindex",n),this.isRequired()&&r.setAttribute("aria-required","true"),r}},{key:"_createOptionElement",value:function(e,t,n){var r=document.createElement("option");return r.setAttribute("value",0===e?"":e),r.setAttribute("class",h.WIZARD_FIELD_INPUT),r.innerHTML=n?n(e):e,e===t&&r.setAttribute("selected","selected"),r}},{key:"_getMaxDaysForInput",value:function(e,t,n){return e.length<31?parseInt(e[e.length-1].id,10):this._getDaysForMonthAndYear(t,n)}},{key:"_getDaysForMonthAndYear",value:function(e,t){var n=!1;return e=e?PortalString.toInt(e):1,t=t?PortalString.toInt(t):1,e>7&&(e-=7,n=!0),2!==e||n?1===e||(e-2)%2==1?31:30:1===t||t%4==0?29:28}},{key:"_clearSelectElementById",value:function(e){var t=document.getElementById(e);if(t)for(;t.hasChildNodes();)t.removeChild(t.firstChild);return t}},{key:"_normalize",value:function(e){return PortalString.zeroPad(e,2)}},{key:"_cloneDatasourceForNewTableRow",value:function(e,t,n){bn.cloneDatasourceForNewTableRow(this._fieldId+"_"+e,t+"_"+e,n)}},{key:"_cloneDatasource",value:function(e,t){bn.cloneDatasource(this._fieldId+"_"+e,t+"_"+e)}},{key:"_inputSupported",value:function(e){var t=document.createElement("input");return t.setAttribute("type",e),t.type===e}},{key:"_isSafariBrowser",value:function(e){var t="undefined"!=typeof window&&window.navigator.userAgent;if(t){var n=/Version\/([0-9]+\.[0-9]+).*Mobile.*Safari/i.test(t)||/Version\/([0-9]+\.[0-9]+).*Safari/i.test(t)||/Safari\/([0-9]+\.[0-9]+)/i.test(t),r=/Chrome\/([0-9]+\.[0-9]+)/i.test(t)||/Chromium\/([0-9]+\.[0-9]+)/i.test(t);return n&&!r}return!1}}],n&&Uo(t.prototype,n),r&&Uo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ro);const Jo=qo;function Go(e){return Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Go(e)}function Zo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ei(r.key),r)}}function Ko(e,t){return Ko=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ko(e,t)}function $o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xo(e);if(t){var o=Xo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Go(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Xo(e){return Xo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xo(e)}function ei(e){var t=function(e,t){if("object"!==Go(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Go(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Go(t)?t:String(t)}var ti=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ko(e,t)}(i,e);var t,n,r,o=$o(i);function i(e,t,n){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),!PortalNumber.isNumber(n))throw new Error("invalidValue: day must be a valid integer");if(!PortalNumber.isNumber(t))throw new Error("invalidValue: month must be a valid integer");if(!PortalNumber.isNumber(e))throw new Error("invalidValue: year must be a valid integer");var a=PortalDate.fromParams(e,t,n);return(r=o.call(this,a))._day=n,r._month=t,r._year=e,r}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this.getFormattedDateString("yyyy-MM-dd")}},{key:"getDay",value:function(){return this._day}},{key:"getMonth",value:function(){return this._month}},{key:"getYear",value:function(){return this._year}}])&&Zo(t.prototype,n),r&&Zo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Vo);!function(e,t,n){(t=ei(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ti,"TYPE","FieldFullDateValue");const ni=ti;function ri(e){return ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ri(e)}function oi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,li(r.key),r)}}function ii(e,t){return ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ii(e,t)}function ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ui(e);if(t){var o=ui(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ri(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ui(e){return ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ui(e)}function li(e){var t=function(e,t){if("object"!==ri(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ri(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ri(t)?t:String(t)}var ci=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ii(e,t)}(i,e);var t,n,r,o=ai(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._datePickerElementId=n||r.getSetting("datePickerElementId"),r._locale=r.getSetting("locale"),r._dateFormat=r.getSetting("dateFormat"),r._nextMonthText=r.getSetting("nextMonthText"),r._previousMonthText=r.getSetting("previousMonthText"),r._yearRange=r.getSetting("yearRange"),r._minDate=r.getSetting("minDate"),r._maxDate=r.getSetting("maxDate"),r._altField=r.getSetting("altField"),r._defaultDate=r.getSetting("defaultDate"),r._firstDay=r.getSetting("firstDay"),r._includeBaseCss=pjQuery("#"+e).data("include-base-css")||!1,r._displayInline=pjQuery("#"+e).data("display-inline")||!1,r}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"_postRegister",value:function(){var e={dateFormat:this._dateFormat,nextText:this._nextMonthText,prevText:this._previousMonthText,changeMonth:!0,changeYear:!0,yearRange:this._yearRange,firstDay:this._firstDay};void 0!==this._minDate&&null!==this._minDate&&(e.minDate=this._minDate),void 0!==this._maxDate&&null!==this._maxDate&&(e.maxDate=this._maxDate),void 0!==this._altField&&null!==this._altField&&(e.altField=this._altField),void 0!==this._defaultDate&&null!==this._defaultDate&&(e.defaultDate=this._defaultDate),this._setDatePickerLocale(this._locale),this._includeBaseCssIfNecessary(e),pjQuery("#"+this._datePickerElementId).datepicker(e),ht.prototype._postRegister.call(this)}},{key:"_includeBaseCssIfNecessary",value:function(e){this._includeBaseCss&&(this._displayInline?pjQuery("#"+this._datePickerElementId).addClass("ui-base-css"):e.beforeShow=function(e,t){pjQuery(t.dpDiv).parent().hasClass("ui-base-css")||pjQuery(t.dpDiv).wrap("<div class='ui-base-css'></div>")})}},{key:"getValue",value:function(){var e=pjQuery.datepicker.parseDate(this._dateFormat,this._getFieldElement().val());return e?new ni(e.getFullYear(),e.getMonth()+1,e.getDate()):new x}},{key:"getValueForCondition",value:function(){var e=pjQuery.datepicker.parseDate(this._dateFormat,this._getFieldElement().val());return e?e.getFullYear()+"-"+PortalString.zeroPad(e.getMonth()+1,2)+"-"+PortalString.zeroPad(e.getDate(),2):""}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().datepicker("setDate",e.getPortalDate().toDate()),this._triggerEvent("change")}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){var n=this._datePickerElementId.replace(/^((\d+-)+)\d+(_datepicker)*$/,"$1"+t+"$3");return new i(e,this.getFieldSettings(),n)}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_attachOnChangeListener",value:function(){var e=this.getFieldId();this._getFieldElement().datepicker("option","onSelect",(function(t){G.onFieldValueChange(e)}))}},{key:"_getDepedentFieldsMetadata",value:function(){return[]}},{key:"_setDatePickerLocale",value:function(e){if(!pjQuery.datepicker.regional[e]){var t=PortalDate.getPortalDateInfo();pjQuery.datepicker.regional[e]={monthNames:t.getMonthsFullName(e),monthNamesShort:t.getMonthsShortName(e),dayNames:t.getDaysFullName(e,!0),dayNamesShort:t.getDaysShortName(e,!0),dayNamesMin:t.getDaysMinName(e,!0)}}pjQuery.datepicker.setDefaults(pjQuery.datepicker.regional[e])}}],n&&oi(t.prototype,n),r&&oi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Jo);!function(e,t,n){(t=li(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ci,"TYPE","CustomFormatDateField");const si=ci;function fi(e){return fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fi(e)}function pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,di(r.key),r)}}function di(e){var t=function(e,t){if("object"!==fi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===fi(t)?t:String(t)}function yi(e,t){return yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yi(e,t)}function hi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vi(e);if(t){var o=vi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===fi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function vi(e){return vi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vi(e)}var bi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yi(e,t)}(i,e);var t,n,r,o=hi(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,ne.EQUAL,null)}return t=i,(n=[{key:"getValue",value:function(){return G.getFieldValueForCondition(this._parentDependencyFieldId)}}])&&pi(t.prototype,n),r&&pi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Q);const mi=bi;n(4129),n(38478);function gi(e){return gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gi(e)}function _i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wi(r.key),r)}}function wi(e){var t=function(e,t){if("object"!==gi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==gi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===gi(t)?t:String(t)}function Si(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Oi(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Ei(e,t,"get"))}function Pi(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ei(e,t,"set"),n),n}function Ei(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ki=new WeakMap,ji=new WeakMap,Ti=new WeakMap,Fi=new WeakMap,Ii=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Si(this,ki,{writable:!0,value:void 0}),Si(this,ji,{writable:!0,value:void 0}),Si(this,Ti,{writable:!0,value:void 0}),Si(this,Fi,{writable:!0,value:void 0}),Pi(this,ki,t),Pi(this,ji,n),Pi(this,Ti,r),Pi(this,Fi,o)}var t,n,r;return t=e,(n=[{key:"getFieldId",value:function(){return Oi(this,ki)}},{key:"getValue",value:function(){return Oi(this,ji)}},{key:"getPlaceholderText",value:function(){return Oi(this,Ti)}},{key:"getTabIndex",value:function(){return Oi(this,Fi)}}])&&_i(t.prototype,n),r&&_i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Ri=Ii;function Ci(e){return Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ci(e)}function Di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xi(r.key),r)}}function xi(e){var t=function(e,t){if("object"!==Ci(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ci(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ci(t)?t:String(t)}var Ai=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"clone",value:function(e,t){throw new Error("Unimplemented method: clone()")}}])&&Di(t.prototype,n),r&&Di(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Li(e){return Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Li(e)}function Ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mi(r.key),r)}}function Mi(e){var t=function(e,t){if("object"!==Li(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Li(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Li(t)?t:String(t)}function Vi(e,t){return Vi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vi(e,t)}function Bi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ui(e);if(t){var o=Ui(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Li(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ui(e){return Ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ui(e)}var Wi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vi(e,t)}(i,e);var t,n,r,o=Bi(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){throw new Error("Unimplemented method: _fixPlaceholderTextInClonedHtmlNode()")}},{key:"_executeAfterCloningTasks",value:function(e,t,n){}},{key:"clone",value:function(e,t){var n=t.getFieldId(),r=this._cloneFieldHtmlElement(e.getFieldId(),t,null!==t.getValue());this._insertClonedHtml(r,n);var o=this._createClonedField(e,n);return this._executeAfterCloningTasks(e,o,t),o}},{key:"_insertClonedHtml",value:function(e,t){document.getElementById(t).replaceWith(e)}},{key:"_createClonedField",value:function(e,t){return e._buildClonedField(t)}},{key:"_cloneFieldHtmlElement",value:function(e,t,n){var r=this._cloneHtml(e);return this._fixIdInClonedHtmlNode(r,e,t.getFieldId()),this._fixValueInClonedHtmlNodeIfNeeded(n,r,t.getValue()),this._fixPlaceholderTextInClonedHtmlNode(r,t.getPlaceholderText()),this._fixTabIndexInClonedHtmlNode(r,t.getTabIndex()),r}},{key:"_cloneHtml",value:function(e){return document.getElementById(e).cloneNode(!1)}},{key:"_fixIdInClonedHtmlNode",value:function(e,t,n){var r=document.getElementById(t),o=new RegExp(t,"g");e.getAttributeNames().forEach((function(t){var r=e.getAttribute(t);if(o.test(r)){var i=r.replace(o,n);e.setAttribute(t,i)}})),e.innerHTML=r.innerHTML.replace(o,n)}},{key:"_fixValueInClonedHtmlNodeIfNeeded",value:function(e,t,n){e&&(t.value=n)}},{key:"_fixTabIndexInClonedHtmlNode",value:function(e,t){e.tabIndex=t}}])&&Ni(t.prototype,n),r&&Ni(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ai);const Yi=Wi;function Qi(e){return Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qi(e)}function Hi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zi(r.key),r)}}function zi(e){var t=function(e,t){if("object"!==Qi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Qi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Qi(t)?t:String(t)}function qi(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Ji(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var Gi=new WeakSet,Zi=new WeakSet,Ki=new WeakSet,$i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),qi(this,Ki),qi(this,Zi),qi(this,Gi)}var t,n,r;return t=e,(n=[{key:"linkFields",value:function(e,t){Ji(this,Gi,Xi).call(this,e,t),Ji(this,Zi,ea).call(this,e,t),Ji(this,Ki,ta).call(this,e,t),Ji(this,Ki,ta).call(this,t,e)}}])&&Hi(t.prototype,n),r&&Hi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xi(e,t){var n=e.shouldBeMasked.bind(e),r=t.shouldBeMasked.bind(t),o=function(e){return n(e)&&r(e)};e.shouldBeMasked=o,t.shouldBeMasked=o}function ea(e,t){var n=e.setIsMaskedWithoutPermissionsRole.bind(e),r=t.setIsMaskedWithoutPermissionsRole.bind(t),o=function(e){n(e),r(e)};e.setIsMaskedWithoutPermissionsRole=o,t.setIsMaskedWithoutPermissionsRole=o}function ta(e,t){e.addListener("unmaskedClicked",(function(){return t.unmaskField()})),e.addListener("unmaskedLostFocus",(function(){return t.maskField()})),e.addListener("fieldWasUnmasked",(function(){return t.unmaskField()}))}const na=$i;function ra(e){return ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ra(e)}function oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ia(r.key),r)}}function ia(e){var t=function(e,t){if("object"!==ra(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ra(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ra(t)?t:String(t)}function aa(e,t){return aa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},aa(e,t)}function ua(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=la(e);if(t){var o=la(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ra(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function la(e){return la=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},la(e)}var ca=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aa(e,t)}(i,e);var t,n,r,o=ua(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){}}])&&oa(t.prototype,n),r&&oa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Yi);const sa=ca;function fa(e){return fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fa(e)}function pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,da(r.key),r)}}function da(e){var t=function(e,t){if("object"!==fa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===fa(t)?t:String(t)}function ya(e,t){return ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ya(e,t)}function ha(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ma(e);if(t){var o=ma(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===fa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return va(e)}(this,n)}}function va(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ba(){return ba="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ma(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ba.apply(this,arguments)}function ma(e){return ma=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ma(e)}function ga(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _a(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Sa(e,t,"get"))}function wa(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Sa(e,t,"set"),n),n}function Sa(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Oa=new WeakMap,Pa=new WeakSet,Ea=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ya(e,t)}(i,e);var t,n,r,o=ha(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){ga(e,t),t.add(e)}(va(t=o.call(this)),Pa),function(e,t,n){ga(e,t),t.set(e,n)}(va(t),Oa,{writable:!0,value:void 0}),wa(va(t),Oa,e),t}return t=i,(n=[{key:"_executeAfterCloningTasks",value:function(e,t,n){ba(ma(i.prototype),"_executeAfterCloningTasks",this).call(this,e,t,n),_a(this,Oa)._executeAfterCloningTasks(e,t,n),(new na).linkFields(e,t),t._postRegister()}},{key:"_cloneFieldHtmlElement",value:function(e,t,n){var r=Fields.getField(e),o=_a(this,Oa)._cloneFieldHtmlElement(e,t,n&&!r.isMaskedValue());if(!r||!r.hasToShowValueMasked())return o;var i=document.createElement("div"),a=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,Pa,ka).call(this,r,t,n);return i.appendChild(a),i.appendChild(o),i}},{key:"_fixValueInClonedHtmlNodeIfNeeded",value:function(e,t,n){}},{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){}},{key:"_fixTabIndexInClonedHtmlNode",value:function(e,t){}}])&&pa(t.prototype,n),r&&pa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Yi);function ka(e,t,n){var r=new Ri(t.getFieldId()+e.getSuffixMaskedField(),t.getPlaceholderText(),t.getTabIndex()),o=e.getFieldId()+e.getSuffixMaskedField(),i=ba(ma(Ea.prototype),"_cloneFieldHtmlElement",this).call(this,o,r,n);return ba(ma(Ea.prototype),"_fixValueInClonedHtmlNodeIfNeeded",this).call(this,_a(this,Oa)instanceof sa,i,i.getAttribute("value")),i}const ja=Ea;function Ta(e){return Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ta(e)}function Fa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ia(r.key),r)}}function Ia(e){var t=function(e,t){if("object"!==Ta(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ta(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ta(t)?t:String(t)}function Ra(e,t){return Ra=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ra(e,t)}function Ca(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Da(e);if(t){var o=Da(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ta(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Da(e){return Da=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Da(e)}var xa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ra(e,t)}(i,e);var t,n,r,o=Ca(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){if(t){var n=Array.from(e.children).filter((function(e){return e instanceof HTMLOptionElement})),r=n.length>0?n[0]:null;r&&!r.value&&(r.textContent=t)}}}])&&Fa(t.prototype,n),r&&Fa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Yi);const Aa=xa;n(92222);function La(e){return La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},La(e)}function Na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ma(r.key),r)}}function Ma(e){var t=function(e,t){if("object"!==La(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==La(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===La(t)?t:String(t)}function Va(){return Va="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ya(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Va.apply(this,arguments)}function Ba(e,t){return Ba=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ba(e,t)}function Ua(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ya(e);if(t){var o=Ya(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===La(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wa(e)}(this,n)}}function Wa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ya(e){return Ya=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ya(e)}function Qa(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Ha(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var za=new WeakSet,qa=new WeakSet,Ja=new WeakSet,Ga=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ba(e,t)}(i,e);var t,n,r,o=Ua(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Qa(Wa(e=o.call.apply(o,[this].concat(n))),Ja),Qa(Wa(e),qa),Qa(Wa(e),za),e}return t=i,(n=[{key:"_fixValueInClonedHtmlNodeIfNeeded",value:function(e,t,n){}},{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){}},{key:"_executeAfterCloningTasks",value:function(e,t,n){Va(Ya(i.prototype),"_executeAfterCloningTasks",this).call(this,e,t,n),Ha(this,Ja,$a).call(this,t,n.getPlaceholderText()),Ha(this,qa,Ka).call(this,t,n.getValue())}},{key:"_cloneFieldHtmlElement",value:function(e,t,n){var r=Va(Ya(i.prototype),"_cloneFieldHtmlElement",this).call(this,e,t,n),o=document.getElementById(e).parentElement,a=Ha(this,za,Za).call(this,o,e,t.getFieldId()),u=document.getElementById(e+"-liveContainer"),l=Ha(this,za,Za).call(this,u,e,t.getFieldId());return a.appendChild(l),a.appendChild(r),a}}])&&Na(t.prototype,n),r&&Na(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Yi);function Za(e,t,n){var r=new RegExp(t),o=e.cloneNode(!1),i=o.getAttribute("id").replace(r,n);return o.setAttribute("id",i),o}function Ka(e,t){null!==t&&e.setValue(new Jt(t))}function $a(e,t){t&&e.setPlaceholderText(t)}const Xa=Ga;function eu(e){return eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eu(e)}function tu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nu(r.key),r)}}function nu(e){var t=function(e,t){if("object"!==eu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eu(t)?t:String(t)}function ru(e,t){return ru=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ru(e,t)}function ou(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=iu(e);if(t){var o=iu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===eu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function iu(e){return iu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},iu(e)}var au=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ru(e,t)}(i,e);var t,n,r,o=ou(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"_fixPlaceholderTextInClonedHtmlNode",value:function(e,t){e.placeholder=t,e.setAttribute("data-placeholder",t)}}])&&tu(t.prototype,n),r&&tu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Yi);const uu=au;function lu(e){return lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lu(e)}function cu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,su(r.key),r)}}function su(e){var t=function(e,t){if("object"!==lu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==lu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===lu(t)?t:String(t)}var fu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"create",value:function(e){switch(e.getType()){case EncryptedAutocompleteSelectField.TYPE:return new ja(new Xa);case EncryptedSelectField.TYPE:return new ja(new Aa);case EncryptedFullDateField.TYPE:return new ja(new sa);case EncryptedTextField.TYPE:return new ja(new uu);default:return new uu}}}])&&cu(t.prototype,n),r&&cu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const pu=fu;function du(e){return du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},du(e)}function yu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mu(r.key),r)}}function hu(e,t){return hu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hu(e,t)}function vu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bu(e);if(t){var o=bu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===du(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bu(e){return bu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bu(e)}function mu(e){var t=function(e,t){if("object"!==du(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==du(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===du(t)?t:String(t)}var gu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hu(e,t)}(i,e);var t,n,r,o=vu(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._fieldToConfirmId=n.getSetting("fieldToConfirmId"),n._placeholderText=n.getSetting("placeholderText"),n._tabIndex=n.getSetting("tabIndex"),n._confirmationField=null,n.getWizard().addListenerOnce(QO.EVENT_AFTER_FIELDS_REGISTER,n.caller("_cloneFieldToConfirm")),n}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){return this._confirmationField?this._confirmationField.getValue():new x}},{key:"setValue",value:function(e){this._confirmationField&&this._confirmationField.setValue(e)}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_cloneFieldToConfirm",value:function(){var e=new pu,t=new Ri(this.getFieldId(),this._getValueToSet(),this._placeholderText,this._tabIndex);try{var n=G.getField(this._fieldToConfirmId),r=e.create(n);this._confirmationField=r.clone(n,t),this._addHiddenInputIfNeeded(n),this._buildConditionForFieldToConfirm()}catch(e){console.error(e),this._getFieldContainerElement().remove(),G.unregisterField(this.getFieldId())}}},{key:"_addHiddenInputIfNeeded",value:function(e){!e._isActive()&&this._isActive()&&(this._addHiddenElementIndicator(),this.setVisibilityStatusByType(Ne.DISPLAY_CONDITIONALLY,!1))}},{key:"_buildConditionForFieldToConfirm",value:function(){this.addVisibilityCondition(new mi(this._fieldToConfirmId))}},{key:"_getValueToSet",value:function(){return document.getElementsByClassName("WizardFieldError").length?this.getSetting("value"):null}}],n&&yu(t.prototype,n),r&&yu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=mu(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(gu,"TYPE","ConfirmationField");const _u=gu;function wu(e){return wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wu(e)}function Su(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ju(r.key),r)}}function Ou(){return Ou="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ku(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ou.apply(this,arguments)}function Pu(e,t){return Pu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pu(e,t)}function Eu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ku(e);if(t){var o=ku(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===wu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ku(e){return ku=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ku(e)}function ju(e){var t=function(e,t){if("object"!==wu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==wu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===wu(t)?t:String(t)}var Tu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pu(e,t)}(i,e);var t,n,r,o=Eu(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._fixedYear=n.getSetting("fixedYear"),n._tabIndex=n.getSetting("tabIndex"),n._dayPlaceholder=n.getSetting("dayPlaceholder"),n._monthPlaceholder=n.getSetting("monthPlaceholder"),n._dayLabel=n.getSetting("dayLabel"),n._monthLabel=n.getSetting("monthLabel"),V.registerFieldDependency(e,n._getMonthId(),V.TYPE_VALUES),V.registerFieldDependency(e,n._getDayId(),V.TYPE_VALUES),n}return t=i,n=[{key:"_postRegister",value:function(){this._createWidget(),Ou(ku(i.prototype),"_postRegister",this).call(this)}},{key:"cloneForNewTableRow",value:function(e,t){this._cloneCurrentFieldForNewTableRow(e,t),this._cloneDependentFieldsForNewTableRow(e,t)}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();if(!e)return new x;var t=e.split("-"),n=PortalString.toInt(t[1]),r=PortalString.toInt(t[0]);return new FieldDayAndMonthValue(r,n)}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return e?this._fixedYear+"-"+e:""}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getFormattedDateString("MM-dd")),this._setElementComponentsValues(e.getPortalDate().toDate()),this._triggerEvent("change")}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow("day",e,t),this._cloneDatasourceForNewTableRow("month",e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource("day",e),this._cloneDatasource("month",e),new i(e,this.getFieldSettings())}},{key:"_setElementComponentsValues",value:function(e){G.setFieldValue(this._getMonthId(),new FieldIdValue((e.getMonth()+1).toString())),G.setFieldValue(this._getDayId(),new FieldIdValue(e.getDate().toString()))}},{key:"_getDepedentFieldsMetadata",value:function(){return[this._createFieldMetadata(this._getMonthId(),this._getMonthSuffix()),this._createFieldMetadata(this._getDayId(),this._getDaySuffix())]}},{key:"_getMonthId",value:function(){return this.getFieldId()+this._getMonthSuffix()}},{key:"_getDayId",value:function(){return this.getFieldId()+this._getDaySuffix()}},{key:"_getMonthSuffix",value:function(){return"_month"}},{key:"_getDaySuffix",value:function(){return"_day"}},{key:"_createWidget",value:function(){var e=this._hideInput(document.getElementById(this._fieldId));this._initDefaultValues(e.value),e.parentNode.appendChild(this._createMonthAndDayInputs())}},{key:"_elementAllowsChangingType",value:function(e){return!1}},{key:"_initDefaultValues",value:function(e){if(this._month=this._day=0,e){var t=e.split("-");this._month=PortalString.toInt(t[0]),this._day=PortalString.toInt(t[1])}}},{key:"_createMonthAndDayInputs",value:function(){var e=this;return this._monthInput=this._createMonthInput(this._fieldId,this._month,this._fixedYear,this._tabIndex,null,null,this._monthPlaceholder),this._monthInput.onchange=function(){e._month=this.value,e._day=0,e._updateHiddenInputValue()},this._dayInput=this._createDayInput(this._fieldId,this._day,this._month,this._fixedYear,this._tabIndex,null,null,this._dayPlaceholder),this._dayInput.onchange=function(){e._day=this.value,e._updateHiddenInputValue()},this._dayLabel||this._monthLabel?this._createWidgetWithLabelsFromInputs(this._dayInput,this._monthInput):this._createWidgetWithoutLabelsFromInputs(this._dayInput,this._monthInput)}},{key:"_updateHiddenInputValue",value:function(){document.getElementById(this._fieldId).value=this._normalize(this._month)+"-"+this._normalize(this._day),G.onFieldValueChange(this._fieldId)}},{key:"_createWidgetWithoutLabelsFromInputs",value:function(e,t){var n=document.createElement("div");return n.appendChild(t),n.appendChild(e),n}},{key:"_createWidgetWithLabelsFromInputs",value:function(e,t){var n=document.createElement("div");n.className=h.WIZARD_DIV_AFTER_DESCRIPTION_TC;var r=document.createElement("div");r.className="DayAndMont_MonthWrapper",r.appendChild(this._createLabelFor(t.id,this._monthLabel)),r.appendChild(t);var o=document.createElement("div");return o.className="DayAndMont_DayWrapper",o.appendChild(this._createLabelFor(e.id,this._dayLabel)),o.appendChild(e),n.appendChild(r),n.appendChild(o),n}},{key:"_createLabelFor",value:function(e,t){var n=document.createElement("label");return n.className="WizardSubFieldLabel "+h.WIZARD_FIELD_SUBFIELD_LABEL_TC,n.setAttribute("for",e),n.textContent=t,n}}],n&&Su(t.prototype,n),r&&Su(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Jo);!function(e,t,n){(t=ju(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Tu,"TYPE","DayAndMonthDateField");const Fu=Tu;function Iu(e){return Iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iu(e)}function Ru(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Au(r.key),r)}}function Cu(e,t){return Cu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cu(e,t)}function Du(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xu(e);if(t){var o=xu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Iu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function xu(e){return xu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xu(e)}function Au(e){var t=function(e,t){if("object"!==Iu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Iu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Iu(t)?t:String(t)}var Lu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cu(e,t)}(i,e);var t,n,r,o=Du(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._notSelectedOptionValue=n.getSetting("notSelectedOptionValue")||"",n}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Jt.TYPE,Ot.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();return e==this._notSelectedOptionValue?new x:new nn(e,pjQuery("#"+this._fieldId+" option:selected").text())}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return e!=this._notSelectedOptionValue?e:null}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery("option",this._getFieldElement()),n=this;switch(e.getType()){case Jt.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;case Ot.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).text()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}}},{key:"_unsetField",value:function(e){e.val(this._notSelectedOptionValue)}},{key:"_getOptionsPage",value:function(){return null}},{key:"_getOptionsPageSize",value:function(){return null}},{key:"_createWithNewOptions",value:function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>").attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join(""))}},{key:"_removeAllOptions",value:function(){this._getFieldElement().find("option:gt(0)").remove()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}},{key:"_isPrePopulateEnabled",value:function(){return"1"===pjQuery("#"+this.getFieldId()).attr("data-prePopulate")}},{key:"_prePopulateIfOnlyOneOption",value:function(){var e=pjQuery("#"+this.getFieldId()).find('option:not([value="'+this._notSelectedOptionValue+'"])');1===e.length&&this.setValue(new Jt(e[0].value))}}],n&&Ru(t.prototype,n),r&&Ru(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(kn);!function(e,t,n){(t=Au(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Lu,"TYPE","SelectField");const Nu=Lu;function Mu(e){return Mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mu(e)}function Vu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bu(r.key),r)}}function Bu(e){var t=function(e,t){if("object"!==Mu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Mu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Mu(t)?t:String(t)}var Uu=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._text=t,this._onClick=n,this._primary=r}var t,n,r;return t=e,(n=[{key:"getText",value:function(){return this._text}},{key:"getOnClick",value:function(){return this._onClick}},{key:"isPrimary",value:function(){return this._primary}}])&&Vu(t.prototype,n),r&&Vu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Wu=Uu;function Yu(e){return Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yu(e)}function Qu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hu(r.key),r)}}function Hu(e){var t=function(e,t){if("object"!==Yu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Yu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Yu(t)?t:String(t)}var zu=function(){function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=t,this._description=n,this._buttons=r,this._appendTo=o,this._beforeClose=i,this._closeText=a,this.BUTTON_CLASS_COMMON="upload-large-files__button",this.BUTTON_CLASS_PRIMARY="upload-large-files__button--primary",this.BUTTON_CLASS_NOT_PRIMARY="upload-large-files__button--secondary",this.DIALOG_CLASS="largeFileUploadJqueryUiModal"}var t,n,r;return t=e,(n=[{key:"show",value:function(){var e=this,t='<div title="'+this._title+'"><p>'+this._description+"</p></div>",n=this._buttons.map((function(t){return{text:t.getText(),click:t.getOnClick(),class:e.BUTTON_CLASS_COMMON+" "+(t.isPrimary()?e.BUTTON_CLASS_PRIMARY:e.BUTTON_CLASS_NOT_PRIMARY)}}));pjQuery(t).dialog({modal:!0,appendTo:this._appendTo,closeOnEscape:!1,dialogClass:this.DIALOG_CLASS,width:"439",buttons:n,beforeClose:this._beforeClose,closeText:this._closeText})}}])&&Qu(t.prototype,n),r&&Qu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const qu=zu;function Ju(e){return Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ju(e)}function Gu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zu(r.key),r)}}function Zu(e){var t=function(e,t){if("object"!==Ju(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ju(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ju(t)?t:String(t)}var Ku=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){(t=Zu(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_encryptedField",void 0),this._encryptedField=t}var t,n,r;return t=e,(n=[{key:"load",value:function(){this._setAttributesFromRegistrars(),this._setOnClickInputListener(),this._addActionBeforeSubmit(),this._setOnResetFormListener(),this._setEventWhenUnmaskedFieldIsClicked()}},{key:"onFocusIsLost",value:function(e){this._encryptedField.shouldBeMasked(null==e?void 0:e.relatedTarget)&&(this.maskField(),this._encryptedField.dispatchEvent("unmaskedLostFocus"))}},{key:"onClickInputListener",value:function(e){if(this._encryptedField.hasToShowValueMasked())if(this._encryptedField.isMaskedWithoutPermissionsRole()){e.preventDefault();var t=this,n=new Wu(this._encryptedField.getDictionary().deleteButton,(function(){pjQuery(this).dialog("close"),t.unmaskField(),t._encryptedField.dispatchEvent("fieldWasUnmasked"),t.focusAfterTasks(),t._encryptedField.setIsMaskedWithoutPermissionsRole(!1)}),!0),r=new Wu(this._encryptedField.getDictionary().cancelButton,(function(){pjQuery(this).dialog("close")}),!1);new qu(this._encryptedField.getDictionary().titleDialog,this._encryptedField.getDictionary().descriptionDialog,[n,r],"",null,this._encryptedField.getDictionary().closeText).show()}else this.unmaskField(),this._encryptedField.dispatchEvent("fieldWasUnmasked"),this.focusAfterTasks()}},{key:"unmaskField",value:function(){this._hasUnmaskedFieldCreated()&&(this._encryptedField.setIsMaskedValue(!1),this._encryptedField.changeHiddenField(this._encryptedField.getMaskedField(),!0),this._encryptedField.changeHiddenField(this._encryptedField.getField(),!1))}},{key:"maskField",value:function(){var e=!this._encryptedField.getValue().isEmpty();this._hasUnmaskedFieldCreated()&&this._encryptedField.hasToShowValueMasked()&&e&&(this._encryptedField.updateMaskedValue(),this._encryptedField.changeHiddenField(this._encryptedField.getMaskedField(),!1),this._encryptedField.changeHiddenField(this._encryptedField.getField(),!0))}},{key:"focusAfterTasks",value:function(){var e=this;setTimeout((function(){return e._encryptedField.getFocusableInput().focus()}))}},{key:"setOnFocusIsLostListener",value:function(){var e=this._encryptedField.getFocusableInput();null==e||e.addEventListener("blur",this.onFocusIsLost.bind(this))}},{key:"_setAttributesFromRegistrars",value:function(){this._encryptedField.setIsMaskedValue(this._encryptedField.getSetting("isMaskedValue")),this._encryptedField._hasToShowValueMasked=this._encryptedField.getSetting("hasToShowValueMasked"),this._encryptedField.setIsMaskedWithoutPermissionsRole(this._encryptedField.getSetting("maskedWithoutPermissionsRole")),this._encryptedField._dictionary=this._encryptedField.getSetting("dictionary"),this._encryptedField._suffixMaskedField=this._encryptedField.getSetting("suffixMaskedField")}},{key:"_setOnClickInputListener",value:function(){var e=this._encryptedField.getMaskedFieldElement();null==e||e.addEventListener("mousedown",this._encryptedField.caller("onClickInputListener"))}},{key:"_addActionBeforeSubmit",value:function(){var e=this;Xn.default.getInstance().addActionBeforeSubmit((function(){e._encryptedField.isMaskedValue()&&e._preventFieldFromBeingSentOnSubmitRequest()}))}},{key:"_preventFieldFromBeingSentOnSubmitRequest",value:function(){this._encryptedField._getFieldElement().get(0).removeAttribute("name")}},{key:"_setOnResetFormListener",value:function(){var e,t=this;null===(e=this._encryptedField.getWizard().getForm())||void 0===e||e.addEventListener("reset",(function(){t._setAttributesFromRegistrars(),t.maskField()}))}},{key:"_setEventWhenUnmaskedFieldIsClicked",value:function(){var e,t=this;null===(e=this._encryptedField.getFieldElement())||void 0===e||e.addEventListener("mousedown",(function(e){return t._encryptedField.dispatchEvent("unmaskedClicked",e)}))}},{key:"_hasUnmaskedFieldCreated",value:function(){return Boolean(this._encryptedField.getMaskedFieldElement())}}])&&Gu(t.prototype,n),r&&Gu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const $u=Ku;function Xu(e){return Xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xu(e)}function el(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ul(r.key),r)}}function tl(){return tl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=il(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},tl.apply(this,arguments)}function nl(e,t){return nl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nl(e,t)}function rl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=il(e);if(t){var o=il(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Xu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ol(e)}(this,n)}}function ol(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function il(e){return il=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},il(e)}function al(e,t,n){return(t=ul(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ul(e){var t=function(e,t){if("object"!==Xu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xu(t)?t:String(t)}var ll=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nl(e,t)}(i,e);var t,n,r,o=rl(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),al(ol(n=o.call(this,e,t)),"_suffixMaskedField",void 0),al(ol(n),"_maskedWithoutPermissionsRole",void 0),al(ol(n),"_hasToShowValueMasked",void 0),al(ol(n),"_isMaskedValue",void 0),al(ol(n),"_dictionary",void 0),al(ol(n),"_encryptedFieldHandler",void 0),al(ol(n),"_elementThatKeepsFieldUnmasked",void 0),n._encryptedFieldHandler=new $u(ol(n)),n._encryptedFieldHandler.load(),n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_postRegister",value:function(){var e=this;tl(il(i.prototype),"_postRegister",this).call(this),this.getWizard().areAllFieldsRegistered()?this.setOnFocusIsLostListener():this.getWizard().addListener(QO.EVENT_AFTER_FIELDS_REGISTER,(function(){return e.setOnFocusIsLostListener()}))}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}},{key:"setIsMaskedValue",value:function(e){this._isMaskedValue=e}},{key:"isMaskedValue",value:function(){return this._isMaskedValue}},{key:"hasToShowValueMasked",value:function(){return this._hasToShowValueMasked}},{key:"getMaskedField",value:function(){return pjQuery("#"+this._fieldId+this._suffixMaskedField)}},{key:"getMaskedFieldElement",value:function(){return this.getMaskedField().get(0)}},{key:"unmaskField",value:function(){this._encryptedFieldHandler.unmaskField()}},{key:"maskField",value:function(){this._encryptedFieldHandler.maskField()}},{key:"setOnFocusIsLostListener",value:function(){this._encryptedFieldHandler.setOnFocusIsLostListener()}},{key:"getSuffixMaskedField",value:function(){return this._suffixMaskedField}},{key:"onClickInputListener",value:function(e){this._encryptedFieldHandler.onClickInputListener(e)}},{key:"onFocusIsLost",value:function(e){this._encryptedFieldHandler.onFocusIsLost(e)}},{key:"getField",value:function(){return this._getFieldElement()}},{key:"getFieldElement",value:function(){return this.getField().get(0)}},{key:"getFocusableInput",value:function(){return this.getFieldElement()}},{key:"shouldBeMasked",value:function(e){return e!==this.getFocusableInput()}},{key:"isMaskedWithoutPermissionsRole",value:function(){return this._maskedWithoutPermissionsRole}},{key:"setIsMaskedWithoutPermissionsRole",value:function(e){this._maskedWithoutPermissionsRole=e}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"updateMaskedValue",value:function(){this.getMaskedFieldElement().querySelector("option").textContent=i.MASKED_VALUE}}])&&el(t.prototype,n),r&&el(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Nu);al(ll,"TYPE","EncryptedSelectField"),al(ll,"MASKED_VALUE","********");const cl=ll;function sl(e){return sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sl(e)}function fl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gl(r.key),r)}}function pl(){return pl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},pl.apply(this,arguments)}function dl(e,t){return dl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dl(e,t)}function yl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vl(e);if(t){var o=vl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===sl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hl(e)}(this,n)}}function hl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vl(e){return vl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vl(e)}function bl(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function ml(e,t,n){return(t=gl(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gl(e){var t=function(e,t){if("object"!==sl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==sl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===sl(t)?t:String(t)}var _l=new WeakSet,wl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dl(e,t)}(i,e);var t,n,r,o=yl(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),bl(hl(r=o.call(this,e,t,n)),_l),ml(hl(r),"_suffixMaskedField",void 0),ml(hl(r),"_maskedWithoutPermissionsRole",void 0),ml(hl(r),"_hasToShowValueMasked",void 0),ml(hl(r),"_isMaskedValue",void 0),ml(hl(r),"_dictionary",void 0),ml(hl(r),"_encryptedFieldHandler",void 0),r._encryptedFieldHandler=new $u(hl(r)),r._encryptedFieldHandler.load(),function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(hl(r),_l,Sl).call(hl(r)),r}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_postRegister",value:function(){var e=this;pl(vl(i.prototype),"_postRegister",this).call(this),this.getWizard().areAllFieldsRegistered()?this.setOnFocusIsLostListener():this.getWizard().addListener(QO.EVENT_AFTER_FIELDS_REGISTER,(function(){return e.setOnFocusIsLostListener()}))}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings(),this.getFieldId())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings(),this.getFieldId())}},{key:"_attachOnChangeListener",value:function(){var e=this;this._getFieldElement().on("change",(function(){G.onFieldValueChange(e.getFieldId()),setTimeout((function(){var t;null===(t=e._getClearButton())||void 0===t||t.addEventListener("blur",(function(t){e.onFocusIsLost(t)}))}))}))}},{key:"setIsMaskedValue",value:function(e){this._isMaskedValue=e}},{key:"isMaskedValue",value:function(){return this._isMaskedValue}},{key:"hasToShowValueMasked",value:function(){return this._hasToShowValueMasked}},{key:"getMaskedField",value:function(){return pjQuery("#"+this._fieldId+this._suffixMaskedField)}},{key:"getMaskedFieldElement",value:function(){return this.getMaskedField().get(0)}},{key:"unmaskField",value:function(){this._encryptedFieldHandler.unmaskField()}},{key:"maskField",value:function(){this._encryptedFieldHandler.maskField()}},{key:"setOnFocusIsLostListener",value:function(){this._encryptedFieldHandler.setOnFocusIsLostListener()}},{key:"getSuffixMaskedField",value:function(){return this._suffixMaskedField}},{key:"onClickInputListener",value:function(e){this._encryptedFieldHandler.onClickInputListener(e)}},{key:"onFocusIsLost",value:function(e){this._encryptedFieldHandler.onFocusIsLost(e)}},{key:"getField",value:function(){return pjQuery("#"+i.PREFIX_UI_WIDGET+this._fieldId)}},{key:"getFieldElement",value:function(){return this.getField().get(0)}},{key:"getFocusableInput",value:function(){return document.querySelector(".select2Container"+this._fieldId)}},{key:"shouldBeMasked",value:function(e){var t=this._getClearButton();return e!==this.getFocusableInput()&&(e!==t||null===t)&&null===document.querySelector("#select2-".concat(this._fieldId,"-results"))}},{key:"isMaskedWithoutPermissionsRole",value:function(){return this._maskedWithoutPermissionsRole}},{key:"setIsMaskedWithoutPermissionsRole",value:function(e){this._maskedWithoutPermissionsRole=e}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"updateMaskedValue",value:function(){this.getMaskedFieldElement().querySelector("option").textContent=i.MASKED_VALUE}}])&&fl(t.prototype,n),r&&fl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ln);function Sl(){var e=this;this._getFieldElement().on("select2:close",(function(){return e._encryptedFieldHandler.focusAfterTasks()}))}ml(wl,"TYPE","EncryptedAutocompleteSelectField"),ml(wl,"PREFIX_UI_WIDGET","ui-widget_"),ml(wl,"MASKED_VALUE","********");const Ol=wl;n(83112);function Pl(e){return Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pl(e)}function El(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Il(r.key),r)}}function kl(){return kl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},kl.apply(this,arguments)}function jl(e,t){return jl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jl(e,t)}function Tl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fl(e);if(t){var o=Fl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Pl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fl(e){return Fl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fl(e)}function Il(e){var t=function(e,t){if("object"!==Pl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Pl(t)?t:String(t)}var Rl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jl(e,t)}(i,e);var t,n,r,o=Tl(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._tabIndex=n.getSetting("tabIndex"),n._minDate=n.getSetting("minDate"),n._maxDate=n.getSetting("maxDate"),n._accessibleLabelsDictionary=n.getSetting("accessibleLabelsDictionary"),n._isAccessible=n.getSetting("isAccessible"),n._isRequired=n.getSetting("isRequired"),n._year=n._month=n._day=0,n._yearInput=n._monthInput=n._dayInput=null,n}return t=i,n=[{key:"cloneForNewTableRow",value:function(e,t){this._cloneCurrentFieldForNewTableRow(e,t),this._cloneDependentFieldsForNewTableRow(e,t)}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();if(!e)return new x;var t=e.split("-"),n=PortalString.toInt(t[0]),r=PortalString.toInt(t[1]),o=PortalString.toInt(t[2]);return new ni(n,r,o)}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return e||""}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getFormattedDateString("yyyy-MM-dd")),this._triggerEvent("change")}},{key:"_show",value:function(){if(this._shouldActivate()){var e=this._getFieldContainerElement(),t=this._getFieldElement();e&&t&&this._valueDiffersForElement(t)&&t.val(t.val())}kl(Fl(i.prototype),"_show",this).call(this)}},{key:"_hide",value:function(){if(this._shouldDeactivate()){var e=this._getFieldElement();this._saveDateValueForField(e)}kl(Fl(i.prototype),"_hide",this).call(this)}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow("day",e,t),this._cloneDatasourceForNewTableRow("month",e,t),this._cloneDatasourceForNewTableRow("year",e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource("day",e),this._cloneDatasource("month",e),this._cloneDatasource("year",e),new i(e,this.getFieldSettings())}},{key:"_valueDiffersForElement",value:function(e){var t=e.val(),n=this.getValue();return""!==t&&!n.isEmpty()&&n.getFormattedDateString("yyyy-MM-dd")!==t}},{key:"_saveDateValueForField",value:function(e){var t=this.getValue();if(!t.isEmpty()){var n=new Date(t.getFormattedDateString("yyyy-MM-dd")+"T00:00:00"),r=n.getFullYear(),o=this._addLeadingZeros(n.getMonth()+1),i=this._addLeadingZeros(n.getDate());e.val(r+"-"+o+"-"+i)}}},{key:"_addLeadingZeros",value:function(e){return e.toString().padStart(2,"0")}},{key:"_getDepedentFieldsMetadata",value:function(){return[]}},{key:"_updateHiddenInputValue",value:function(){document.getElementById(this._fieldId).value=this._year>0||this._month>0||this._day>0?this._year+"-"+this._normalize(this._month)+"-"+this._normalize(this._day):"",G.onFieldValueChange(this._fieldId)}},{key:"_createLabelFor",value:function(e,t){var n=document.createElement("label");return n.setAttribute("for",e),n.setAttribute("class","screenReaderVisibility "+h.WIZARD_FIELD_SUBFIELD_LABEL),n.textContent=t,n}},{key:"_resetDayInput",value:function(e){this._day=0;var t=this.monthInput.parentNode;t.removeChild(this._dayInput),this._dayInput=this._createDayInput(this._fieldId,this._day,this._month,this._year,e),t.appendChild(this._dayInput);var n=this;this._dayInput.onchange=function(){n._day=this.value,n._updateHiddenInputValue()}}}],n&&El(t.prototype,n),r&&El(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Jo);!function(e,t,n){(t=Il(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Rl,"TYPE","FullDateField");const Cl=Rl;function Dl(e){return Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dl(e)}function xl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ul(r.key),r)}}function Al(){return Al="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Al.apply(this,arguments)}function Ll(e,t){return Ll=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ll(e,t)}function Nl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vl(e);if(t){var o=Vl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Dl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ml(e)}(this,n)}}function Ml(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vl(e){return Vl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vl(e)}function Bl(e,t,n){return(t=Ul(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ul(e){var t=function(e,t){if("object"!==Dl(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Dl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Dl(t)?t:String(t)}var Wl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ll(e,t)}(i,e);var t,n,r,o=Nl(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Bl(Ml(n=o.call(this,e,t)),"_suffixMaskedField",void 0),Bl(Ml(n),"_maskedWithoutPermissionsRole",void 0),Bl(Ml(n),"_hasToShowValueMasked",void 0),Bl(Ml(n),"_isMaskedValue",void 0),Bl(Ml(n),"_dictionary",void 0),Bl(Ml(n),"_encryptedFieldHandler",void 0),Bl(Ml(n),"_isYearMasked",void 0),Bl(Ml(n),"_isMonthMasked",void 0),Bl(Ml(n),"_isDayMasked",void 0),n._isYearMasked=n.getSetting("isYearMasked"),n._isMonthMasked=n.getSetting("isMonthMasked"),n._isDayMasked=n.getSetting("isDayMasked"),n._encryptedFieldHandler=new $u(Ml(n)),n._encryptedFieldHandler.load(),n._lastUnmaskedValue=n.getFieldElement().value,n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow("day",e,t),this._cloneDatasourceForNewTableRow("month",e,t),this._cloneDatasourceForNewTableRow("year",e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource("day",e),this._cloneDatasource("month",e),this._cloneDatasource("year",e),new i(e,this.getFieldSettings())}},{key:"setIsMaskedValue",value:function(e){this._isMaskedValue=e}},{key:"isMaskedValue",value:function(){return this._isMaskedValue}},{key:"hasToShowValueMasked",value:function(){return this._hasToShowValueMasked}},{key:"getMaskedField",value:function(){return pjQuery("#"+this._fieldId+this._suffixMaskedField)}},{key:"getMaskedFieldElement",value:function(){return this.getMaskedField().get(0)}},{key:"unmaskField",value:function(){this._encryptedFieldHandler.unmaskField()}},{key:"maskField",value:function(){this._encryptedFieldHandler.maskField()}},{key:"setOnFocusIsLostListener",value:function(){this._encryptedFieldHandler.setOnFocusIsLostListener()}},{key:"getSuffixMaskedField",value:function(){return this._suffixMaskedField}},{key:"onClickInputListener",value:function(e){this._encryptedFieldHandler.onClickInputListener(e)}},{key:"onFocusIsLost",value:function(e){this._encryptedFieldHandler.onFocusIsLost(e)}},{key:"getField",value:function(){return this._getFieldElement()}},{key:"getFieldElement",value:function(){return this.getField().get(0)}},{key:"getFocusableInput",value:function(){return this.getFieldElement()}},{key:"shouldBeMasked",value:function(e){return e!==this.getFocusableInput()}},{key:"isMaskedWithoutPermissionsRole",value:function(){return this._maskedWithoutPermissionsRole}},{key:"setIsMaskedWithoutPermissionsRole",value:function(e){this._maskedWithoutPermissionsRole=e}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"_postRegister",value:function(){var e=this;this.getMaskedFieldElement()&&this._formatMaskedValueToFormatDateLocal(),this.getWizard().areAllFieldsRegistered()?this.setOnFocusIsLostListener():this.getWizard().addListener(QO.EVENT_AFTER_FIELDS_REGISTER,(function(){return e.setOnFocusIsLostListener()})),Al(Vl(i.prototype),"_postRegister",this).call(this)}},{key:"_formatMaskedValueToFormatDateLocal",value:function(){var e=this._getTextFormMaskedValue("yyyy"),t=this._getTextFormMaskedValue("mm"),n=this._getTextFormMaskedValue("dd"),r=LuxonDateTime.local(2e3,12,30).toLocaleString(LuxonDateTime.DATE_SHORT);r=(r=(r=r.replace(12..toString(),t)).replace(30..toString(),n)).replace(2e3.toString(),e),this.getMaskedFieldElement().value=r}},{key:"_getTextFormMaskedValue",value:function(e){var t="yyyy-mm-dd".indexOf(e),n=t+e.length;return this.getMaskedFieldElement().value.substring(t,n)}},{key:"updateMaskedValue",value:function(){var e=this.getFieldElement().value;if(this._lastUnmaskedValue!==e){this._lastUnmaskedValue=e;var t=e;this._isYearMasked&&(t=t.replace(/\d{4}/,"****")),this._isMonthMasked&&(t=t.replace(/-\d{2}-/,"-**-")),this._isDayMasked&&(t=t.replace(/-\d{2}$/,"-**")),this.getMaskedFieldElement().value=t,this._formatMaskedValueToFormatDateLocal()}}}])&&xl(t.prototype,n),r&&xl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Cl);Bl(Wl,"TYPE","EncryptedFullDateField");const Yl=Wl;n(82481);function Ql(e){return Ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ql(e)}function Hl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xl(r.key),r)}}function zl(){return zl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},zl.apply(this,arguments)}function ql(e,t){return ql=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ql(e,t)}function Jl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zl(e);if(t){var o=Zl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ql(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gl(e)}(this,n)}}function Gl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zl(e){return Zl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zl(e)}function Kl(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function $l(e,t,n){return(t=Xl(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xl(e){var t=function(e,t){if("object"!==Ql(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ql(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ql(t)?t:String(t)}var ec=new WeakSet,tc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ql(e,t)}(i,e);var t,n,r,o=Jl(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Kl(Gl(n=o.call(this,e,t)),ec),$l(Gl(n),"_suffixMaskedField",void 0),$l(Gl(n),"_maskedWithoutPermissionsRole",void 0),$l(Gl(n),"_hasToShowValueMasked",void 0),$l(Gl(n),"_isMaskedValue",void 0),$l(Gl(n),"_dictionary",void 0),$l(Gl(n),"_encryptedFieldHandler",void 0),$l(Gl(n),"_maskedType",void 0),$l(Gl(n),"_amountOfCharactersUnmasked",void 0),$l(Gl(n),"_accessibleDescriptionText",void 0),n._maskedType=n.getSetting("maskedType"),n._amountOfCharactersUnmasked=n.getSetting("amountOfCharactersUnmasked"),n._accessibleDescriptionText=n.getSetting("accessibleDescriptionText"),n._encryptedFieldHandler=new $u(Gl(n)),n._encryptedFieldHandler.load(),n._lastUnmaskedValue=n.getFieldElement().value,n}return t=i,(n=[{key:"_postRegister",value:function(){var e=this;zl(Zl(i.prototype),"_postRegister",this).call(this),function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,ec,nc).call(this),this.getWizard().areAllFieldsRegistered()?this.setOnFocusIsLostListener():this.getWizard().addListener(QO.EVENT_AFTER_FIELDS_REGISTER,(function(){return e.setOnFocusIsLostListener()}))}},{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"setIsMaskedValue",value:function(e){this._isMaskedValue=e}},{key:"isMaskedValue",value:function(){return this._isMaskedValue}},{key:"hasToShowValueMasked",value:function(){return this._hasToShowValueMasked}},{key:"getMaskedField",value:function(){return pjQuery("#"+this._fieldId+this._suffixMaskedField)}},{key:"getMaskedFieldElement",value:function(){return this.getMaskedField().get(0)}},{key:"unmaskField",value:function(){this._encryptedFieldHandler.unmaskField()}},{key:"maskField",value:function(){this._encryptedFieldHandler.maskField()}},{key:"setOnFocusIsLostListener",value:function(){this._encryptedFieldHandler.setOnFocusIsLostListener()}},{key:"getSuffixMaskedField",value:function(){return this._suffixMaskedField}},{key:"onClickInputListener",value:function(e){this._encryptedFieldHandler.onClickInputListener(e)}},{key:"onFocusIsLost",value:function(e){this._encryptedFieldHandler.onFocusIsLost(e)}},{key:"getField",value:function(){return this._getFieldElement()}},{key:"getFieldElement",value:function(){return this.getField().get(0)}},{key:"getFocusableInput",value:function(){return this.getFieldElement()}},{key:"shouldBeMasked",value:function(e){return e!==this.getFocusableInput()}},{key:"isMaskedWithoutPermissionsRole",value:function(){return this._maskedWithoutPermissionsRole}},{key:"setIsMaskedWithoutPermissionsRole",value:function(e){this._maskedWithoutPermissionsRole=e}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"updateMaskedValue",value:function(){var e=this.getFieldElement().value;if(this._lastUnmaskedValue!==e){var t;this._lastUnmaskedValue=e;var n="";if(0===this._amountOfCharactersUnmasked)t=i.FULL_MASKED_TEXT;else if(this._maskedType===i.ENCRYPTION_MASK_TYPE_POSITION_FIRST){var r=Math.min(this._amountOfCharactersUnmasked,e.length);t=(n=e.substring(0,r))+i.FULL_MASKED_TEXT}else{var o=Math.max(e.length-this._amountOfCharactersUnmasked,0);n=e.substring(o),t=i.FULL_MASKED_TEXT+n}this.getMaskedFieldElement().value=t,this._updateMaskedValueAriaLabel(n)}}},{key:"_updateMaskedValueAriaLabel",value:function(e){var t=document.getElementById(this.getFieldId()+"-aria-description");t&&this._accessibleDescriptionText&&0!==this._amountOfCharactersUnmasked&&(t.textContent=this._accessibleDescriptionText.replace("{$unmaskedCharacters}",e))}}])&&Hl(t.prototype,n),r&&Hl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yo);function nc(){var e=this;this.getMaskedField().on("keypress",(function(t){t.keyCode!==tc.KEY_CODE_ENTER&&t.keyCode!==tc.KEY_CODE_SPACE||(e._encryptedFieldHandler.onClickInputListener(t),e.getFieldElement().select()),t.preventDefault()})),this.getMaskedField().on("paste",(function(e){return e.preventDefault()}))}$l(tc,"TYPE","EncryptedTextField"),$l(tc,"ENCRYPTION_MASK_TYPE_POSITION_FIRST",2),$l(tc,"ENCRYPTION_MASK_TYPE_POSITION_LAST",1),$l(tc,"FULL_MASKED_TEXT","*".repeat(8)),tc.KEY_CODE_ENTER=13,tc.KEY_CODE_SPACE=32;const rc=tc;function oc(e){return oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oc(e)}function ic(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cc(r.key),r)}}function ac(e,t){return ac=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ac(e,t)}function uc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lc(e);if(t){var o=lc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===oc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function lc(e){return lc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lc(e)}function cc(e){var t=function(e,t){if("object"!==oc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==oc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===oc(t)?t:String(t)}var sc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ac(e,t)}(i,e);var t,n,r,o=uc(i);function i(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),!e||0===e.length)throw new Error("invalidValue: value must be a valid input files object");return t._value=e,t}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._value[0].name}},{key:"getValue",value:function(){return this._value[0]}}])&&ic(t.prototype,n),r&&ic(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=cc(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(sc,"TYPE","FieldFileValue");const fc=sc;function pc(e){return pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pc(e)}function dc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bc(r.key),r)}}function yc(e,t){return yc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yc(e,t)}function hc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vc(e);if(t){var o=vc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===pc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function vc(e){return vc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vc(e)}function bc(e){var t=function(e,t){if("object"!==pc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==pc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===pc(t)?t:String(t)}var mc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yc(e,t)}(i,e);var t,n,r,o=hc(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this))._fieldNumber=e,n._uploadedFileName=t,n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this._uploadedFileName}},{key:"getValue",value:function(){return this._fieldNumber}}])&&dc(t.prototype,n),r&&dc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=bc(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(mc,"TYPE","FieldFileUploadedValue");const gc=mc;function _c(e){return _c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_c(e)}function wc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sc(r.key),r)}}function Sc(e){var t=function(e,t){if("object"!==_c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_c(t)?t:String(t)}var Oc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t}var t,n,r;return t=e,(n=[{key:"cleanAll",value:function(){this.emptyFileInput(),this.removeUploadedFileInfo(),this.removeHiddenFileNameForScreenReader(),this.cleanExternalFileInfo()}},{key:"cleanExternalFileInfo",value:function(){this._cleanGoogleDriveFileInfo(),this._cleanDropboxFileInfo()}},{key:"_cleanGoogleDriveFileInfo",value:function(){this._emptyInputValueIfItExists("#driveFileName_"+this._fieldId),this._emptyInputValueIfItExists("#driveFileSize_"+this._fieldId),this._emptyInputValueIfItExists("#driveFileId_"+this._fieldId),this._emptyInputValueIfItExists("#driveAccessToken_"+this._fieldId),this._removeElementIfItExists("#fileInput_"+this._fieldId+" .drivePickerUploadFile")}},{key:"_cleanDropboxFileInfo",value:function(){this._emptyInputValueIfItExists("#dropboxFileName_"+this._fieldId),this._emptyInputValueIfItExists("#dropboxLink_"+this._fieldId),this._emptyInputValueIfItExists("#dropboxFileSize_"+this._fieldId),this._removeElementIfItExists("#dropboxInfo_"+this._fieldId),this._removeElementIfItExists("#dropboxRemove_"+this._fieldId)}},{key:"emptyFileInput",value:function(){this._emptyInputValueIfItExists('input[name="file_'+this._fieldId+'"]')}},{key:"removeUploadedFileInfo",value:function(){this._removeElementIfItExists("#fileInput_"+this._fieldId+" > .uploadedFile")}},{key:"removeHiddenFileNameForScreenReader",value:function(){this._removeElementIfItExists("#fileName-fileInput_"+this._fieldId)}},{key:"_removeElementIfItExists",value:function(e){var t=document.querySelector(e);t&&t.remove()}},{key:"_emptyInputValueIfItExists",value:function(e){var t=document.querySelector(e);t&&(t.value="")}}])&&wc(t.prototype,n),r&&wc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Pc=Oc;function Ec(e){return Ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ec(e)}function kc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jc(r.key),r)}}function jc(e){var t=function(e,t){if("object"!==Ec(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ec(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ec(t)?t:String(t)}function Tc(e,t){Ic(e,t),t.add(e)}function Fc(e,t,n){Ic(e,t),t.set(e,n)}function Ic(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Rc(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Cc(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,xc(e,t,"get"))}function Dc(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,xc(e,t,"set"),n),n}function xc(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ac=new WeakMap,Lc=new WeakMap,Nc=new WeakMap,Mc=new WeakSet,Vc=new WeakSet,Bc=new WeakSet,Uc=new WeakSet,Wc=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Tc(this,Uc),Tc(this,Bc),Tc(this,Vc),Tc(this,Mc),Fc(this,Ac,{writable:!0,value:void 0}),Fc(this,Lc,{writable:!0,value:void 0}),Fc(this,Nc,{writable:!0,value:void 0}),Dc(this,Ac,t),Dc(this,Lc,n),Dc(this,Nc,r),this._clickEventListener=o,this._fileInfoCleaner=new Pc(Cc(this,Ac))}var t,n,r;return t=e,(n=[{key:"addRemoveButton",value:function(e){e=void 0===e?"":e;var t=Rc(this,Mc,Yc).call(this);t.innerText=e,t.appendChild(Rc(this,Vc,Qc).call(this,e)),this.addClickEventListenerToRemoveButton()}},{key:"isThereRemoveButton",value:function(){return Boolean(document.getElementById("removeFileButton_"+Cc(this,Ac)))}},{key:"addClickEventListenerToRemoveButton",value:function(){var e=this;this.isThereRemoveButton()&&document.getElementById("removeFileButton_"+Cc(this,Ac)).addEventListener("click",(function(t){Rc(e,Bc,Hc).call(e),Rc(e,Uc,zc).call(e),e._fileInfoCleaner.removeUploadedFileInfo(),e._fileInfoCleaner.removeHiddenFileNameForScreenReader(),e._clickEventListener(),t.preventDefault()}))}}])&&kc(t.prototype,n),r&&kc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Yc(){var e=document.getElementById("fileInput_"+Cc(this,Ac)),t=document.querySelector("#fileInput_"+Cc(this,Ac)+" > .uploadedFile");return t||((t=document.createElement("div")).className="uploadedFile",e.appendChild(t)),t}function Qc(e){var t=document.createElement("button");return t.setAttribute("id","removeFileButton_"+Cc(this,Ac)),t.setAttribute("type","button"),t.setAttribute("class","removeFile"),t.setAttribute("aria-label",Cc(this,Nc).replace("{$fileName}",e)),t.innerText=Cc(this,Lc),t}function Hc(){var e=document.getElementById("fileInput_"+Cc(this,Ac));if(e){var t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name","removedFile_"+Cc(this,Ac)),e.append(t)}}function zc(){var e=document.querySelector('input[name="file_'+Cc(this,Ac)+'_fileNumber"]');e&&(e.value="")}const qc=Wc;n(29254);function Jc(e){return Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jc(e)}function Gc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zc(r.key),r)}}function Zc(e){var t=function(e,t){if("object"!==Jc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Jc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Jc(t)?t:String(t)}var Kc=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._allowedFileExtensions=[],this._hasPhotoPreview=!1,this._removeText="",this._removeFileText=""}var t,n,r;return t=e,n=[{key:"allowedFileExtensions",get:function(){return this._allowedFileExtensions},set:function(e){this._allowedFileExtensions=e||[]}},{key:"hasPhotoPreview",get:function(){return this._hasPhotoPreview},set:function(e){this._hasPhotoPreview=Boolean(e)}},{key:"removeText",get:function(){return this._removeText},set:function(e){this._removeText=e||""}},{key:"removeFileText",get:function(){return this._removeFileText},set:function(e){this._removeFileText=e||""}}],n&&Gc(t.prototype,n),r&&Gc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const $c=Kc;function Xc(e){return Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xc(e)}function es(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ts(r.key),r)}}function ts(e){var t=function(e,t){if("object"!==Xc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xc(t)?t:String(t)}var ns=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._configuration=n||new $c,this._fileInfoCleaner=new Pc(t)}var t,n,r;return t=e,(n=[{key:"onFileSelected",value:function(e){throw Error("onFileSelected() method unimplemented")}},{key:"_buildRemoveExternalUploadedFileButton",value:function(e){var t=this,n=document.createElement("button");return n.type="button",n.innerText=this._configuration.removeText,n.setAttribute("aria-label",this._configuration.removeFileText.replace("{$fileName}",e)),n.addEventListener("click",(function(e){e.preventDefault(),t._removeExternalUploadedFile()})),n}},{key:"_removeExternalUploadedFile",value:function(){!0===this._configuration.hasPhotoPreview?Fields.getField(this._fieldId)._resetPreviewAndFileLoaders():this._fileInfoCleaner.cleanExternalFileInfo()}}])&&es(t.prototype,n),r&&es(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const rs=ns;function os(e){return os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},os(e)}function is(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,as(r.key),r)}}function as(e){var t=function(e,t){if("object"!==os(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==os(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===os(t)?t:String(t)}function us(){return us="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ss(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},us.apply(this,arguments)}function ls(e,t){return ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ls(e,t)}function cs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ss(e);if(t){var o=ss(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===os(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ss(e){return ss=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ss(e)}var fs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ls(e,t)}(i,e);var t,n,r,o=cs(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"onFileSelected",value:function(e){if(e){var t=this._getPhotoFieldWithPreview();this._fileInfoCleaner.cleanAll(),this._setDropboxFileNameValue(e.name),this._setDropboxFileLinkValue(e.link),this._setDropboxFileSizeValue(e.bytes),this._buildFileNameSpanElement(e.name);var n=this._buildRemoveExternalUploadedFileButton(e.name),r=this._getDropboxButton();r&&r.before(n),t&&(t._setPreview(e.link),t._onPhotoFileInputNewPhotoSelected())}}},{key:"_buildRemoveExternalUploadedFileButton",value:function(e){var t=us(ss(i.prototype),"_buildRemoveExternalUploadedFileButton",this).call(this,e);return t.id="dropboxRemove_"+this._fieldId,t}},{key:"_getPhotoFieldWithPreview",value:function(){return!0!==this._hasPhotoPreview?null:G.getField(this._fieldId)}},{key:"_setDropboxFileNameValue",value:function(e){var t=document.getElementById("dropboxFileName_"+this._fieldId);t&&(t.value=e)}},{key:"_setDropboxFileSizeValue",value:function(e){var t=document.getElementById("dropboxFileSize_"+this._fieldId);t&&(t.value=e)}},{key:"_setDropboxFileLinkValue",value:function(e){var t=document.getElementById("dropboxLink_"+this._fieldId);t&&(t.value=e)}},{key:"_buildFileNameSpanElement",value:function(e){var t=document.createElement("span"),n=document.createTextNode(e);t.id="dropboxInfo_"+this._fieldId,t.appendChild(n);var r=this._getDropboxButton();r&&r.before(t)}},{key:"_getDropboxButton",value:function(){var e=document.getElementById("fileInput_"+this._fieldId),t=e?e.getElementsByClassName("dropbox-dropin-btn"):[];return t&&t.length>0?t[0]:null}}],n&&is(t.prototype,n),r&&is(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(rs);const ps=fs;function ds(e){return ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ds(e)}function ys(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_s(r.key),r)}}function hs(){return hs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ms(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},hs.apply(this,arguments)}function vs(e,t){return vs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vs(e,t)}function bs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ms(e);if(t){var o=ms(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ds(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ms(e){return ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ms(e)}function gs(e,t,n){return(t=_s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _s(e){var t=function(e,t){if("object"!==ds(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ds(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ds(t)?t:String(t)}var ws=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vs(e,t)}(i,e);var t,n,r,o=bs(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"onFileSelected",value:function(e){hs(ms(i.prototype),"onFileSelected",this).call(this,{name:i.FAKE_FILE_NAME,link:i.FAKE_FILE_LINK,bytes:i.FAKE_FILE_SIZE})}}])&&ys(t.prototype,n),r&&ys(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ps);gs(ws,"FAKE_FILE_LINK","https://dl.dropboxusercontent.com/fakeLink"),gs(ws,"FAKE_FILE_NAME","dropboxFile.txt"),gs(ws,"FAKE_FILE_SIZE","1");const Ss=ws;var Os=n(24996);function Ps(e){return Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ps(e)}function Es(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ks(r.key),r)}}function ks(e){var t=function(e,t){if("object"!==Ps(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ps(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ps(t)?t:String(t)}var js=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._configuration=n,this._useMocks=r}var t,n,r;return t=e,(n=[{key:"load",value:function(){var e=document.getElementById("fileInput_"+this._fieldId);if(this._isDropboxApiAvailable()&&e){var t=this._useMocks?new Ss(this._fieldId,this._configuration):new ps(this._fieldId,this._configuration),n={success:function(e){return t.onFileSelected(e&&e.length>0?e[0]:null)},linkType:"direct",extensions:this._configuration.allowedFileExtensions};e.appendChild(this._buildChooseFileButton(n))}}},{key:"_buildChooseFileButton",value:function(e){return this._useMocks?this._mockDropboxButton(e):Dropbox.createChooseButton(e)}},{key:"_mockDropboxButton",value:function(e){var t=document.createElement("a");return t.innerText="Dropbox",t.setAttribute("href","#"),t.className=" dropbox-dropin-btn dropbox-dropin-default",t.addEventListener("click",(function(){return e.success()})),t}},{key:"_isDropboxApiAvailable",value:function(){var e=new Os.Z;return this._useMocks?!!e.get("enableDropboxDummyApi"):"undefined"!=typeof Dropbox}}])&&Es(t.prototype,n),r&&Es(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Ts=js;function Fs(e){return Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fs(e)}function Is(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rs(r.key),r)}}function Rs(e){var t=function(e,t){if("object"!==Fs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Fs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Fs(t)?t:String(t)}function Cs(e,t){return Cs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cs(e,t)}function Ds(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xs(e);if(t){var o=xs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Fs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function xs(e){return xs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xs(e)}var As=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cs(e,t)}(i,e);var t,n,r,o=Ds(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this))._chooseFromDriveText="",e._appKey="",e._clientId="",e._exportType="",e}return t=i,n=[{key:"chooseFromDriveText",get:function(){return this._chooseFromDriveText},set:function(e){this._chooseFromDriveText=e||""}},{key:"appKey",get:function(){return this._appKey},set:function(e){this._appKey=e||""}},{key:"clientId",get:function(){return this._clientId},set:function(e){this._clientId=e||""}},{key:"exportType",get:function(){return this._exportType},set:function(e){this._exportType=e||""}}],n&&Is(t.prototype,n),r&&Is(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}($c);const Ls=As;function Ns(e){return Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ns(e)}function Ms(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ws(r.key),r)}}function Vs(e,t){return Vs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vs(e,t)}function Bs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Us(e);if(t){var o=Us(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ns(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Us(e){return Us=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Us(e)}function Ws(e){var t=function(e,t){if("object"!==Ns(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ns(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ns(t)?t:String(t)}var Ys=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vs(e,t)}(i,e);var t,n,r,o=Bs(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._shouldHideFileInputByDefault=n.getSetting("shouldHideFileInputByDefault"),n._maxFileSize=n.getSetting("maxFileSize"),n._errorToShowIfSizeExceeded=n.getSetting("errorToShowIfSizeExceeded"),n._initRemoveButtonBuilder(),n._addDropboxExternalChooser(),n._addGoogleDriveExternalChooser(),n._fileInfoCleaner=new Pc(e),n._addReuseUploadedFilesWidget(),n}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFileNumberInput();if(e&&e.value)return new gc(parseInt(e.value,10),this._getUploadedFileName());var t=this._getCurrentFiles();return t&&0!==t.length?new fc(t):new x}},{key:"getValueForCondition",value:function(){return this._getFieldElement().val()||this._getUploadedFileName()}},{key:"addRemoveButton",value:function(){var e=document.getElementById(this.getFieldId());e&&e.files.length&&this._removeButtonBuilder&&this._removeButtonBuilder.addRemoveButton(e.files[0].name)}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_onFileChanged",value:function(){if(this._isFileOverSized())alert(this._errorToShowIfSizeExceeded),this._getFieldElement().val("");else{var e=this._getFileNumberInput();e&&(e.value="");var t=this.getValue();t.isEmpty()?this._removeHiddenFileNameForScreenReader():(this._fileInfoCleaner.removeUploadedFileInfo(),this._fileInfoCleaner.removeHiddenFileNameForScreenReader(),this._fileInfoCleaner.cleanExternalFileInfo(),this._addHiddenFileNameForScreenReader(t))}}},{key:"_isFileOverSized",value:function(){var e=0,t=this._getCurrentFiles();return t&&t.length>0&&(e=t[0].size),e>0&&e>this._maxFileSize}},{key:"_attachOnChangeListener",value:function(){var e=this;if(!this._shouldHideFileInputByDefault){var t=document.getElementById(this._fieldId);t&&t.addEventListener("change",(function(){e._onFileChanged(),G.onFieldValueChange(e.getFieldId())}))}}},{key:"_getCurrentFiles",value:function(){return this._getFieldElement().prop("files")}},{key:"_getFileNumberInput",value:function(){return document.querySelector('input[name="file_'+this._fieldId+'_fileNumber"]')}},{key:"_getUploadedFileName",value:function(){var e=this._getUploadedFileDiv();return e&&e.childNodes&&e.childNodes.length>0?e.childNodes[0].textContent:""}},{key:"_getUploadedFileDiv",value:function(){return document.querySelector("#fileInput_"+this._fieldId+" > .uploadedFile")}},{key:"_addHiddenFileNameForScreenReader",value:function(e){this._removeHiddenFileNameForScreenReader();var t=document.getElementById(this.getFieldId()+"-label");if(t){var n=document.createElement("span");n.setAttribute("id","fileName-fileInput_"+this.getFieldId()),n.setAttribute("class","screenReaderVisibility"),n.innerText=e.toString(),t.append(n)}}},{key:"_removeHiddenFileNameForScreenReader",value:function(){var e=document.getElementById("fileName-fileInput_"+this.getFieldId());e&&e.remove()}},{key:"_preventOpeningFileUploadWindow",value:function(){var e=document.getElementById(this._fieldId);e&&(e.onclick=function(e){e.preventDefault(),e.stopPropagation()})}},{key:"_getRemoveButtonClickEventListener",value:function(){return function(){}}},{key:"_initRemoveButtonBuilder",value:function(){this.getSetting("hasRemoveButton")&&(this._removeButtonBuilder=new qc(this.getFieldId(),this.getSetting("removeButtonText"),this.getSetting("removeButtonAriaText"),this._getRemoveButtonClickEventListener()),this._removeButtonBuilder.addClickEventListenerToRemoveButton())}},{key:"_addDropboxExternalChooser",value:function(){if(this.getSetting("dropbox.isEnabled")){var e=new $c;e.allowedFileExtensions=this.getSetting("dropbox.allowedFileExtensions"),e.hasPhotoPreview=this.getSetting("hasPhotoPreviewByDefault"),e.removeText=this.getSetting("removeButtonText"),e.removeFileText=this.getSetting("removeButtonAriaText"),new Ts(this.getFieldId(),e,this.getSetting("useMocks")).load()}}},{key:"_addGoogleDriveExternalChooser",value:function(){if(this.getSetting("googleDrive.isEnabled")){var e=new Ls;e.appKey=this.getSetting("googleDrive.appKey"),e.clientId=this.getSetting("googleDrive.clientId"),e.chooseFromDriveText=this.getSetting("googleDrive.chooseFromDriveText"),e.exportType=this.getSetting("googleDrive.exportMimeType"),e.allowedFileExtensions=this.getSetting("googleDrive.allowedFileExtensions"),e.hasPhotoPreview=this.getSetting("hasPhotoPreviewByDefault"),e.removeText=this.getSetting("removeButtonText"),e.removeFileText=this.getSetting("removeButtonAriaText"),new GoogleDriveChooserLoader(this.getFieldId(),e,this.getSetting("useMocks")).load()}}},{key:"_addReuseUploadedFilesWidget",value:function(){this.getSetting("reuseUploadedFilesWidgetAttachments")&&ReuseUploadedFilesWidget.prepareFileFieldToReuseUploadedFiles(this.getFieldId(),this.getSetting("reuseUploadedFilesWidgetDictionary"),this.getSetting("reuseUploadedFilesWidgetAttachments"))}}],n&&Ms(t.prototype,n),r&&Ms(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=Ws(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ys,"TYPE","FileField");const Qs=Ys;function Hs(e){return Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hs(e)}function zs(){zs=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),u=new E(o||[]);return r(a,"_invoke",{value:w(e,n,u)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function d(){}function y(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(h=b);var m=y.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(r,i,a,u){var l=s(e[r],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==Hs(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return o("throw",e,a,u)}))}u(l.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return j()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=y,r(m,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),l(m,u,"Generator"),l(m,i,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function qs(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function Js(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){qs(i,r,o,a,u,"next",e)}function u(e){qs(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Gs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xs(r.key),r)}}function Zs(e,t){return Zs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zs(e,t)}function Ks(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$s(e);if(t){var o=$s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Hs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $s(e){return $s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$s(e)}function Xs(e){var t=function(e,t){if("object"!==Hs(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Hs(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Hs(t)?t:String(t)}var ef=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zs(e,t)}(u,e);var t,n,r,o,i,a=Ks(u);function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=a.call(this,e,t))._filename=n.getSetting("filename"),n._readyToSubmit=!1,n._setActionBeforeSubmit(),n._preventOpeningFileUploadWindow(),n._initLastPdfSaved(),n._setValidationsBeforeSubmit(),n}return t=u,n=[{key:"getType",value:function(){return u.TYPE}},{key:"onBeforeSubmitAutoPartialSave",value:(i=Js(zs().mark((function e(){var t;return zs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._saveCurrentPdfFile();case 2:(t=e.sent)&&this._hasFileBeenChanged(t)&&(this._setFileValueInFileInput(t),this._lastPdfSaved=t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getPdfDocument",value:function(){var e=this._getPdfViewerApplication();return e?e.pdfDocument:null}},{key:"onPdfDocumentIsReady",value:function(){var e=this;return new Promise((function(t){if(e.getPdfDocument())return t();e._onPdfApplicationIsReady().then((function(){return e._getPdfViewerApplication().initializedPromise})).then((function(){return e._getPdfViewerApplication().pdfLoadingTask.promise})).then(t)}))}},{key:"_onPdfApplicationIsReady",value:function(){var e=this;return new Promise((function(t){if(e._getPdfViewerApplication())return t();document.addEventListener("webviewerloaded",t)}))}},{key:"_setValidationsBeforeSubmit",value:function(){var e=this;Xn.default.getInstance().addValidationBeforeSubmit((function(){return e.isValid()}),this.getFieldId())}},{key:"_buildClonedField",value:function(e){return new u(e,this.getFieldSettings())}},{key:"_setActionBeforeSubmit",value:function(){Xn.default.getInstance().addActionBeforeSubmit(this.onBeforeSubmitAutoPartialSave.bind(this),this.getFieldId())}},{key:"_saveCurrentPdfFile",value:function(){var e=this,t=this.getPdfDocument();return t?t.saveDocument().then((function(t){return e._createFileFromArrayBuffer(t)})):Promise.resolve(null)}},{key:"_getPdfViewerApplication",value:function(){if(!this._pdfViewerApplication){var e=document.getElementById(this.getFieldId()+"-iframe");this._pdfViewerApplication=e?e.contentWindow.PDFViewerApplication:null}return this._pdfViewerApplication}},{key:"_createFileFromArrayBuffer",value:function(e){var t=new Blob([e],{type:"application/pdf"});return new File([t],this._filename,{type:"application/pdf"})}},{key:"_setFileValueInFileInput",value:function(e){var t=new DataTransfer;t.items.add(e);var n=document.getElementById(this.getFieldId());n&&(n.files=t.files)}},{key:"_initLastPdfSaved",value:(o=Js(zs().mark((function e(){return zs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onPdfDocumentIsReady();case 2:return e.next=4,this._saveCurrentPdfFile();case 4:this._lastPdfSaved=e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"_hasFileBeenChanged",value:function(e){return!this._lastPdfSaved||e.size!==this._lastPdfSaved.size}}],n&&Gs(t.prototype,n),r&&Gs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(Qs);!function(e,t,n){(t=Xs(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ef,"TYPE","PdfEditor");const tf=ef;n(27207),n(73210);function nf(e){return nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(e)}function rf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,of(r.key),r)}}function of(e){var t=function(e,t){if("object"!==nf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nf(t)?t:String(t)}var af=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"registerDatasource",value:function(t,n){e.isDatasourceRegistered(t)||(e._datasources[t]=n)}},{key:"getForField",value:function(t){var n=e._getDatasource(t);if(null!==n)return n;throw new Error("tryToAccessNonRegisteredDefaultValueDatasource: "+t)}},{key:"cloneDatasourceForNewTableRow",value:function(t,n,r){var o=e.getForField(t).cloneForNewTableRow(n,r);e.registerDatasource(n,o)}},{key:"cloneDatasource",value:function(t,n){var r=e.getForField(t).clone(n);e.registerDatasource(n,r)}},{key:"_getDatasource",value:function(t){return e.isDatasourceRegistered(t)?e._datasources[t]:null}},{key:"isDatasourceRegistered",value:function(t){return t in e._datasources}}],(n=null)&&rf(t.prototype,n),r&&rf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();af._datasources={};const uf=af;function lf(e){return lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(e)}function cf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,df(r.key),r)}}function sf(e,t){return sf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sf(e,t)}function ff(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pf(e);if(t){var o=pf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===lf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function pf(e){return pf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pf(e)}function df(e){var t=function(e,t){if("object"!==lf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==lf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===lf(t)?t:String(t)}var yf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sf(e,t)}(i,e);var t,n,r,o=ff(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._hasInitialValue=n._hasValueOnLoad(),uf.isDatasourceRegistered(e)&&(n._defaultValueDatasource=uf.getForField(e),pjQuery.each(n._defaultValueDatasource.getParentDependenciesFieldsIds(),(function(t,n){V.registerFieldDependency(e,n,V.TYPE_VALUES)}))),n}return t=i,(n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Ot.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"_hasValueOnLoad",value:function(){return this.hasValue()}},{key:"_updateFieldAfterParentFieldValueChange",value:function(e){if(this.evaluateEditRestrictions(),this._defaultValueDatasource&&this._defaultValueDatasource.isParentDependentField(e))this.isVisible()?(this._updateFieldVisibilityAfterParentFieldValueChange(),this._defaultValueDatasource.fetchNewOptions([],null,null,this._getOnNewDefaultValueCallback())):(this._defaultValueDatasource.fetchNewOptions([],null,null,this._getOnNewDefaultValueCallback()),this._updateFieldVisibilityAfterParentFieldValueChange());else{var t=this._updateFieldVisibilityAfterParentFieldValueChange();this._onFieldUpdated(t)}}},{key:"_getOnNewDefaultValueCallback",value:function(){var e=this;return function(t){if(t){var n=!1;if(e._shouldUpdateDefaultValue()){var r=e.getValue();e.setValue(new Ot(t[0].name)),n=r!==e.getValue()}e._onFieldUpdated(n)}}}},{key:"_shouldUpdateDefaultValue",value:function(){return!this._hasInitialValue}}])&&cf(t.prototype,n),r&&cf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yo);!function(e,t,n){(t=df(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(yf,"TYPE","TextField");const hf=yf;function vf(e){return vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(e)}function bf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wf(r.key),r)}}function mf(e,t){return mf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mf(e,t)}function gf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_f(e);if(t){var o=_f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===vf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _f(e){return _f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_f(e)}function wf(e){var t=function(e,t){if("object"!==vf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==vf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===vf(t)?t:String(t)}var Sf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mf(e,t)}(i,e);var t,n,r,o=gf(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._languageFilename=n.getSetting("languageFilename"),n._hasTinyMCEBeingInitialized=!1,n._showImageAndFileButtons=n.getSetting("showImageAndFileButtons"),n}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Ot.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"_postRegister",value:function(){var e=this;tinymce.init({selector:"#"+e.getFieldId(),menubar:e._getMenuBar(),language:e._getLanguage(),plugins:["link lists hr help"+e._getImagePlugin(),"searchreplace visualblocks visualchars code fullscreen insertdatetime ","directionality"],toolbar:"undo redo | bold italic | alignleft aligncenter alignright | bullist numlist outdent indent | link"+e._getImagePlugin()+" | forecolor backcolor",branding:!1,convert_urls:!1,setup:function(t){t.on("init",(function(t){e._hasTinyMCEBeingInitialized=!0,e._prependLabelToTitle(),hf.prototype._postRegister.call(e)})),t.on("paste keyUp",(function(){G.onFieldValueChange(e.getFieldId())}))}})}},{key:"getValue",value:function(){var e=this._getTinyMCEContainer(),t=null;return this._hasTinyMCEBeingInitialized&&e&&(t=e.getContent({format:"text"})),t?new Ot(t):new x}},{key:"_prependLabelToTitle",value:function(){var e=this._getTinyMCEContainer();if(e){var t=e.iframeElement,n=t.getAttribute("title");n=this.getLabel()+": "+n,t.setAttribute("title",n)}}},{key:"getValueForCondition",value:function(){var e=this._getTinyMCEContainer(),t=null;return this._hasTinyMCEBeingInitialized&&e&&(t=e.getContent({format:"text"}),t=this.sanitizeValue(t)),t}},{key:"sanitizeValue",value:function(e){return(e=e.replaceAll(/(\n\n\n|\n\n)/g,"\n")).trim()}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=this._getTinyMCEContainer();if(t)return t.setContent(e.getValue());this._triggerEvent("input")}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_getTinyMCEContainer",value:function(){return tinyMCE.get(this._fieldId)}},{key:"onBeforeSubmitAutoPartialSave",value:function(){return new Promise((function(e){tinyMCE.triggerSave(),e()}))}},{key:"_attachOnChangeListener",value:function(){}},{key:"_hasValueOnLoad",value:function(){return!!this._getFieldElement().val()}},{key:"_getLanguage",value:function(){return this._languageFilename}},{key:"_getImagePlugin",value:function(){return this._showImageAndFileButtons?" image":""}},{key:"_getMenuBar",value:function(){return(this._showImageAndFileButtons?"file ":"")+"edit view insert format tools help"}}],n&&bf(t.prototype,n),r&&bf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(hf);!function(e,t,n){(t=wf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Sf,"TYPE","FormattedTextField");const Of=Sf;function Pf(e){return Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pf(e)}function Ef(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ff(r.key),r)}}function kf(e,t){return kf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kf(e,t)}function jf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tf(e);if(t){var o=Tf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Pf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Tf(e){return Tf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tf(e)}function Ff(e){var t=function(e,t){if("object"!==Pf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Pf(t)?t:String(t)}var If=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kf(e,t)}(i,e);var t,n,r,o=jf(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t)).getSetting("hasToShowFieldByField")&&(n._fieldsetStepper=n._buildFieldsetStepper()),n}return t=i,(n=[{key:"_postRegister",value:function(){this._fieldsetStepper&&this._fieldsetStepper.generate()}},{key:"_buildFieldsetStepper",value:function(){return new kr(this.getFieldId(),{nextButtonText:this.getSetting("nextButtonText"),nextButtonAriaLabel:this.getSetting("nextButtonAriaLabel"),prevButtonText:this.getSetting("prevButtonText"),prevButtonAriaLabel:this.getSetting("prevButtonAriaLabel")},this.getSetting("shouldUseBuiltinButtons"),this.getSetting("hasToHideWizardButtons"),this.getSetting("isAllowedNavigateBetweenFields"),this.getSetting("initialFieldIndex"))}},{key:"getFieldsStatus",value:function(){return this._fieldsetStepper||console.error('Method "getFieldsStatus()" is invalid. Form Field ID #'+this.getFieldId()+" is not being show field by field."),this._fieldsetStepper.getFieldsStatus()}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){return new x}},{key:"getValueForCondition",value:function(){return null}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}}])&&Ef(t.prototype,n),r&&Ef(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=Ff(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(If,"TYPE","FormField");const Rf=If;function Cf(e){return Cf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(e)}function Df(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nf(r.key),r)}}function xf(e,t){return xf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xf(e,t)}function Af(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lf(e);if(t){var o=Lf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Cf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Lf(e){return Lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lf(e)}function Nf(e){var t=function(e,t){if("object"!==Cf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Cf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Cf(t)?t:String(t)}var Mf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xf(e,t)}(i,e);var t,n,r,o=Af(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_postRegister",value:function(){}}])&&Df(t.prototype,n),r&&Df(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=Nf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Mf,"TYPE","GenericField");const Vf=Mf;function Bf(e){return Bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bf(e)}function Uf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hf(r.key),r)}}function Wf(e,t){return Wf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wf(e,t)}function Yf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qf(e);if(t){var o=Qf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Qf(e){return Qf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qf(e)}function Hf(e){var t=function(e,t){if("object"!==Bf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Bf(t)?t:String(t)}var zf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wf(e,t)}(i,e);var t,n,r,o=Yf(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._setValidationBeforeSubmit(),n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_setValidationBeforeSubmit",value:function(){var e=this;Xn.default.getInstance().addValidationBeforeSubmit((function(){return e.isValid()}),this.getFieldId())}},{key:"_getFieldLabel",value:function(){return pjQuery("#"+this.getFieldId()+"-label").text()}}])&&Uf(t.prototype,n),r&&Uf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yo);!function(e,t,n){(t=Hf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(zf,"TYPE","KeywordsField");const qf=zf;function Jf(e){return Jf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jf(e)}function Gf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,np(r.key),r)}}function Zf(){return Zf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ep(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Zf.apply(this,arguments)}function Kf(e,t){return Kf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kf(e,t)}function $f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ep(e);if(t){var o=ep(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Jf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xf(e)}(this,n)}}function Xf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ep(e){return ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ep(e)}function tp(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function np(e){var t=function(e,t){if("object"!==Jf(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Jf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Jf(t)?t:String(t)}function rp(e,t){var n=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}(e,t,"get");return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}var op=new WeakMap,ip=new WeakMap,ap=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kf(e,t)}(i,e);var t,n,r,o=$f(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),tp(Xf(n=o.call(this,e,t)),op,{writable:!0,value:"semantic-suggestions-header"}),tp(Xf(n),ip,{writable:!0,value:"semantic-suggestions-header--noresults"}),n.delayBeforeRequestMs=n.getSetting("delayBeforeRequestMs"),n.minimumLengthToSearch=n.getSetting("minimumLengthToSearch"),n.isSemanticSuggestionsEnabled=n.getSetting("isSemanticSuggestionsEnabled"),n.translations=n.getSetting("translations"),n._datasource=bn.getForField(e),n}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"_postRegister",value:function(){this._createWidget(),Zf(ep(i.prototype),"_postRegister",this).call(this)}},{key:"_createWidget",value:function(){var e=this;pjQuery("#"+this._fieldId).autocomplete({minLength:this.minimumLengthToSearch,delay:this.delayBeforeRequestMs,source:function(t,n){e._datasource._fetchOptions(e._datasource.buildRequestDataFromParams(1,10,t.term,!1,[],null),(function(t){e.isSemanticSuggestionsEnabled&&!e._isHeaderItemAlreadyPresent(t)&&t.unshift(e._buildHeaderItem(t)),n(t)}))},select:function(t,n){if(9===t.which)return null;setTimeout((function(){e.isSemanticSuggestionsEnabled?(e._getFieldElement().val(n.item.name),e.focus()):window.location.href=n.item.detailUrl}),0)},create:function(){pjQuery(this).data("ui-autocomplete")._renderItem=function(t,n){if(t.attr("id",e._fieldId+"-live-search-results").attr("role","listbox").addClass("live-search"),n)return e._buildItemTemplate(n).appendTo(t)},pjQuery(this).data("ui-autocomplete")._renderMenu=function(t,n){var r=this;n.forEach((function(e){return r._renderItemData(t,e)})),setTimeout((function(){n.length>1&&t.find(".".concat(rp(e,op))).removeClass("ui-menu-item")}),0)}},focus:function(t,n){e._resetActiveItem();var r=e._fieldId+"-"+n.item.id;if(document.getElementById(r).classList.contains(rp(e,ip)))return!1;pjQuery("#"+e._fieldId).attr("aria-activedescendant",r),pjQuery("#"+r).addClass("live-search__item_active")},open:function(t,n){pjQuery("#"+e._fieldId).addClass("live-search--open").attr("aria-expanded","true")},close:function(t,n){e._resetActiveItem(),pjQuery("#"+e._fieldId).removeClass("live-search--open").attr("aria-expanded","false")}})}},{key:"_buildHeaderItem",value:function(e){var t=0===e.length;return{name:t?this.translations.semanticNoResults:this.translations.semanticResults,extraCssClasses:rp(this,op)+(t?" "+rp(this,ip):"")}}},{key:"_isHeaderItemAlreadyPresent",value:function(e){return e.length>0&&e[0].name===this.translations.semanticResults}},{key:"_buildItemTemplate",value:function(e){var t=this._fieldId+"-"+e.id,n="live-search__item"+(e.extraCssClasses?" "+e.extraCssClasses:""),r=e.name||"",o=this.getValue().getValue(),i=r.toLowerCase().indexOf(o.toLowerCase()),a=r,u=null;if(e.fieldValues){var l=[];for(var c in e.fieldValues)e.fieldValues.hasOwnProperty(c)&&l.push(e.fieldValues[c]);if(l.length>0){u=pjQuery("<div/>",{class:"live-search__item__details",tabindex:-1});for(var s=0;s<l.length;++s)u.append(pjQuery("<span/>",{class:"live-search__item__details__"+(s+1),text:l[s],"aria-hidden":!0}))}}i>=0&&(a=pjQuery("<span>"+r.substring(0,i)+'<span class="live-search__item__title__match">'+r.substring(i,i+o.length)+"</span>"+r.substring(i+o.length)+"</span>"));var f=pjQuery("<div/>",{class:"live-search__item__title",tabindex:-1}).append(a);return pjQuery("<li/>",{class:n,role:"option",id:t}).append(f).append(u)}},{key:"_resetActiveItem",value:function(){document.getElementById(this._fieldId+"-live-search-results").getElementsByTagName("li").forEach((function(e){e.classList.contains("live-search__item_active")&&e.classList.remove("live-search__item_active")})),pjQuery("#"+this._fieldId).attr("aria-activedescendant","")}}],n&&Gf(t.prototype,n),r&&Gf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(qf);!function(e,t,n){(t=np(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ap,"TYPE","InstantSearchField");const up=ap;function lp(e){return lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lp(e)}function cp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dp(r.key),r)}}function sp(e,t){return sp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sp(e,t)}function fp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pp(e);if(t){var o=pp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===lp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function pp(e){return pp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pp(e)}function dp(e){var t=function(e,t){if("object"!==lp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==lp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===lp(t)?t:String(t)}var yp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sp(e,t)}(i,e);var t,n,r,o=fp(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"getValueForCondition",value:function(){return JSON.parse(this._getFieldElement().val())}}])&&cp(t.prototype,n),r&&cp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yo);!function(e,t,n){(t=dp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(yp,"TYPE","JobVariableField");const hp=yp;function vp(e){return vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(e)}function bp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mp(r.key),r)}}function mp(e){var t=function(e,t){if("object"!==vp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==vp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===vp(t)?t:String(t)}function gp(e,t){return gp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gp(e,t)}function _p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wp(e);if(t){var o=wp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===vp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function wp(e){return wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wp(e)}var Sp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gp(e,t)}(i,e);var t,n,r,o=_p(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._requiredFieldText=n.getSetting("requiredFieldText"),n._radiusDefaultOption=n.getSetting("radiusDefaultOption"),n._setValidationBeforeSubmit(),n}return t=i,n=[{key:"getValueForCondition",value:function(){var e=document.getElementById(this.getRadiusId());return["SELECT"===e.tagName?e.selectedOptions[0].text:e.value]}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),G.setFieldValue(this.getRadiusId(),e.getRadius())}},{key:"_postRegister",value:function(){Ro.prototype._postRegister.call(this),G.getField(this.getSearchFieldId()).addListener("selectedAutocompleteValueEvent",this.caller("onSelectedSearchField"))}},{key:"onSelectedSearchField",value:function(){var e=G.getField(this.getRadiusId());e.getValue().isEmpty()&&e.setValue(new Jt(this._radiusDefaultOption))}},{key:"_getDepedentFieldsMetadata",value:function(){return[this._createFieldMetadata(this.getRadiusId(),this._getRadiusSuffix())]}},{key:"getRadiusId",value:function(){return this.getFieldId()+this._getRadiusSuffix()}},{key:"_getRadiusSuffix",value:function(){return this._getFieldSuffix()+"_radius"}},{key:"_getFieldSuffix",value:function(){throw new Error("notImplementedError")}},{key:"getSearchFieldId",value:function(){return""}},{key:"_setValidationBeforeSubmit",value:function(){var e=this;Xn.default.getInstance().addValidationBeforeSubmit((function(){return e._validateValuesAndAddValidationErrorIfNeeded()}),this.getFieldId())}},{key:"_validateValuesAndAddValidationErrorIfNeeded",value:function(){var e=G.getField(this.getSearchFieldId()),t=G.getField(this.getRadiusId()),n=!0;return this._isValidSearchField()?e._removeValidationErrorIfNeeded():(e._addValidationErrorIfNeeded(this._requiredFieldText),n=!1),this._isValidRadius()?t._removeValidationErrorIfNeeded():(t._addValidationErrorIfNeeded(this._requiredFieldText),n=!1),n}},{key:"_isValidSearchField",value:function(){var e=G.getFieldValue(this.getSearchFieldId()),t=G.getFieldValue(this.getRadiusId());return!(e.isEmpty()&&!t.isEmpty())}},{key:"_isValidRadius",value:function(){var e=G.getFieldValue(this.getSearchFieldId()),t=G.getFieldValue(this.getRadiusId());return!(!e.isEmpty()&&t.isEmpty())}}],n&&bp(t.prototype,n),r&&bp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ro);const Op=Sp;function Pp(e){return Pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(e)}function Ep(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kp(r.key),r)}}function kp(e){var t=function(e,t){if("object"!==Pp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Pp(t)?t:String(t)}function jp(e,t){return jp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jp(e,t)}function Tp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fp(e);if(t){var o=Fp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Pp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fp(e){return Fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fp(e)}var Ip=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jp(e,t)}(i,e);var t,n,r,o=Tp(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this))._setRadius(e),t}return t=i,(n=[{key:"getRadius",value:function(){return this._radius}},{key:"_setRadius",value:function(e){O.assertIsValid(e),this._radius=e}}])&&Ep(t.prototype,n),r&&Ep(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);const Rp=Ip;function Cp(e){return Cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(e)}function Dp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Np(r.key),r)}}function xp(e,t){return xp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xp(e,t)}function Ap(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lp(e);if(t){var o=Lp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Cp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Lp(e){return Lp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lp(e)}function Np(e){var t=function(e,t){if("object"!==Cp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Cp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Cp(t)?t:String(t)}var Mp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xp(e,t)}(i,e);var t,n,r,o=Ap(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t))._setPlace(e),n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return JSON.stringify({place:this._place.toString(),radius:this._radius.toString()})}},{key:"getPlace",value:function(){return this._place}},{key:"_setPlace",value:function(e){O.assertIsValid(e),this._place=e}}])&&Dp(t.prototype,n),r&&Dp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Rp);!function(e,t,n){(t=Np(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Mp,"TYPE","FieldLocationDistanceValue");const Vp=Mp;function Bp(e){return Bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp(e)}function Up(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zp(r.key),r)}}function Wp(){return Wp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hp(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Wp.apply(this,arguments)}function Yp(e,t){return Yp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yp(e,t)}function Qp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Hp(e);if(t){var o=Hp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Hp(e){return Hp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hp(e)}function zp(e){var t=function(e,t){if("object"!==Bp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Bp(t)?t:String(t)}var qp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yp(e,t)}(i,e);var t,n,r,o=Qp(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._coordinates=n.getSetting("coordinates"),n._placeAriaLabel=n.getSetting("placeAriaLabel"),n._includeOptionGetLocationFromBrowser=n.getSetting("includeOptionGetLocationFromBrowser"),n._currentLocationText=n.getSetting("currentLocationText"),n._useMocks=n.getSetting("useMocks"),n}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Vp.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=G.getFieldValue(this._getPlaceId()),t=G.getFieldValue(this.getRadiusId());return e.isEmpty()||t.isEmpty()?new x:new Vp(e,t)}},{key:"getValueForCondition",value:function(){return[document.getElementById(this._getPlaceId()).selectedOptions[0].text].concat(Wp(Hp(i.prototype),"getValueForCondition",this).call(this))}},{key:"setValue",value:function(e){Wp(Hp(i.prototype),"setValue",this).call(this,e),G.setFieldValue(this._getPlaceId(),e.getPlace())}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_postRegister",value:function(){var e=this;Wp(Hp(i.prototype),"_postRegister",this).call(this),this._createLocationFromBrowserLinkIfNeeded(),this._createHiddenCoordinatesInput(),document.getElementById(this._getPlaceId()).onchange=function(){var t=bn.getForField(e._getPlaceId()),n=G.getFieldValue(e._getPlaceId());document.getElementById(e._getCoordinatesInputId()).value=n.getType()!==x.TYPE?JSON.stringify(t.getOptionLatAndLonById(n.getOptionId())):null},this._replaceAriaLabelledByAttribute()}},{key:"_createHiddenCoordinatesInput",value:function(){var e=document.createElement("input");e.setAttribute("id",this._getCoordinatesInputId()),e.setAttribute("name",this._getCoordinatesInputId()),e.setAttribute("class","coordinates"),e.setAttribute("hidden",!0),e.value=this._coordinates,document.getElementById(this.getFieldId()).append(e)}},{key:"_createLocationFromBrowserLinkIfNeeded",value:function(){var e;if(this._includeOptionGetLocationFromBrowser){var t=document.createElement("span");t.setAttribute("class","useMyCurrentLocation__icon"),t.setAttribute("aria-hidden","true");var n=document.createElement("span");n.setAttribute("class","useMyCurrentLocation__text"),n.innerText=this.getSetting("locationLinkText");var r=document.createElement("a");r.setAttribute("href","#"),r.addEventListener("click",(function(e){return e.preventDefault()})),r.setAttribute("role","button"),r.setAttribute("class","useMyCurrentLocation"),r.appendChild(t),r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","holder holder--useMyCurrentLocation"),o.appendChild(r),this._attachLocationFromBrowserEvent(r),null===(e=document.getElementById(this._getPlaceId()))||void 0===e||e.parentElement.append(o)}}},{key:"_attachLocationFromBrowserEvent",value:function(e){var t=this;e.onclick=function(){t._useMocks?t._mockGeolocation():navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){return t._setCurrentLocation(e)}))}}},{key:"_setCurrentLocation",value:function(e){var t=e.coords.latitude,n=e.coords.longitude;document.getElementById(this._getCoordinatesInputId()).value=JSON.stringify([t,n]),this._addCurrentLocationOptionToPlaceSubfield(),this._setCurrentLocationToPlaceSubfield(),this.onSelectedSearchField()}},{key:"_addCurrentLocationOptionToPlaceSubfield",value:function(){this._removeAllOptions();var e=new Option(this._currentLocationText,this._currentLocationText,!1,!1);document.getElementById(this._getPlaceId()).append(e)}},{key:"_setCurrentLocationToPlaceSubfield",value:function(){document.getElementById(this._getPlaceId()).value=this._currentLocationText;var e=document.getElementById("select2-"+this._getPlaceId()+"-container");e.innerText=this._currentLocationText,e.title=this._currentLocationText}},{key:"_replaceAriaLabelledByAttribute",value:function(){var e=document.getElementsByClassName("select2Container"+this._getPlaceId())[0];e&&(e.removeAttribute("aria-labelledby"),e.setAttribute("aria-label",this._placeAriaLabel))}},{key:"_getDepedentFieldsMetadata",value:function(){return[this._createFieldMetadata(this._getPlaceId(),this._getPlaceSuffix())].concat(Wp(Hp(i.prototype),"_getDepedentFieldsMetadata",this).call(this))}},{key:"_getPlaceId",value:function(){return this.getFieldId()+this._getPlaceSuffix()}},{key:"_getPlaceSuffix",value:function(){return this._getFieldSuffix()+"_place"}},{key:"getSearchFieldId",value:function(){return this._getPlaceId()}},{key:"_getCoordinatesInputId",value:function(){return this.getFieldId()+this._getFieldSuffix()+"_coordinates"}},{key:"_getFieldSuffix",value:function(){return"_location"}},{key:"_mockGeolocation",value:function(){this._setCurrentLocation({coords:{latitude:25.987314,longitude:-80.23227}})}},{key:"_removeAllOptions",value:function(){pjQuery("#"+this._getPlaceId()).find("option:gt(0)").remove()}}],n&&Up(t.prototype,n),r&&Up(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Op);!function(e,t,n){(t=zp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(qp,"TYPE","LocationDistanceSearchField");const Jp=qp;function Gp(e){return Gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gp(e)}function Zp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ed(r.key),r)}}function Kp(e,t){return Kp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kp(e,t)}function $p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xp(e);if(t){var o=Xp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Gp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Xp(e){return Xp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xp(e)}function ed(e){var t=function(e,t){if("object"!==Gp(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Gp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Gp(t)?t:String(t)}var td=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kp(e,t)}(i,e);var t,n,r,o=$p(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._setCountry(e),r._setState(t),r._setCity(n),r}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return JSON.stringify({country:this._country.toString(),state:this._state.toString(),city:this._city.toString()})}},{key:"getCountry",value:function(){return this._country}},{key:"getState",value:function(){return this._state}},{key:"getCity",value:function(){return this._city}},{key:"_setCountry",value:function(e){O.assertIsValid(e),this._country=e}},{key:"_setState",value:function(e){O.assertIsValid(e),this._state=e}},{key:"_setCity",value:function(e){O.assertIsValid(e),this._city=e}}],n&&Zp(t.prototype,n),r&&Zp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=ed(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(td,"TYPE","FieldLocationValue");const nd=td;function rd(e){return rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rd(e)}function od(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,id(r.key),r)}}function id(e){var t=function(e,t){if("object"!==rd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==rd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===rd(t)?t:String(t)}var ad=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._stateFieldId=t,this._stateFieldPlaceholderText=n,this._stateFieldNotRequiredText=r,this._datasource=o}var t,n,r;return t=e,n=[{key:"attachOnCountryChangeHandler",value:function(e,t){var n=this,r=document.getElementById(e),o=document.getElementById(this._stateFieldId);null!==o&&(this._hasElementValue(o)||this._resetStateInputToNotRequiredState(this._stateFieldId),null!==r?(r.onchange=function(){n._updateStateByCountry(r.value)},this._hasElementValue(r)&&!this._hasCountryValueWithoutState(r,o)||this._updateStateByCountry(this._valueIsValid(r.value)?r.value:r.getAttribute("data-hiddenvalue"))):this._updateStateByCountry(t,o.value))}},{key:"attachOnCountryChangeSearchHandler",value:function(e,t){var n=this,r=document.querySelector('[name="'+e+'"]');null!==r&&(r.onchange=function(){n._updateStateByCountryFromDatasource(r.value)},this._valueIsValid(r.value)&&this._updateStateByCountryFromDatasource(r.value,t))}},{key:"attachOnCountryChangeCreateHandler",value:function(e,t,n){var r=this,o=document.querySelector('.countryFieldSelect[data-country-type="'+e+'"]');if(null!==o){var i=document.getElementById(this._stateFieldId);null!==i&&(this._hasElementValue(i)||this._resetStateInputToNotRequiredState(this._stateFieldId),o.onchange=function(){r._updateStateByCountry(o.value)},this._valueIsValid(o.value)&&this._updateStateByCountry(o.value,t))}else this._updateStateByCountry(n,t)}},{key:"_updateStateByCountry",value:function(e,t){null==e||"0"===e||""===e?this._updateDropdownWithOptions([],t):this._updateStateByCountryFromDatasource(e,t)}},{key:"_updateStateByCountryFromDatasource",value:function(e,t){var n=this;this._datasource.fetchOptionsById([e],(function(e){n._updateDropdownWithOptions(e,t)}))}},{key:"_updateDropdownWithOptions",value:function(e,t){var n=document.getElementById(this._stateFieldId);if(null!==n){this._removeOptions(n);var r=this._createOption("",this._stateFieldPlaceholderText);r.setAttribute("selected","selected"),n.append(r);for(var o=0;o<e.length;o++){var i=this._createOption(e[o].id,e[o].name);e[o].id===parseInt(t,10)&&i.setAttribute("selected","selected"),n.append(i)}this._updateAttributesForValidatingRequiredIfNeeded(n,e),this._updateDisableAttributeIfNeeded(n,e)}}},{key:"_updateDisableAttributeIfNeeded",value:function(e,t){if(t.length>0)e.removeAttribute("disabled");else if(0===t.length){e.setAttribute("disabled",!0),this._removeOptions(e);var n=this._createOption("",this._stateFieldNotRequiredText);n.setAttribute("selected","selected"),e.append(n)}}},{key:"_createOption",value:function(e,t){var n=document.createElement("option");return n.setAttribute("class",h.WIZARD_FIELD_INPUT),n.value=e,n.textContent=t,n}},{key:"_removeOptions",value:function(e){for(;e.firstChild;)e.removeChild(e.lastChild)}},{key:"_updateAttributesForValidatingRequiredIfNeeded",value:function(e,t){this._shouldAddAttributesForValidatingRequired(e,t)?(e.setAttribute("aria-required","true"),e.setAttribute("required","")):this._shouldRemoveAttributesForValidatingRequired(e,t)&&(e.removeAttribute("aria-required"),e.removeAttribute("required"))}},{key:"_shouldAddAttributesForValidatingRequired",value:function(e,t){return void 0!==e.getAttribute("aria-describedby")&&void 0===e.getAttribute("required")&&t.length>0}},{key:"_shouldRemoveAttributesForValidatingRequired",value:function(e,t){return void 0!==e.getAttribute("aria-describedby")&&void 0!==e.getAttribute("required")&&0===t.length}},{key:"_resetStateInputToNotRequiredState",value:function(e){var t=document.getElementById(e);this._updateAttributesForValidatingRequiredIfNeeded(t,[]),this._updateDisableAttributeIfNeeded(t,[])}},{key:"_hasCountryValueWithoutState",value:function(e,t){return this._hasElementValue(e)&&!this._hasElementValue(t)}},{key:"_hasElementValue",value:function(e){return this._valueIsValid(e.value)||this._valueIsValid(e.getAttribute("data-hiddenvalue"))}},{key:"_valueIsValid",value:function(e){return null!=e&&"0"!==e&&""!==e}}],n&&od(t.prototype,n),r&&od(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const ud=ad;function ld(e){return ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ld(e)}function cd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dd(r.key),r)}}function sd(e,t){return sd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sd(e,t)}function fd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pd(e);if(t){var o=pd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ld(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function pd(e){return pd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pd(e)}function dd(e){var t=function(e,t){if("object"!==ld(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ld(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ld(t)?t:String(t)}var yd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sd(e,t)}(i,e);var t,n,r,o=fd(i);function i(e,t,n){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).getSetting("isStandardized")){var a=new ud(r._getStateId(),r.getSetting("stateFieldPlaceholderText"),r.getSetting("stateFieldNotRequiredText"),bn.getForField(r._getStateId())),u=void 0!==n?n:r.getSetting("savedCountryId");a.attachOnCountryChangeHandler(r._getCountryId(),u)}return r}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[nd.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){try{var e=G.getFieldValue(this._getCountryId()),t=G.getFieldValue(this._getStateId()),n=G.getFieldValue(this._getCityId());return e.isEmpty()||t.isEmpty()||n.isEmpty()?new x:new nd(e,t,n)}catch(e){return new x}}},{key:"getValueForCondition",value:function(){return[pjQuery("#"+this._getCountryId()+" option:selected").text(),pjQuery("#"+this._getStateId()).is("select")?pjQuery("#"+this._getStateId()+" option:selected").text():pjQuery("#"+this._getStateId()).val(),pjQuery("#"+this._getCityId()).val()]}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),G.setFieldValue(this._getCountryId(),e.getCountry()),G.setFieldValue(this._getStateId(),e.getState()),G.setFieldValue(this._getCityId(),e.getCity())}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return new i(e,this.getFieldSettings(),null)}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_getDepedentFieldsMetadata",value:function(){var e=[];return G.isFieldRegistered(this._getCountryId())&&e.push(this._createFieldMetadata(this._getCountryId(),this._getCountrySuffix())),G.isFieldRegistered(this._getStateId())&&e.push(this._createFieldMetadata(this._getStateId(),this._getStateSuffix())),G.isFieldRegistered(this._getCityId())&&e.push(this._createFieldMetadata(this._getCityId(),this._getCitySuffix())),e}},{key:"_getCountryId",value:function(){return this.getFieldId()+this._getCountrySuffix()}},{key:"_getStateId",value:function(){return this.getFieldId()+this._getStateSuffix()}},{key:"_getCityId",value:function(){return this.getFieldId()+this._getCitySuffix()}},{key:"_getCountrySuffix",value:function(){return"_location_country"}},{key:"_getStateSuffix",value:function(){return"_location_state"}},{key:"_getCitySuffix",value:function(){return"_location_city"}},{key:"_attachOnChangeListener",value:function(){}}],n&&cd(t.prototype,n),r&&cd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ro);!function(e,t,n){(t=dd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(yd,"TYPE","LocationField");const hd=yd;function vd(e){return vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vd(e)}function bd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wd(r.key),r)}}function md(e,t){return md=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},md(e,t)}function gd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_d(e);if(t){var o=_d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===vd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _d(e){return _d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_d(e)}function wd(e){var t=function(e,t){if("object"!==vd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==vd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===vd(t)?t:String(t)}var Sd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&md(e,t)}(i,e);var t,n,r,o=gd(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),new ud(n.getFieldId(),n.getSetting("stateFieldPlaceholderText"),n.getSetting("stateFieldNotRequiredText"),n._datasource).attachOnCountryChangeCreateHandler(n.getSetting("stateTypeId"),n.getSetting("currentStateSelectedValue"),n.getSetting("savedCountryId")),n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){throw new Error("notImplementedError")}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}}])&&bd(t.prototype,n),r&&bd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Nu);!function(e,t,n){(t=wd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Sd,"TYPE","LocationStateCreateField");const Od=Sd;function Pd(e){return Pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pd(e)}function Ed(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fd(r.key),r)}}function kd(e,t){return kd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kd(e,t)}function jd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Td(e);if(t){var o=Td(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Pd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Td(e){return Td=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Td(e)}function Fd(e){var t=function(e,t){if("object"!==Pd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Pd(t)?t:String(t)}var Id=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kd(e,t)}(i,e);var t,n,r,o=jd(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),new ud(n.getFieldId(),n.getSetting("stateFieldSelectAnOptionText"),n.getSetting("stateFieldNotRequiredText"),n._datasource).attachOnCountryChangeSearchHandler(n.getSetting("countryInputName"),n.getSetting("currentStateSelectedValue")),n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){throw new Error("notImplementedError")}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}}])&&Ed(t.prototype,n),r&&Ed(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Nu);!function(e,t,n){(t=Fd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Id,"TYPE","LocationStateSearchField");const Rd=Id;function Cd(e){return Cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cd(e)}function Dd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nd(r.key),r)}}function xd(e,t){return xd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xd(e,t)}function Ad(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ld(e);if(t){var o=Ld(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Cd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ld(e){return Ld=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ld(e)}function Nd(e){var t=function(e,t){if("object"!==Cd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Cd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Cd(t)?t:String(t)}var Md=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xd(e,t)}(i,e);var t,n,r,o=Ad(i);function i(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),!PortalNumber.isNumber(t))throw new Error("invalidValue: month must be a valid integer");if(!PortalNumber.isNumber(e))throw new Error("invalidValue: year must be a valid integer");var r=PortalDate.fromParams(e,t,1);return(n=o.call(this,r))._month=t,n._year=e,n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this.getFormattedDateString("yyyy-MM")}},{key:"getMonth",value:function(){return this._month}},{key:"getYear",value:function(){return this._year}}])&&Dd(t.prototype,n),r&&Dd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Vo);!function(e,t,n){(t=Nd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Md,"TYPE","FieldMonthAndYearValue");const Vd=Md;var Bd=n(68565);function Ud(e){return Ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ud(e)}function Wd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qd(r.key),r)}}function Yd(){return Yd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zd(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Yd.apply(this,arguments)}function Qd(e,t){return Qd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qd(e,t)}function Hd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zd(e);if(t){var o=zd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ud(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zd(e){return zd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zd(e)}function qd(e){var t=function(e,t){if("object"!==Ud(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ud(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ud(t)?t:String(t)}var Jd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qd(e,t)}(i,e);var t,n,r,o=Hd(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._fixedDay=n.getSetting("fixedDay"),n._tabIndex=n.getSetting("tabIndex"),n._minDate=n.getSetting("minDate"),n._maxDate=n.getSetting("maxDate"),n._accessibleLabelsDictionary=n.getSetting("accessibleLabelsDictionary"),n._isAccessible=n.getSetting("isAccessible"),n._isRequired=n.getSetting("isRequired"),n._year=null,n._month=null,n._yearInput=null,n._monthInput=null,n}return t=i,n=[{key:"_postRegister",value:function(){this._createWidget(),Yd(zd(i.prototype),"_postRegister",this).call(this)}},{key:"cloneForNewTableRow",value:function(e,t){this._cloneCurrentFieldForNewTableRow(e,t),this._cloneDependentFieldsForNewTableRow(e,t)}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();if(!e)return new x;var t=e.split("-"),n=PortalString.toInt(t[0]),r=PortalString.toInt(t[1]);return new Vd(n,r)}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return e?e+"-"+PortalString.zeroPad(this._fixedDay,2):""}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._getFieldElement().val(e.getFormattedDateString("yyyy-MM")),this._triggerEvent("change")}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow("year",e,t),this._cloneDatasourceForNewTableRow("month",e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource("year",e),this._cloneDatasource("month",e),new i(e,this.getFieldSettings())}},{key:"_getDepedentFieldsMetadata",value:function(){return[]}},{key:"_createWidget",value:function(){var e=this;this._browserSupportsInputMonth()||pjQuery((function(){e._createFallbackWidget()}))}},{key:"_browserSupportsInputMonth",value:function(){return this._inputSupported("month")&&!this._isSafariBrowser()}},{key:"_elementAllowsChangingType",value:function(e){return ht.prototype._elementAllowsChangingType.call(this,e)&&this._browserSupportsInputMonth()}},{key:"_createFallbackWidget",value:function(){var e=this._hideInput(document.getElementById(this._fieldId));if(e){var t=new PortalDate(Bd.ou.fromFormat(this._minDate,"yyyy-MM-dd")).toDate(),n=new PortalDate(Bd.ou.fromFormat(this._maxDate,"yyyy-MM-dd")).toDate();this._initDefaultValues(e);var r=this._createInput(t,n);e.parentNode.appendChild(r)}}},{key:"_initDefaultValues",value:function(e){this._year=this._month=0;var t=e.value||e.getAttribute("data-hiddenValue");if(t){var n=t.split("-");this._year=PortalString.toInt(n[0]),this._month=PortalString.toInt(n[1])}}},{key:"_createInput",value:function(e,t){var n,r=this;return this._yearInput=this._createYearInput(this._fieldId,this._year,this._tabIndex,e,t),this._yearInput.onchange=function(){r._year=this.value,r._updateHiddenInputValue()},this._monthInput=this._createMonthInput(this._fieldId,this._month,this._year,this._tabIndex,e,t),this._monthInput.onchange=function(){r._month=this.value,r._updateHiddenInputValue()},this._isAccessible?(n=this._createWidgetWithLabelsFromInputs(this._yearInput,this._monthInput),this._wrapFieldAsFieldSetWithLegend()):n=this._createWidgetWithoutLabelsFromInputs(this._yearInput,this._monthInput),n}},{key:"_updateHiddenInputValue",value:function(){document.getElementById(this._fieldId).value=this._year+"-"+this._normalize(this._month),G.onFieldValueChange(this._fieldId)}},{key:"_createWidgetWithLabelsFromInputs",value:function(e,t){var n=document.createElement("div");n.className=h.WIZARD_DIV_AFTER_DESCRIPTION_TC;var r=document.createElement("div");r.className="MonthAndYear_MonthWrapper",r.appendChild(this._createLabelFor(t.id,this._accessibleLabelsDictionary.monthLabel)),r.appendChild(t);var o=document.createElement("div");return o.className="MonthAndYear_YearWrapper",o.appendChild(this._createLabelFor(e.id,this._accessibleLabelsDictionary.yearLabel)),o.appendChild(e),n.appendChild(o),n.appendChild(r),n}},{key:"_wrapFieldAsFieldSetWithLegend",value:function(){var e=pjQuery("#"+this._fieldId+"-accessibleContainer");e.children().appendTo(pjQuery("<fieldset/>").insertBefore(e)),e.remove();var t=this;pjQuery("#"+this._fieldId+"-label").replaceWith((function(){var e=this.textContent;return e&&t._isRequired&&(e=e.substring(0,e.length-2),e+=pjQuery("<div/>",{}).append(pjQuery("<span/>",{"aria-hidden":!0,class:"labelRequiredIcon",text:" *"})).html()),pjQuery("<div/>",{}).append(pjQuery("<legend/>",{id:this.id,class:h.WIZARD_FIELD_LABEL,html:e})).html()}))}},{key:"_createWidgetWithoutLabelsFromInputs",value:function(e,t){var n=document.createElement("div");return n.appendChild(e),n.appendChild(t),n}},{key:"_createLabelFor",value:function(e,t){var n=document.createElement("label");return n.setAttribute("for",e),n.setAttribute("class","screenReaderVisibility "+h.WIZARD_FIELD_SUBFIELD_LABEL+" "+h.WIZARD_FIELD_SUBFIELD_LABEL_TC),n.textContent=t,n}}],n&&Wd(t.prototype,n),r&&Wd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Jo);!function(e,t,n){(t=qd(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Jd,"TYPE","MonthAndYearDateField");const Gd=Jd;function Zd(e){return Zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zd(e)}function Kd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ny(r.key),r)}}function $d(e,t){return $d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$d(e,t)}function Xd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ty(e);if(t){var o=ty(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Zd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ey(e)}(this,n)}}function ey(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ty(e){return ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ty(e)}function ny(e){var t=function(e,t){if("object"!==Zd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Zd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Zd(t)?t:String(t)}var ry=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$d(e,t)}(i,e);var t,n,r,o=Xd(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e,t),(new or).addEmptyHiddenInputBeforeSubmit(ey(n),n._getFieldElement()[0]),n}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Qn.TYPE,$n.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getSelectedElements();if(0===e.length)return new x;var t=[];return e.each((function(){t.push(pn.buildOption(pjQuery(this).val(),pjQuery(this).data("option-name").toString()))})),new pn(t)}},{key:"getValueForCondition",value:function(){var e=[];return this._getSelectedElements().each((function(){e.push(pjQuery(this).val())})),e}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery("option",this._getFieldElement()),n=this;switch(e.getType()){case Qn.TYPE:this._datasource.fetchOptionsById(e.getOptionsIds(),(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;case $n.TYPE:this._datasource.fetchOptionsByValue(e.getOptionsTexts(),(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("selected",!0),n._triggerEvent("change")}));break;default:throw new Error("modeNotSupported")}}},{key:"_getSelectedElements",value:function(){return this._getFieldElement().find("option:selected")}},{key:"_getOptionsPage",value:function(){return null}},{key:"_getOptionsPageSize",value:function(){return null}},{key:"_createWithNewOptions",value:function(e){var t=this;this._removeAllOptions();var n=[];pjQuery.each(e,(function(e,r){var o=pjQuery("<option></option>",{class:h.WIZARD_FIELD_INPUT}).attr("id",t._buildOptionHtmlId(r.id)).attr("value",r.id).attr("data-option-name",r.name).text(r.name);r.isSelected&&o.attr("selected","selected"),n.push(o.prop("outerHTML"))})),this._getFieldElement().append(n.join(""))}},{key:"_removeAllOptions",value:function(){this._getFieldElement().find("option").remove()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}},{key:"_isPrePopulateEnabled",value:function(){return!1}},{key:"_prePopulateIfOnlyOneOption",value:function(){}},{key:"_getDataHiddenValue",value:function(e){var t=e.attr("data-hiddenValue");return t?t.split(","):[]}}],n&&Kd(t.prototype,n),r&&Kd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(kn);!function(e,t,n){(t=ny(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ry,"TYPE","MultipleSelectField");const oy=ry;function iy(e){return iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iy(e)}function ay(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fy(r.key),r)}}function uy(){return uy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sy(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},uy.apply(this,arguments)}function ly(e,t){return ly=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ly(e,t)}function cy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sy(e);if(t){var o=sy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===iy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function sy(e){return sy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sy(e)}function fy(e){var t=function(e,t){if("object"!==iy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==iy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===iy(t)?t:String(t)}var py=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ly(e,t)}(i,e);var t,n,r,o=cy(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_postRegister",value:function(){uy(sy(i.prototype),"_postRegister",this).call(this),this._attachOnKeypressListener()}},{key:"_attachOnKeypressListener",value:function(){var e=this;this._getFieldElement().on("keypress",(function(t){e._preventSettingInvalidCharacters(t)}))}},{key:"_preventSettingInvalidCharacters",value:function(e){!1===/^-?\d*(\.\d*)?$/.test(this._getFieldElement().val()+e.key)&&e.preventDefault()}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}}])&&ay(t.prototype,n),r&&ay(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(So);!function(e,t,n){(t=fy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(py,"TYPE","NumberField");const dy=py;function yy(e){return yy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yy(e)}function hy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vy(r.key),r)}}function vy(e){var t=function(e,t){if("object"!==yy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==yy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===yy(t)?t:String(t)}function by(){return by="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},by.apply(this,arguments)}function my(e,t){return my=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},my(e,t)}function gy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_y(e);if(t){var o=_y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===yy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _y(e){return _y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_y(e)}var wy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&my(e,t)}(i,e);var t,n,r,o=gy(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._rangeMinValue=n.getSetting("rangeMinValue"),n._rangeMaxValue=n.getSetting("rangeMaxValue"),n._clearText=n.getSetting("clearText"),n}return t=i,n=[{key:"_postRegister",value:function(){this._createCustomWidgetAndHideNumberInput(),this.getValue()&&!this.getValue().isEmpty()&&this._setValue(this.getValue().getValue()),by(_y(i.prototype),"_postRegister",this).call(this)}},{key:"_createCustomWidgetAndHideNumberInput",value:function(){this._hideInput(pjQuery("#"+this._fieldId)).parent().append(this._createCustomGraphicInput())}},{key:"_createCustomGraphicInput",value:function(){throw new Error("notImplementedError")}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e),this._setValue(e.getValue())}},{key:"_setValue",value:function(){throw new Error("notImplementedError")}},{key:"_setValueToOriginalInput",value:function(e){by(_y(i.prototype),"setValue",this).call(this,new Rt(e))}},{key:"_hideInput",value:function(e){var t;if(e){t=pjQuery("<input/>");var n=["data-hiddenType","data-required"];pjQuery.each(e[0].attributes,(function(r,o){n.includes(o.name)||t.attr(o.name,e.attr(o.name))})),t.attr("type","hidden"),t.attr("hidden","hidden");var r=e.parent();e.remove(),r.append(t)}return t}},{key:"_createDivElement",value:function(e,t){return pjQuery("<div/>",{class:e,tabindex:t})}},{key:"_attachOnKeypressListener",value:function(){}}],n&&hy(t.prototype,n),r&&hy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(dy);const Sy=wy;function Oy(e){return Oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(e)}function Py(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fy(r.key),r)}}function Ey(){return Ey="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ty(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ey.apply(this,arguments)}function ky(e,t){return ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ky(e,t)}function jy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ty(e);if(t){var o=Ty(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Oy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ty(e){return Ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ty(e)}function Fy(e){var t=function(e,t){if("object"!==Oy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Oy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Oy(t)?t:String(t)}var Iy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ky(e,t)}(i,e);var t,n,r,o=jy(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_createCustomGraphicInput",value:function(){var e=this._createDivElement(h.WIZARD_DIV_AFTER_DESCRIPTION_TC),t=this._createDivElement("progress-bar "+h.WIZARD_FIELD_INPUT_CONTAINER);return t.append(this._createInput()),t.append(this._createLegendElements()),e.append(t),e.append(this._createClearElement()),e}},{key:"_createInput",value:function(){var e=this,t=pjQuery("<input/>",{id:this._fieldId+"_range",type:"range",class:"progress-bar__selector "+h.WIZARD_FIELD_INPUT,min:this._rangeMinValue,max:this._rangeMaxValue,value:this._isEmpty()?this._rangeMinValue:Math.round(this.getValue().getValue()),"aria-labelledby":this._fieldId+"-label"});return t.on("input",(function(){e._updateLegendValues(pjQuery(this).val())})),t.on("change",(function(){e._setValueFromRangeValue(pjQuery(this).val()),e._updateLegendValues(pjQuery(this).val())})),t}},{key:"_createClearElement",value:function(){var e=this,t=pjQuery("<a/>",{id:this._fieldId+"_clear",href:"#",class:"link "+h.WIZARD_FIELD_LINK,text:this._clearText,tabindex:0,role:"button"});return t.click((function(t){t.preventDefault(),e._clearValue()})),t}},{key:"_createLegendElements",value:function(){var e={id:this._fieldId+"_legend",class:"progress-bar__indicator",tabindex:0};return this._isEmpty()&&(e.hidden="hidden"),pjQuery("<div/>",e).append(this._createProgressLegend(),this._createTotalLegend())}},{key:"_createProgressLegend",value:function(){return pjQuery("<span/>",{id:this._fieldId+"_progressLegend",class:"progress-bar__indicator__current",text:this.getValue()&&!this.getValue().isEmpty()?this.getValue().getValue()+"%":""})}},{key:"_createTotalLegend",value:function(){return pjQuery("<span/>",{id:this._fieldId+"_totalLegend",class:"progress-bar__indicator__total",text:this._rangeMaxValue})}},{key:"_clearValue",value:function(){this._getFieldElement().val(null),pjQuery("#"+this._fieldId+"_range").val(this._rangeMinValue),this._updateLegendValues(null)}},{key:"_setValue",value:function(e){pjQuery("#"+this._fieldId+"_range").val(e),pjQuery("#"+this._fieldId+"_range").change()}},{key:"_setValueFromRangeValue",value:function(e){Ey(Ty(i.prototype),"_setValueToOriginalInput",this).call(this,this._roundValue(e))}},{key:"_updateLegendValues",value:function(e){e=this._roundValue(e),pjQuery("#"+this._fieldId+"_progressLegend").text(this._isEmpty()?"":e);var t=document.getElementById(this._fieldId+"_legend");t.style.left=this._isEmpty()?null:"calc("+e+"% + "+(8-.15*e)+"px)",this._isEmpty()?t.setAttribute("hidden","hidden"):t.removeAttribute("hidden")}},{key:"_roundValue",value:function(e){return(e=Math.round(e))<this._rangeMinValue?this._rangeMinValue:e}},{key:"_getPercentageByNumberValue",value:function(e){return Math.round(100*e/this._rangeMaxValue)}},{key:"_isEmpty",value:function(){return!this.getValue()||this.getValue().isEmpty()}}],n&&Py(t.prototype,n),r&&Py(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Sy);!function(e,t,n){(t=Fy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Iy,"TYPE","NumberProgressField");const Ry=Iy;n(56977);function Cy(e){return Cy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(e)}function Dy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,My(r.key),r)}}function xy(){return xy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ny(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},xy.apply(this,arguments)}function Ay(e,t){return Ay=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ay(e,t)}function Ly(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ny(e);if(t){var o=Ny(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Cy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ny(e){return Ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ny(e)}function My(e){var t=function(e,t){if("object"!==Cy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Cy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Cy(t)?t:String(t)}var Vy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ay(e,t)}(i,e);var t,n,r,o=Ly(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._numRatings=n.getSetting("numRatings"),n._numDecimals=n.getSetting("numDecimals"),n._starsText=n.getSetting("starsText"),n._value=null,n}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_createCustomGraphicInput",value:function(){var e=this._createDivElement(this._fieldId+"_graphicContainer "+h.WIZARD_DIV_AFTER_DESCRIPTION_TC);return e.append(this._createIcons()),e.append(this._createClearElement()),e.attr("aria-labelledby",this._fieldId+"-label"),e.attr("tabindex",0),e}},{key:"_createIcons",value:function(){for(var e=this._createDivElement(this._fieldId+"_containerIcons stars-rating",-1),t=this._numRatings;t>=0;t--){var n=this._createIconElement(t);e.append(n.children())}return e}},{key:"_createIconElement",value:function(e){var t=this,n=this._createDivElement("iconContainer"),r=pjQuery("<input/>",{id:this._fieldId+"_icon_"+e,type:"radio",name:this._fieldId+"_radioIconStar",value:e,class:"visibility--hidden--visually",tabindex:0});r.change((function(){this.checked&&t._setValueFromRatingValue(pjQuery(this).val())}));var o=pjQuery("<label/>",{id:this._fieldId+"_iconLabel_"+e,for:this._fieldId+"_icon_"+e,class:e?"stars-rating__star "+h.WIZARD_FIELD_INPUT:"stars-rating__star--zero",tabindex:-1}).append(pjQuery("<span/>",{text:this._getNumberValueFromRating(e)+" "+this._starsText,class:e?"visibility--hidden--visually":"stars-rating__star--zero--hidden"}));return n.append(r,o),n}},{key:"_createClearElement",value:function(){var e=this,t=pjQuery("<a/>",{id:this._fieldId+"_clear",href:"#",class:"link "+h.WIZARD_FIELD_LINK,text:this._clearText,tabindex:0,role:"button"});return t.click((function(t){t.preventDefault(),e._clearValue()})),t}},{key:"_isEmptyValue",value:function(){return void 0===this._value||null===this._value}},{key:"_setValueFromRatingValue",value:function(e){this._value=this._getNumberValueFromRating(e),xy(Ny(i.prototype),"_setValueToOriginalInput",this).call(this,Number(this._value))}},{key:"_setValue",value:function(e){var t=this._getRatingFromNumberValue(e);t>=0&&(pjQuery("#"+this._fieldId+"_icon_"+t).prop("checked",!0),pjQuery("#"+this._fieldId+"_icon_"+t).change())}},{key:"_clearValue",value:function(){this._value=null,this._getFieldElement().val(null),pjQuery("#"+this._fieldId+"_icon_0").prop("checked",!0),this._triggerEvent("input")}},{key:"_getNumberValueFromRating",value:function(e){var t=e/this._numRatings*(this._rangeMaxValue-this._rangeMinValue);return null===(t=Number(this._rangeMinValue)+t)?t:this._removeInsignificantTrailingDecimals(Number(t).toFixed(this._numDecimals))}},{key:"_getRatingFromNumberValue",value:function(e){if(null===e)return e;var t=Number(e),n=Number(this._rangeMinValue),r=Number(this._rangeMaxValue),o=Number(this._numRatings);if(t<=n)return n;var i=Math.abs(n-t);return i=i/(r-n)*o,Math.round(i)}},{key:"_removeInsignificantTrailingDecimals",value:function(e){return Number(e).toString()}}],n&&Dy(t.prototype,n),r&&Dy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Sy);!function(e,t,n){(t=My(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Vy,"TYPE","NumberStarsField");const By=Vy;function Uy(e){return Uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uy(e)}function Wy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qy(r.key),r)}}function Yy(){return Yy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zy(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Yy.apply(this,arguments)}function Qy(e,t){return Qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qy(e,t)}function Hy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zy(e);if(t){var o=zy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Uy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zy(e){return zy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zy(e)}function qy(e){var t=function(e,t){if("object"!==Uy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Uy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Uy(t)?t:String(t)}var Jy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qy(e,t)}(i,e);var t,n,r,o=Hy(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._hasPhotoPreviewByDefault=n.getSetting("hasPhotoPreviewByDefault"),n._isSocialLoginWithPhoto=n.getSetting("isSocialLoginWithPhoto"),n}return t=i,(n=[{key:"_postRegister",value:function(){this._hasPhotoPreviewByDefault&&!this._shouldHideFileInputByDefault&&this._addFileInputListeners(),this._isSocialLoginWithPhoto&&this._showPhotoFileInputCancelButton(),this._resetPreviewAndFileLoaders(),Yy(zy(i.prototype),"_postRegister",this).call(this)}},{key:"getType",value:function(){return i.TYPE}},{key:"setSocialLoginPhoto",value:function(e){if(this._hasPreviewEnabled()){var t=document.getElementById("fileInputContainer_"+this._fieldId),n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("id","photoDefaultPreviewImage_"+this._fieldId),n.setAttribute("value",e);var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("class","photoFieldIsSocialLogin"),r.setAttribute("value","1"),t&&(t.append(n),t.append(r)),this._setPreview(e),this._showPhotoFileInputCancelButton()}}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_hasDefaultPreviewImage",value:function(){return this._getDefaultPreviewImageElement()}},{key:"_getDefaultPreviewImageElement",value:function(){return document.getElementById("photoDefaultPreviewImage_"+this._fieldId)}},{key:"_getDefaultPreviewValue",value:function(){var e=this._getDefaultPreviewImageElement();return e?e.getAttribute("value"):null}},{key:"_getPreviewContainerElement",value:function(){return document.getElementById("photoPreviewContainer_"+this._fieldId)}},{key:"_setPreviewAsUnselected",value:function(){var e=this._getPreviewContainerElement();e&&(e.classList.remove("photoPreviewSelected"),e.classList.add("photoPreviewUnselected"))}},{key:"_setPreviewAsSelected",value:function(){var e=this._getPreviewContainerElement();e&&(e.classList.remove("photoPreviewUnselected"),e.classList.add("photoPreviewSelected"))}},{key:"_onFileChanged",value:function(){var e=this,t=0,n=this._getCurrentFiles();if(n&&n.length>0&&(t=n[0].size),t>0&&t>this._maxFileSize&&alert(this._errorToShowIfSizeExceeded),n&&n[0]){this._resetPreviewAndFileLoaders(!1),this._showPhotoFileInputCancelButton(),this._onPhotoFileInputNewPhotoSelected();var r=new FileReader;r.onload=function(t){return e._setPreview(t.target.result)},r.readAsDataURL(n[0])}}},{key:"_resetPreviewAndFileLoaders",value:function(e){void 0===e&&(e=!0),e&&this._removePhotoFileInputUploadedFile(),new Pc(this._fieldId).cleanExternalFileInfo(),this._hasDefaultPreviewImage()?this._setPreview(this._getDefaultPreviewValue()):(this._setPreviewAsUnselected(),this._removePreviewImg())}},{key:"_removePhotoFileInputUploadedFile",value:function(){this._getFieldElement().val(null),this._hidePhotoFileInputCancelButton()}},{key:"_hidePhotoFileInputCancelButton",value:function(){if(!this._existsSocialLoginLoadedPhoto()){var e=this._getCancelButtonElement();e&&(e.style.display="none")}}},{key:"_existsSocialLoginLoadedPhoto",value:function(){return document.querySelector(".photoFieldIsSocialLogin")&&this._hasDefaultPreviewImage()}},{key:"_removePreviewImg",value:function(){var e=this._getPhotoPreviewImgElement();e&&e.remove()}},{key:"_setPreview",value:function(e){this._setPreviewAsSelected(),this._removePreviewImg();var t=document.createElement("img");t.setAttribute("id","photoPreview_"+this._fieldId),t.setAttribute("class","photoInputPreview"),t.setAttribute("src",e),t.setAttribute("alt","User photo preview");var n=this._getPreviewContainerElement();n&&n.append(t)}},{key:"_getCancelButtonElement",value:function(){return document.getElementById("fileInputCancelButton_"+this._fieldId)}},{key:"_showPhotoFileInputCancelButton",value:function(){var e=this._getCancelButtonElement();e&&(e.style.display="")}},{key:"_onPhotoFileInputNewPhotoSelected",value:function(){this._existsSocialLoginLoadedPhoto()&&this._disableSocialLoginPhotoAutoImportAndRemoveDefaultImage()}},{key:"_disableSocialLoginPhotoAutoImportAndRemoveDefaultImage",value:function(){var e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name","photoFieldSocialAutoImportPhotoRemoved"),e.setAttribute("value","1");var t=document.getElementById("fileInputContainer_"+this._fieldId);t&&t.append(e),document.querySelectorAll(".photoFieldIsSocialLogin").forEach((function(e){return e.remove()}));var n=this._getDefaultPreviewImageElement();n&&n.remove()}},{key:"_addFileInputListeners",value:function(){var e=this,t=this._getCancelButtonElement();t&&t.addEventListener("click",(function(){return e._onPhotoFileInputCancelButtonClicked()})),this._getFieldElement().on("click",(function(e){self._resetPreviewAndFileLoaders()}))}},{key:"_getPhotoPreviewValue",value:function(){var e=this._getPhotoPreviewImgElement();return e?e.getAttribute("src"):""}},{key:"_onPhotoFileInputCancelButtonClicked",value:function(){this._existsSocialLoginLoadedPhoto()&&this._currentPhotoPreviewIsTheSameAsTheDefaultOne()&&this._disableSocialLoginPhotoAutoImportAndRemoveDefaultImage(),this._resetPreviewAndFileLoaders()}},{key:"_currentPhotoPreviewIsTheSameAsTheDefaultOne",value:function(){return this._getPhotoPreviewImgElement()&&this._getDefaultPreviewValue()==this._getPhotoPreviewValue()}},{key:"_getPhotoPreviewImgElement",value:function(){return document.getElementById("photoPreview_"+this._fieldId)}},{key:"_hasPreviewEnabled",value:function(){return this._getPreviewContainerElement()}}])&&Wy(t.prototype,n),r&&Wy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Qs);!function(e,t,n){(t=qy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Jy,"TYPE","PhotoField");const Gy=Jy;function Zy(e){return Zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zy(e)}function Ky(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,th(r.key),r)}}function $y(e,t){return $y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$y(e,t)}function Xy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=eh(e);if(t){var o=eh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Zy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function eh(e){return eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},eh(e)}function th(e){var t=function(e,t){if("object"!==Zy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Zy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Zy(t)?t:String(t)}var nh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$y(e,t)}(i,e);var t,n,r,o=Xy(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"_shouldHaveHiddenElementIndicator",value:function(){return!1}},{key:"getType",value:function(){return this.TYPE}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_postRegister",value:function(){}}])&&Ky(t.prototype,n),r&&Ky(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=th(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(nh,"TYPE","PlainTextField");const rh=nh;function oh(e){return oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oh(e)}function ih(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ch(r.key),r)}}function ah(e,t){return ah=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ah(e,t)}function uh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lh(e);if(t){var o=lh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===oh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function lh(e){return lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lh(e)}function ch(e){var t=function(e,t){if("object"!==oh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==oh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===oh(t)?t:String(t)}var sh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ah(e,t)}(i,e);var t,n,r,o=uh(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t))._setPostalCode(e),n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return JSON.stringify({postalCode:this._postalCode.toString(),radius:this._radius.toString()})}},{key:"getPostalCode",value:function(){return this._postalCode}},{key:"_setPostalCode",value:function(e){O.assertIsValid(e),this._postalCode=e}}])&&ih(t.prototype,n),r&&ih(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Rp);!function(e,t,n){(t=ch(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(sh,"TYPE","FieldPostalCodeRadiusValue");const fh=sh;function ph(e){return ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ph(e)}function dh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mh(r.key),r)}}function yh(){return yh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bh(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},yh.apply(this,arguments)}function hh(e,t){return hh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hh(e,t)}function vh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bh(e);if(t){var o=bh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ph(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bh(e){return bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bh(e)}function mh(e){var t=function(e,t){if("object"!==ph(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ph(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ph(t)?t:String(t)}var gh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hh(e,t)}(i,e);var t,n,r,o=vh(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[fh.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=G.getFieldValue(this._getPostalCodeId()),t=G.getFieldValue(this.getRadiusId());return e.isEmpty()||t.isEmpty()?new x:new fh(e,t)}},{key:"getValueForCondition",value:function(){return[document.getElementById(this._getPostalCodeId()).selectedOptions[0].text].concat(yh(bh(i.prototype),"getValueForCondition",this).call(this))}},{key:"setValue",value:function(e){yh(bh(i.prototype),"setValue",this).call(this,e),G.setFieldValue(this._getPostalCodeId(),e.getPostalCode())}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_getDepedentFieldsMetadata",value:function(){return[this._createFieldMetadata(this._getPostalCodeId(),this._getPostalCodeSuffix())].concat(yh(bh(i.prototype),"_getDepedentFieldsMetadata",this).call(this))}},{key:"_getPostalCodeId",value:function(){return this.getFieldId()+this._getPostalCodeSuffix()}},{key:"_getPostalCodeSuffix",value:function(){return this._getFieldSuffix()+"_postalCode"}},{key:"_getFieldSuffix",value:function(){return""}},{key:"getSearchFieldId",value:function(){return this._getPostalCodeId()}}],n&&dh(t.prototype,n),r&&dh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Op);!function(e,t,n){(t=mh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(gh,"TYPE","PostalCodeRadiusField");const _h=gh;function wh(e){return wh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wh(e)}function Sh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kh(r.key),r)}}function Oh(e,t){return Oh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oh(e,t)}function Ph(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Eh(e);if(t){var o=Eh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===wh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Eh(e){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Eh(e)}function kh(e){var t=function(e,t){if("object"!==wh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==wh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===wh(t)?t:String(t)}var jh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oh(e,t)}(i,e);var t,n,r,o=Ph(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[Jt.TYPE,Ot.TYPE]}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getSelectedElement();if(null===e||""===e.value)return new x;var t=e.value,n=e.dataset.optionName.toString();return new nn(t,n)}},{key:"getValueForCondition",value:function(){return this._getSelectedElement().value}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=pjQuery('input[type="radio"]',this._getFieldElement());switch(e.getType()){case Jt.TYPE:this._datasource.fetchOptionsById([e.getOptionId()],(function(e){t.filter((function(){return e.find((function(e){return e.id==pjQuery(this).val()}),this)})).prop("checked",!0).trigger("change")}));break;case Ot.TYPE:this._datasource.fetchOptionsByValue([e.getValue()],(function(e){t.filter((function(){return e.find((function(e){return e.name==pjQuery(this).data("option-name")}),this)})).prop("checked",!0).trigger("change")}));break;default:throw new Error("modeNotSupported")}}},{key:"_getSelectedElement",value:function(){return document.getElementById(this.getFieldId()).querySelector("input[type=radio]:checked")}},{key:"_getOptionElements",value:function(){return document.getElementById(this.getFieldId()).querySelectorAll("input[type=radio]")}},{key:"_attachOnChangeListener",value:function(){var e=this;pjQuery("#"+this._fieldId).on("change","input",(function(){e._updateAccessibilityAttributesOnSelect(),G.onFieldValueChange(e.getFieldId())}))}},{key:"_getOptionsPage",value:function(){return null}},{key:"_getOptionsPageSize",value:function(){return null}},{key:"_createWithNewOptions",value:function(e){var t=this;this._removeAllOptions();var n=this._getFieldElement();e.forEach((function(e){var r=pjQuery("<input />").attr("id",t._buildOptionHtmlId(e.id)).attr("type","radio").attr("role","radio").attr("name",t._fieldId).attr("value",e.id).attr("data-option-name",e.name);e.isSelected&&r.attr("checked","checked");var o=pjQuery("<label>").attr("for",t._buildOptionHtmlId(e.id)).append(r,e.name,pjQuery('<div class="cb" />'));n.append(o)})),this._attachOnChangeListener()}},{key:"_removeAllOptions",value:function(){this._getFieldElement().find("label, div.cb").remove()}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}},{key:"_isPrePopulateEnabled",value:function(){return"1"===pjQuery("#"+this.getFieldId()).attr("data-prePopulate")}},{key:"_prePopulateIfOnlyOneOption",value:function(){var e=this._getOptionElements();1===e.length&&this.setValue(new Jt(e[0].value))}},{key:"_updateAccessibilityAttributesOnSelect",value:function(){var e=this._getOptionElements(),t=this._getSelectedElement();e.forEach((function(e){e.setAttribute("aria-checked","false")})),t.setAttribute("aria-checked","true"),this._getFieldElement()[0].setAttribute("aria-activedescendant",t.id)}}],n&&Sh(t.prototype,n),r&&Sh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(kn);!function(e,t,n){(t=kh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(jh,"TYPE","RadioButtonListField");const Th=jh;function Fh(e){return Fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(e)}function Ih(){}Ih.prototype.element=function(e,t,n){var r=document.createElement(e);for(var o in t){var i=t[o];if("style"==o&&"object"===Fh(i))for(var a in i){var u=a.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}));r.style[u]=i[a]}else"function"==typeof i&&"on"===o.substr(0,2)?r.addEventListener(o.substr(2),i,!1):r.setAttribute(o,i)}if(n){var l=this;n.map((function(e){r.appendChild(l._getDomNodeFromChild(e))}))}return r},Ih.prototype._getDomNodeFromChild=function(e){return"string"==typeof e?document.createTextNode(e):e.getDomNode?e.getDomNode():e};const Rh=Ih;function Ch(e,t,n,r,o){this.callback=e,this.title=t,this.label=n,this.extraCssClass=r,this.useNote=o,this.domNode=this._render(),this.setNote(null)}Ch.prototype=new Rh,Ch.prototype.getDomNode=function(){return this.domNode},Ch.prototype.setTitle=function(e){this._getAnchorElement().innerHTML=e},Ch.prototype.setLabel=function(e){this._getAnchorElement().ariaLabel=e},Ch.prototype.onClick=function(e){e.preventDefault(),this.callback()},Ch.prototype._render=function(){var e=this.element("div",{class:"VideoInputControlsItem "+this.extraCssClass},[this.element("a",{href:"#",onclick:this.onClick.bind(this),class:"VideoInputToolbarBtn",role:"button",ariaLabel:this.label},[this.title])]);return this.useNote&&e.appendChild(this.noteSpan=this.element("span",{class:"tooltip"})),e},Ch.prototype.setNote=function(e){this.noteSpan&&(this.noteSpan.innerHTML=e,this.noteSpan.style.display=e?null:"none")},Ch.prototype._getAnchorElement=function(){return this.domNode.firstElementChild};const Dh=Ch;function xh(e){this.maxSeconds=e,this.domNode=this._render()}xh.prototype=new Rh,xh.prototype.getDomNode=function(){return this.domNode},xh.prototype.start=function(){this.startTime=(new Date).getTime(),this.endTime=null,this.timerStarted||(this.timerStarted=!0,this.interval=setInterval(this._onInterval.bind(this),100))},xh.prototype.stop=function(){this.endTime=(new Date).getTime(),this.timerStarted=!1,clearInterval(this.interval)},xh.prototype._onInterval=function(){if(this.startTime){var e=this.endTime?this.endTime-this.startTime:(new Date).getTime()-this.startTime,t=Math.floor(e/1e3);this.elapsedText.nodeValue=this._formatDuration(t),this.remainingText.nodeValue=this._formatDuration(Math.max(0,this.maxSeconds-t))}else this.elapsedText.nodeValue="",this.remainingText.nodeValue=""},xh.prototype._render=function(){return this.elapsedText=document.createTextNode(""),this.remainingText=document.createTextNode(""),this.element("div",{class:"VideoInputControlsItem VideoInputTime"},[this.element("div",{class:"VideoInputElapsedTime",role:"timer"},[this.elapsedText]),this.element("div",{class:"VideoRemainingTime",role:"timer"},[this.remainingText])])},xh.prototype._formatDuration=function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*n);return t<10&&(t="0"+t),n<10&&(n="0"+n),r<10&&(r="0"+r),t+":"+n+":"+r};const Ah=xh;function Lh(e,t,n,r,o,i){this.labels=e,this.maxSeconds=t,this._hasRecording=n,this.onRecClick=r,this.onStopClick=o,this.onPlayClick=i,this.domNode=this._render(),this._updateRecordButtonText()}Lh.prototype=new Rh,Lh.prototype.getDomNode=function(){return this.domNode},Lh.prototype.setHasRecording=function(e){this._hasRecording=e,this._updateRecordButtonText()},Lh.prototype.onClick=function(e){e.preventDefault(),this.callback()},Lh.prototype._updateRecordButtonText=function(){this.recButton.setTitle(this._getRecordButtonTitle()),this.recButton.setLabel(this._getRecordButtonLabel()),this._hasRecording?this.recButton.setNote(this._getRecordButtonLabel()):this.recButton.setNote(null)},Lh.prototype._getRecordButtonTitle=function(){return this._hasRecording?this.labels.recAgainButtonTitle:this.labels.recButtonTitle},Lh.prototype._getRecordButtonLabel=function(){return this._hasRecording?this.labels.recAgainButtonLabel:this.labels.recButtonLabel},Lh.prototype.startTimer=function(){this.videoTimer.start()},Lh.prototype.stopTimer=function(){this.videoTimer.stop()},Lh.prototype._render=function(){return this.recButton=new Dh(this.onRecClick,this._getRecordButtonTitle(),this._getRecordButtonLabel(),"VideoInputRec",!0),this.stopButton=new Dh(this.onStopClick,this.labels.stopButtonTitle,this.labels.stopButtonTitle,"VideoInputStop",!1),this.playButton=new Dh(this.onPlayClick,this.labels.playButtonTitle,this.labels.playButtonTitle,"VideoInputPlay",!1),this.videoTimer=new Ah(this.maxSeconds),this.element("div",{class:"VideoInputToolbar"},[this.element("div",{class:"VideoInputControlsContainer"},[this.stopButton,this.recButton,this.playButton,this.videoTimer])])};const Nh=Lh;function Mh(e){return Mh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mh(e)}function Vh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bh(r.key),r)}}function Bh(e){var t=function(e,t){if("object"!==Mh(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Mh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Mh(t)?t:String(t)}function Uh(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Wh(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Qh(e,t,"get"))}function Yh(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Qh(e,t,"set"),n),n}function Qh(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Hh=new WeakMap,zh=new WeakMap,qh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Uh(this,Hh,{writable:!0,value:void 0}),Uh(this,zh,{writable:!0,value:void 0}),Yh(this,Hh,t),Yh(this,zh,Promise.resolve())}var t,n,r;return t=e,n=[{key:"play",value:function(){var e=this;Yh(this,zh,Wh(this,zh).then((function(){return Wh(e,Hh).play()})))}},{key:"pause",value:function(){var e=this;Wh(this,zh).then((function(){return Wh(e,Hh).pause()}))}},{key:"load",value:function(){var e=this;Wh(this,zh).then((function(){return Wh(e,Hh).load()}))}},{key:"setSrcObject",value:function(e){var t=this;Wh(this,zh).then((function(){return Wh(t,Hh).srcObject=e}))}},{key:"setSrc",value:function(e){var t=this;Wh(this,zh).then((function(){return Wh(t,Hh).src=e}))}}],n&&Vh(t.prototype,n),r&&Vh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Jh=qh;function Gh(e){return Gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gh(e)}function Zh(){Zh=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),u=new E(o||[]);return r(a,"_invoke",{value:w(e,n,u)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function d(){}function y(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(h=b);var m=y.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(r,i,a,u){var l=s(e[r],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==Gh(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return o("throw",e,a,u)}))}u(l.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return j()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=y,r(m,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),l(m,u,"Generator"),l(m,i,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Kh(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function $h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Kh(i,r,o,a,u,"next",e)}function u(e){Kh(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Xh(e,t,n,r,o){this.labels=e,this.onRecordedDataReady=t,this.maxSeconds=n,this.blobUrl=r,this.downloadUrl=r,this.dontAllowToReRecord=!!o,this.domNode=this._render(),this.webmType="video/webm;codecs=vp8,opus";this.mimeType=MediaRecorder.isTypeSupported(this.webmType)?this.webmType:"video/mp4;codecs:avc1.42E01F",this.shortMimeType=this.mimeType.replace(/;.*/,""),this.mediaReady=null,this._videoInputPlayer=new Jh(this.videoElement),r&&(this.paused=!0,this._playRecording(!0)),this._updateClassList()}Xh.prototype=new Rh,Xh.startedInput=null,Xh.prototype._isVisible=function(e){return"none"!==window.getComputedStyle(e).getPropertyValue("display")&&(!e.parentNode||e===document.body||this._isVisible(e.parentNode))},Xh.prototype.startWebcamIfInDomAndNobodyElseHasIt=function(){this.downloadUrl||!document.body.contains(this.domNode)||!this._isVisible(this.domNode)||Xh.startedInput&&Xh.startedInput.videoElement.srcObject||this._startWebcam()},Xh.prototype.removeVideo=function(){this.stopRecording(),this._stopWebcam(),this.downloadUrl=null,this.blobUrl=null,this._videoInputPlayer.pause(),this.videoElement.removeAttribute("src"),this._videoInputPlayer.load(),this.toolbar.setHasRecording(!1),this.startWebcamIfInDomAndNobodyElseHasIt(),this._updateClassList()},Xh.prototype._stopWebcam=function(){this.videoElement.srcObject&&(this._videoInputPlayer.setSrcObject(null),this.webcamStarted=!1,this.mediaReady=null)},Xh.prototype.handleHide=function(){this.stopRecording(),this._stopWebcam(),this._videoInputPlayer.pause()},Xh.prototype.handleShow=function(){var e=this;setTimeout((function(){e.startWebcamIfInDomAndNobodyElseHasIt()}),0)},Xh.prototype.isRecording=function(){return!!this.mediaRecorder},Xh.prototype.getDomNode=function(){return this.domNode},Xh.prototype._setCutOffTimeout=function(){this.cutOffTimeout=setTimeout(this._onCutOffTimeout.bind(this),1e3*this.maxSeconds)},Xh.prototype._clearCutOffTimeout=function(){this.cutOffTimeout&&(clearTimeout(this.cutOffTimeout),this.cutOffTimeout=null)},Xh.prototype._onCutOffTimeout=function(){this.cutOffTimeout=null,this.stopRecording()},Xh.prototype._onDataAvailable=function(e){e.data.size>0&&(this.blob=e.data,this.blobUrl=URL.createObjectURL(this.blob),this.onRecordedDataReady(this.blob,this.mimeType===this.webmType?"webm":"mp4",this.shortMimeType),this._updateClassList())},Xh.prototype._startRecording=$h(Zh().mark((function e(){return Zh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._hasRecording()||!this.dontAllowToReRecord){e.next=2;break}return e.abrupt("return");case 2:if(this.isRecording()){e.next=7;break}return e.next=5,this._startWebcam();case 5:this.mediaReady?this._continueStartingRecording():this.continueRecordingOnMediaReady=!0,this._updateClassList();case 7:this.domNode.dispatchEvent(new Event("startrecording"));case 8:case"end":return e.stop()}}),e,this)}))),Xh.prototype._continueStartingRecording=function(){this.continueRecordingOnMediaReady=!1,this.blobUrl&&(URL.revokeObjectURL(this.blobUrl),this.blobUrl=null);var e={audioBitsPerSecond:96e3,videoBitsPerSecond:4e5,mimeType:this.mimeType};this.mediaRecorder=new MediaRecorder(this.stream,e),this.mediaRecorder.ondataavailable=this._onDataAvailable.bind(this),this.mediaRecorder.ignoreMutedMedia=!0,this.mediaRecorder.start(),this.toolbar.startTimer(),this._setCutOffTimeout(),this._updateClassList()},Xh.prototype._hasRecording=function(){return!!this.blobUrl},Xh.prototype._updateClassList=function(){var e=this._hasRecording(),t=e&&!this.isRecording()&&!this.videoElement.srcObject&&!this.videoElement.ended&&!this.paused,n=this._getVideoInputElement().classList;n.toggle("VideoInputHasRecording",e),n.toggle("VideoInputIsRecording",this.isRecording()),n.toggle("VideoInputIsPlaying",t),n.toggle("VideoInputIsIdle",!t&&!this.isRecording()),n.toggle("VideoInputBusy",!1===this.mediaReady),n.toggle("VideoRecordNotAllowed",e&&this.dontAllowToReRecord)},Xh.prototype.stopRecording=function(){this.continueRecordingOnMediaReady=!1,this.isRecording()&&(this._clearCutOffTimeout(),this.toolbar.stopTimer(),this.mediaRecorder.stop(),this.mediaRecorder=null,this.toolbar.setHasRecording(!0),this._updateClassList())},Xh.prototype._playRecording=function(e){this.continueRecordingOnMediaReady=!1,this._stopWebcam(),this.videoElement.controls=!0,this._videoInputPlayer.setSrc(this.blobUrl),this.videoElement.muted=!1,e||this._videoInputPlayer.play(),this._updateClassList()},Xh.prototype._startWebcam=function(){if(Xh.startedInput&&Xh.startedInput!==this&&Xh.startedInput.videoElement.srcObject&&Xh.startedInput._stopWebcam(),Xh.startedInput=this,!this.webcamStarted)return this._getVideoInputElement().classList.add("VideoInputBusy"),this.mediaReady=!1,this.webcamStarted=!0,navigator.mediaDevices.getUserMedia({audio:!0,video:{width:640,height:360,facingMode:"user"}}).then(this._onMediaReady.bind(this)).catch(this._onMediaError.bind(this))},Xh.prototype.isMediaReady=function(){return this.mediaReady},Xh.prototype._onMediaReady=function(e){this.stream=e,this.videoElement.controls=!1,this.videoElement.muted=!0,this._videoInputPlayer.setSrcObject(this.stream),this._videoInputPlayer.play(),this.mediaReady=!0,this._updateClassList(),this.continueRecordingOnMediaReady&&this._continueStartingRecording()},Xh.prototype._onMediaError=function(e){console.error(e),alert(this.labels.cannotStartWebcam),this.mediaReady=!1},Xh.prototype.addListener=function(e,t){this.domNode.addEventListener(e,t)},Xh.prototype._createVideoElement=function(){var e=this;return this.element("video",{playsinline:"",class:"VideoInputVideo",onended:function(){e._updateClassList()},onpause:function(){e.paused=!0,e._updateClassList()},onplay:function(){e.paused=!1,e._updateClassList()}})},Xh.prototype._getVideoInputElement=function(){return this.domNode.firstElementChild},Xh.prototype._render=function(){return this.videoElement=this._createVideoElement(),this.toolbar=new Nh(this.labels,this.maxSeconds,!!this.blobUrl,this._startRecording.bind(this),this.stopRecording.bind(this),this._playRecording.bind(this)),this.element("div",{class:"VideoContainer"},[this.element("div",{class:"VideoInput VideoInputBusy"},[this.videoElement,this.toolbar])])};const ev=Xh;function tv(e){return tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tv(e)}function nv(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return rv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rv(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function rv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ov(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cv(r.key),r)}}function iv(){return iv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lv(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},iv.apply(this,arguments)}function av(e,t){return av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},av(e,t)}function uv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lv(e);if(t){var o=lv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===tv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function lv(e){return lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lv(e)}function cv(e){var t=function(e,t){if("object"!==tv(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==tv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===tv(t)?t:String(t)}var sv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&av(e,t)}(i,e);var t,n,r,o=uv(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._translations=n.getSetting("translations"),n._regularUploadMaxFileSize=n.getSetting("regularUploadMaxFileSize"),n._maxSeconds=n.getSetting("maxSeconds"),n._isLargeFilesUploadAllowed=n.getSetting("isLargeFilesUploadAllowed"),n._savedVideoUrl=n.getSetting("savedVideoUrl"),n._delayedLabelSettings=n.getSetting("delayedLabelSettings"),n._isLabelVisible=!n._delayedLabelSettings,n._file=null,n._videoInput=null,n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"addRemoveButton",value:function(){this._removeButtonBuilder&&this._removeButtonBuilder.addRemoveButton()}},{key:"_getRemoveButtonClickEventListener",value:function(){var e=this;return function(){return e._videoInput.removeVideo()}}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_mustUseStandardFileInput",value:function(){return!window.MediaRecorder||!navigator.mediaDevices}},{key:"_postRegister",value:function(){if(!this._mustUseStandardFileInput()){var e=this._getFileInput();this._videoInput=new ev(this._translations,this._onRecordingAvailable.bind(this),this._maxSeconds,this._savedVideoUrl,!!this._delayedLabelSettings),this._videoInput.addListener("startrecording",this._onStartRecording.bind(this)),e.parentNode.insertBefore(this._videoInput.getDomNode(),e),this._videoInput.startWebcamIfInDomAndNobodyElseHasIt(),this._preventOpeningFileUploadWindow(),this._stopRecordingBeforeSubmit(),iv(lv(i.prototype),"_postRegister",this).call(this)}}},{key:"_getFileInput",value:function(){return this._getFieldElement()[0]}},{key:"_onRecordingAvailable",value:function(e,t,n){this._file=new File([e],"recording."+t,{type:n,lastModified:(new Date).getTime()});var r=this._getFileInput();if(this._file.size>this._regularUploadMaxFileSize||this._isLargeFilesUploadAllowed)r.uploadThisFileAsBig=this._file;else{var o=new DataTransfer;o.items.add(this._file),r.files=o.files}this._triggerEvent("change")}},{key:"_onStartRecording",value:function(){if(this._delayedLabelSettings&&!this._isLabelVisible){var e=document.getElementById("fieldSpecContainer"+this.getFieldId());e&&(this._setDelayedLabel(e),this._setDelayedDescription(e,["formdescription","description"]),this._isLabelVisible=!0)}}},{key:"_setDelayedLabel",value:function(e){var t=document.getElementById(this.getFieldId()+"-label");t&&(e.classList.remove("FileSchemaFieldRecordVideo--waiting"),t.innerText=this._b64DecodeUnicode(this._delayedLabelSettings.obfuscatedLabel))}},{key:"_setDelayedDescription",value:function(e,t){var n,r=nv(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=e.getElementsByClassName(o);if(i.length>0)return i[0].prepend(this._b64DecodeUnicode(this._delayedLabelSettings.obfuscatedDescription)),!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"_getCurrentFiles",value:function(){if(this._videoInput&&this._file){var e=[];return this._file&&e.push(this._file),e}return iv(lv(i.prototype),"_getCurrentFiles",this).call(this)}},{key:"_hide",value:function(){iv(lv(i.prototype),"_hide",this).call(this),this._videoInput&&this._videoInput.stopRecording()}},{key:"onFormStepVisibilityChange",value:function(e){this._videoInput&&(e?this._videoInput.handleHide():this._videoInput.handleShow())}},{key:"_stopRecordingBeforeSubmit",value:function(){var e=this;Xn.default.getInstance().addActionBeforeSubmit((function(){if(!e._videoInput||!e._videoInput.isRecording())return null;var t=e._buildOnStopRecordingPromise();return e._stopRecording(),t}),e.getFieldId(),Xn.default.PRIORITY_HIGH)}},{key:"_buildOnStopRecordingPromise",value:function(){var e=document.getElementById(this.getFieldId());return e?new Promise((function(t,n){e.onchange=function(e){t()}})):null}},{key:"_stopRecording",value:function(){this._videoInput&&this._videoInput.stopRecording()}},{key:"_b64DecodeUnicode",value:function(e){return decodeURIComponent(atob(e).replace(/0x([0-9A-F]{2})/g,"%$1"))}}])&&ov(t.prototype,n),r&&ov(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Qs);!function(e,t,n){(t=cv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(sv,"TYPE","RecordVideoField");const fv=sv;n(85827);function pv(e){return pv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pv(e)}function dv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mv(r.key),r)}}function yv(){return yv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bv(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},yv.apply(this,arguments)}function hv(e,t){return hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hv(e,t)}function vv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bv(e);if(t){var o=bv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===pv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bv(e){return bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bv(e)}function mv(e){var t=function(e,t){if("object"!==pv(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==pv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===pv(t)?t:String(t)}var gv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hv(e,t)}(i,e);var t,n,r,o=vv(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._fieldId=e,n._datePickerContainerId=n.getSetting("datePickerContainerId"),n._companySelectorId=n.getSetting("companySelectorId"),n._prevMonthText=n.getSetting("prevMonthText"),n._nextMonthText=n.getSetting("nextMonthText"),n._relatedJobId=n.getSetting("relatedJobId"),n._minDateStr=n.getSetting("minDateStr"),n._maxDateStr=n.getSetting("maxDateStr"),n._locale=n.getSetting("locale"),n._eventsApiUrl=n.getSetting("eventsApiUrl"),n._initialMonth=n.getSetting("initialMonth"),n._initialYear=n.getSetting("initialYear"),n._isAccessibilityEnabled=n.getSetting("isAccessibilityEnabled"),n._showUserSchedulingTimezone=n.getSetting("showUserSchedulingTimezone"),n._currentSelectedDateText=n.getSetting("currentSelectedDateText"),n._currentSelectedSlotText=n.getSetting("currentSelectedSlotText"),n._slotDescriptionText=n.getSetting("slotDescriptionText"),n._timeslotsAvailableText=n.getSetting("timeslotsAvailableText"),n._noTimeslotsAvailableText=n.getSetting("noTimeslotsAvailableText"),n._useMilitaryTimeFormat=n.getSetting("useMilitaryTimeFormat"),n._firstDay=n.getSetting("firstDay"),n._dates=[],n._keepCurrentValue=!1,n._widget=null,n._datePicker=null,n._lastSelectedDateText=null,n._lastFetchedMonth=null,n._lastFetchedYear=null,n}return t=i,n=[{key:"_getAllowedValueTypesToSet",value:function(){return[]}},{key:"getType",value:function(){return i.TYPE}},{key:"_postRegister",value:function(){var e=this;this._locale=this._locale.toLowerCase().replace("_","-"),e._initWidget(),""!==this._companySelectorId&&pjQuery("#"+this._companySelectorId).change((function(){e._applyCompanyFilter()})),this._setOnResetFormListener(),yv(bv(i.prototype),"_postRegister",this).call(this)}},{key:"getValue",value:function(){return new Ot("")}},{key:"getValueForCondition",value:function(){return this._isTimeSlotSelected()}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e)}},{key:"_isTimeSlotSelected",value:function(){return Boolean(this._getValueId()&&this._getValueTimestamp()&&this._getValueSlotPartitionNumber())}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_checkAvailableDays",value:function(e){var t=Bd.ou.fromJSDate(e).toISODate();return[!0,this._getDayAvailabilityCssClass(t)]}},{key:"_getDayAvailabilityCssClass",value:function(e){return this._dates[e]?"selectable-day":"not-selectable-day"}},{key:"_updateAvailabilityForText",value:function(e){var t=Bd.ou.fromFormat(e,"yyyy-MM-dd").setLocale(this._locale).toFormat("DDDD");pjQuery("#"+this._datePickerContainerId).parent().find(".results .currentDay").html(t)}},{key:"_updateResults",value:function(e){this._updateAvailabilityForText(e),this._showLoading(),this._fetchItemsByDay(e)}},{key:"_fetchItemsByDay",value:function(e){var t=e.split("-"),n=t[2],r=t[1];this._widget.find(".results .resultsList").html("");var o=this._widget.find('.schedulerDatePicker td[data-month="'+(r-1)+'"]:contains("'+n+'")').filter((function(){return pjQuery(this).text()==n})),i=this._dates[e]&&this._dates[e].length>0;o.length>0&&!i?this._showNoResults():(this._drawItems(this._dates[e],n,r),this._focusOnResultsList())}},{key:"_showLoading",value:function(){this._widget.find(".schedulerDatePicker").css("pointer-events","none"),this._widget.find(".availability").attr("hidden",!0),this._widget.find(".results .resultsList").attr("hidden",!0),this._widget.find(".results .noResults").attr("hidden",!0),this._widget.find(".form__loader").removeAttr("hidden")}},{key:"_showNoResults",value:function(){this._widget.find(".schedulerDatePicker").css("pointer-events",""),this._widget.find(".availability").removeAttr("hidden"),this._widget.find(".results .resultsList").attr("hidden",!0),this._widget.find(".results .noResults").removeAttr("hidden"),this._widget.find(".form__loader").attr("hidden",!0),this._resetValue(),this._triggerEvent("change")}},{key:"_showResults",value:function(){this._widget.find(".schedulerDatePicker").css("pointer-events",""),this._widget.find(".availability").removeAttr("hidden"),this._widget.find(".results .resultsList").removeAttr("hidden"),this._widget.find(".results .noResults").attr("hidden",!0),this._widget.find(".form__loader").attr("hidden",!0)}},{key:"_generateRow",value:function(e){var t=pjQuery('<div class="resultItem"/>');if(t.attr("id",this._fieldId+"-"+e.id+"-"+e.timestamp),t.attr("item_id",e.id),t.attr("item_timestamp",e.timestamp),e.availablePartitionNumbers){var n=Object.keys(e.availablePartitionNumbers);n.length>0&&t.attr("item_slotPartitionNumber",n[0])}if(this._keepCurrentValue&&e.id==this._getValueId()&&e.timestamp==this._getValueTimestamp()&&(t.addClass("selected"),this._keepCurrentValue=!1),t.append(pjQuery('<p class="title">'+e.title+"</p>")),e.hasTime){var r="";e.timeZone&&(r=pjQuery('<span class="timeZone"> '+e.initTimeWithZone+" - "+e.endTimeWithZone+' <span class="timeZoneLabel">'+e.timeZone+'</span> <span class="timeZoneOffset">'+e.timeZoneGMTMode+"</span></span>")[0].outerHTML);var o=Bd.ou.fromMillis(1e3*e.initTimestamp).toFormat(this._getTimeFormat()),i=Bd.ou.fromMillis(1e3*e.endTimestamp).toFormat(this._getTimeFormat()),a="";if(this._showUserSchedulingTimezone){var u=Bd.ou.now();a='<span class="localTimeZone">'+u.toFormat("z").replace("/"," - ")+" (GMT "+u.toFormat("ZZ")+")</span>"}t.append(pjQuery('<p class="time"><span class="timeLocal">'+o+" - "+i+" "+a+"</span> "+r+"</p>")),e.initTime=o,e.endTime=i}else{var l=pjQuery(this._widget.find(".results .allDay")[0].outerHTML).removeAttr("hidden");t.append(l)}return e.location&&t.append(pjQuery('<p class="location">'+e.location+"</p>")),this._makeResultItemRowAccessibleIfNeeded(t,e),t}},{key:"_drawItems",value:function(e,t,n){this._keepCurrentValue||this._resetValue();var r=this._datePicker.datepicker("getDate");if(r.getDate()==t&&r.getMonth()+1==n)if(e&&0!==e.length){for(var o in e)if(e.hasOwnProperty(o)){var i=this._generateRow(e[o]);this._widget.find(".results .resultsList").append(i)}this._setClicksOnItems(),this._showResults()}else this._showNoResults()}},{key:"_focusOnResultsList",value:function(){this._addAccessibilityAttributes(),this._isAccessibilityEnabled&&(this._widget.find(".results .resultsList").focus(),this._widget.find(".results .resultsList").click()),this._triggerEvent("change")}},{key:"_setClicksOnItems",value:function(){var e=this,t=e._widget.find(".results .resultsList .resultItem");t.click((function(){var n=pjQuery(this);pjQuery(this).hasClass("selected")?(e._unselectItem(t),n.parent().attr("aria-activedescendant",""),e._resetValue()):(e._unselectItem(t),e._setSelectedValue(n.attr("item_id"),n.attr("item_timestamp"),n.attr("item_slotPartitionNumber")),n.addClass("selected"),n.attr("aria-selected","true"),n.parent().attr("aria-activedescendant",n.attr("id"))),e._triggerEvent("change")}))}},{key:"_setSelectedValue",value:function(e,t,n){pjQuery("#"+this._fieldId+"id").val(e),pjQuery("#"+this._fieldId+"timestamp").val(t),pjQuery("#"+this._fieldId+"slotPartitionNumber").val(n)}},{key:"_resetValue",value:function(){pjQuery("#"+this._fieldId+"id").val(""),pjQuery("#"+this._fieldId+"timestamp").val(""),pjQuery("#"+this._fieldId+"slotPartitionNumber").val("")}},{key:"_unselectItem",value:function(e){e.removeClass("selected"),e.attr("aria-selected","false")}},{key:"_setOnResetFormListener",value:function(){var e,t=this;null===(e=this.getWizard().getForm())||void 0===e||e.addEventListener("reset",(function(){t._resetValue();var e=t._getFieldElement().find(".selected");t._unselectItem(e),e.parent().attr("aria-activedescendant","")}))}},{key:"_getValueId",value:function(){return pjQuery("#"+this._fieldId+"id").val()}},{key:"_getValueTimestamp",value:function(){var e=pjQuery("#"+this._fieldId+"timestamp").val();return parseInt(e)}},{key:"_getValueSlotPartitionNumber",value:function(){var e=pjQuery("#"+this._fieldId+"slotPartitionNumber").val();return parseInt(e)}},{key:"_fetchItemsByMonth",value:function(e,t,n){this._lastFetchedMonth=e,this._lastFetchedYear=t;var r=this,o=this._buildStartTimestamp(t,e,1),i=this._buildEndTimestamp(t,e,0);pjQuery.ajax(r._buildCalendarApiRequestPayload(o,i)).done((function(e){r._saveMonthItems(e)})).fail((function(){r._saveMonthItems([])})).always((function(){n()}))}},{key:"_saveMonthItems",value:function(e){this._dates=e.reduce((function(e,t){var n=Bd.ou.fromSeconds(t.timestamp).toFormat("yyyy-MM-dd");return void 0===e[n]&&(e[n]=[]),e[n].push(t),e}),[])}},{key:"_setDatePickerLanguage",value:function(){this._setDatePickerLocale(this._locale)}},{key:"_initDatePicker",value:function(e){var t=e.toJSDate();this._setCurrentSelectedDateInTitle(t),this._widget=pjQuery("#"+this._datePickerContainerId).parent(),this._currentMonth=t.getMonth()+1,this._currentYear=t.getFullYear();var n=this;this._setDatePickerLanguage(),this._datePicker=pjQuery("#"+this._datePickerContainerId).datepicker({defaultDate:e.toJSDate(),dateFormat:"yy-mm-dd",nextText:n._nextMonthText,prevText:n._prevMonthText,showOtherMonths:!0,minDate:n._minDateStr,maxDate:n._maxDateStr,firstDay:n._firstDay,onSelect:function(e){n._setCurrentSelectedDateInTitle(new Date(e)),n._lastSelectedDateText=e,n._updateResults(e),setTimeout((function(){n._addAccessibilityAttributes()}),0)},onChangeMonthYear:function(e,t){n._currentMonth=t,n._currentYear=e,n._fetchItemsByMonth(t,e,(function(){n._addAccessibilityAttributes(),setTimeout((function(){pjQuery(".ui-state-hover").removeClass("ui-state-hover")}),0)})),setTimeout((function(){n._addAccessibilityAttributes()}),0)},beforeShowDay:function(e){return n._checkAvailableDays(e)}}),this._addAccessibilityAttributes()}},{key:"_refreshDatePicker",value:function(){pjQuery("#"+this._datePickerContainerId).datepicker("refresh")}},{key:"_initWidget",value:function(){var e,t,n=null,r=this;if(""!=this._getValueId()){var o=this._getValueTimestamp();e=(n=Bd.ou.fromSeconds(o)).month,t=n.year,this._keepCurrentValue=!0}else if(""!=this._initialYear)e=this._initialMonth,t=this._initialYear;else{var i=Bd.ou.now();e=i.month,t=i.year}this._fetchItemsByMonth(e,t,(function(){if(null==n){var e=Object.keys(r._dates);n=0===e.length?r._minDateStr?Bd.ou.fromFormat(r._minDateStr,"yyyy-MM-dd"):Bd.ou.now():Bd.ou.fromFormat(e[0],"yyyy-MM-dd")}r._initDatePicker(n),r._lastSelectedDateText=n.toFormat("yyyy-MM-dd"),r._updateResults(r._lastSelectedDateText)}))}},{key:"_applyCompanyFilter",value:function(){var e=this;e._fetchItemsByMonth(e._lastFetchedMonth,e._lastFetchedYear,(function(){e._refreshDatePicker(),e._updateResults(e._lastSelectedDateText),setTimeout((function(){e._addAccessibilityAttributes()}),0)}))}},{key:"_isRegionLocale",value:function(e){return e.indexOf("-")>=0}},{key:"_getCountryLocale",value:function(e){return e.split("-")[0]}},{key:"_setDatePickerLocale",value:function(e){if(!pjQuery.datepicker.regional[e]){var t=PortalDate.getPortalDateInfo();pjQuery.datepicker.regional[e]={monthNames:t.getMonthsFullName(e),monthNamesShort:t.getMonthsShortName(e),dayNames:t.getDaysFullName(e,!0),dayNamesShort:t.getDaysShortName(e,!0),dayNamesMin:t.getDaysMinName(e,!0)}}pjQuery.datepicker.setDefaults(pjQuery.datepicker.regional[e])}},{key:"_addAccessibilityAttributes",value:function(){this._isAccessibilityEnabled&&(this._addHeadingRoleToMonthAndYearTitle(),this._makeMonthNavigationAccessible(),this._makeDayNavigationAccessible())}},{key:"_addHeadingRoleToMonthAndYearTitle",value:function(){var e=document.getElementById(this._fieldId+"_datepicker_scheduling").querySelector(".ui-datepicker-title");e&&(e.setAttribute("role","heading"),e.setAttribute("aria-level","2"))}},{key:"_makeMonthNavigationAccessible",value:function(){var e=pjQuery("#"+this._datePickerContainerId),t=["a.ui-datepicker-prev.ui-corner-all","a.ui-datepicker-next.ui-corner-all"],n=Bd.ou.fromFormat(this._currentYear+"-"+this._currentMonth+"-01","yyyy-M-dd").plus({months:1}),r=Bd.ou.fromFormat(this._currentYear+"-"+this._currentMonth+"-01","yyyy-M-dd").minus({months:1});t.forEach((function(o){var i=e.find(o);"click"===i.attr("data-event")&&(i.attr("tabindex",0),i.attr("role","button"));var a=-1!==o.indexOf("prev")?r.toFormat("LLLL yyyy"):n.toFormat("LLLL yyyy");i.attr("aria-label",i.attr("title")+": "+a),i.keypress((function(n){13===n.keyCode&&(this.click(),setTimeout((function(){var n=e.find(o);if("click"===n.attr("data-event"))n.focus();else{var r=t[0]===o?1:0;e.find(t[r]).focus()}}),0))}))}))}},{key:"_makeDayNavigationAccessible",value:function(){var e=this;pjQuery("#"+this._datePickerContainerId).find(".ui-state-default").each((function(){var t=pjQuery(this),n=t.parent(),r=n.attr("data-month"),o=n.attr("data-year");if(r&&o){r=parseInt(r,10)+1;var i=parseInt(t.text()),a=Bd.ou.fromFormat(o+"-"+r+"-"+i,"yyyy-M-d"),u=a.toFormat("yyyy-MM-dd"),l=e._dates.hasOwnProperty(u),c=l?e._timeslotsAvailableText.replace("{$amount}",e._dates[u].length):e._noTimeslotsAvailableText;t.attr("aria-label",a.toFormat("DDDD")+". "+c),t.attr("aria-disabled",l?"false":"true"),n.addClass(e._getDayAvailabilityCssClass(u))}}))}},{key:"_setCurrentSelectedDateInTitle",value:function(e){var t=pjQuery("#"+this._fieldId+"_schedulingTitle");t.attr("aria-label",t.text()+": "+this._currentSelectedDateText+" "+Bd.ou.fromJSDate(e).toFormat("DDDD"))}},{key:"_makeResultItemRowAccessibleIfNeeded",value:function(e,t){this._isAccessibilityEnabled&&(e.attr("tabindex",0),e.attr("role","option"),e.attr("aria-selected","false"),e.attr("aria-label",this._formatAriaLabelDescriptionForSlotData(t)),e.keypress((function(e){13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),this.click())})))}},{key:"_formatAriaLabelDescriptionForSlotData",value:function(e){var t=this._slotDescriptionText.replace("{$title}",e.title);return t=e.location?(t=(t=t.replace("{$location}",e.location)).replace("[#location]","")).replace("[#endLocation]",""):t.replace(/\[#location\].*\[#endLocation\]/,""),e.hasTime?(t=(t=(t=(t=(t=t.replace(/\[#allDay\].*\[#endAllDay\]/,"")).replace("{$startTime}",e.initTime)).replace("{$endTime}",e.endTime)).replace("[#time]","")).replace("[#endTime]",""),t=e.timeZone?(t=(t=(t=(t=t.replace("{$startTimeCustomTimeZone}",e.initTimeWithZone)).replace("{$endTimeCustomTimeZone}",e.endTimeWithZone)).replace("{$customTimeZone}",e.timeZone+" "+e.timeZoneGMTMode)).replace("[#customTimeZone]","")).replace("[#endCustomTimeZone]",""):t.replace(/\[#customTimeZone\].*\[#endCustomTimeZone\]/,"")):t=(t=(t=(t=t.replace(/\[#time\].*\[#endTime\]/,"")).replace(/\[#customTimeZone\].*\[#endCustomTimeZone\]/,"")).replace("[#allDay]","")).replace("[#endAllDay]",""),t}},{key:"_getTimeFormat",value:function(){return this._useMilitaryTimeFormat?"HH:mm":"h:mm a"}},{key:"_buildStartTimestamp",value:function(e,t,n){var r=new Date(e,t-1,n);return Math.floor(r.getTime()/1e3)}},{key:"_buildEndTimestamp",value:function(e,t,n){var r=new Date(e,t,n,23,59,59);return Math.floor(r.getTime()/1e3)}},{key:"_buildCalendarApiRequestPayload",value:function(e,t){var n=new Date,r=this._buildCompanyFilter();return{contentType:"application/json",data:'{ "id": '+this._fieldId+', "jobId": '+this._relatedJobId+', "from": '+e+', "to": '+t+', "timezoneOffset": '+n.getTimezoneOffset()+r+"}",dataType:"json",type:"POST",url:this._eventsApiUrl}}},{key:"_buildCompanyFilter",value:function(){var e="";return""!==this._companySelectorId&&(e=', "companyFilter": '+pjQuery("#"+this._companySelectorId).val()),e}}],n&&dv(t.prototype,n),r&&dv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=mv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(gv,"TYPE","SchedulingField");const _v=gv;function wv(e){return wv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wv(e)}function Sv(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ov(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ov(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Ov(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fv(r.key),r)}}function Ev(e,t){return Ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ev(e,t)}function kv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jv(e);if(t){var o=jv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===wv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function jv(e){return jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jv(e)}function Tv(e,t,n){return(t=Fv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fv(e){var t=function(e,t){if("object"!==wv(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==wv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===wv(t)?t:String(t)}var Iv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ev(e,t)}(i,e);var t,n,r,o=kv(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._collapseButtonLabel=n.getSetting("collapseButtonLabel"),n._expandButtonLabel=n.getSetting("expandButtonLabel"),n._collapseExpandButtonLocation=n.getSetting("collapseExpandButtonLocation");var r=document.getElementById(e);return null!==r&&(n._section=r.closest(".Section"),n._addCollapseExpandButtonIfNeeded(),n.getWizard().addListener(QO.EVENT_AFTER_FIELDS_REGISTER,n.caller("_addEventListenerToCollapsibleFields")),n.getWizard().addListener(QO.EVENT_AFTER_FIELDS_REGISTER,n.caller("_openSectionIfFieldHasErrors"))),n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){return new x}},{key:"getValueForCondition",value:function(){return null}},{key:"_shouldHaveHiddenElementIndicator",value:function(){return!1}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_addCollapseExpandButtonIfNeeded",value:function(){this._isSectionCollapsible()&&(this._button=this._getButton(),null!==this._button&&this._attachCollapseExpandEvent(this._button))}},{key:"_getButton",value:function(){return this._section.querySelector(".Section__toggle")}},{key:"_attachCollapseExpandEvent",value:function(e){var t=this;e.onclick=function(){var n;t._expandOrCollapseSection(),t._showOrHideFields(),t._updateButtonText(e),t._isButtonLocationBottom()&&(null===(n=t._getFirstFocusableElement())||void 0===n||n.focus())}}},{key:"_showOrHideFields",value:function(){var e=this;this._getCollapsibleFields().forEach((function(t){var n=G.getField(e._getFieldIdFromFieldContainerId(t.id));n&&n.setVisibilityStatusByType(Ne.SECTION_COLLAPSIBLE,e._isSectionExpanded())}))}},{key:"_isButtonLocationBottom",value:function(){return this._collapseExpandButtonLocation===i.COLLAPSE_BUTTON_LOCATION_BOTTOM}},{key:"_getFieldIdFromFieldContainerId",value:function(e){return e.substring(18)}},{key:"_updateButtonText",value:function(e){var t=e.querySelector(".toggle__text");null!==t&&(t.textContent=this._getButtonText())}},{key:"_getCollapsibleFields",value:function(){return this._section.getElementsByClassName("fieldSpec--collapsible")}},{key:"_getFirstFocusableElement",value:function(){var e,t=Sv(this._getCollapsibleFields());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this._getAllFocusableElements(n);if(r.length>0)return r[0]}}catch(e){t.e(e)}finally{t.f()}return null}},{key:"_getAllFocusableElements",value:function(e){return e?e.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"]):not([disabled]), details:not([disabled]), summary:not(:disabled)'):[]}},{key:"_expandOrCollapseSection",value:function(){this._toggleClass("Section--collapsible--open"),this._toggleAriaExpandedAttribute()}},{key:"_addEventListenerToCollapsibleFields",value:function(){var e=this;this._getCollapsibleFields().forEach((function(t){var n=G.getField(e._getFieldIdFromFieldContainerId(t.id));n&&n.addListener(ht.EVENT_ON_VALIDATION_FAIL,e.caller("_openSection"))}))}},{key:"_openSectionIfFieldHasErrors",value:function(){this._sectionHasFieldWithError()&&this._openSection()}},{key:"_openSection",value:function(){this._isSectionExpanded()||this._button.click()}},{key:"_sectionHasFieldWithError",value:function(){return this._section.hasAttribute("data-hasFieldWithError")&&"1"===this._section.getAttribute("data-hasFieldWithError")}},{key:"_isSectionExpanded",value:function(){return this._section.classList.contains("Section--collapsible--open")}},{key:"_isSectionCollapsible",value:function(){return this._section.classList.contains("Section--collapsible")}},{key:"_getButtonText",value:function(){return this._isSectionExpanded()?this._collapseButtonLabel:this._expandButtonLabel}},{key:"_toggleClass",value:function(e){this._section.classList.contains(e)?this._section.classList.remove(e):this._section.classList.add(e)}},{key:"_toggleAriaExpandedAttribute",value:function(){var e=this._section.querySelector(".toggle");null!==e&&("true"===e.getAttribute("aria-expanded")?e.setAttribute("aria-expanded","false"):e.setAttribute("aria-expanded","true"))}}])&&Pv(t.prototype,n),r&&Pv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);Tv(Iv,"TYPE","SeparatorField"),Tv(Iv,"COLLAPSE_BUTTON_LOCATION_TOP","top"),Tv(Iv,"COLLAPSE_BUTTON_LOCATION_BOTTOM","bottom");const Rv=Iv;function Cv(e){return Cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cv(e)}function Dv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nv(r.key),r)}}function xv(e,t){return xv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xv(e,t)}function Av(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lv(e);if(t){var o=Lv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Cv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Lv(e){return Lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lv(e)}function Nv(e){var t=function(e,t){if("object"!==Cv(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Cv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Cv(t)?t:String(t)}var Mv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xv(e,t)}(i,e);var t,n,r,o=Av(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._setHours(e),r._setMinutes(t),r._setSeconds(n),r}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return PortalString.zeroPad(this._hours.toString(),2)+":"+PortalString.zeroPad(this._minutes.toString(),2)+":"+PortalString.zeroPad(this._seconds.toString(),2)}},{key:"getHours",value:function(){return this._hours}},{key:"getMinutes",value:function(){return this._minutes}},{key:"getSeconds",value:function(){return this._seconds}},{key:"_setHours",value:function(e){if(!PortalNumber.isNumber(e)||e<0||e>23)throw new Error("invalidArgumentException: Hours should be between 0 and 23");this._hours=e}},{key:"_setMinutes",value:function(e){if(!PortalNumber.isNumber(e)||e<0||e>59)throw new Error("invalidArgumentException: Minutes should be between 0 and 59");this._minutes=e}},{key:"_setSeconds",value:function(e){if(!PortalNumber.isNumber(e)||e<0||e>59)throw new Error("invalidArgumentException: Seconds should be between 0 and 59");this._seconds=e}}],n&&Dv(t.prototype,n),r&&Dv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(O);!function(e,t,n){(t=Nv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Mv,"TYPE","FieldTimeValue");const Vv=Mv;function Bv(e){return Bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bv(e)}function Uv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hv(r.key),r)}}function Wv(e,t){return Wv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wv(e,t)}function Yv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qv(e);if(t){var o=Qv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Bv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Qv(e){return Qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qv(e)}function Hv(e){var t=function(e,t){if("object"!==Bv(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Bv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Bv(t)?t:String(t)}var zv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wv(e,t)}(i,e);var t,n,r,o=Yv(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){var e=this._getFieldElement().val();return e==this._notSelectedOptionValue?new x:new Vv(PortalString.toInt(e),0,0)}},{key:"getValueForCondition",value:function(){var e=this._getFieldElement().val();return[e=e!=this._notSelectedOptionValue?e:null,0,0]}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}}],n&&Uv(t.prototype,n),r&&Uv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Nu);!function(e,t,n){(t=Hv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(zv,"TYPE","SimpleTimeField");const qv=zv;function Jv(e){return Jv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jv(e)}function Gv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xv(r.key),r)}}function Zv(e,t){return Zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zv(e,t)}function Kv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$v(e);if(t){var o=$v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Jv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $v(e){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$v(e)}function Xv(e){var t=function(e,t){if("object"!==Jv(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Jv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Jv(t)?t:String(t)}var eb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zv(e,t)}(i,e);var t,n,r,o=Kv(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._baseFieldId=i._extractBaseIdFromCompoundFieldId(e),V.registerFieldDependency(n._baseFieldId,n._baseFieldId+i._getCategoryFieldSuffix(),V.TYPE_VALUES),n}return t=i,r=[{key:"_extractBaseIdFromCompoundFieldId",value:function(e){return e.replace("_sourceAndCategory","")}},{key:"_getCategoryFieldSuffix",value:function(){return"_category"}}],(n=[{key:"getValue",value:function(){return new x}},{key:"getValueForCondition",value:function(){return null}},{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_cloneDependentFieldsForNewTableRow",value:function(e,t){}},{key:"_getDepedentFieldsMetadata",value:function(){return[this._createFieldMetadata(this._baseFieldId,""),this._createFieldMetadata(this._baseFieldId,i._getCategoryFieldSuffix())]}},{key:"_attachOnChangeListener",value:function(){}}])&&Gv(t.prototype,n),r&&Gv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ro);!function(e,t,n){(t=Xv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(eb,"TYPE","SourceAndCategoryField");const tb=eb;function nb(e){return nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nb(e)}function rb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ob(r.key),r)}}function ob(e){var t=function(e,t){if("object"!==nb(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nb(t)?t:String(t)}var ib=function(){function e(t,n,r,o,i,a,u,l,c,s,f,p,d,y,h,v,b,m,g,_){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fieldId=t,this.dropdownCssClass=n,this.placeholderText=r,this.minimumInputLength=o,this.isMultiple=i,this.ajaxDelayMs=a,this.visibleOptionsLimit=u,this.optionsSearchApiUrl=l,this.dictionary=c,this.label=s,this.isRequired=f,this.isAccessible=p,this.requestedDataFieldId=d,this.jobId=y,this.contactOrJobIdEdit=h,this.wizardId=v,this.wizardFormId=b,this.schemaFieldId=m,this.optionFormatJson=g,this.alphabeticalOrder=_||!1}var t,n,r;return t=e,(n=[{key:"attachToFieldAndRefreshOptions",value:function(e){var t=this;pjQuery("#"+e).select2({placeholder:t.placeholderText,allowClear:!0,width:"100%",minimumInputLength:t.minimumInputLength,multiple:t.isMultiple,containerCssClass:"select2Container"+e,dropdownCssClass:t.dropdownCssClass,escapeMarkup:function(e){return e},dictionary:t.dictionary,label:t.label,fieldId:t.fieldId,isRequired:t.isRequired,isAccessible:t.isAccessible,ajax:{url:t.optionsSearchApiUrl,type:"POST",delay:t.ajaxDelayMs,quietMillis:t.ajaxDelayMs,dataType:"json",data:function(n){return t._buildAjaxRequestData(e,n)},processResults:function(e,n){return t._processAjaxResponseData(e,n)}}}),pjQuery("#"+e).on("select2:select",(function(e){pjQuery(this).focus()})),pjQuery("#"+e).trigger("select2-"+e+"-ready")}},{key:"_buildAjaxRequestData",value:function(e,t){var n={searchText:t.term,ids:t.searchIds,fieldId:this.requestedDataFieldId,jobId:this.jobId,page:t.page||1,limit:this.visibleOptionsLimit,wizardFormId:this.wizardFormId,optionFormat:this.optionFormatJson,schemaFieldId:this.schemaFieldId,alphabeticalOrder:this.alphabeticalOrder},r=this.wizardId;r&&(n.wizardId=r);var o=this.contactOrJobIdEdit;return o&&(n.contactOrJobIdEdit=o),JSON.stringify(n)}},{key:"_processAjaxResponseData",value:function(e,t){var n=e.results?e.results:e;Array.isArray(n)||(n=[n]);for(var r=0,o=n.length;r<o;r++)n[r].value&&(n[r]=n[r].value);var i=!!e.more&&e.more;return t.page=t.page||1,{results:n.map((function(e){return{id:e.id,text:e.name,children:e.children?e.children.map((function(e){return{id:e.id,text:e.name,category:e.category}})):null}})),pagination:{more:i}}}}])&&rb(t.prototype,n),r&&rb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const ab=ib;function ub(e){return ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ub(e)}function lb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cb(r.key),r)}}function cb(e){var t=function(e,t){if("object"!==ub(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ub(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ub(t)?t:String(t)}var sb=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"registerJobTemplateAutocompletableWidgetLazyPicker",value:function(t,n,r,o,i,a,u,l,c,s,f,p,d,y,h,v,b,m,g,_){e._lazyPickers[t]=new ab(t,n,r,o,i,a,u,l,c,s,f,p,d,y,h,v,b,m,g,_)}},{key:"refreshLazyPickerOptions",value:function(t){e.refreshLazyPickerOptionsUsingOtherLazyPickerConfigAsSource(t,t)}},{key:"refreshLazyPickerOptionsUsingOtherLazyPickerConfigAsSource",value:function(t,n){var r=e._getLazyPicker(t);null!==r&&r.attachToFieldAndRefreshOptions(n)}},{key:"_getLazyPicker",value:function(t){return e._isLazyPickerRegistered(t)?e._lazyPickers[t]:null}},{key:"_isLazyPickerRegistered",value:function(t){return t in e._lazyPickers}}],(n=null)&&lb(t.prototype,n),r&&lb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();sb._lazyPickers={};const fb=sb;function pb(e){return pb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pb(e)}function db(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bb(r.key),r)}}function yb(e,t){vb(e,t),t.add(e)}function hb(e,t,n){vb(e,t),t.set(e,n)}function vb(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function bb(e){var t=function(e,t){if("object"!==pb(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==pb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===pb(t)?t:String(t)}function mb(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function gb(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Sb(e,t,"get"))}function _b(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),n}function wb(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Sb(e,t,"set"),n),n}function Sb(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ob=new WeakMap,Pb=new WeakMap,Eb=new WeakMap,kb=new WeakSet,jb=new WeakSet,Tb=new WeakSet,Fb=new WeakSet,Ib=new WeakSet,Rb=new WeakSet,Cb=new WeakSet,Db=new WeakSet,xb=new WeakSet,Ab=new WeakSet,Lb=new WeakSet,Nb=new WeakSet,Mb=new WeakSet,Vb=new WeakSet,Bb=new WeakSet,Ub=new WeakSet,Wb=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),yb(this,Ub),yb(this,Bb),yb(this,Vb),yb(this,Mb),yb(this,Nb),yb(this,Lb),yb(this,Ab),yb(this,xb),yb(this,Db),yb(this,Cb),yb(this,Rb),yb(this,Ib),yb(this,Fb),yb(this,Tb),yb(this,jb),yb(this,kb),hb(this,Ob,{writable:!0,value:void 0}),hb(this,Pb,{writable:!0,value:void 0}),hb(this,Eb,{writable:!0,value:void 0}),wb(this,Ob,t),wb(this,Pb,JSON.parse(n)),wb(this,Eb,JSON.parse(r))}var t,n,r;return t=e,r=[{key:"prepareFileFieldToReuseUploadedFiles",value:function(t,n,r){new e(t,n,r).addOldFilesSelectorToFileInput(),_b(e,e,Yb).call(e,t,n,r)}}],(n=[{key:"addOldFilesSelectorToFileInput",value:function(){var e=document.getElementById("fileInput_"+gb(this,Ob));if(e){var t=mb(this,Lb,tm).call(this),n=mb(this,Nb,nm).call(this);t.appendChild(n),e.prepend(t),mb(this,kb,Hb).call(this)}}}])&&db(t.prototype,n),r&&db(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Yb(e,t,n){var r=_b(Wb,Wb,Qb).call(Wb,e);r&&(Wb.tableFieldsDataReference[r]={dictionaryJSON:t,uploadedFilesJSON:n})}function Qb(e){var t=e.split("-sample");return 2===t.length?t[0]:null}function Hb(){var e=this,t=document.getElementById("fileInput_"+gb(this,Ob)+"_oldFilesSelector");t&&t.addEventListener("change",(function(){mb(e,Db,$b).call(e)?mb(e,jb,zb).call(e):(mb(e,xb,Xb).call(e),mb(e,Tb,qb).call(e,mb(e,Cb,Kb).call(e)))}))}function zb(){mb(this,Ab,em).call(this),mb(this,Ib,Gb).call(this),mb(this,Rb,Zb).call(this,"")}function qb(e){mb(this,Rb,Zb).call(this,gb(this,Eb)[e-1]["data-hiddenValue"]),mb(this,Fb,Jb).call(this)}function Jb(){var e=document.getElementById("fileInput_"+gb(this,Ob));if(e){var t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name","file_"+gb(this,Ob)+"_reuse"),t.setAttribute("value","1"),e.append(t)}}function Gb(){var e=document.querySelector("input[name=file_"+gb(this,Ob)+"_reuse]");e&&e.remove()}function Zb(e){var t=document.querySelector("input[name=file_"+gb(this,Ob)+"_fileNumber]");t&&(t.value=e)}function Kb(){var e=document.getElementById("fileInput_"+gb(this,Ob)+"_oldFilesSelector");return e?e.value:""}function $b(){return"0"===mb(this,Cb,Kb).call(this)}function Xb(){var e=document.getElementById(gb(this,Ob));e&&(e.hidden=!0)}function em(){var e=document.getElementById(gb(this,Ob));e&&(e.hidden=!1)}function tm(){var e=document.createElement("div");return e.setAttribute("id","fileInput_"+gb(this,Ob)+"_oldFilesSelectorContainer"),e.dataset.oldFilesSelectorSampleReference=gb(this,Ob),e}function nm(){var e=document.createElement("select");return e.setAttribute("id","fileInput_"+gb(this,Ob)+"_oldFilesSelector"),e.setAttribute("aria-labelledby",gb(this,Ob)+"-label"),e.appendChild(mb(this,Mb,rm).call(this)),e.appendChild(mb(this,Vb,om).call(this)),e}function rm(){var e=document.createElement("option");return e.setAttribute("value","0"),e.innerText=gb(this,Pb).uploadNewFile,e}function om(){var e=document.createElement("optgroup");return e.setAttribute("label",gb(this,Pb).previouslySavedFiles),mb(this,Bb,im).call(this,e),e}function im(e){for(var t=0;t<gb(this,Eb).length;++t){var n=gb(this,Eb)[t],r=document.createElement("option");r.setAttribute("value",(t+1).toString()),r.innerText=n.name+mb(this,Ub,am).call(this,n.timestamp),e.appendChild(r)}}function am(e){return e?" - "+Bd.ou.fromMillis(1e3*e).toFormat("dd LLL yyyy"):""}!function(e,t,n){(t=bb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Wb,"tableFieldsDataReference",{});const um=Wb;function lm(e){return lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lm(e)}function cm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sm(r.key),r)}}function sm(e){var t=function(e,t){if("object"!==lm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==lm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===lm(t)?t:String(t)}var fm=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._patternSampleContainerName=/^(multipleDatasetEntry_.*)_sample$/,this._sampleContainerId="multipleDatasetEntry_"+this._fieldId+"_sample",this._rowsContainerId="multipleDatasetRowsContainer_"+this._fieldId,this._rowContainerWithoutRowIndexId="multipleDatasetEntry_"+this._fieldId+"_",this._offsetValueId="multipleDatasetEntry_"+this._fieldId+"_rowOffset",this._classSpecInDataSet=".datasetfieldSpec",this._classRemove=".removeDatasetRow",this._fieldsContainers="datasetfieldSpec"}var t,n,r;return t=e,n=[{key:"unWrapJQuery",value:function(e){return e[0]}},{key:"wrapJQuery",value:function(e){return pjQuery(e)}},{key:"getPatternNameSampleContainer",value:function(){return this._patternSampleContainerName}},{key:"getSampleContainer",value:function(){return this.wrapJQuery(document.getElementById(this._sampleContainerId))}},{key:"getRowsContainer",value:function(){return this.wrapJQuery(document.getElementById(this._rowsContainerId))}},{key:"getJQueryRowContainer",value:function(e){return this.wrapJQuery(this.getRowContainer(e))}},{key:"getRowContainer",value:function(e){return document.getElementById(this._rowContainerWithoutRowIndexId+e)}},{key:"setOffsetValue",value:function(e){this.wrapJQuery(document.getElementById(this._offsetValueId)).val(e)}},{key:"getFieldsInsideTableRow",value:function(e){var t=this,n=[];return this.getRowContainer(e).getElementsByClassName(this._fieldsContainers).forEach((function(e){n.push(G.getField(t._getFieldIdFromFieldContainerId(e.id)))})),n}},{key:"getClassSpecInDataset",value:function(){return this._classSpecInDataSet}},{key:"getClassRemove",value:function(){return this._classRemove}},{key:"cleanAttributesOfSample",value:function(e){this.unWrapJQuery(e).removeAttribute("aria-hidden"),this.unWrapJQuery(e).classList.remove("TableSampleRow")}},{key:"isAddAnotherButton",value:function(e){return this.unWrapJQuery(e).classList.contains("addDatasetRow")}},{key:"addClonedRowToRowsContainer",value:function(e){this.wrapJQuery(document.getElementById(this._rowsContainerId)).append(e)}},{key:"_getFieldIdFromFieldContainerId",value:function(e){return e.substring(18)}}],n&&cm(t.prototype,n),r&&cm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const pm=fm;function dm(e){return dm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dm(e)}function ym(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hm(r.key),r)}}function hm(e){var t=function(e,t){if("object"!==dm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==dm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===dm(t)?t:String(t)}function vm(e,t){return vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vm(e,t)}function bm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mm(e);if(t){var o=mm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function mm(e){return mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mm(e)}var gm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vm(e,t)}(i,e);var t,n,r,o=bm(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._patternSampleContainerName=/^(datasetField__row--.*)-sample$/,t._sampleContainerId="datasetField__row--"+t._fieldId+"-sample",t._rowsContainerId=t._fieldId,t._rowContainerWithoutRowIndexId="datasetField__row--"+t._fieldId+"_",t._classSpecInDataSet=".fieldSpec--in-dataset",t._classRemove=".action--remove",t._fieldsContainers="fieldSpec",t}return t=i,(n=[{key:"cleanAttributesOfSample",value:function(e){this.unWrapJQuery(e).removeAttribute("aria-hidden"),this.unWrapJQuery(e).removeAttribute("hidden"),this.unWrapJQuery(e).classList.remove("datasetField__row--sample")}},{key:"isAddAnotherButton",value:function(e){return void 0!==e&&this.unWrapJQuery(e).classList.contains("datasetField__button--add")}},{key:"addClonedRowToRowsContainer",value:function(e){this.wrapJQuery(document.getElementById(this._fieldId).querySelector(".datasetcontent > .datasetField__button--add")).before(e)}}])&&ym(t.prototype,n),r&&ym(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(pm);const _m=gm;function wm(e){return wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wm(e)}function Sm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,km(r.key),r)}}function Om(e,t){return Om=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Om(e,t)}function Pm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Em(e);if(t){var o=Em(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===wm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Em(e){return Em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Em(e)}function km(e){var t=function(e,t){if("object"!==wm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==wm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===wm(t)?t:String(t)}var jm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Om(e,t)}(i,e);var t,n,r,o=Pm(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._lastRowIndex=n.getSetting("lastRowIndex"),n._isAccessibilityEnabled=n.getSetting("isAccessibilityEnabled"),n.getSetting("hasLegacyFormat")?n._structure=new pm(e):n._structure=new _m(e),n}return t=i,n=[{key:"_postRegister",value:function(){this._fixSampleRowRequiredAttributesForAccessibility(),this._attachOnClickListenersToAddNewRowLink(),this._attachOnClickListenersToRowsRemovalLinksInElement(this._getFieldElement()),this._attachOnChangeListener(),this.getWizard().addListener(QO.EVENT_AFTER_FIELDS_REGISTER,this.caller("_executeOnFieldValueChange"))}},{key:"_executeOnFieldValueChange",value:function(){if(this.hasValue()){var e=this._fieldId;pjQuery((function(){G.onFieldValueChange(e)}))}}},{key:"_attachOnChangeListener",value:function(){}},{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){return new x}},{key:"hasValue",value:function(){for(var e=!1,t=this._getFirstRowIndex();t<=this._lastRowIndex;t++)this._structure.getFieldsInsideTableRow(t).forEach((function(t){t&&t.hasValue()&&(e=!0)}));return e}},{key:"_getFirstRowIndex",value:function(){return this._structure.getRowsContainer().find(this._structure.getClassRemove()+'[data-row-index!="sample"]').attr("data-row-index")}},{key:"getValueForCondition",value:function(){return null}},{key:"focus",value:function(){pjQuery("#"+this._fieldId+"-1-"+this._getFirstRowIndex()).focus()}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_removeRow",value:function(e){var t=pjQuery(e).data("row-index"),n=this._getElementToFocusAfterRemove(t);this._structure.getJQueryRowContainer(t).remove(),n.focus(),this._hasNoRows()&&this._setRowsCounterElementValue("allRemoved")}},{key:"_getElementToFocusAfterRemove",value:function(e){var t=this._structure.getJQueryRowContainer(e);return 1!==t.next().length||this._structure.isAddAnotherButton(t.next())?t.prev().attr("id").includes("sample")?this._getAddNewRowLinkElement():t.prev().find(":input:visible:first"):t.next().find(":input:visible:first")}},{key:"_addNewRow",value:function(){var e=this._lastRowIndex+1,t=this._buildClonedRowElement();this._attachOnClickListenersToRowsRemovalLinksInElement(t),this._structure.cleanAttributesOfSample(t),this._fixFileFields(t,e),this._fixLabels(t,e),this._fixArrayedInputs(t,e),this._fixSingleElement("input",t,e),this._fixSingleElement("select",t,e),this._fixSingleElement("textarea",t,e),this._fixSingleElement("span",t,e),this._fixSingleElement("option",t,e),this._fixContainerId(t,e),this._fixRemoveLink(t,e),this._fixDateFallbacks(t,e),this._fixTime(t,e),this._addClonedRowToRowsContainer(t),this._fixParagraphWithFormat(t,e),this._fixAutocomplete(t),this._setRowsCounterElementValue(e),this._fixReuseUploadedFilesWidget(t,e),this._registerJsFields(t,e),this._focusFirstInputInNewRow(t),this._lastRowIndex=e}},{key:"_focusFirstInputInNewRow",value:function(e){e.find(":input:visible:first").focus()}},{key:"_fixSampleRowRequiredAttributesForAccessibility",value:function(){if(this._isAccessibilityEnabled)for(var e=document.querySelectorAll("[data-samplerow]"),t=e.length-1;t>=0;t--){var n=e[t].querySelectorAll("[data-required]")[0];n&&(n.removeAttribute("aria-required"),n.removeAttribute("required"))}}},{key:"_getAddNewRowLinkElement",value:function(){return pjQuery("#addRowFor_"+this._fieldId)}},{key:"_setRowsCounterElementValue",value:function(e){this._structure.setOffsetValue(e)}},{key:"_hasNoRows",value:function(){return 1===pjQuery('[name="removeRowFor_'+this._fieldId+'"]').length}},{key:"_buildClonedRowElement",value:function(){var e=this._structure.getSampleContainer().clone();if(!e)throw new Error("Error when adding new row for table: "+this._fieldId);return e}},{key:"_attachOnClickListenersToRowsRemovalLinksInElement",value:function(e){var t=this;pjQuery(e).find('[name="removeRowFor_'+this._fieldId+'"]').each((function(){var e=pjQuery(this);e.click((function(){return t._removeRow(e),!1}))}))}},{key:"_attachOnClickListenersToAddNewRowLink",value:function(){var e=this;this._getAddNewRowLinkElement().click((function(){return e._addNewRow(),!1}))}},{key:"_fixLabels",value:function(e,t){pjQuery(e).find("label").each((function(){var n=/^((\d+-)+)sample(\[.*\]|_.*)*$/,r=pjQuery(this).attr("for");if(r&&n.test(r)){var o=r.replace(n,"$1"+t+"$3");pjQuery(this).attr("for",o)}n=/^((\d+-)+)sample(\[.*\]|_.*|-label)*$/;var i=pjQuery(this).attr("id");if(i&&n.test(i)){var a=i.replace(n,"$1"+t+"$3");pjQuery(this).attr("id",a),pjQuery(e).find("[aria-labelledby="+i+"]").each((function(){pjQuery(this).attr("aria-labelledby",a)}))}}))}},{key:"_fixArrayedInputs",value:function(e,t){var n=this,r=[];pjQuery(e).find("input").each((function(){var e=/^((\d+-)+)sample_(\d+)$/,o=pjQuery(this).attr("id");if(o&&e.test(o)){var i=o.replace(e,"$1");i=i.substring(0,i.length-1);var a=o.replace(e,"$3");r[i]?r[i].push(a):r[i]=[a];var u=o.replace(e,"$1"+t+"_$3");pjQuery(this).attr("id",u);var l=/^((\d+-)+)sample(\[\])?$/,c=pjQuery(this).attr("name");if(c&&l.test(c)){var s=c.replace(l,"$1"+t+"$3");pjQuery(this).attr("name",s)}n._fixRequiredAttributes(this)}}))}},{key:"_fixRequiredAttributes",value:function(e){var t=pjQuery(e).attr("data-required");t&&(pjQuery(e).attr("required",t),pjQuery(e).attr("aria-required",t))}},{key:"_fixSingleElement",value:function(e,t,n){var r=this;pjQuery(t).find(e).each((function(){var e=/^((\d+-)+)sample(\[.*\]|_.*)*$/,t=pjQuery(this).attr("id");if(t&&e.test(t)){var o=t.replace(e,"$1"+n+"$3");pjQuery(this).attr("id",o);var i=pjQuery(this).attr("name");if(i){var a=/^((\d+-)+)sample(\[.*\]|_.*)*$/;a.test(i)&&(i=i.replace(a,"$1"+n+"$3")),pjQuery(this).attr("name",i)}r._fixRequiredAttributes(this)}var u=pjQuery(this).data("parentid");if(u){var l=/^((\d+-)+)sample(\[.*\]|_.*)*$/;l.test(u)&&(u=u.replace(l,"$1"+n+"$3")),pjQuery(this).attr("data-parentId",u)}}))}},{key:"_fixFileFields",value:function(e,t){pjQuery(e).has('.FileSchemaField :input[type="file"]')&&pjQuery(e).find('input[type="hidden"], input[type="file"], div').each((function(){this.name&&(this.name=this.name.replace(/sample/i,t)),this.id=this.id.replace(/sample/i,t)}))}},{key:"_getFileIdFromFileSchemaFieldElement",value:function(e){var t=pjQuery(e).find('.FileSchemaField :input[type="file"]').prop("id");return void 0!==t&&0!==t.length||(t=pjQuery(e).find('.FileSchemaField :input[type="hidden"][name^="file_"]:not([id=""])').prop("id")),t}},{key:"_fixParagraphWithFormat",value:function(e,t){var n=e.find(".mce-tinymce.mce-container");0!=n.length&&(n.remove(),e.find("textarea").show())}},{key:"_fixContainerId",value:function(e,t){pjQuery(e).attr("id",pjQuery(e).attr("id").replace(this._structure.getPatternNameSampleContainer(),"$1_"+t)),pjQuery(e).find(this._structure.getClassSpecInDataset()).each((function(){pjQuery(this).attr("id",pjQuery(this).attr("id").replace(/(fieldSpecContainer.*-)sample/,"$1"+t))}))}},{key:"_fixRemoveLink",value:function(e,t){pjQuery(this._structure.getClassRemove(),e).attr("data-row-index",t)}},{key:"_addClonedRowToRowsContainer",value:function(e){this._structure.addClonedRowToRowsContainer(e)}},{key:"_fixDateFallbacks",value:function(e,t){pjQuery(e).find("div.DateFormField").each((function(){var e=pjQuery(this).find("script");if(pjQuery(e).html()){var n=pjQuery(e).html().replace(/(.*)sample(.*)/,"$1"+t+"$2");pjQuery(this).find("script").remove(),pjQuery(this).find("select").remove();var r=document.createElement("script");pjQuery(r).attr("type","text/javascript"),r.text=n,this.appendChild(r)}var o=pjQuery(this).attr("id").replace(/^fieldSpecContainer(.*)$/,"$1"),i=o.split("-"),a=i.splice(0,i.length-1).join("-")+"-sample",u=pjQuery(document).find("input#"+a+'[type="hidden"]');u.length&&pjQuery(this).find("input#"+o+'[type="hidden"]').val(u[0].value);var l=pjQuery(document).find("input#"+a);l.length&&pjQuery(this).find("input#"+o).val(l[0].value)}))}},{key:"_fixAutocomplete",value:function(e){pjQuery(e).find(this._structure.getClassSpecInDataset()).each((function(){var e=pjQuery(this).attr("id").replace(/^fieldSpecContainer(.*)$/,"$1"),t=e.split("-"),n=t.splice(0,t.length-1).join("-")+"-0";void 0!==fb&&(n!==e&&fb.refreshLazyPickerOptionsUsingOtherLazyPickerConfigAsSource(n,e),pjQuery("#"+e).change((function(){G.onFieldValueChange(e)})))}))}},{key:"_registerJsFields",value:function(e,t){var n=e.find("[data-formula]").attr("id");if(n){var r=n.split("-"),o=r.splice(0,r.length-1).join("-");G.cloneForNewTableRow(o,t)}pjQuery(e).find(this._structure.getClassSpecInDataset()).each((function(){var e=pjQuery(this).attr("id").replace(/^fieldSpecContainer(.*)$/,"$1"),n=e.split("-"),r=n.splice(0,n.length-1).join("-");G.cloneForNewTableRow(r,t);var o=e+"_sourceAndCategory";PortalHtml.elementExists(o)&&G.cloneForNewTableRow(r,t,"_sourceAndCategory");var i=e+"_category";PortalHtml.elementExists(i)&&G.cloneForNewTableRow(r,t,"_category")}))}},{key:"_fixReuseUploadedFilesWidget",value:function(e,t){e.find("[data-old-files-selector-sample-reference]").each((function(){var e=pjQuery(this).attr("data-old-files-selector-sample-reference").split("-"),n=e.splice(0,e.length-1).join("-");pjQuery(this).remove(),new um(n+"-"+t,um.tableFieldsDataReference[n].dictionaryJSON,um.tableFieldsDataReference[n].uploadedFilesJSON).addOldFilesSelectorToFileInput()}))}},{key:"_fixTime",value:function(e,t){e.find(".TimeFieldsWrapper").each((function(){var e=pjQuery(this).html();e=e.replace(/sample/g,t),pjQuery(this).html(pjQuery.parseHTML(e))}))}}],n&&Sm(t.prototype,n),r&&Sm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=km(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(jm,"TYPE","TableField");const Tm=jm;function Fm(e){return Fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fm(e)}function Im(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xm(r.key),r)}}function Rm(e,t){return Rm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rm(e,t)}function Cm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dm(e);if(t){var o=Dm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Fm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Dm(e){return Dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dm(e)}function xm(e){var t=function(e,t){if("object"!==Fm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Fm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Fm(t)?t:String(t)}var Am=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rm(e,t)}(i,e);var t,n,r,o=Cm(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._shouldUseMilitaryTimeFormat=n.getSetting("shouldUseMilitaryTimeFormat"),n}return t=i,n=[{key:"getType",value:function(){return i.TYPE}},{key:"_getAllowedValueTypesToSet",value:function(){return[Vv.TYPE]}},{key:"setValue",value:function(e){this._assertIsAllowedValueToSet(e);var t=e.getHours(),n=null;this._shouldUseMilitaryTimeFormat||(n=t>=12?"PM":"AM",t>12?t-=12:0===t&&(t=12)),G.setFieldValue(this._getHoursId(),new Jt(t.toString())),G.setFieldValue(this._getMinutesId(),new Jt(e.getMinutes().toString())),n&&G.setFieldValue(this._getAMPMId(),new Ot(n))}},{key:"getValue",value:function(){return G.hasValue(this._getHoursId())&&G.hasValue(this._getMinutesId())?new Vv(this._getHoursFieldValue(),this._getMinutesFieldValue(),0):new x}},{key:"getValueForCondition",value:function(){return[this._getHoursFieldValue(),this._getMinutesFieldValue(),0]}},{key:"_getHoursFieldValue",value:function(){var e=G.getFieldValueByType(this._getHoursId(),FieldOptionValue.TYPE);if(e.isEmpty())return 0;var t=PortalString.toInt(e.getOptionId());return isNaN(t)?0:(t=PortalString.toInt(t,10),this._shouldUseMilitaryTimeFormat?t:this._adaptHoursToAMPMFormat(t))}},{key:"_adaptHoursToAMPMFormat",value:function(e){var t=G.getFieldValueByType(this._getAMPMId(),FieldOptionValue.TYPE);if(t.isEmpty())return e;var n=t.getOptionText();return"PM"===n&&12!==e?e+=12:"AM"===n&&12===e&&(e=0),e}},{key:"_getMinutesFieldValue",value:function(){var e=G.getFieldValueByType(this._getMinutesId(),FieldOptionValue.TYPE);return e.isEmpty()?0:PortalString.toInt(e.getOptionId())||0}},{key:"_buildClonedField",value:function(e){return new i(e,this.getFieldSettings())}},{key:"_getDepedentFieldsMetadata",value:function(){var e=[this._createFieldMetadata(this._getHoursId(),this._getHoursSuffix()),this._createFieldMetadata(this._getMinutesId(),this._getMinutesSuffix())];return this._shouldUseMilitaryTimeFormat||e.push(this._createFieldMetadata(this._getAMPMId(),this._getAMPMSuffix())),e}},{key:"_getHoursId",value:function(){return this.getFieldId()+this._getHoursSuffix()}},{key:"_getMinutesId",value:function(){return this.getFieldId()+this._getMinutesSuffix()}},{key:"_getAMPMId",value:function(){return this.getFieldId()+this._getAMPMSuffix()}},{key:"_getHoursSuffix",value:function(){return"_hours"}},{key:"_getMinutesSuffix",value:function(){return"_minutes"}},{key:"_getAMPMSuffix",value:function(){return"_ampm"}}],n&&Im(t.prototype,n),r&&Im(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ro);!function(e,t,n){(t=xm(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Am,"TYPE","TimeField");const Lm=Am;function Nm(e){return Nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nm(e)}function Mm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ym(r.key),r)}}function Vm(){return Vm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wm(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Vm.apply(this,arguments)}function Bm(e,t){return Bm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bm(e,t)}function Um(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wm(e);if(t){var o=Wm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Nm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Wm(e){return Wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wm(e)}function Ym(e){var t=function(e,t){if("object"!==Nm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Nm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Nm(t)?t:String(t)}var Qm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bm(e,t)}(i,e);var t,n,r,o=Um(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._customEmail=n.getSetting("customEmail")||"",n._customEmailLabel=n.getSetting("customEmailLabel"),n._isCustomInputEnabled=n.getSetting("isCustomInputEnabled"),n}return t=i,n=[{key:"getValueForCondition",value:function(){var e=this._getCustomInput();if(e)return e.value;var t=this._getSelectedOptionId();return t?document.getElementById(this.getFieldId()+"_"+t).text:null}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings())}},{key:"_postRegister",value:function(){Nu.prototype._postRegister.call(this),(this._customEmail||"custom"===this._getSelectedOptionId())&&this.setValue(new Jt("custom"))}},{key:"_activate",value:function(e){Vm(Wm(i.prototype),"_activate",this).call(this,e),this._customEmail&&"custom"!==this._getSelectedOptionId()&&(document.getElementById(this.getFieldId()).value="custom")}},{key:"_attachOnChangeListener",value:function(){var e=this;pjQuery("#"+this.getFieldId()).on("change",(function(){e._handleCustomInput(),G.onFieldValueChange(e.getFieldId())}))}},{key:"_handleCustomInput",value:function(){var e=this.getValue();if(e.isEmpty()||"custom"!==e.getOptionId()){var t=this._getCustomInput();t&&t.remove()}else{document.getElementById(this.getFieldId()).parentNode.append(this._buildCustomInput()),this._getCustomInput().focus();var n=this;pjQuery("#"+this.getFieldId()+"_customEmail").on("input",(function(){this.onkeyup=null,G.onFieldValueChange(n.getFieldId())}))}}},{key:"_buildCustomInput",value:function(){var e=document.createElement("input");return e.setAttribute("id",this.getFieldId()+"_customEmail"),e.setAttribute("name",this.getFieldId()+"_customEmail"),e.setAttribute("type","email"),e.setAttribute("class","EmailField NotificationEmailField"),e.setAttribute("value",this._customEmail),e.setAttribute("tabindex",0),e.setAttribute("autocomplete","email"),e.setAttribute("aria-label",this._customEmailLabel),this._isCustomInputEnabled||e.setAttribute("disabled",""),e}},{key:"_getCustomInput",value:function(){return document.getElementById(this.getFieldId()+"_customEmail")}},{key:"_getSelectedOptionId",value:function(){return this._getFieldElement().val()}}],n&&Mm(t.prototype,n),r&&Mm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Nu);!function(e,t,n){(t=Ym(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Qm,"TYPE","UserNotificationsEmailField");const Hm=Qm;function zm(e){return zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zm(e)}function qm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xm(r.key),r)}}function Jm(){return Jm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Km(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Jm.apply(this,arguments)}function Gm(e,t){return Gm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gm(e,t)}function Zm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Km(e);if(t){var o=Km(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===zm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Km(e){return Km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Km(e)}function $m(e,t,n){return(t=Xm(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xm(e){var t=function(e,t){if("object"!==zm(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===zm(t)?t:String(t)}var eg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gm(e,t)}(i,e);var t,n,r,o=Zm(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t,n))._shouldUseBrowserTimeZone=r.getSetting("shouldUseBrowserTimeZone"),r._useMocks=r.getSetting("useMocks"),r}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"_buildClonedFieldForNewTableRow",value:function(e,t){return this._cloneDatasourceForNewTableRow(e,t),new i(e,this.getFieldSettings())}},{key:"_buildClonedField",value:function(e){return this._cloneDatasource(e),new i(e,this.getFieldSettings(),this.getFieldId())}},{key:"_postRegister",value:function(){Jm(Km(i.prototype),"_postRegister",this).call(this),this._shouldUseBrowserTimeZone&&this.setValue(new Jt(this._getBrowserTimeZone())),G.getField(this.getFieldId()).addListener("selectingAutocompleteValueEvent",this.caller("_onSelectedOption"))}},{key:"_onSelectedOption",value:function(e){var t=e.params.args.data.id,n=document.getElementById(this._fieldId),r=n.querySelector('option[value="'+t+'"]');r&&n.removeChild(r)}},{key:"_getBrowserTimeZone",value:function(){return this._useMocks?"Europe/London":"undefined"==typeof Intl?"":this._mapToValidTimeZone(Intl.DateTimeFormat().resolvedOptions().timeZone)}},{key:"_mapToValidTimeZone",value:function(e){var t;return($m(t={"Africa/Timbuktu":"Africa/Abidjan","America/Argentina/ComodRivadavia":"America/Argentina/Catamarca","America/Atka":"America/Adak","America/Buenos_Aires":"America/Argentina/Buenos_Aires","America/Catamarca":"America/Argentina/Catamarca","America/Coral_Harbour":"America/Atikokan","America/Cordoba":"America/Argentina/Cordoba","America/Ensenada":"America/Tijuana","America/Fort_Wayne":"America/Indiana/Indianapolis","America/Indianapolis":"America/Indiana/Indianapolis","America/Jujuy":"America/Argentina/Jujuy","America/Knox_IN":"America/Indiana/Knox","America/Louisville":"America/Kentucky/Louisville","America/Mendoza":"America/Argentina/Mendoza","America/Montreal":"America/Toronto","America/Porto_Acre":"America/Rio_Branco","America/Rosario":"America/Argentina/Cordoba","America/Santa_Isabel":"America/Tijuana","America/Shiprock":"America/Denver","America/Virgin":"America/Port_of_Spain","Antarctica/South_Pole":"Pacific/Auckland","Asia/Ashkhabad":"Asia/Ashgabat","Asia/Calcutta":"Asia/Kolkata","Asia/Chongqing":"Asia/Shanghai","Asia/Chungking":"Asia/Shanghai","Asia/Dacca":"Asia/Dhaka","Asia/Harbin":"Asia/Shanghai","Asia/Istanbul":"Europe/Istanbul","Asia/Kashgar":"Asia/Urumqi[note 1]","Asia/Katmandu":"Asia/Kathmandu","Asia/Macao":"Asia/Macau","Asia/Rangoon":"Asia/Yangon","Asia/Saigon":"Asia/Ho_Chi_Minh","Asia/Tel_Aviv":"Asia/Jerusalem","Asia/Thimbu":"Asia/Thimphu","Asia/Ujung_Pandang":"Asia/Makassar","Asia/Ulan_Bator":"Asia/Ulaanbaatar","Atlantic/Faeroe":"Atlantic/Faroe","Atlantic/Jan_Mayen":"Europe/Oslo","Australia/ACT":"Australia/Sydney","Australia/Canberra":"Australia/Sydney","Australia/LHI":"Australia/Lord_Howe","Australia/North":"Australia/Darwin","Australia/NSW":"Australia/Sydney","Australia/Queensland":"Australia/Brisbane","Australia/South":"Australia/Adelaide","Australia/Tasmania":"Australia/Hobart","Australia/Victoria":"Australia/Melbourne","Australia/West":"Australia/Perth","Australia/Yancowinna":"Australia/Broken_Hill","Brazil/Acre":"America/Rio_Branco","Brazil/DeNoronha":"America/Noronha","Brazil/East":"America/Sao_Paulo","Brazil/West":"America/Manaus","Canada/Atlantic":"America/Halifax","Canada/Central":"America/Winnipeg","Canada/Eastern":"America/Toronto","Canada/Mountain":"America/Edmonton","Canada/Newfoundland":"America/St_Johns","Canada/Pacific":"America/Vancouver","Canada/Saskatchewan":"America/Regina","Canada/Yukon":"America/Whitehorse","Chile/Continental":"America/Santiago","Chile/EasterIsland":"Pacific/Easter",Cuba:"America/Havana",Egypt:"Africa/Cairo",Eire:"Europe/Dublin","Europe/Belfast":"Europe/London","Europe/Nicosia":"Asia/Nicosia","Europe/Tiraspol":"Europe/Chisinau",GB:"Europe/London","GB-Eire":"Europe/London",Hongkong:"Asia/Hong_Kong",Iceland:"Atlantic/Reykjavik",Iran:"Asia/Tehran",Israel:"Asia/Jerusalem",Jamaica:"America/Jamaica",Japan:"Asia/Tokyo",Kwajalein:"Pacific/Kwajalein",Libya:"Africa/Tripoli","Mexico/BajaNorte":"America/Tijuana","Mexico/BajaSur":"America/Mazatlan","Mexico/General":"America/Mexico_City",Navajo:"America/Denver",NZ:"Pacific/Auckland","NZ-CHAT":"Pacific/Chatham","Pacific/Johnston":"Pacific/Honolulu","Pacific/Ponape":"Pacific/Pohnpei","Pacific/Samoa":"Pacific/Pago_Pago","Pacific/Truk":"Pacific/Chuuk","Pacific/Yap":"Pacific/Chuuk",Poland:"Europe/Warsaw",Portugal:"Europe/Lisbon",PRC:"Asia/Shanghai",ROC:"Asia/Taipei",ROK:"Asia/Seoul",Singapore:"Asia/Singapore",Turkey:"Europe/Istanbul","US/Alaska":"America/Anchorage","US/Aleutian":"America/Adak","US/Arizona":"America/Phoenix","US/Central":"America/Chicago","US/East-Indiana":"America/Indiana/Indianapolis","US/Eastern":"America/New_York","US/Hawaii":"Pacific/Honolulu","US/Indiana-Starke":"America/Indiana/Knox","US/Michigan":"America/Detroit","US/Mountain":"America/Denver","US/Pacific":"America/Los_Angeles","US/Pacific-New":"America/Los_Angeles","US/Samoa":"Pacific/Pago_Pago","W-SU":"Europe/Moscow"},"W-SU","Europe/Moscow"),$m(t,"Etc/UTC","GMT"),$m(t,"UTC","GMT"),t)[e]||e}}])&&qm(t.prototype,n),r&&qm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ln);$m(eg,"TYPE","UserTimeZoneField");const tg=eg;function ng(e){return ng="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(e)}function rg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,og(r.key),r)}}function og(e){var t=function(e,t){if("object"!==ng(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ng(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ng(t)?t:String(t)}var ig=null,ag=!1,ug=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!ag)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,(n=[{key:"buildField",value:function(e,t,n){if(!e)return console.error("Field ID cannot be null to build the field."),null;switch(t){case Bt.TYPE:return new Bt(e,n);case dr.TYPE:return new dr(e,n);case Ln.TYPE:return new Ln(e,n);case XO.TYPE:return new XO(e,n);case Gr.TYPE:return new Gr(e,n);case io.TYPE:return new io(e,n);case _u.TYPE:return new _u(e,n);case So.TYPE:return new So(e,n);case si.TYPE:return new si(e,n);case Fu.TYPE:return new Fu(e,n);case rc.TYPE:return new rc(e,n);case cl.TYPE:return new cl(e,n);case Ol.TYPE:return new Ol(e,n);case Yl.TYPE:return new Yl(e,n);case Qs.TYPE:return new Qs(e,n);case Of.TYPE:return new Of(e,n);case Rf.TYPE:return new Rf(e,n);case Cl.TYPE:return new Cl(e,n);case Vf.TYPE:return new Vf(e,n);case yo.TYPE:return new yo(e,n);case up.TYPE:return new up(e,n);case hp.TYPE:return new hp(e,n);case qf.TYPE:return new qf(e,n);case Jp.TYPE:return new Jp(e,n);case hd.TYPE:return new hd(e,n);case Od.TYPE:return new Od(e,n);case Rd.TYPE:return new Rd(e,n);case Gd.TYPE:return new Gd(e,n);case oy.TYPE:return new oy(e,n);case dy.TYPE:return new dy(e,n);case Ry.TYPE:return new Ry(e,n);case By.TYPE:return new By(e,n);case tf.TYPE:return new tf(e,n);case Gy.TYPE:return new Gy(e,n);case rh.TYPE:return new rh(e,n);case _h.TYPE:return new _h(e,n);case Th.TYPE:return new Th(e,n);case fv.TYPE:return new fv(e,n);case _v.TYPE:return new _v(e,n);case Nu.TYPE:return new Nu(e,n);case Rv.TYPE:return new Rv(e,n);case qv.TYPE:return new qv(e,n);case tb.TYPE:return new tb(e,n);case Tm.TYPE:return new Tm(e,n);case hf.TYPE:return new hf(e,n);case Lm.TYPE:return new Lm(e,n);case Hm.TYPE:return new Hm(e,n);case tg.TYPE:return new tg(e,n);default:return console.error("Can not register Field ID #"+e+' - Field registrar name "'+t+'" is not valid.'),null}}}])&&rg(t.prototype,n),r&&rg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();!function(e,t,n){(t=og(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ug,"getInstance",(function(){return ig||(ag=!0,ig=new ug,ag=!1),ig}));const lg=ug;n(86535),n(99244);const cg=function e(){if(e.prototype._singletonInstance)return e.prototype._singletonInstance;e.prototype._singletonInstance=this,this.run=function(e,t,n){var r=l.getInstance(),o=r.buildKey(e,t);r.get(o).fail((function(){var i=pjQuery.ajax({type:"POST",url:e,dataType:"json",data:t});r.set(o,i),i.done(n)})).done((function(e){e.done(n)}))}};function sg(e){return sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(e)}function fg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pg(r.key),r)}}function pg(e){var t=function(e,t){if("object"!==sg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==sg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===sg(t)?t:String(t)}var dg=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._datasourceSettings=n||{},this._portalUrlPath=this.getSetting("portalUrlPath"),this._datasourcesCallRunner=new cg}var t,n,r;return t=e,(n=[{key:"registerDatasourceValues",value:function(){Datasources.registerDatasource(this._fieldId,this)}},{key:"registerDatasourceDefaultValues",value:function(){DefaultValueDatasources.registerDatasource(this._fieldId,this)}},{key:"isLocalDatasource",value:function(){return!1}},{key:"getOptions",value:function(){return[]}},{key:"fetchNewOptions",value:function(e,t,n,r){throw new Error("notImplementedError")}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notImplementedError")}},{key:"fetchOptionsByValue",value:function(e,t){throw new Error("notImplementedError")}},{key:"getParentDependenciesFieldsIds",value:function(){throw new Error("notImplementedError")}},{key:"isParentDependentField",value:function(e){throw new Error("notImplementedError")}},{key:"cloneForNewTableRow",value:function(e,t){return this.clone(e)}},{key:"clone",value:function(e){throw new Error("notImplementedError")}},{key:"getOptionsSearchApiUrl",value:function(){throw new Error("notImplementedError")}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){throw new Error("notImplementedError")}},{key:"processLazyPickerAjaxResponseData",value:function(e){throw new Error("notImplementedError")}},{key:"_fetchOptions",value:function(e,t){var n=this._getDatasourcesCallRunnerOnSuccessCallback(t);this._datasourcesCallRunner.run(this.getOptionsSearchApiUrl(),e,n)}},{key:"_getDatasourcesCallRunnerOnSuccessCallback",value:function(e){return function(t){var n=t.hasOwnProperty("results")?t.results:[],r=t.hasOwnProperty("currentOptionsFoundInResults")?t.currentOptionsFoundInResults:[];e(n,r)}}},{key:"_getFieldId",value:function(){return this._fieldId}},{key:"getDatasourceSettings",value:function(){return this._datasourceSettings}},{key:"getSetting",value:function(e){return this._datasourceSettings.hasOwnProperty(e)?this._datasourceSettings[e]:null}}])&&fg(t.prototype,n),r&&fg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const yg=dg;function hg(e){return hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hg(e)}function vg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gg(r.key),r)}}function bg(e,t,n){return t&&vg(e.prototype,t),n&&vg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mg(e,t,n){return(t=gg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gg(e){var t=function(e,t){if("object"!==hg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==hg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===hg(t)?t:String(t)}var _g=bg((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));mg(_g,"SELF_RECORD","selfRecord"),mg(_g,"RECORD_PICKER","recordPicker");const wg=_g;function Sg(e){return Sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(e)}function Og(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kg(r.key),r)}}function Pg(e,t,n){return t&&Og(e.prototype,t),n&&Og(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Eg(e,t,n){return(t=kg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kg(e){var t=function(e,t){if("object"!==Sg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Sg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Sg(t)?t:String(t)}var jg=Pg((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));Eg(jg,"FIXED","fixed"),Eg(jg,"FIELD","field");const Tg=jg;function Fg(e){return Fg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(e)}function Ig(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rg(r.key),r)}}function Rg(e){var t=function(e,t){if("object"!==Fg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Fg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Fg(t)?t:String(t)}function Cg(e,t){return Cg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cg(e,t)}function Dg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xg(e);if(t){var o=xg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Fg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function xg(e){return xg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xg(e)}var Ag=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cg(e,t)}(i,e);var t,n,r,o=Dg(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._datasetFilters=n||r.getSetting("datasetFilters")||[],r._optionFormatComponents=r.getSetting("optionFormatComponents")||[],r._schemaFieldIdToUseForIndirectFiltering=r.getSetting("schemaFieldIdToUseForIndirectFiltering"),r}return t=i,(n=[{key:"_shouldIgnoreFilterIfNoValueIsSelected",value:function(){throw new Error("notImplemented")}},{key:"getParentDependenciesFieldsIds",value:function(){return this._datasetFilters.flatMap((function(e){return e.type===Tg.FIELD?[e.parentDependencyFieldId.toString()]:[]}))}},{key:"isParentDependentField",value:function(e){return null!=e&&this.getParentDependenciesFieldsIds().includes(e.toString())}},{key:"fetchNewOptions",value:function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e);this._fetchOptions(o,r)}},{key:"fetchOptionsById",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null);this._fetchOptions(n,t)}else t([])}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e,!0,null,null);this._fetchOptions(n,t)}else t([])}},{key:"_buildClonedFiltersForNewTableRow",value:function(e,t){for(var n=[],r=this._fieldId.split("-"),o=0;o<this._datasetFilters.length;o++){var i=pjQuery.extend(!0,{},this._datasetFilters[o]);if(i.type===Tg.FIELD&&i.parentDependencyFieldId.indexOf("-")>0){var a=i.parentDependencyFieldId.split("-");a[0]===r[0]&&(a[a.length-1]=t,i.parentDependencyFieldId=a.join("-"))}n.push(i)}return n}},{key:"_buildFiltersWithCurrentFieldsValues",value:function(){for(var e=[],t=0;t<this._datasetFilters.length;t++){var n=pjQuery.extend(!0,{},this._datasetFilters[t]);n.type===Tg.FIELD&&this._updateFieldFilter(n),e.push(n)}return e}},{key:"_prepareFilterToSend",value:function(e){return{operator:e.operator,datasetSpecIdFilter:e.datasetSpecIdFilter||null,schemaFieldNumberFilter:e.schemaFieldNumberFilter||null,value:e.value||null,sourceType:e.sourceType,entityId:e.entityId||null,type:e.type}}},{key:"_prepareOptionFormatComponentToSend",value:function(e){return{type:e.type,order:e.order,fieldNumberOrText:e.fieldNumberOrText}}},{key:"_updateFieldFilter",value:function(e){e.sourceType===wg.SELF_RECORD?this._updateFieldFilterWithSelfWizardSource(e):e.sourceType===wg.RECORD_PICKER&&this._updateFieldFilterWithRecordPickerSource(e)}},{key:"_updateFieldFilterWithSelfWizardSource",value:function(e){var t=e.parentDependencyFieldId;if(G.isFieldRegistered(t)){var n=G.getFieldValue(t);if(!this._shouldIgnoreFilterIfNoValueIsSelected()||!n.isEmpty()){switch(n.getType()){case x.TYPE:e.value=[];break;case nn.TYPE:e.value=PortalString.toInt(n.getOptionId());break;case pn.TYPE:e.value=n.getOptionsIds().map((function(e){return PortalString.toInt(e)}));break;case Rt.TYPE:e.value=n.getValue();break;default:throw new Error("invalidValue: dataset filtering requires a field with options to filter by")}e.type=Tg.FIXED}}}},{key:"_updateFieldFilterWithRecordPickerSource",value:function(e){var t=e.parentDependencyFieldId;if(G.isFieldRegistered(t)){var n=G.getFieldValue(t);n.isEmpty()||(e.entityId=n.getOptionId())}}}])&&Ig(t.prototype,n),r&&Ig(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yg);const Lg=Ag;function Ng(e){return Ng="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(e)}function Mg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wg(r.key),r)}}function Vg(e,t){return Vg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vg(e,t)}function Bg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ug(e);if(t){var o=Ug(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ng(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ug(e){return Ug=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ug(e)}function Wg(e){var t=function(e,t){if("object"!==Ng(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ng(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ng(t)?t:String(t)}var Yg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vg(e,t)}(i,e);var t,n,r,o=Bg(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t,n))._datasetSchemaSpecId=r.getSetting("datasetSchemaSpecId"),r}return t=i,(n=[{key:"_shouldIgnoreFilterIfNoValueIsSelected",value:function(){return!1}},{key:"cloneForNewTableRow",value:function(e,t){var n=this._buildClonedFiltersForNewTableRow(e,t);return new i(e,this.getDatasourceSettings(),n)}},{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalDatasetOptionsSearchApi"}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a=this,u=this._buildFiltersWithCurrentFieldsValues().map((function(e){return a._prepareFilterToSend(e)})),l=this._optionFormatComponents.map((function(e){return a._prepareOptionFormatComponentToSend(e)}));return JSON.stringify({datasetSchemaSpecId:this._datasetSchemaSpecId,schemaFieldIdToUseForIndirectFiltering:this._schemaFieldIdToUseForIndirectFiltering||null,filters:u,optionFormatComponents:l,searchIds:o||null,currentOptionsIds:i||[],page:e||null,limit:t||null,searchText:n||null,exactMatch:r||!1})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}}}])&&Mg(t.prototype,n),r&&Mg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Lg);!function(e,t,n){(t=Wg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Yg,"TYPE","DatasetFieldOptionsDatasource");const Qg=Yg;function Hg(e){return Hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(e)}function zg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zg(r.key),r)}}function qg(e,t){return qg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qg(e,t)}function Jg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gg(e);if(t){var o=Gg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Hg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Gg(e){return Gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gg(e)}function Zg(e){var t=function(e,t){if("object"!==Hg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Hg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Hg(t)?t:String(t)}var Kg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qg(e,t)}(i,e);var t,n,r,o=Jg(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t,n))._datasetSchemaFieldId=r.getSetting("datasetSchemaFieldId"),r._ignoreFilterIfNoValueIsSelected=r.getSetting("ignoreFilterIfNoValueIsSelected"),r}return t=i,(n=[{key:"_shouldIgnoreFilterIfNoValueIsSelected",value:function(){return this._ignoreFilterIfNoValueIsSelected}},{key:"cloneForNewTableRow",value:function(e,t){var n=this._buildClonedFiltersForNewTableRow(e,t);return new i(e,this.getDatasourceSettings(),n)}},{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalDatasetSingleColumnOptionsSearchApi"}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a=this,u=this._buildFiltersWithCurrentFieldsValues().map((function(e){return a._prepareFilterToSend(e)})),l=this._optionFormatComponents.map((function(e){return a._prepareOptionFormatComponentToSend(e)}));return JSON.stringify({datasetFieldSchemaFieldId:this._datasetSchemaFieldId,schemaFieldIdToUseForIndirectFiltering:this._schemaFieldIdToUseForIndirectFiltering||null,filters:u,optionFormatComponents:l,searchIds:o||null,currentOptionsIds:i||[],page:e||null,limit:t||null,searchText:n||null,exactMatch:r||!1})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}}}])&&zg(t.prototype,n),r&&zg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Lg);!function(e,t,n){(t=Zg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Kg,"TYPE","DatasetSingleColumnFieldOptionsDatasource");const $g=Kg;function Xg(e){return Xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xg(e)}function e_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o_(r.key),r)}}function t_(e,t){return t_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},t_(e,t)}function n_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=r_(e);if(t){var o=r_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Xg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function r_(e){return r_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r_(e)}function o_(e){var t=function(e,t){if("object"!==Xg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Xg(t)?t:String(t)}var i_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t_(e,t)}(i,e);var t,n,r,o=n_(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._setOptions(n.getSetting("options")),n}return t=i,(n=[{key:"isLocalDatasource",value:function(){return!0}},{key:"getOptions",value:function(){return this._options}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchNewOptions",value:function(e,t,n,r){var o=[],i=[];if(this._options.forEach((function(t){PortalArray.contains(t.id,e)&&i.push(t),o.push(t)})),null!==t&&null!==n){var a=(t-1)*n;o=o.slice(a,a+n)}r(o,i)}},{key:"fetchOptionsById",value:function(e,t){var n=[];e.forEach((function(e){this._options.forEach((function(t){return t.id==e&&(n.push(t),!0)}))}),this),t(n)}},{key:"fetchOptionsByValue",value:function(e,t){var n=[];e.forEach((function(e){this._options.forEach((function(t){return t.name==e&&(n.push(t),!0)}))}),this),t(n)}},{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"_setOptions",value:function(e){this._options=[],e&&Array.isArray(e)&&e.forEach((function(e){e.hasOwnProperty("id")&&e.hasOwnProperty("name")&&this._options.push({id:e.id,name:e.name})}),this)}}])&&e_(t.prototype,n),r&&e_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yg);!function(e,t,n){(t=o_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(i_,"TYPE","LocalDatasource");const a_=i_;function u_(e){return u_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u_(e)}function l_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p_(r.key),r)}}function c_(e,t){return c_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c_(e,t)}function s_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f_(e);if(t){var o=f_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function f_(e){return f_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f_(e)}function p_(e){var t=function(e,t){if("object"!==u_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u_(t)?t:String(t)}var d_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c_(e,t)}(i,e);var t,n,r,o=s_(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchNewOptions",value:function(e,t,n,r){return[]}},{key:"fetchOptionsById",value:function(e,t){var n=[];e.forEach((function(e){n.push({id:e})}),this),t(n)}},{key:"fetchOptionsByValue",value:function(e,t){var n=[];e.forEach((function(e){n.push({name:e})}),this),t(n)}},{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}}])&&l_(t.prototype,n),r&&l_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a_);!function(e,t,n){(t=p_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(d_,"TYPE","DummyDatasource");const y_=d_;function h_(e){return h_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h_(e)}function v_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,__(r.key),r)}}function b_(e,t){return b_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b_(e,t)}function m_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g_(e);if(t){var o=g_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===h_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function g_(e){return g_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g_(e)}function __(e){var t=function(e,t){if("object"!==h_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h_(t)?t:String(t)}var w_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b_(e,t)}(i,e);var t,n,r,o=m_(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._jobId=n.getSetting("jobId"),n._contactOrJobIdEdit=n.getSetting("contactOrJobIdEdit"),n._wizardId=n.getSetting("wizardId"),n._schemaFieldId=n.getSetting("schemaFieldId"),n._optionFormatJson=n.getSetting("optionFormatJson"),n}return t=i,n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalOptionSearchApi"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchNewOptions",value:function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e),i=this;this._fetchOptions(o,(function(e){var t=i._buildApiAdaptedResults(e);r(t)}))}},{key:"fetchOptionsById",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null),r=this;this._fetchOptions(n,(function(e){var n=r._buildApiAdaptedResults(e);t(n)}))}else t([])}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0,null,null),r=this;this._fetchOptions(n,(function(e){var n=r._buildApiAdaptedResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a={searchText:n,exactTextMatch:r,ids:o,fieldId:this._fieldId,jobId:this._jobId,page:e||1,limit:t,optionFormat:this._optionFormatJson,schemaFieldId:this._schemaFieldId,currentSelectedOptionsIds:i},u=this._wizardId;u&&(a.wizardId=u);var l=this._contactOrJobIdEdit;return l&&(a.contactOrJobIdEdit=l),JSON.stringify(a)}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name,children:e.children?e.children.map((function(e){return{id:e.id,text:e.name}})):null}})),pagination:{more:e.more}}}},{key:"_buildApiAdaptedResults",value:function(e){var t=[];return pjQuery.each(e,(function(e,n){n.children?pjQuery.each(n.children,(function(e,n){t.push({id:n.id,name:n.name})})):t.push({id:n.id,name:n.name})})),t}}],n&&v_(t.prototype,n),r&&v_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yg);!function(e,t,n){(t=__(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(w_,"TYPE","GeneralOptionsDatasource");const S_=w_;function O_(e){return O_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O_(e)}function P_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T_(r.key),r)}}function E_(e,t){return E_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E_(e,t)}function k_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j_(e);if(t){var o=j_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===O_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function j_(e){return j_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j_(e)}function T_(e){var t=function(e,t){if("object"!==O_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==O_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===O_(t)?t:String(t)}var F_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E_(e,t)}(i,e);var t,n,r,o=k_(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._listSpecId=n.getSetting("listSpecId"),n._requestType=n.getSetting("requestType"),n._searchIndexId=n.getSetting("searchIndexId"),n}return t=i,n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_instantSearch"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notSupportedError")}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0),r=this;this._fetchOptions(n,(function(e){var n=r._adaptApiOptionsResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({requestType:this._requestType,listSpecId:this._listSpecId,richFieldId:this._fieldId,searchTerm:n||"",searchIndexId:this._searchIndexId})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name||"",fields:e.fieldValues||[],detailUrl:e.detailUrl||null}})),pagination:{more:e.more||!1}}}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];return pjQuery.each(e,(function(e,n){t.push({id:n.id,name:n.name})})),t}}],n&&P_(t.prototype,n),r&&P_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yg);!function(e,t,n){(t=T_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(F_,"TYPE","InstantSearchDatasource");const I_=F_;function R_(e){return R_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R_(e)}function C_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N_(r.key),r)}}function D_(e,t){return D_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D_(e,t)}function x_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A_(e);if(t){var o=A_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===R_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function A_(e){return A_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A_(e)}function L_(e,t,n){return(t=N_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N_(e){var t=function(e,t){if("object"!==R_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==R_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===R_(t)?t:String(t)}var M_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D_(e,t)}(i,e);var t,n,r,o=x_(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_jobSuggestions"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notSupportedError")}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0),r=this;this._fetchOptions(n,(function(e){var n=r._adaptApiOptionsResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,a){return JSON.stringify({richFieldId:this._getFieldId(),richFieldType:pjQuery("#"+this._getFieldId()).data("field-type"),searchText:n||"",limit:i.PAGE_SIZE,page:e})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.value,text:e.text}})),pagination:{more:e.more||!1}}}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];return pjQuery.each(e,(function(e,n){t.push({id:n.value,name:n.text})})),t}}],n&&C_(t.prototype,n),r&&C_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yg);L_(M_,"TYPE","JobSuggestionsDatasource"),L_(M_,"PAGE_SIZE",10);const V_=M_;function B_(e){return B_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B_(e)}function U_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H_(r.key),r)}}function W_(e,t){return W_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W_(e,t)}function Y_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q_(e);if(t){var o=Q_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===B_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Q_(e){return Q_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q_(e)}function H_(e){var t=function(e,t){if("object"!==B_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==B_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===B_(t)?t:String(t)}var z_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W_(e,t)}(i,e);var t,n,r,o=Y_(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._schemaFieldId=n.getSetting("schemaFieldId"),n._isSearchMode=n.getSetting("isSearchMode")||!1,n}return t=i,(n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalUserSearch"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchNewOptions",value:function(e,t,n,r){var o=this.buildRequestDataFromParams(t,n,null,null,null,e);this._fetchOptions(o,r)}},{key:"fetchOptionsById",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null);this._fetchOptions(n,(function(e){t(e)}))}else t([])}},{key:"fetchOptionsByValue",value:function(e,t){throw new Error("notSupportedError: currently is not possible to set an option by value.")}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a={schemaFieldId:this._schemaFieldId,searchText:n||"",searchIds:o||null,currentOptionsIds:i||[],isSearchMode:this._isSearchMode,page:e||1,limit:t};return JSON.stringify(a)}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}}}])&&U_(t.prototype,n),r&&U_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yg);!function(e,t,n){(t=H_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(z_,"TYPE","UsersDatasource");const q_=z_;function J_(e){return J_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J_(e)}function G_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X_(r.key),r)}}function Z_(e,t){return Z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z_(e,t)}function K_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$_(e);if(t){var o=$_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===J_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $_(e){return $_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$_(e)}function X_(e){var t=function(e,t){if("object"!==J_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==J_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===J_(t)?t:String(t)}var ew=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z_(e,t)}(i,e);var t,n,r,o=K_(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._richFieldId=n.getSetting("richFieldId"),n}return t=i,(n=[{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalLinkToPersonSearch"}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a={richFieldId:this._richFieldId,searchText:n||"",searchIds:o||null,currentOptionsIds:i||[]};return JSON.stringify(a)}}])&&G_(t.prototype,n),r&&G_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(q_);!function(e,t,n){(t=X_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ew,"TYPE","LinkToPersonDatasource");const tw=ew;function nw(e){return nw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nw(e)}function rw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uw(r.key),r)}}function ow(e,t){return ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ow(e,t)}function iw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=aw(e);if(t){var o=aw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===nw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function aw(e){return aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},aw(e)}function uw(e){var t=function(e,t){if("object"!==nw(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nw(t)?t:String(t)}var lw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ow(e,t)}(i,e);var t,n,r,o=iw(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_workflowStepSuggestions"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notSupportedError")}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0),r=this;this._fetchOptions(n,(function(e){var n=r._adaptApiOptionsResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({searchText:n||"",page:e,limit:t,richFieldId:this._getFieldId()})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:this._adaptGroupedOptionsToSelect2(e.results),pagination:{more:e.more||!1}}}},{key:"_adaptGroupedOptionsToSelect2",value:function(e){var t=[];for(var n in e)t.push({text:e[n].text,children:e[n].children,id:n});return t}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];for(var n in e)t.push({id:e[n].id,name:e[n].text});return t}}],n&&rw(t.prototype,n),r&&rw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yg);!function(e,t,n){(t=uw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(lw,"TYPE","WorkflowStepDatasource");const cw=lw;function sw(e){return sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sw(e)}function fw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hw(r.key),r)}}function pw(e,t){return pw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pw(e,t)}function dw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yw(e);if(t){var o=yw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===sw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function yw(e){return yw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yw(e)}function hw(e){var t=function(e,t){if("object"!==sw(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==sw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===sw(t)?t:String(t)}var vw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pw(e,t)}(i,e);var t,n,r,o=dw(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_linkedJobStepSuggestions"}}])&&fw(t.prototype,n),r&&fw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(cw);!function(e,t,n){(t=hw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(vw,"TYPE","LinkedJobStepDatasource");const bw=vw;function mw(e){return mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mw(e)}function gw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ow(r.key),r)}}function _w(e,t){return _w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_w(e,t)}function ww(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sw(e);if(t){var o=Sw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===mw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Sw(e){return Sw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sw(e)}function Ow(e){var t=function(e,t){if("object"!==mw(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==mw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===mw(t)?t:String(t)}var Pw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_w(e,t)}(i,e);var t,n,r,o=ww(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_locationSuggestions"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notSupportedError")}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0),r=this;this._fetchOptions(n,(function(e){var n=r._adaptApiOptionsResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({searchText:n||""})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:this._results=e.results.map((function(e){return{id:e.value,text:e.text,lat:e.lat,lon:e.lon}})),pagination:{more:e.more||!1}}}},{key:"getOptionLatAndLonById",value:function(e){var t=[];return this._results.forEach((function(n){n.id===e&&(t=[n.lat,n.lon])})),t}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];for(var n in e)t.push({id:e[n].value,name:e[n].text});return t}}],n&&gw(t.prototype,n),r&&gw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yg);!function(e,t,n){(t=Ow(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Pw,"TYPE","LocationDatasource");const Ew=Pw;function kw(e){return kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kw(e)}function jw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tw(r.key),r)}}function Tw(e){var t=function(e,t){if("object"!==kw(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==kw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===kw(t)?t:String(t)}function Fw(e,t){return Fw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fw(e,t)}function Iw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Rw(e);if(t){var o=Rw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===kw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Rw(e){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rw(e)}var Cw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fw(e,t)}(i,e);var t,n,r,o=Iw(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(n=[{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalLocationsSearchApi/"+this._getSearchMode()}},{key:"fetchNewOptions",value:function(e,t,n,r){return[]}},{key:"fetchOptionsById",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,null,null,e,null);this._fetchOptions(n,t)}else t([])}},{key:"fetchOptionsByValue",value:function(e,t){throw new Error("notSupportedError")}},{key:"processLazyPickerAjaxResponseData",value:function(e){throw new Error("notSupportedError")}},{key:"_getSearchMode",value:function(){throw new Error("notImplementedError")}}])&&jw(t.prototype,n),r&&jw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yg);const Dw=Cw;function xw(e){return xw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xw(e)}function Aw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vw(r.key),r)}}function Lw(e,t){return Lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lw(e,t)}function Nw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mw(e);if(t){var o=Mw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===xw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Mw(e){return Mw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mw(e)}function Vw(e){var t=function(e,t){if("object"!==xw(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xw(t)?t:String(t)}var Bw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lw(e,t)}(i,e);var t,n,r,o=Nw(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({target:"state",criteria:{country:0!==o.length?o[0]:""}})}},{key:"_getSearchMode",value:function(){return"byCountry"}}])&&Aw(t.prototype,n),r&&Aw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Dw);!function(e,t,n){(t=Vw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Bw,"TYPE","LocationStandardizedStateDatasource");const Uw=Bw;function Ww(e){return Ww="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ww(e)}function Yw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qw(r.key),r)}}function Qw(e,t){return Qw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qw(e,t)}function Hw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zw(e);if(t){var o=zw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ww(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function zw(e){return zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zw(e)}function qw(e){var t=function(e,t){if("object"!==Ww(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ww(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ww(t)?t:String(t)}var Jw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qw(e,t)}(i,e);var t,n,r,o=Hw(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._listSpecId=n.getSetting("listSpecId"),n._extraJobLocationFieldNumbers=n.getSetting("extraJobLocationFieldNumbers"),n}return t=i,(n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({target:"state",criteria:{country:0!==o.length?o[0]:"",listSpecId:this._listSpecId,extraJobLocationFieldNumbers:this._extraJobLocationFieldNumbers}})}},{key:"_getSearchMode",value:function(){return"byCountryAndList"}}])&&Yw(t.prototype,n),r&&Yw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Dw);!function(e,t,n){(t=qw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Jw,"TYPE","LocationStandardizedStateSearchDatasource");const Gw=Jw;function Zw(e){return Zw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zw(e)}function Kw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tS(r.key),r)}}function $w(e,t){return $w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$w(e,t)}function Xw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=eS(e);if(t){var o=eS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Zw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function eS(e){return eS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},eS(e)}function tS(e){var t=function(e,t){if("object"!==Zw(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Zw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Zw(t)?t:String(t)}var nS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$w(e,t)}(i,e);var t,n,r,o=Xw(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_postalCode"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){throw new Error("notSupportedError")}},{key:"fetchOptionsByValue",value:function(e,t){if(0!==e.length){var n=this.buildRequestDataFromParams(null,null,e[0],!0),r=this;this._fetchOptions(n,(function(e){var n=r._adaptApiOptionsResults(e);t(n)}))}else t([])}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){return JSON.stringify({richFieldId:this._getRichFieldId(),searchPostalCode:n||""})}},{key:"_getRichFieldId",value:function(){var e=this._fieldId.match(/^([0-9]+)_postalCode$/);if(!e)throw new Error("invalidFieldId");return e[1]}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.value,text:e.text}})),pagination:{more:e.more||!1}}}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];return pjQuery.each(e,(function(e,n){t.push({id:n.value,name:n.text})})),t}}],n&&Kw(t.prototype,n),r&&Kw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yg);!function(e,t,n){(t=tS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(nS,"TYPE","PostalCodeDatasource");const rS=nS;function oS(e){return oS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oS(e)}function iS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sS(r.key),r)}}function aS(){return aS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cS(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},aS.apply(this,arguments)}function uS(e,t){return uS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},uS(e,t)}function lS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cS(e);if(t){var o=cS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===oS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function cS(e){return cS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},cS(e)}function sS(e){var t=function(e,t){if("object"!==oS(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==oS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===oS(t)?t:String(t)}var fS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uS(e,t)}(i,e);var t,n,r,o=lS(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._categoryFilterFieldId=n||r.getSetting("categoryFilterFieldId"),r._sourcesByCategory=r.getSetting("sourcesByCategory"),r._currentCategoryFilter=null,r._setOptions([]),r}return t=i,(n=[{key:"getParentDependenciesFieldsIds",value:function(){return[this._categoryFilterFieldId]}},{key:"isParentDependentField",value:function(e){return e===this._categoryFilterFieldId}},{key:"fetchNewOptions",value:function(e,t,n,r){this._updateAvailableOptions(),aS(cS(i.prototype),"fetchNewOptions",this).call(this,e,t,n,r)}},{key:"fetchOptionsById",value:function(e,t){this._updateAvailableOptions(),aS(cS(i.prototype),"fetchOptionsById",this).call(this,e,t)}},{key:"fetchOptionsByValue",value:function(e,t){this._updateAvailableOptions(),aS(cS(i.prototype),"fetchOptionsByValue",this).call(this,e,t)}},{key:"cloneForNewTableRow",value:function(e,t){var n=this._categoryFilterFieldId.replace(/^([^_]*-)[\d]+(_category)$/,"$1"+t+"$2");return new i(e,this.getDatasourceSettings(),n)}},{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"_updateAvailableOptions",value:function(){var e=this._getCurrentCategoryFilterValue();this._currentCategoryFilter!==e&&(this._currentCategoryFilter=e,this._sourcesByCategory.hasOwnProperty(this._currentCategoryFilter)?this._setOptions(this._sourcesByCategory[this._currentCategoryFilter]):this._setOptions([]))}},{key:"_getCurrentCategoryFilterValue",value:function(){var e=Fields.getFieldValueByType(this._categoryFilterFieldId,FieldOptionValue.TYPE);return e.isEmpty()?null:e.getOptionId()}}])&&iS(t.prototype,n),r&&iS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a_);!function(e,t,n){(t=sS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(fS,"TYPE","SourcesDatasource");const pS=fS;function dS(e){return dS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dS(e)}function yS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gS(r.key),r)}}function hS(e,t){return hS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hS(e,t)}function vS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bS(e);if(t){var o=bS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===dS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function bS(e){return bS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bS(e)}function mS(e,t,n){return(t=gS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gS(e){var t=function(e,t){if("object"!==dS(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==dS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===dS(t)?t:String(t)}var _S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hS(e,t)}(i,e);var t,n,r,o=vS(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_timeZone"}},{key:"getParentDependenciesFieldsIds",value:function(){return[]}},{key:"isParentDependentField",value:function(e){return!1}},{key:"fetchOptionsById",value:function(e,t){0!==e.length?this._fetchOptionsByValueOrId(null,e,t):t([])}},{key:"fetchOptionsByValue",value:function(e,t){0!==e.length?this._fetchOptionsByValueOrId(e[0],null,t):t([])}},{key:"_fetchOptionsByValueOrId",value:function(e,t,n){var r=this,o=this.buildRequestDataFromParams(null,null,e,!0,t);this._fetchOptions(o,(function(e){var t=r._adaptApiOptionsResults(e);n(t)}))}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,a){return JSON.stringify({searchText:n||"",page:e||1,limit:i.PAGE_SIZE,searchIds:o||null})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:this._adaptGroupedOptionsToSelect2(e.results),pagination:{more:e.more||!1}}}},{key:"_adaptGroupedOptionsToSelect2",value:function(e){var t=[];for(var n in e)t.push({text:e[n].text,children:e[n].children,id:n});return t}},{key:"_adaptApiOptionsResults",value:function(e){var t=[];for(var n in e){var r=e[n].children;for(var o in r)t.push({id:r[o].id,name:r[o].text})}return t}}],n&&yS(t.prototype,n),r&&yS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(yg);mS(_S,"TYPE","TimeZoneDatasource"),mS(_S,"PAGE_SIZE",10);const wS=_S;function SS(e){return SS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SS(e)}function OS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,PS(r.key),r)}}function PS(e){var t=function(e,t){if("object"!==SS(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==SS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===SS(t)?t:String(t)}var ES=null,kS=!1,jS=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!kS)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,(n=[{key:"buildDatasource",value:function(e,t,n){if(!e)return console.error("Field ID cannot be null to build the values datasource."),null;switch(t){case Qg.TYPE:return new Qg(e,n);case $g.TYPE:return new $g(e,n);case y_.TYPE:return new y_(e,n);case S_.TYPE:return new S_(e,n);case I_.TYPE:return new I_(e,n);case V_.TYPE:return new V_(e,n);case tw.TYPE:return new tw(e,n);case bw.TYPE:return new bw(e,n);case a_.TYPE:return new a_(e,n);case Ew.TYPE:return new Ew(e,n);case Uw.TYPE:return new Uw(e,n);case Gw.TYPE:return new Gw(e,n);case rS.TYPE:return new rS(e,n);case pS.TYPE:return new pS(e,n);case wS.TYPE:return new wS(e,n);case q_.TYPE:return new q_(e,n);case cw.TYPE:return new cw(e,n);default:return console.error("Can not register ValuesDatasource for Field ID #"+e+' - Datasource registrar name "'+t+'" is not valid.'),null}}}])&&OS(t.prototype,n),r&&OS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();!function(e,t,n){(t=PS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(jS,"getInstance",(function(){return ES||(kS=!0,ES=new jS,kS=!1),ES}));const TS=jS;function FS(e){return FS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FS(e)}function IS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xS(r.key),r)}}function RS(e,t){return RS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},RS(e,t)}function CS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=DS(e);if(t){var o=DS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===FS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function DS(e){return DS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},DS(e)}function xS(e){var t=function(e,t){if("object"!==FS(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==FS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===FS(t)?t:String(t)}var AS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RS(e,t)}(i,e);var t,n,r,o=CS(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t,n))._datasetSchemaSpecId=r.getSetting("datasetSchemaSpecId"),r._datasetFieldNumber=r.getSetting("datasetFieldNumber"),r}return t=i,(n=[{key:"_shouldIgnoreFilterIfNoValueIsSelected",value:function(){return!1}},{key:"cloneForNewTableRow",value:function(e,t){var n=this._buildClonedFiltersForNewTableRow(e,t);return new i(e,this.getDatasourceSettings(),n)}},{key:"clone",value:function(e){return new i(e,this.getDatasourceSettings())}},{key:"getOptionsSearchApiUrl",value:function(){return this._portalUrlPath+"/_wizardPortalDynamicDefaultDatasetOptionsSearchApi"}},{key:"buildRequestDataFromParams",value:function(e,t,n,r,o,i){var a=this,u=this._buildFiltersWithCurrentFieldsValues().map((function(e){return a._prepareFilterToSend(e)}));return JSON.stringify({datasetSchemaSpecId:this._datasetSchemaSpecId,datasetFieldNumber:this._datasetFieldNumber,filters:u})}},{key:"processLazyPickerAjaxResponseData",value:function(e){return{results:e.results.map((function(e){return{id:e.id,text:e.name}})),pagination:{more:!!e.more&&e.more}}}},{key:"_getDatasourcesCallRunnerOnSuccessCallback",value:function(e){return function(t){var n=t.hasOwnProperty("results")?t.results:[];e(n)}}}])&&IS(t.prototype,n),r&&IS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Lg);!function(e,t,n){(t=xS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(AS,"TYPE","DynamicDefaultValueDatasetFieldOptionsDatasource");const LS=AS;function NS(e){return NS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NS(e)}function MS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,VS(r.key),r)}}function VS(e){var t=function(e,t){if("object"!==NS(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==NS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===NS(t)?t:String(t)}var BS=null,US=!1,WS=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!US)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,(n=[{key:"buildDatasource",value:function(e,t,n){if(!e)return console.error("Field ID cannot be null to build the default values datasource."),null;switch(t){case LS.TYPE:return new LS(e,n);case InstantSearchDatasource.TYPE:return new InstantSearchDatasource(e,n);default:return console.error("Can not register DefaultValuesDatasource for Field ID #"+e+' - Datasource registrar name "'+t+'" is not valid.'),null}}}])&&MS(t.prototype,n),r&&MS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();!function(e,t,n){(t=VS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(WS,"getInstance",(function(){return BS||(US=!0,BS=new WS,US=!1),BS}));const YS=WS;function QS(e){return QS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QS(e)}function HS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zS(r.key),r)}}function zS(e){var t=function(e,t){if("object"!==QS(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==QS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===QS(t)?t:String(t)}var qS=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._validatorSettings=n||{},this._validationErrorText=this.getSetting("errorMessage")||"Error"}var t,n,r;return t=e,(n=[{key:"register",value:function(){Ie.registerValidator(this._fieldId,this)}},{key:"isValid",value:function(){throw new Error("notImplementedError")}},{key:"cloneForNewTableRow",value:function(e,t){throw new Error("notImplementedError")}},{key:"getValidationErrorText",value:function(){return this._validationErrorText}},{key:"getValidatorSettings",value:function(){return this._validatorSettings}},{key:"getSetting",value:function(e){return this._validatorSettings.hasOwnProperty(e)?this._validatorSettings[e]:null}},{key:"_getField",value:function(){return G.getField(this._fieldId)}},{key:"_getFieldId",value:function(){return this._fieldId}}])&&HS(t.prototype,n),r&&HS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const JS=qS;function GS(e){return GS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GS(e)}function ZS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eO(r.key),r)}}function KS(e,t){return KS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},KS(e,t)}function $S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=XS(e);if(t){var o=XS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===GS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function XS(e){return XS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},XS(e)}function eO(e){var t=function(e,t){if("object"!==GS(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==GS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===GS(t)?t:String(t)}var tO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KS(e,t)}(i,e);var t,n,r,o=$S(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"isValid",value:function(){return this._getField().hasValue()}},{key:"cloneForNewTableRow",value:function(e,t){return new i(e,this.getValidatorSettings())}}])&&ZS(t.prototype,n),r&&ZS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(JS);!function(e,t,n){(t=eO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(tO,"TYPE","RequiredValidator");const nO=tO;function rO(e){return rO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rO(e)}function oO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lO(r.key),r)}}function iO(e,t){return iO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},iO(e,t)}function aO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=uO(e);if(t){var o=uO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===rO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function uO(e){return uO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},uO(e)}function lO(e){var t=function(e,t){if("object"!==rO(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==rO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===rO(t)?t:String(t)}var cO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iO(e,t)}(i,e);var t,n,r,o=aO(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._minLength=n.getSetting("minLength"),n}return t=i,n=[{key:"isValid",value:function(){var e=document.getElementById(this._getFieldId()).value;return e.length>=this._minLength||0===e.length}},{key:"cloneForNewTableRow",value:function(e,t){return new i(e,this.getValidatorSettings())}}],n&&oO(t.prototype,n),r&&oO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(JS);!function(e,t,n){(t=lO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(cO,"TYPE","MinLengthValidator");const sO=cO;function fO(e){return fO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fO(e)}function pO(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return dO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dO(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function dO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yO(){yO=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),u=new E(o||[]);return r(a,"_invoke",{value:w(e,n,u)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function d(){}function y(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(h=b);var m=y.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(r,i,a,u){var l=s(e[r],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==fO(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return o("throw",e,a,u)}))}u(l.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return j()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=y,r(m,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),l(m,u,"Generator"),l(m,i,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function hO(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function vO(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){hO(i,r,o,a,u,"next",e)}function u(e){hO(i,r,o,a,u,"throw",e)}a(void 0)}))}}function bO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wO(r.key),r)}}function mO(e,t){return mO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mO(e,t)}function gO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_O(e);if(t){var o=_O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===fO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _O(e){return _O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_O(e)}function wO(e){var t=function(e,t){if("object"!==fO(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===fO(t)?t:String(t)}var SO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mO(e,t)}(u,e);var t,n,r,o,i,a=gO(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),a.apply(this,arguments)}return t=u,n=[{key:"isValid",value:function(){return this._areAllMandatoryFieldsFilled()}},{key:"cloneForNewTableRow",value:function(e,t){return new u(e,this.getValidatorSettings())}},{key:"_areAllMandatoryFieldsFilled",value:(i=vO(yO().mark((function e(){var t,n,r,o,i;return yO().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=G.getField(this._getFieldId()),e.next=3,t.onPdfDocumentIsReady();case 3:n=t.getPdfDocument(),r=n.numPages,o=n.annotationStorage.getAll(),i=1;case 7:if(!(i<=r)){e.next=16;break}return e.next=10,this._areMandatoryFieldsInPageFilled(n,i,o);case 10:if(e.sent){e.next=13;break}return e.abrupt("return",!1);case 13:i++,e.next=7;break;case 16:return e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_areMandatoryFieldsInPageFilled",value:(o=vO(yO().mark((function e(t,n,r){var o,i,a,u,l;return yO().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPage(n);case 2:return o=e.sent,e.next=5,o.getAnnotations();case 5:i=e.sent,a=pO(i),e.prev=7,a.s();case 9:if((u=a.n()).done){e.next=15;break}if(l=u.value,!(this._isMandatory(l)&&this._isEmpty(l,r)&&this._isTextField(l))){e.next=13;break}return e.abrupt("return",!1);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:return e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e,this,[[7,17,20,23]])}))),function(e,t,n){return o.apply(this,arguments)})},{key:"_isMandatory",value:function(e){return e.fieldFlags&&Boolean(2&e.fieldFlags)}},{key:"_isEmpty",value:function(e,t){var n=t?t[e.id]:null,r=n?n.value:e.fieldValue;return!r||""===r.trim()}},{key:"_isTextField",value:function(e){return"Tx"===e.fieldType}}],n&&bO(t.prototype,n),r&&bO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(JS);!function(e,t,n){(t=wO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(SO,"TYPE","PdfRequiredFieldValidator");const OO=SO;function PO(e){return PO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PO(e)}function EO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kO(r.key),r)}}function kO(e){var t=function(e,t){if("object"!==PO(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==PO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===PO(t)?t:String(t)}var jO=null,TO=!1,FO=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!TO)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return jO||(TO=!0,jO=new e,TO=!1),jO}}],(n=[{key:"buildValidator",value:function(e,t,n){if(!e)return console.error("Field ID cannot be null to build the validator."),null;switch(t){case nO.TYPE:return new nO(e,n);case sO.TYPE:return new sO(e,n);case OO.TYPE:return new OO(e,n);default:return console.error("Can not register Validator for Field ID #"+e+' - Validator registrar name "'+t+'" is not valid.'),null}}}])&&EO(t.prototype,n),r&&EO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const IO=FO;function RO(e){return RO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RO(e)}function CO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,DO(r.key),r)}}function DO(e){var t=function(e,t){if("object"!==RO(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==RO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===RO(t)?t:String(t)}var xO=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=this._getConfig(t),this.dictionary=this._getDictionary(n),this.regularUploadMaxFileSize=o,this._appendLargeFileUploadDialog(r),this._disableClosingDialog(this._getTextByDictionaryKey("confirmLeave")),this._setActionBeforeSubmit()}var t,n,r;return t=e,n=[{key:"_setActionBeforeSubmit",value:function(){var e=this;Xn.default.getInstance().addActionBeforeSubmit((function(t){t=pjQuery(t);var n=e._getOversizeNotProcessedWizardFileInputsInForm(t);if(n.length)return e._processLargeFilesUpload(t,n)}),null,Xn.default.PRIORITY_LOW)}},{key:"_disableUploadedFileInputs",value:function(e){var t=this;e.find(":file").each((function(e,n){t._isInputFileCompleted(n.id)&&pjQuery("#"+n.id).prop("disabled",!0)}))}},{key:"_disableClosingDialog",value:function(e){window.onbeforeunload=function(t){if(!pjQuery("#fileUploadDialogOverlay").is(":hidden"))return t||(t=window.event),t.cancelBubble=!0,t.returnValue=e,t.stopPropagation&&(t.stopPropagation(),t.preventDefault()),e}}},{key:"_getTextByDictionaryKey",value:function(e){return this.dictionary[e]}},{key:"_getConfig",value:function(e){var t=JSON.parse(e);return{aws_url:t.aws_url,signerUrl:t.portalUrl+"/_remoteUploadSigner",timeUrl:t.portalUrl+"/_remoteUploadTime",aws_key:t.aws_key,awsRegion:t.aws_region,bucket:t.bucket,partSize:t.partSize,awsSignatureVersion:t.awsSignatureVersion,computeContentMd5:!0,cryptoMd5Method:function(e){return CryptoJS.MD5(CryptoJS.lib.WordArray.create(e)).toString(CryptoJS.enc.Base64)},cryptoHexEncodedHash256:function(e){return CryptoJS.SHA256(e).toString(CryptoJS.enc.Hex)},veryLargeFilesBucketTemporaryFolder:t.veryLargeFilesBucketTemporaryFolder}}},{key:"_getDictionary",value:function(e){return JSON.parse(e)}},{key:"_getOversizeNotProcessedWizardFileInputsInForm",value:function(e){var t=[],n=this;return e.find(":file").each((function(e,r){if(n._shouldCheckOversize(r.id)&&!n._isUploaded(r.id)&&n._isFileOversizedOrForced(r)){var o=n._addFileUploadInfo(r);o&&(n._controlFileInputChange(r.id),t.push({input:r,file:o}),n._removeUploadFailedNotice(r.id))}})),t}},{key:"_getFileFromInput",value:function(e){return e.uploadThisFileAsBig?e.uploadThisFileAsBig:e.files&&e.files.length>0?e.files[0]:null}},{key:"_isFileOversizedOrForced",value:function(e){if(e.uploadThisFileAsBig)return!0;var t=this._getFileFromInput(e);return!!t&&t.size>this.regularUploadMaxFileSize}},{key:"_controlFileInputChange",value:function(e){var t=this;pjQuery("#"+e).change((function(){t._removeInputFileCompleted(e),t._removeHiddenInputs(e)}))}},{key:"_shouldCheckOversize",value:function(e){return pjQuery("#"+e).data("check-oversize")}},{key:"_isUploaded",value:function(e){return pjQuery("#"+e).data("uploaded")}},{key:"_appendLargeFileUploadDialog",value:function(e){pjQuery("body").append(e);var t=this;pjQuery("#fileUploadDialogCancelButton, #fileUploadDialogCloseThick").click((function(){t._fileUploadDialogCancel()}))}},{key:"_processLargeFilesUpload",value:function(e,t){return this._openUploadDialog(),this.hasErrors=!1,this.cancelled=!1,this.totalCompleted=0,this.largeFilesUploaded=pjQuery.Deferred(),this._doUpload(e,t,0),this.largeFilesUploaded.promise()}},{key:"_fileUploadDialogCancel",value:function(){var e=this;this._uploadPause();var t=new Wu(this.dictionary.leave,(function(){e.cancelled=!0,e._cancelUpload(),e._closeUploadDialog(),pjQuery(this).dialog("close")}),!0),n=new Wu(this.dictionary.cancel,(function(){e._resumeUpload(),pjQuery(this).dialog("close")}),!1);new qu(this.dictionary.leavePage,this.dictionary.confirmLeave,[t,n],"#fileUploadDialogContent",(function(t,n){e._hasBeenClickedDialogCloseIcon(t)&&e._resumeUpload()})).show()}},{key:"_hasBeenClickedDialogCloseIcon",value:function(e){return e.originalEvent&&pjQuery(e.originalEvent.target).closest(".ui-dialog-titlebar-close").length}},{key:"_guessContentTypeFromFileName",value:function(e){return/\.webm$/.exec(e)?"video/webm":/\.mp4$/.exec(e)?"video/mp4":null}},{key:"_doUpload",value:function(e,t,n){if(n>=t.length)return this._closeUploadDialog(),this._disableUploadedFileInputs(e),void this.largeFilesUploaded.resolve();var r=this,o=t[n].input,i=o.id,a=t[n].file,u=a.name,l=this._getTempFileName(a),c=this._guessContentTypeFromFileName(u),s=!1,f=0;Evaporate.create(this.config).then((function(p){r.evaporate=p,p.add({name:r.config.veryLargeFilesBucketTemporaryFolder+"/"+l,contentType:c,file:a,xAmzHeadersAtInitiate:{"x-amz-acl":"public-read"},progress:function(e,n){if(!s){var o=Math.floor(100*e);s=100===o,o>=f&&(r._updateTotalUploadProgress(Math.floor(o/t.length),t.length),r._updateFileUploadProgress(i,o),f=o)}},error:function(e){console.error("Error while uploading file "+u+": "+e)},started:function(e){r.fileKey=e}}).then((function(i){r.totalCompleted++,r._setUploadCompleted(o,i,u),r._doUpload(e,t,n+1)}),(function(o){r._handleUploadError(e,i,u,t,n+1)}))}))}},{key:"_handleUploadError",value:function(e,t,n,r,o){this._setUploadFailed(t,n),this.cancelled?this._setAllPendingUploadsFailed(r,o):this._doUpload(e,r,o)}},{key:"_setAllPendingUploadsFailed",value:function(e,t){for(;t<e.length;)this._setUploadFailed(e[t].input.id,e[t].file.name),++t}},{key:"_uploadPause",value:function(){return!!this.evaporate&&this.evaporate.pause(this.fileKey,{force:!0})}},{key:"_resumeUpload",value:function(){return!!this.evaporate&&this.evaporate.resume(this.fileKey)}},{key:"_cancelUpload",value:function(){return!!this.evaporate&&this.evaporate.cancel(this.fileKey)}},{key:"_getTempFileName",value:function(e){return CryptoJS.SHA256("tmp-"+Bd.ou.fromJSDate(this._getNowDate()).toMillis()+"-"+e.name).toString(CryptoJS.enc.Hex)}},{key:"_getNowDate",value:function(){return new Date}},{key:"_addFileUploadInfo",value:function(e){var t=this._getFileFromInput(e);if(!t)return null;var n='<li id="progressDetailContainer'+e.id+'" class="upload-large-files__item upload-large-files__item--particular" ><div class="upload-large-files__itemHeader"><h3 class="upload-large-files__itemTitle" id="fileName'+e.id+'">'+t.name+'</h3><span id="itemWarning'+e.id+'" class="upload-large-files__itemWarning">'+this.dictionary.uploadFailed+'</span></div><progress class="upload-large-files__itemProgressBar" id="progressBar'+e.id+'" value="0" max="100" ></progress><p class="upload-large-files__itemDetail" id="progressDetail'+e.id+'" ><span class="upload-large-files__progressPercentage" id="progressPercentage'+e.id+'">0</span>% '+this.dictionary.uploaded+"</p></li>";return pjQuery("#uploads").append(n),pjQuery("#itemWarning"+e.id).hide(),t}},{key:"_addHiddenInputs",value:function(e,t,n){var r='<input type="hidden" id="file_'+e+'_remoteFileName" name="file_'+e+'_remoteFileName" value="'+t+'" /><input type="hidden" id="file_'+e+'_userSetFileName" name="file_'+e+'_userSetFileName" value="'+n+'" />';pjQuery("#fileInput_"+e).append(r)}},{key:"_removeHiddenInputs",value:function(e){pjQuery("#file_"+e+"_remoteFileName").remove(),pjQuery("#file_"+e+"_userSetFileName").remove()}},{key:"_addUploadFailedNotice",value:function(e){var t='<p id="file_'+e+'_uploadFailed" class="upload-large-files__formError">'+this.dictionary.uploadFailed+"</p>";pjQuery("#fileInput_"+e).append(t),pjQuery("#fieldSpecContainer"+e).addClass("upload-large-files__formError")}},{key:"_removeUploadFailedNotice",value:function(e){pjQuery("#file_"+e+"_uploadFailed").remove(),pjQuery("#fieldSpecContainer"+e).removeClass("upload-large-files__formError")}},{key:"_setUploadCompleted",value:function(e,t,n){this._updateFileUploadProgress(e.id,100),this._setUploadCompletedText(e.id),this._setInputFileCompleted(e.id),this._addHiddenInputs(e.id,t,n)}},{key:"_setInputFileCompleted",value:function(e){pjQuery("#"+e).data("uploaded",!0)}},{key:"_removeInputFileCompleted",value:function(e){pjQuery("#"+e).removeData("uploaded")}},{key:"_isInputFileCompleted",value:function(e){return pjQuery("#"+e).data("uploaded")}},{key:"_setUploadFailed",value:function(e,t){this.hasErrors=!0,this._setUploadFailedText(e,t)}},{key:"_setUploadFailedText",value:function(e){pjQuery("#itemWarning"+e).show(),pjQuery("#progressDetailContainer"+e).addClass("upload-large-files__error"),this._addUploadFailedNotice(e)}},{key:"_setUploadCompletedText",value:function(e){pjQuery("#progressDetail"+e).text(this.dictionary.complete)}},{key:"_updateTotalUploadProgress",value:function(e,t){var n=Math.floor(this.totalCompleted*(100/t));this._updateProgressBar("#progressBar",n+e),this._updatePercentage("#progressPercentage",n+e)}},{key:"_emptyTotalUploadProgress",value:function(){this._updateProgressBar("#progressBar",0),this._updatePercentage("#progressPercentage",0)}},{key:"_updateFileUploadProgress",value:function(e,t){this._updateProgressBar("#progressBar"+e,t),this._updatePercentage("#progressPercentage"+e,t)}},{key:"_updatePercentage",value:function(e,t){pjQuery(e).text(t)}},{key:"_updateProgressBar",value:function(e,t){pjQuery(e).val(t)}},{key:"_openUploadDialog",value:function(){pjQuery("#fileUploadDialogOverlay").removeClass("largeFileDialogClosed"),pjQuery("#fileUploadDialogContent").removeClass("largeFileDialogClosed")}},{key:"_closeUploadDialog",value:function(){pjQuery("#fileUploadDialogOverlay").addClass("largeFileDialogClosed"),pjQuery("#fileUploadDialogContent").addClass("largeFileDialogClosed"),pjQuery("#uploads").empty(),this._emptyTotalUploadProgress()}}],r=[{key:"prepareFormToProcessLargeFilesUpload",value:function(t,n,r,o){new e(t,n,r,o)}}],n&&CO(t.prototype,n),r&&CO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const AO=xO;function LO(e){return LO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LO(e)}function NO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,WO(r.key),r)}}function MO(e,t){return MO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},MO(e,t)}function VO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=BO(e);if(t){var o=BO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===LO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function BO(e){return BO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},BO(e)}function UO(e,t,n){return(t=WO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WO(e){var t=function(e,t){if("object"!==LO(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==LO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===LO(t)?t:String(t)}var YO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MO(e,t)}(i,e);var t,n,r,o=VO(i);function i(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this))._id=e,r._settings=t,r._fields=n,r._registeredFields=[],r._allFieldsRegistered=!1,r._checkMissingContainer(),r}return t=i,(n=[{key:"register",value:function(){this.dispatchEvent(i.EVENT_BEFORE_WIZARD_REGISTER,this._getWizardEventData()),this._registerWizardFields(),this._attachResetEventHandler(),this._registerFieldConditions(),this._processWizard(),this.dispatchEvent(i.EVENT_AFTER_WIZARD_REGISTER,this._getWizardEventData())}},{key:"getSetting",value:function(e){return this._settings.hasOwnProperty(e)?this._settings[e]:null}},{key:"_checkMissingContainer",value:function(){!this._getWizardContainer()&&0===this._id&&this._fields.length>0&&(this._id=parseInt(this._fields[0].fieldId),this.getForm().innerHTML="<div id='wizard-id-"+this._id+"' class='wizard' data-id='"+this._id+"'>"+this.getForm().innerHTML+"</div>")}},{key:"_registerWizardFields",value:function(){this.dispatchEvent(i.EVENT_BEFORE_FIELDS_REGISTER,this._getWizardEventData());var e=this._getRegistrarTypesBuildOrder();for(var t in e){var n=e[t];for(var r in this._fields){var o=this._fields[r];for(var a in o.registrars)n===o.registrars[a].type&&this._register(o.fieldId,o.registrars[a])}}this._allFieldsRegistered=!0,this.dispatchEvent(i.EVENT_AFTER_FIELDS_REGISTER,this._getWizardEventData())}},{key:"_registerFieldConditions",value:function(){for(var e in this._fields){var t=this._fields[e];if(t.hasOwnProperty("visibilityConditions"))for(var n in t.visibilityConditions){var r=t.visibilityConditions[n];G.setFieldVisibilityConditionFromParams(t.fieldId,r.dependencyFieldId,r.conditionOperator,r.conditionValue)}if(t.hasOwnProperty("editConditions"))for(var o in t.editConditions){var i=t.editConditions[o];G.setFieldEditConditionFromParams(t.fieldId,i.dependencyFieldId,i.conditionOperator,i.conditionValue)}}}},{key:"_register",value:function(e,t){var n,r,o;switch(t.type){case Dr.FIELD:this._buildAndRegisterWizardField(e,t);break;case Dr.VALUES_DATASOURCE:null===(n=TS.getInstance().buildDatasource(e,t.name,t.settings))||void 0===n||n.registerDatasourceValues();break;case Dr.DEFAULT_VALUES_DATASOURCE:null===(r=YS.getInstance().buildDatasource(e,t.name,t.settings))||void 0===r||r.registerDatasourceDefaultValues();break;case Dr.VALIDATOR:null===(o=IO.getInstance().buildValidator(e,t.name,t.settings))||void 0===o||o.register()}}},{key:"_buildAndRegisterWizardField",value:function(e,t){var n=lg.getInstance().buildField(e,t.name,t.settings);n&&(n.register(),this._registeredFields.push(n))}},{key:"_getRegistrarTypesBuildOrder",value:function(){return[Dr.VALUES_DATASOURCE,Dr.DEFAULT_VALUES_DATASOURCE,Dr.FIELD,Dr.VALIDATOR]}},{key:"_processWizard",value:function(){this._shouldShowFieldByField()?new kr(this._getWizardContainerId(),null,!1,!0,!0,0).generate():(this._removeButtonsIfNecessary(),this._showFieldSetIfNecessary()),this._setupLargeFilesUploadIfNeeded(),this._restrictEditingIfNeeded()}},{key:"_shouldShowFieldByField",value:function(){var e=new URL(window.location.href);return this._settings.shouldShowFieldByField&&null===e.searchParams.get("listFilterMode")}},{key:"_removeButtonsIfNecessary",value:function(){wr.getInstance().getAllFieldsetSteppers().some((function(e){return!e.hasBuiltinButtonBar()}))||this._getWizardContainer().querySelectorAll(".button-bar__wrap .formPreviousButton, .button-bar__wrap .formNextButton").forEach((function(e){e.hidden=!0}))}},{key:"_showFieldSetIfNecessary",value:function(){var e;this._getWizardContainer().removeAttribute("hidden"),null===(e=this._getWizardContainer().parentElement.querySelector(".wizard--loading .form__loader"))||void 0===e||e.remove()}},{key:"_getWizardContainerId",value:function(){return i.WIZARD_CONTAINER_PREFIX+this._id}},{key:"_getWizardContainer",value:function(){return document.getElementById(this._getWizardContainerId())}},{key:"_getWizardEventData",value:function(){return new Ze({wizardId:this._id})}},{key:"_setupLargeFilesUploadIfNeeded",value:function(){this._settings.largeFilesUploadParams&&0!==Object.keys(this._settings.largeFilesUploadParams).length&&AO.prepareFormToProcessLargeFilesUpload(this._settings.largeFilesUploadParams.bucketConfig,this._settings.largeFilesUploadParams.dictionary,this._settings.largeFilesUploadParams.html,this._settings.largeFilesUploadParams.regularMaxSize)}},{key:"_restrictEditingIfNeeded",value:function(){for(var e in this._fields){var t=this._fields[e];G.evaluateEditRestrictions(t.fieldId)}}},{key:"_attachResetEventHandler",value:function(){var e,t=this;null===(e=this.getForm())||void 0===e||e.addEventListener("reset",(function(){setTimeout((function(){return t._registeredFields.forEach((function(e){G.onFieldValueChange(e._fieldId)}))}),0)}))}},{key:"getForm",value:function(){if(this._fields.length){var e=document.getElementById(this._fields[0].fieldId);if(e)return e.closest("form")}}},{key:"areAllFieldsRegistered",value:function(){return this._allFieldsRegistered}}])&&NO(t.prototype,n),r&&NO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(tt);UO(YO,"WIZARD_CONTAINER_PREFIX","wizard-id-"),UO(YO,"EVENT_BEFORE_WIZARD_REGISTER","beforeWizardRegister"),UO(YO,"EVENT_AFTER_WIZARD_REGISTER","afterWizardRegister"),UO(YO,"EVENT_BEFORE_FIELDS_REGISTER","beforeFieldsRegister"),UO(YO,"EVENT_AFTER_FIELDS_REGISTER","afterFieldsRegister");const QO=YO;function HO(e){return HO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HO(e)}function zO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,KO(r.key),r)}}function qO(){return qO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ZO(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},qO.apply(this,arguments)}function JO(e,t){return JO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},JO(e,t)}function GO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ZO(e);if(t){var o=ZO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===HO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ZO(e){return ZO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ZO(e)}function KO(e){var t=function(e,t){if("object"!==HO(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==HO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===HO(t)?t:String(t)}var $O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JO(e,t)}(i,e);var t,n,r,o=GO(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._disableButtonConditions=new Map,n._disableButtonConditionsEvaluator=new ue,n._buttonsData=n.getSetting("buttonsData"),n._addEventToFormPrevious(),n._addEventToFormNext(),n._configureButtons(),n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"getValue",value:function(){return new x}},{key:"getValueForCondition",value:function(){return null}},{key:"_updateFieldAfterParentFieldValueChange",value:function(){var e=this;qO(ZO(i.prototype),"_updateFieldAfterParentFieldValueChange",this).call(this),this._buttonsData.forEach((function(t){return e._evaluateButtonConditions(t.buttonId)}))}},{key:"_addEventToFormPrevious",value:function(){var e=this;pjQuery("#"+this.getFieldId()+"-formPrevious").click((function(){return e._getFieldsetSteppersToMove().forEach((function(e){return e.goToPreviousField()}))}))}},{key:"_addEventToFormNext",value:function(){var e=this;pjQuery("#"+this.getFieldId()+"-formNext").click((function(){return e._getFieldsetSteppersToMove().forEach((function(e){return e.goToNextField()}))}))}},{key:"_getFieldsetSteppersToMove",value:function(){return wr.getInstance().getAllFieldsetSteppers().filter((function(e){return!e.hasBuiltinButtonBar()}))}},{key:"_configureButtons",value:function(){if(this._buttonsData)for(var e=0;e<this._buttonsData.length;e++){var t=this._buttonsData[e];this._addWorkflowStepIdsIfNeeded(t),this._removeRequiredIfHidden(t),this._addAutomaticActionIfNeeded(t),this._prepareDisableButtonConditions(t),this._removeValidationsIfNeeded(t)}}},{key:"_addWorkflowStepIdsIfNeeded",value:function(e){if(e.workflowStepUpdateIds)for(var t=document.getElementsByClassName(e.buttonType),n=0;n<t.length;n++){var r=t[n];parseInt(r.dataset.buttonid,10)===e.buttonId&&r.addEventListener("click",(function(t){var n=document.getElementsByName("workflowStatusId");if(n.length<1)for(var r=document.getElementsByTagName("form"),o=0;o<r.length;o++){var i=r[o],a=document.createElement("input");a.type="hidden",a.id="workflowStatusId",a.name="workflowStatusId",a.value=e.workflowStepUpdateIds,i.append(a)}else n[0].value=e.workflowStepUpdateIds}))}}},{key:"_removeRequiredIfHidden",value:function(e){for(var t=document.getElementsByClassName(e.buttonType),n=0;n<t.length;n++){var r=t[n];parseInt(r.dataset.buttonid,10)===e.buttonId&&r.addEventListener("click",(function(e){for(var t=document.querySelector("body").querySelectorAll('[type="hidden"]:not(script)[required]'),n=0;n<t.length;n++)t[n].removeAttribute("required")}))}}},{key:"_addAutomaticActionIfNeeded",value:function(e){if(e.isAutomaticAction){var t=document.querySelectorAll("."+e.buttonType+'[data-buttonid="'+e.buttonId+'"]');t&&t.length&&t[0].click()}}},{key:"_prepareDisableButtonConditions",value:function(e){var t=this;this.getWizard().addListener(QO.EVENT_AFTER_FIELDS_REGISTER,(function(){t._registerDisableButtonConditions(e),t._evaluateButtonConditions(e.buttonId)}))}},{key:"_registerDisableButtonConditions",value:function(e){var t=this,n=[];e.disableButtonConditions.forEach((function(e){var r=new Q(e.richFieldId,e.operator,e.value);V.registerFieldDependency(t._fieldId,r.getParentDependencyFieldId(),V.TYPE_VALUES),n.push(r)})),this._disableButtonConditions.set(e.buttonId,n)}},{key:"_evaluateButtonConditions",value:function(e){var t=this._disableButtonConditions.get(e),n=t.length>0&&this._disableButtonConditionsEvaluator.areFieldConditionsSatisfied(t),r=document.querySelector('[data-buttonid="'+e+'"]');r&&(r.disabled=n,r.classList.toggle("button--disabled",n))}},{key:"_removeValidationsIfNeeded",value:function(e){this._shouldRemoveValidations(e.buttonType)&&this._removeValidationsForButton(e.buttonId)}},{key:"_removeValidationsForButton",value:function(e){var t=document.querySelector('[data-buttonid="'+e+'"]');null==t||t.addEventListener("click",(function(e){Xn.default.getInstance().resetValidationsBeforeSubmit()}))}},{key:"_shouldRemoveValidations",value:function(e){return["clearButton","partialSaveButton","previousButton"].includes(e)}}])&&zO(t.prototype,n),r&&zO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(ht);!function(e,t,n){(t=KO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}($O,"TYPE","ButtonBarField");const XO=$O;function eP(e){return eP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eP(e)}function tP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nP(r.key),r)}}function nP(e){var t=function(e,t){if("object"!==eP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eP(t)?t:String(t)}function rP(e,t){return rP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rP(e,t)}function oP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=iP(e);if(t){var o=iP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===eP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function iP(e){return iP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},iP(e)}var aP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rP(e,t)}(i,e);var t,n,r,o=oP(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t))._configuration=t||new Ls,n}return t=i,n=[{key:"onFileSelected",value:function(e){if(e){var t=G.getField(this._fieldId);!0===this._configuration.hasPhotoPreview&&t._resetPreviewAndFileLoaders();var n=e.title;this._fileInfoCleaner.cleanAll(),this._addFileDataToDownload(e),this._setFileNameHiddenInputValue(n),this._setFileSizeHiddenInputValue(e.fileSize?e.fileSize:"0"),this._addUploadedFileElement(n),!0===this._configuration.hasPhotoPreview&&(t._setPreview(e.thumbnailLink),t._onPhotoFileInputNewPhotoSelected())}}},{key:"_getAccessToken",value:function(){return gapi.auth.getToken().access_token}},{key:"_setFileNameHiddenInputValue",value:function(e){var t=document.getElementById("driveFileName_"+this._fieldId);t&&(t.value=e)}},{key:"_setFileSizeHiddenInputValue",value:function(e){var t=document.getElementById("driveFileSize_"+this._fieldId);t&&(t.value=e)}},{key:"_addUploadedFileElement",value:function(e){var t=document.querySelector("#fileInput_"+this._fieldId+" .drivePickerButton");t&&t.before(this._createUploadedFileElement(e))}},{key:"_addFileDataToDownload",value:function(e){if(e&&e.id){var t=document.getElementById(this._fieldId),n=t?t.closest("form"):null;n&&(n.appendChild(this._createDriveFileIdHiddenInput(e.id)),n.appendChild(this._createDriveAccessTokenHiddenInput()))}}},{key:"_createDriveFileIdHiddenInput",value:function(e){var t=document.createElement("input");return t.name="driveFileId_"+this._fieldId,t.id="driveFileId_"+this._fieldId,t.value=e,t.type="hidden",t}},{key:"_createDriveAccessTokenHiddenInput",value:function(){var e=document.createElement("input");return e.name="driveAccessToken_"+this._fieldId,e.id="driveAccessToken_"+this._fieldId,e.value=this._getAccessToken(),e.type="hidden",e}},{key:"_createUploadedFileElement",value:function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.classList.add("drivePickerUploadFile"),t.appendChild(this._buildRemoveExternalUploadedFileButton(e)),t}}],n&&tP(t.prototype,n),r&&tP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(rs);const uP=aP;function lP(e){return lP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lP(e)}function cP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hP(r.key),r)}}function sP(){return sP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dP(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},sP.apply(this,arguments)}function fP(e,t){return fP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fP(e,t)}function pP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dP(e);if(t){var o=dP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===lP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function dP(e){return dP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dP(e)}function yP(e,t,n){return(t=hP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hP(e){var t=function(e,t){if("object"!==lP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==lP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===lP(t)?t:String(t)}var vP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fP(e,t)}(i,e);var t,n,r,o=pP(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"onFileSelected",value:function(e){sP(dP(i.prototype),"onFileSelected",this).call(this,{id:i.FAKE_FILE_ID,title:i.FAKE_FILE_NAME,fileSize:i.FAKE_FILE_SIZE})}},{key:"_getAccessToken",value:function(){return i.FAKE_ACCESS_TOKEN}}])&&cP(t.prototype,n),r&&cP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(uP);yP(vP,"FAKE_FILE_NAME","googleDriveFile.txt"),yP(vP,"FAKE_FILE_SIZE","1"),yP(vP,"FAKE_FILE_ID","fileId"),yP(vP,"FAKE_ACCESS_TOKEN","accessToken");const bP=vP;var mP=n(48723),gP=n.n(mP);function _P(e){return _P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_P(e)}function wP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,SP(r.key),r)}}function SP(e){var t=function(e,t){if("object"!==_P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_P(t)?t:String(t)}var OP=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._fieldId=t,this._configuration=n,this._useMocks=r}var t,n,r;return t=e,(n=[{key:"load",value:function(){if(this._isGoogleDriveApiAvailable()){var e=this._buildGoogleDrivePickerButton(),t=document.getElementById("fileInput_"+this._fieldId);t&&t.appendChild(e)}}},{key:"_buildGoogleDrivePickerButton",value:function(){var e=this,t=document.createElement("a");return t.innerText=this._configuration.chooseFromDriveText,t.setAttribute("id","drivePicker"),t.setAttribute("href","#"),t.className="drivePickerButton",t.addEventListener("click",(function(t){t.preventDefault(),e._googleDrivePickerClickEventListener()})),t}},{key:"_googleDrivePickerClickEventListener",value:function(){if(this._useMocks)new bP(this._fieldId,this._configuration).onFileSelected(null);else{var e=new uP(this._fieldId,this._configuration);new(gP())({apiKey:this._configuration.appKey,clientId:this._configuration.clientId,buttonEl:document.getElementById("drivePicker"),onSelect:e.onFileSelected.bind(e),extensions:this._configuration.allowedFileExtensions})}}},{key:"_isGoogleDriveApiAvailable",value:function(){var e=new Os.Z;return this._useMocks?!!e.get("enableGoogleDriveDummyApi"):"undefined"!=typeof gapi}}])&&wP(t.prototype,n),r&&wP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const PP=OP;function EP(e){return EP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EP(e)}function kP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IP(r.key),r)}}function jP(e,t){return jP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jP(e,t)}function TP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=FP(e);if(t){var o=FP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===EP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function FP(e){return FP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},FP(e)}function IP(e){var t=function(e,t){if("object"!==EP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==EP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===EP(t)?t:String(t)}var RP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jP(e,t)}(i,e);var t,n,r,o=TP(i);function i(e,t){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),!PortalNumber.isNumber(t))throw new Error("invalidValue: day must be a valid integer");if(!PortalNumber.isNumber(e))throw new Error("invalidValue: month must be a valid integer");var r=PortalDate.fromParams(1904,e,t);return(n=o.call(this,r))._day=t,n._month=e,n}return t=i,(n=[{key:"getType",value:function(){return i.TYPE}},{key:"toString",value:function(){return this.getFormattedDateString("MM-dd")}},{key:"getDay",value:function(){return this._day}},{key:"getMonth",value:function(){return this._month}}])&&kP(t.prototype,n),r&&kP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Vo);!function(e,t,n){(t=IP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(RP,"TYPE","FieldDayAndMonthValue");const CP=RP;var DP=n(68806),xP=n.n(DP);function AP(e){return AP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AP(e)}function LP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,NP(r.key),r)}}function NP(e){var t=function(e,t){if("object"!==AP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==AP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===AP(t)?t:String(t)}var MP=null,VP=!1,BP=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!VP)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return MP||(VP=!0,MP=new e,VP=!1),MP}}],(n=[{key:"init",value:function(){this._getWizardsRegistrars().forEach((function(e){if(e.hasOwnProperty("wizardId")&&e.hasOwnProperty("settings")&&e.hasOwnProperty("fields")){var t=new QO(e.wizardId,e.settings,e.fields);He.getInstance().addWizard(e.wizardId,t),t.register()}}))}},{key:"_getWizardsRegistrars",value:function(){try{var e=new jn.Z;return JSON.parse(e.get("avature.wizard.registrars"))||[]}catch(e){return e instanceof SyntaxError?console.error("WizardsRegister - Error while parsing Wizard registrars: "+e.message):console.error("WizardsRegister - "+e.message),[]}}}])&&LP(t.prototype,n),r&&LP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const UP=BP;function WP(e){return WP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WP(e)}function YP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,QP(r.key),r)}}function QP(e){var t=function(e,t){if("object"!==WP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==WP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===WP(t)?t:String(t)}var HP=null,zP=!1,qP=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!zP)throw new Error("Constructor is private. Use getInstance() instead")}var t,n,r;return t=e,n=[{key:"init",value:function(e,t){var n=this;t&&(t.entityData=pjQuery('input[name ="entityData"]').val()),pjQuery.post("_linkedinWizardMappingApi/"+e,JSON.stringify(t),(function(e){n._fillWizard(e.mapping,e.entityData)}))}},{key:"_fillWizard",value:function(e,t){for(var n in e)e.hasOwnProperty(n)&&(this._areFieldsBeingMappedInATableRow(e[n])?this._mapFieldsInATableRow(n,e[n]):this._mapField(n,e[n].value,e[n].builtinFieldTypeCode));this._setAutofilledWithLinkedinProfileDataInput(),this._setEntityDataInput(t)}},{key:"_areFieldsBeingMappedInATableRow",value:function(e){return e.constructor===Array}},{key:"_mapField",value:function(e,t,n){"photo"===n?Fields.getField(e).setSocialLoginPhoto(t):this._setFieldValue(e,t)}},{key:"_mapFieldsInATableRow",value:function(e,t){for(var n in t)if(t.hasOwnProperty(n)){this._addRowIfRequired(e,n);var r=t[n].value;for(var o in r)if(r.hasOwnProperty(o)){var i=this._getTableFieldId(e,o,n);this._setFieldValue(i,r[o])}}}},{key:"_getTableFieldId",value:function(e,t,n){var r=this._getElement("[id$="+e+"_"+n+' ] [data-schema-field-id="'+t+'"]'),o=this._getFieldInContainer(r);return o?o.prop("id"):null}},{key:"_setFieldValue",value:function(e,t){if(t)try{var n=this._buildFieldValueObject(e,t);Fields.setFieldValue(e,n)}catch(e){console.warn(e)}}},{key:"_getFieldInContainer",value:function(e){return e&&e.length?this._getElement("select",e).length?this._getElement("select",e):this._getElement('input[type="radio"]',e).length?this._getElement('input[type="radio"]',e):this._getElement("input",e).length?this._getElement("input",e):null:null}},{key:"_setAutofilledWithLinkedinProfileDataInput",value:function(){pjQuery("form").each((function(){pjQuery(this).find(':input[name ="entityData"]').length>0&&pjQuery(this).append(pjQuery("<input/>",{type:"hidden",name:"autofilledWithSocialProfileData",value:"linkedin"}))}))}},{key:"_setEntityDataInput",value:function(e){pjQuery('input[name ="entityData"]').val(e)}},{key:"_buildFieldValueObject",value:function(e,t){return this._isDateValue(t)?this._buildFieldValueObjectForDates(e,t):Array.isArray(t)?new FieldMultipleTextsValue(t):new FieldTextValue(t)}},{key:"_buildFieldValueObjectForDates",value:function(e,t){var n=PortalDate.fromParams(t.year,("0"+(t.month||1)).slice(-2),("0"+(t.day||1)).slice(-2));return Fields.fieldAcceptsValueType(e,FieldDateValue.TYPE)?new FieldDateValue(n):new FieldTextValue(n.format("dd-MMM-yyyy"))}},{key:"_isDateValue",value:function(e){return"object"===WP(e)&&"year"in e}},{key:"_getElement",value:function(e,t){return t&&t.length>0?pjQuery(e,t):pjQuery(e)}},{key:"_addRowIfRequired",value:function(e,t){pjQuery("[id$="+e+"_"+t+" ]").length||this._addRow(e)}},{key:"_addRow",value:function(e){pjQuery("#addRowFor_"+e).trigger("click")}}],r=[{key:"getInstance",value:function(){return HP||(zP=!0,HP=new e,zP=!1),HP}}],n&&YP(t.prototype,n),r&&YP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const JP=qP;function GP(e){return GP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GP(e)}function ZP(e){return function(e){if(Array.isArray(e))return $P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||KP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KP(e,t){if(e){if("string"==typeof e)return $P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$P(e,t):void 0}}function $P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function XP(){XP=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),u=new E(o||[]);return r(a,"_invoke",{value:w(e,n,u)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function p(){}function d(){}function y(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(k([])));b&&b!==t&&n.call(b,i)&&(h=b);var m=y.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(r,i,a,u){var l=s(e[r],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==GP(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return o("throw",e,a,u)}))}u(l.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return j()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=y,r(m,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(_.prototype),l(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(m),l(m,u,"Generator"),l(m,i,(function(){return this})),l(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=k,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function eE(e,t,n,r,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function tE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nE(r.key),r)}}function nE(e){var t=function(e,t){if("object"!==GP(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==GP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===GP(t)?t:String(t)}var rE=null,oE=!1,iE=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!oE)throw new Error("Constructor is private. Use getInstance() instead");this._autoSaveField=document.getElementById("wizardAutoSave"),this._isAutoSaveEnabled()&&(this._form=this._autoSaveField.closest("form"),this._revision=parseInt(this._autoSaveField.dataset.baseRevision),this._actionInterval=parseInt(this._autoSaveField.dataset.actionInterval),this._actionName=this._autoSaveField.dataset.action,this._setFormDataSaved(new FormData(this._form)))}var t,n,r,o,i;return t=e,n=[{key:"init",value:function(){var e=this;this._isAutoSaveEnabled()&&(this._timer=setInterval((function(){return e._triggerSave()}),this._actionInterval))}},{key:"_isAutoSaveEnabled",value:function(){return this._autoSaveField}},{key:"_triggerSave",value:(o=XP().mark((function e(){var t,n,r=this;return XP().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getFormValue();case 2:if(t=e.sent,this._hasDataFormChanged(t)){e.next=5;break}return e.abrupt("return");case 5:n=this._form.action||window.location.href,fetch(n,{method:"POST",body:this._prepareFormDataForSave(t)}).then((function(e){return e.json()})).then((function(e){if(!e||!0!==e.success)throw new Error;r._onAutoSaveSuccess(e.data,t)})).catch((function(){return r._onAutoSaveError()}));case 7:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){eE(i,n,r,a,u,"next",e)}function u(e){eE(i,n,r,a,u,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"_onAutoSaveSuccess",value:function(e,t){this._updateFileFieldsInFormAndFormData(e,t),this._setFormDataSaved(t),this._revision=this._revision+1,this._dispatchAutoSaveEvent(xP().STATUS_SUCCESS)}},{key:"_updateFileFieldsInFormAndFormData",value:function(e,t){for(var n in e){var r="file_"+n,o=r+"_fileNumber",i=r+"_fileState";this._isFilePresentInThisStep(r)?(this._addRemoveButton(n),this._clearFileInput(r,t)):this._replaceSerializedFileWithFileNumber(n,o,t),this._updateFileNumberInput(o,e[n],t),this._removeFileStateInput(i,t)}}},{key:"_isFilePresentInThisStep",value:function(e){return document.getElementsByName(e).length>0}},{key:"_addRemoveButton",value:function(e){var t=G.getField(e);t&&t.addRemoveButton()}},{key:"_replaceSerializedFileWithFileNumber",value:function(e,t,n){var r=document.getElementsByName(e);r.length>0&&((r=r[0]).name=t,r.value="",n.delete(e),n.append(t,""))}},{key:"_clearFileInput",value:function(e,t){var n=document.getElementsByName(e);n.length>0&&((n=n[0]).value="",t.set(e,new File([""],"",{type:"application/octet-stream"})))}},{key:"_updateFileNumberInput",value:function(e,t,n){var r=document.getElementsByName(e);r.length>0&&((r=r[0]).value=t,n.set(e,t))}},{key:"_removeFileStateInput",value:function(e,t){var n=document.getElementsByName(e);n.length>0&&((n=n[0]).remove(),t.delete(e))}},{key:"_onAutoSaveError",value:function(){clearInterval(this._timer),this._dispatchAutoSaveEvent(xP().STATUS_ERROR)}},{key:"_dispatchAutoSaveEvent",value:function(e){xP().getInstance().dispatchEvent(xP().EVENT_AUTO_SAVE_NAME,{status:e,autoSaveActionName:this._actionName})}},{key:"_prepareFormDataForSave",value:function(e){var t=this._cloneFormData(e);return t.append(this._actionName,"automatic"),t.append("revision",this._revision+1),t}},{key:"_cloneFormData",value:function(e){var t=new FormData;return e.forEach((function(e,n){t.append(n,e)})),t}},{key:"_getFormValue",value:function(){var e=this;return G.dispatchBeforeSubmitAutoPartialSave().then((function(){return new FormData(e._form)}))}},{key:"_hasDataFormChanged",value:function(e){var t,n=0,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=KP(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(e.keys());try{for(r.s();!(t=r.n()).done;){var o=t.value;n++;var i=e.getAll(o),a=this._formDataSaved.getAll(o);if(!this._areFormValuesEqual(i,a))return!0}}catch(e){r.e(e)}finally{r.f()}return this._hasNumberOfKeysInTheFormDataChanged(n)}},{key:"_hasNumberOfKeysInTheFormDataChanged",value:function(e){return e!==this._formDataSavedLength}},{key:"_areFormValuesEqual",value:function(e,t){var n=this;return!(!Array.isArray(e)||!Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t)&&e.every((function(e,r){return!(e instanceof File)||n._areFileEquals(e,t[r])}))}},{key:"_areFileEquals",value:function(e,t){return e instanceof File&&t instanceof File&&e.size===t.size&&e.name===t.name&&e.type===t.type}},{key:"_setFormDataSaved",value:function(e){this._formDataSaved=e,this._formDataSavedLength=ZP(this._formDataSaved.entries()).length}}],r=[{key:"getInstance",value:function(){return rE||(oE=!0,rE=new e,oE=!1),rE}}],n&&tE(t.prototype,n),r&&tE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const aE=iE;function uE(e){return uE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uE(e)}function lE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cE(r.key),r)}}function cE(e){var t=function(e,t){if("object"!==uE(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==uE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===uE(t)?t:String(t)}var sE=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=this,t=xP().getInstance();t.addEventHandler(xP().EVENT_LOAD_NAME,(function(){return e._initWizardsManager()}),xP().PRIORITY_HIGH),t.addEventHandler(xP().EVENT_LOAD_NAME,(function(){return e._initProfileDataWizardMapper()}),xP().PRIORITY_MEDIUM),t.addEventHandler(xP().EVENT_LOAD_NAME,(function(){return e._initAutoPartialSave()}),xP().PRIORITY_LOWEST)}},{key:"_initWizardsManager",value:function(){UP.getInstance().init()}},{key:"_initAutoPartialSave",value:function(){aE.getInstance().init()}},{key:"_initProfileDataWizardMapper",value:function(){if((new Os.Z).get("linkedinDataCallbackNeeded")){var e=new jn.Z,t=window.sessionStorage.getItem("linkedinProfileData"),n=e.get("avature.wizard.currentStepId");n&&t&&JP.getInstance().init(n,JSON.parse(t))}else window.sessionStorage.setItem("linkedinProfileData",null)}}])&&lE(t.prototype,n),r&&lE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();(new sE).init(),n.g.ApiCache=l,n.g.AccessibleErrorValidationHandler=g,n.g.ArithmeticField=Bt,n.g.AutocompleteMultipleSelectField=dr,n.g.AutocompleteSelectField=Ln,n.g.ButtonBarField=XO,n.g.CheckboxField=Gr,n.g.CheckboxListField=io,n.g.ConfirmationField=_u,n.g.CurrencyField=So,n.g.CustomFormatDateField=si,n.g.DayAndMonthDateField=Fu,n.g.EncryptedFullDateField=Yl,n.g.EncryptedSelectField=cl,n.g.EncryptedAutocompleteSelectField=Ol,n.g.EncryptedTextField=rc,n.g.Fields=G,n.g.FileField=Qs,n.g.FormattedTextField=Of,n.g.FormField=Rf,n.g.FullDateField=Cl,n.g.GenericField=Vf,n.g.InputField=yo,n.g.InstantSearchField=up,n.g.JobVariableField=hp,n.g.KeywordsField=qf,n.g.LocationDistanceSearchField=Jp,n.g.LocationField=hd,n.g.LocationStateCreateField=Od,n.g.LocationStateSearchField=Rd,n.g.MonthAndYearDateField=Gd,n.g.MultipleSelectField=oy,n.g.NumberField=dy,n.g.NumberProgressField=Ry,n.g.NumberStarsField=By,n.g.PdfEditor=tf,n.g.PhotoField=Gy,n.g.PlainTextField=rh,n.g.PostalCodeRadiusField=_h,n.g.RadioButtonListField=Th,n.g.RecordVideoField=fv,n.g.SchedulingField=_v,n.g.SelectField=Nu,n.g.SeparatorField=Rv,n.g.SimpleTimeField=qv,n.g.SourceAndCategoryField=tb,n.g.TableField=Tm,n.g.TextField=hf,n.g.TimeField=Lm,n.g.UserNotificationsEmailField=Hm,n.g.UserTimeZoneField=tg,n.g.ReuseUploadedFilesWidget=um,n.g.LargeFileUploadDialog=AO,n.g.GoogleDriveChooserLoader=PP,n.g.DropboxChooserLoader=Ts,n.g.FieldBooleanValue=Ur,n.g.FieldDateValue=Vo,n.g.FieldDayAndMonthValue=CP,n.g.FieldEmptyValue=x,n.g.FieldFileUploadedValue=gc,n.g.FieldFileValue=fc,n.g.FieldFullDateValue=ni,n.g.FieldIdValue=Jt,n.g.FieldLocationDistanceValue=Vp,n.g.FieldLocationValue=nd,n.g.FieldMonthAndYearValue=Vd,n.g.FieldMultipleIdsValue=Qn,n.g.FieldMultipleOptionsValue=pn,n.g.FieldMultipleTextsValue=$n,n.g.FieldNumberValue=Rt,n.g.FieldOptionValue=nn,n.g.FieldPostalCodeRadiusValue=fh,n.g.FieldRadiusValue=Rp,n.g.FieldTextValue=Ot,n.g.FieldTimeValue=Vv,n.g.ValueBase=O,n.g.DatasetFieldOptionsDatasource=Qg,n.g.DatasetSingleColumnFieldOptionsDatasource=$g,n.g.Datasources=bn,n.g.DefaultValueDatasources=uf,n.g.DummyDatasource=y_,n.g.DynamicDefaultValueDatasetFieldOptionsDatasource=LS,n.g.GeneralOptionsDatasource=S_,n.g.InstantSearchDatasource=I_,n.g.JobSuggestionsDatasource=V_,n.g.LinkToPersonDatasource=tw,n.g.LocalDatasource=a_,n.g.LocationDatasource=Ew,n.g.LocationStandardizedStateDatasource=Uw,n.g.LocationStandardizedStateSearchDatasource=Gw,n.g.PostalCodeDatasource=rS,n.g.SourcesDatasource=pS,n.g.TimeZoneDatasource=wS,n.g.UsersDatasource=q_,n.g.RequiredValidator=nO,n.g.MinLengthValidator=sO},48979:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(){function e(){}return e.prototype.dispatch=function(t,n){var r=new CustomEvent(e.EVENT_NAME,{detail:{widgetId:t,dynamicJsxContainer:n}});document.dispatchEvent(r)},e.prototype.addListener=function(t,n){var r=function(e){e.detail.widgetId===t&&n(e.detail.dynamicJsxContainer)};return document.addEventListener(e.EVENT_NAME,r),r},e.prototype.removeListener=function(t){document.removeEventListener(e.EVENT_NAME,t)},e.EVENT_NAME="DynamicJsxChanged",e}()},92384:(e,t,n)=>{"use strict";n(65743);var r=n(48979);const o=function(){function e(){}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.inject=function(e,t){(new r.Z).dispatch(e,t)},e}();var i=n(67294);globalThis.JsxInjector=o,globalThis._PortalReact={createElement:i.createElement,Fragment:i.Fragment}},53493:(e,t,n)=>{"use strict";n.r(t)},93064:(e,t,n)=>{"use strict";n.r(t)},7556:(e,t,n)=>{"use strict";n.r(t)}},e=>{var t=t=>e(e.s=t);e.O(0,[212,220,822,189,689],(()=>(t(27694),t(38781),t(86698),t(36406),t(57939),t(92384))));e.O()}]);